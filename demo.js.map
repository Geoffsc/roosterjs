{"version":3,"file":"demo.js","mappings":"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AAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,QAAS,iBACrBA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,S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A,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,UAE7B,UAA2B,CACvBA,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBA,EAAyB,SACzBb,EAAY,SACZA,EAAY,SACZa,EAAyB,SACzBA,EAAyB,SACzBb,EA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","sources":["webpack://roosterjs/./demo/scripts/controls/MainPane.scss?02c0","webpack://roosterjs/./demo/scripts/controls/colorPicker/ColorPicker.scss?c445","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ButtonGroup.scss?4796","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ContentModelView.scss?b125","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/FormatView.scss?89ef","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelBrView.scss?9e4e","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelCodeView.scss?605a","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDividerView.scss?7292","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDocumentView.scss?32ef","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelEntityView.scss?57ac","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelFormatContainerView.scss?08a9","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelGeneralView.scss?522d","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelImageView.scss?2dba","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelJson.scss?958c","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelLinkView.scss?a3cb","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelListItemView.scss?ce13","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelParagraphView.scss?ba57","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelSelectionMarkerView.scss?aadf","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableCellView.scss?e173","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableRowView.scss?8fed","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableView.scss?89ed","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTextView.scss?c7ad","webpack://roosterjs/./demo/scripts/controls/sidePane/SidePane.scss?a7d6","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/ApiPlaygroundPane.scss?cd78","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/blockElements/BlockElementsPane.scss?ce6a","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/darkColor/GetDarkColorPane.scss?facd","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/getSelection/getSelectionPane.scss?f584","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertContent/InsertContentPane.scss?2858","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertEntity/InsertEntityPane.scss?8968","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/region/GetSelectedRegionsPane.scss?89d2","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/sanitizer/SanitizerPane.scss?2631","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/vtable/VTablePane.scss?698d","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/ContentModelPane.scss?1b5c","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/OptionsPane.scss?48fd","webpack://roosterjs/./demo/scripts/controls/sidePane/eventViewer/EventViewPane.scss?43ed","webpack://roosterjs/./demo/scripts/controls/sidePane/formatState/FormatStatePane.scss?5094","webpack://roosterjs/./demo/scripts/controls/sidePane/snapshot/SnapshotPane.scss?6a8a","webpack://roosterjs/./demo/scripts/controls/titleBar/TitleBar.scss?49b4","webpack://roosterjs/./node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js","webpack://roosterjs/./node_modules/color-convert/conversions.js","webpack://roosterjs/./node_modules/color-convert/index.js","webpack://roosterjs/./node_modules/color-convert/route.js","webpack://roosterjs/./node_modules/color-name/index.js","webpack://roosterjs/./node_modules/color-string/index.js","webpack://roosterjs/./node_modules/color/index.js","webpack://roosterjs/./demo/scripts/controls/MainPane.scss","webpack://roosterjs/./demo/scripts/controls/colorPicker/ColorPicker.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ButtonGroup.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ContentModelView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/FormatView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelBrView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelCodeView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDividerView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDocumentView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelEntityView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelFormatContainerView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelGeneralView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelImageView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelJson.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelLinkView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelListItemView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelParagraphView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelSelectionMarkerView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableCellView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableRowView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableView.scss","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTextView.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/SidePane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/ApiPlaygroundPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/blockElements/BlockElementsPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/darkColor/GetDarkColorPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/getSelection/getSelectionPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertContent/InsertContentPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertEntity/InsertEntityPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/region/GetSelectedRegionsPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/sanitizer/SanitizerPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/vtable/VTablePane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/ContentModelPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/OptionsPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/eventViewer/EventViewPane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/formatState/FormatStatePane.scss","webpack://roosterjs/./demo/scripts/controls/sidePane/snapshot/SnapshotPane.scss","webpack://roosterjs/./demo/scripts/controls/titleBar/TitleBar.scss","webpack://roosterjs/./node_modules/css-loader/dist/runtime/api.js","webpack://roosterjs/./node_modules/dompurify/dist/purify.js","webpack://roosterjs/./node_modules/is-arrayish/index.js","webpack://roosterjs/./node_modules/simple-swizzle/index.js","webpack://roosterjs/./demo/scripts/controls/BuildInPluginState.ts","webpack://roosterjs/./demo/scripts/controls/MainPane.tsx","webpack://roosterjs/./demo/scripts/controls/MainPaneBase.tsx","webpack://roosterjs/./demo/scripts/controls/colorPicker/ColorPicker.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ButtonGroup.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/ContentModelView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/BlockFormatView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/FormatView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/LinkFormatView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/MetadataView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/SegmentFormatView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/BackgroundColorFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/BasicFormatRenderers.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/BorderBoxFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/BorderFormatRenderers.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/DirectionFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/DisplayFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/FontFamilyFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/FontSizeFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/HtmlAlignFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/IdFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/ImageMetadataFormatRenderers.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/LetterSpacingFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/LineHeightFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/ListMetadataFormatRenderers.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/ListStylePositionFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/ListThreadFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/ListTypeFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/MarginFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/PaddingFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/SizeFormatRenderers.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/SpacingFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/TableCellMetadataFormatRender.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/TableMetadataFormatRenders.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/TextAlignFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/TextColorFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/VerticalAlignFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/WhiteSpaceFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/formatPart/WordBreakFormatRenderer.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/utils/createCheckboxFormatRenderer.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/utils/createColorFormatRender.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/utils/createDropDownFormatRenderer.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/format/utils/createTextFormatRenderer.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/BlockGroupContentView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelBlockGroupView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelBlockView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelBrView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelCodeView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDividerView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelDocumentView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelEntityView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelFormatContainerView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelGeneralView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelImageView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelJson.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelLinkView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelListItemView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelParagraphView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelSegmentView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelSelectionMarkerView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableCellView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableRowView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTableView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/components/model/ContentModelTextView.tsx","webpack://roosterjs/./demo/scripts/controls/contentModel/hooks/useProperty.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/plugins/FormatPainterPlugin.ts","webpack://roosterjs/./demo/scripts/controls/getToggleablePlugins.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/ContentModelRibbon.tsx","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/ContentModelRibbonPlugin.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/alignCenterButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/alignLeftButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/alignRightButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/backgroundColorButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/blockQuoteButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/boldButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/bulletedListButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/changeImageButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/clearFormatButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/codeButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/decreaseFontSizeButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/decreaseIndentButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/fontButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/fontSizeButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/formatPainterButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/formatTableButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/imageBorderColorButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/imageBorderRemoveButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/imageBorderStyleButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/imageBorderWidthButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/imageBoxShadowButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/increaseFontSizeButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/increaseIndentButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/insertImageButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/insertLinkButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/insertTableButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/italicButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/listStartNumberButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/ltrButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/numberedListButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/removeLinkButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/rtlButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/setBulletedListStyleButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/setHeaderLevelButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/setNumberedListStyleButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/setTableCellShadeButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/setTableHeaderButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/spaceBeforeAfterButtons.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/spacingButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/strikethroughButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/subscriptButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/superscriptButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/tableEditButtons.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/textColorButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/contentModel/underlineButton.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/darkMode.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/export.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/popout.ts","webpack://roosterjs/./demo/scripts/controls/ribbonButtons/zoom.ts","webpack://roosterjs/./demo/scripts/controls/sampleEntity/SampleEntityPlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/SidePane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/SidePanePluginImpl.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/ApiPlaygroundPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/ApiPlaygroundPlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/apiEntries.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/blockElements/BlockElementsPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/darkColor/GetDarkColorPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/getSelection/getSelectionPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertContent/InsertContentPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/insertEntity/InsertEntityPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/matchLink/MatchLinkPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/region/GetSelectedRegionsPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/sanitizer/SanitizerPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/vlist/VListPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/apiPlayground/vtable/VTablePane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/ContentModelPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/ContentModelPanePlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/buttons/contentModelRibbonButton.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/buttons/exportButton.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/buttons/refreshButton.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/contentModel/currentModel.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/Code.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/ContentEditFeatures.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/DefaultFormat.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/EditorOptionsPlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/ExperimentalFeatures.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/OptionsPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/Plugins.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/ButtonsCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/CodeElement.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/ContentEditCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/ContentEditFeaturesCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/DarkModeCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/DefaultFormatCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/EditorCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/ExperimentalFeaturesCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/HyperLinkCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/PluginsCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/ReactEditorCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/RibbonButtonCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/RibbonCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/SimplePluginCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/TableCellSelectionCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/codes/WatermarkCode.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/editorOptions/getDefaultContentEditFeatureSettings.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/eventViewer/EventViewPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/eventViewer/EventViewPlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/formatState/FormatStatePane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/formatState/FormatStatePlugin.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/shared/PredefinedTableStyles.ts","webpack://roosterjs/./demo/scripts/controls/sidePane/snapshot/SnapshotPane.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/snapshot/SnapshotPlugin.tsx","webpack://roosterjs/./demo/scripts/controls/sidePane/snapshot/UndoSnapshots.ts","webpack://roosterjs/./demo/scripts/controls/titleBar/TitleBar.tsx","webpack://roosterjs/./demo/scripts/utils/cssMonitor.ts","webpack://roosterjs/./demo/scripts/utils/trustedHTMLHandler.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/colorPicker/component/renderColorPicker.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/colorPicker/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/colorPicker/utils/backgroundColors.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/colorPicker/utils/getClassNamesForColorPicker.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/colorPicker/utils/textColors.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/common/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/common/utils/createUIUtilities.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/common/utils/getLocalizedString.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/common/utils/renderReactComponent.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/menus/createImageEditMenuProvider.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/menus/createListEditMenuProvider.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/menus/createTableEditMenuProvider.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/plugin/createContextMenuPlugin.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/contextMenu/utils/createContextMenuProvider.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/components/EmojiIcon.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/components/EmojiNavBar.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/components/EmojiPane.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/components/EmojiStatusBar.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/components/showEmojiCallout.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/plugin/createEmojiPlugin.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/type/EmojiStrings.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/utils/emojiList.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/emoji/utils/searchEmojis.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/inputDialog/component/InputDialog.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/inputDialog/component/InputDialogItem.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/inputDialog/utils/showInputDialog.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/pasteOptions/component/showPasteOptionPane.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/pasteOptions/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/pasteOptions/plugin/createPasteOptionPlugin.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/pasteOptions/utils/buttons.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/Ribbon.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/alignCenter.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/alignLeft.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/alignRight.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/backgroundColor.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/bold.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/bulletedList.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/clearFormat.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/code.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/decreaseFontSize.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/decreaseIndent.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/font.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/fontSize.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/header.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/increaseFontSize.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/increaseIndent.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/insertImage.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/insertLink.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/insertTable.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/italic.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/ltr.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/moreCommands.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/numberedList.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/quote.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/redo.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/removeLink.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/rtl.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/strikethrough.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/subscript.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/superscript.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/textColor.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/underline.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/buttons/undo.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/component/getButtons.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/plugin/createRibbonPlugin.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/ribbon/type/KnownRibbonButton.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/rooster/component/Rooster.tsx","webpack://roosterjs/./packages-ui/roosterjs-react/lib/rooster/index.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/rooster/plugin/createUpdateContentPlugin.ts","webpack://roosterjs/./packages-ui/roosterjs-react/lib/rooster/type/UpdateMode.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/context/createDomToModelContext.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/context/defaultProcessors.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/domToContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/blockProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/brProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/childProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/codeProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/delimiterProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/elementProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/entityProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/fontProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/formatContainerProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/generalProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/headingProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/hrProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/imageProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/knownElementProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/linkProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/listItemProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/listProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/pProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/reducedModelChildProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/tablePreProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/tableProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/processors/textProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/addSelectionMarker.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/areSameFormats.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/getBoundingClientRect.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/getDefaultStyle.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/getRegularSelectionOffsets.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/isBlockElement.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/parseFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domToModel/utils/stackFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/borderValues.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/index.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/isNodeOfType.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/metadata/updateImageMetadata.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/metadata/updateListMetadata.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/metadata/updateMetadata.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/metadata/updateTableCellMetadata.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/metadata/updateTableMetadata.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/domUtils/stringUtil.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/ContentModelEditor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/coreApi/createContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/coreApi/createEditorContext.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/coreApi/createPasteModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/coreApi/setContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/coreApi/switchShadowEdit.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/corePlugins/ContentModelCopyPastePlugin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/corePlugins/ContentModelTypeInContainerPlugin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/createContentModelEditorCore.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/index.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/isContentModelEditor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/ContentModelEditPlugin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/ContentModelFormatPlugin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/ContentModelPastePlugin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/Excel/convertPastedContentFromExcel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/PowerPoint/convertPastedContentFromPowerPoint.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/WacComponents/handleWacComponentsPaste.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/WordDesktop/handleWordDesktopPaste.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/WordDesktop/processWordCommand.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/WordDesktop/processWordLists.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/utils/addParser.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/utils/deprecatedColorParser.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/utils/linkParser.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/plugins/PastePlugin/utils/setProcessor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/editor/utils/handleKeyboardEventCommon.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/directionFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/displayFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/htmlAlignFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/lineHeightFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/textAlignFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/block/whiteSpaceFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/backgroundColorFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/borderBoxFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/borderFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/boxShadowFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/datasetFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/idFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/sizeFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/verticalAlignFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/common/wordBreakFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/defaultFormatHandlers.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listItemMetadataFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listItemThreadFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listLevelMetadataFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listLevelThreadFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listStylePositionFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/list/listTypeFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/paragraph/marginFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/paragraph/paddingFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/root/rootDirectionFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/root/zoomScaleFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/boldFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/fontFamilyFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/fontSizeFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/italicFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/letterSpacingFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/linkFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/strikeFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/superOrSubScriptFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/textColorFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/segment/underlineFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/table/tableSpacingFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/table/textColorOnTableCellFormatHandler.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/utils/color.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/utils/defaultStyles.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/utils/dir.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/formatHandlers/utils/parseValueWithUnit.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/index.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/block/getLeafSiblingBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/block/setModelAlignment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/block/setModelIndentation.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/block/setParagraphNotImplicit.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/block/toggleModelBlockQuote.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/addBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/addDecorators.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/addSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/clearModelFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/cloneModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/getClosestAncestorBlockGroupIndex.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/isBlockGroupOfType.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/isEmpty.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/isGeneralSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/isWhiteSpacePreserved.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/mergeModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/normalizeContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/normalizeParagraph.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/normalizeSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/retrieveModelFormatState.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/unwrapBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/common/wrapBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createBr.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createContentModelDocument.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createDivider.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createEntity.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createFormatContainer.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createGeneralBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createGeneralSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createImage.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createListItem.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createParagraph.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createParagraphDecorator.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createQuote.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createSelectionMarker.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createTableCell.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/creators/createText.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/deleteSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/deleteSteps/deleteAllSegmentBefore.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/deleteSteps/deleteCollapsedSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/deleteSteps/deleteWordSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/utils/createInsertPoint.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/utils/deleteBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/utils/deleteExpandedSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/utils/deleteSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/edit/utils/deleteSingleChar.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/format/pendingFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/image/applyImageBorderFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/list/findListItemsInSameThread.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/list/setListType.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/adjustSegmentSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/adjustWordSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/collapseTableSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/collectSelections.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/iterateSelections.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/selection/setSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/alignTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/alignTableCell.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/applyTableFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/canMergeCells.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/createTableStructure.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/deleteTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/deleteTableColumn.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/deleteTableRow.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/getSelectedCells.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/insertTableColumn.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/insertTableRow.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/mergeTableCells.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/mergeTableColumn.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/mergeTableRow.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/normalizeTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/setTableCellBackgroundColor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/splitTableCellHorizontally.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelApi/table/splitTableCellVertically.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/contentModelToDom.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/context/createModelToDomContext.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/context/defaultContentModelHandlers.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleBlockGroupChildren.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleBr.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleDivider.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleEntity.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleFormatContainer.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleGeneralModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleImage.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleList.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleListItem.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleParagraph.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleSegmentDecorator.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/handlers/handleText.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/optimizers/mergeNode.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/optimizers/optimize.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/optimizers/removeUnnecessarySpan.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/utils/applyFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/utils/reuseCachedElement.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/modelToDom/utils/stackFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setAlignment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setDirection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setHeaderLevel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setIndentation.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setParagraphMargin.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/setSpacing.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/block/toggleBlockQuote.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/editing/handleKeyDownEvent.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/format/applyPendingFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/format/clearFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/format/getFormatState.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/format/getSegmentFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/adjustImageSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/changeImage.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/insertImage.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/setImageAltText.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/setImageBorder.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/image/setImageBoxShadow.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/index.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/link/adjustLinkSelection.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/link/insertLink.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/link/removeLink.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/list/setListStartNumber.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/list/setListStyle.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/list/toggleBullet.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/list/toggleNumbering.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/applySegmentFormat.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/changeCapitalization.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/changeFontSize.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/setBackgroundColor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/setFontName.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/setFontSize.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/setTextColor.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleBold.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleCode.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleItalic.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleStrikethrough.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleSubscript.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleSuperscript.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/segment/toggleUnderline.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/selection/hasSelectionInBlock.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/selection/hasSelectionInBlockGroup.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/selection/hasSelectionInSegment.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/table/editTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/table/formatTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/table/insertTable.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/table/setTableCellShade.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/utils/formatImageWithContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/utils/formatParagraphWithContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/utils/formatSegmentWithContentModel.ts","webpack://roosterjs/./packages/roosterjs-content-model/lib/publicApi/utils/formatWithContentModel.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/Alignment.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/BulletListType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/Capitalization.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ChangeSource.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ClearFormatMode.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ColorTransformDirection.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ContentPosition.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ContentType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/DarkModeDatasetNames.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/DefinitionType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/DelimiterClasses.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/Direction.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/DocumentCommand.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/DocumentPosition.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/EntityClasses.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/EntityOperation.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ExperimentalFeatures.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/FontSizeChange.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/GetContentMode.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ImageEditOperation.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/Indentation.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/Keys.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/KnownCreateElementDataIndex.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/KnownPasteSourceType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/ListType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/NodeType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/NumberingListType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/PasteType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/PluginEventType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/PositionType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/QueryScope.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/RegionType.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/SelectionRangeTypes.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/TableBorderFormat.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/TableOperation.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleEnum/index.ts","webpack://roosterjs/./packages/roosterjs-editor-types/lib/compatibleTypes.ts","webpack://roosterjs/./demo/scripts/controls/contentModel/plugins/formatpaintercursor.svg","webpack://roosterjs/./demo/scripts/controls/titleBar/iconmonstr-github-1.svg","webpack://roosterjs/external var \"FluentUIReact\"","webpack://roosterjs/external var \"React\"","webpack://roosterjs/external var \"ReactDOM\"","webpack://roosterjs/external var \"roosterjs\"","webpack://roosterjs/webpack/bootstrap","webpack://roosterjs/webpack/runtime/global","webpack://roosterjs/./demo/scripts/index.ts"],"sourcesContent":["var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/sass-loader/dist/cjs.js!./MainPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./ColorPicker.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ButtonGroup.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./FormatView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelBrView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelCodeView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelDividerView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelDocumentView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelEntityView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelFormatContainerView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelGeneralView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelImageView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelJson.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelLinkView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelListItemView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelParagraphView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelSelectionMarkerView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelTableCellView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelTableRowView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelTableView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelTextView.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./SidePane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ApiPlaygroundPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./BlockElementsPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./GetDarkColorPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./getSelectionPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./InsertContentPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./InsertEntityPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./GetSelectedRegionsPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./SanitizerPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./VTablePane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ContentModelPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./OptionsPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./EventViewPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./FormatStatePane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./SnapshotPane.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./TitleBar.scss\");\nvar loader = require(\"/home/runner/work/roosterjs/roosterjs/node_modules/@microsoft/loader-load-themed-styles/node_modules/@microsoft/load-themed-styles/lib/index.js\");\n\nif(typeof content === \"string\") content = [[module.id, content]];\n\n// add the styles to the DOM\nfor (var i = 0; i < content.length; i++) loader.loadStyles(content[i][1], false);\n\nif(content.locals) module.exports = content.locals;","\"use strict\";\n/**\n * An IThemingInstruction can specify a rawString to be preserved or a theme slot and a default value\n * to use if that slot is not specified by the theme.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Store the theming state in __themeState__ global scope for reuse in the case of duplicate\n// load-themed-styles hosted on the page.\nvar _root = (typeof window === 'undefined') ? global : window; // eslint-disable-line @typescript-eslint/no-explicit-any\n// Nonce string to inject into script tag if one provided. This is used in CSP (Content Security Policy).\nvar _styleNonce = _root && _root.CSPSettings && _root.CSPSettings.nonce;\nvar _themeState = initializeThemeState();\n/**\n * Matches theming tokens. For example, \"[theme: themeSlotName, default: #FFF]\" (including the quotes).\n */\nvar _themeTokenRegex = /[\\'\\\"]\\[theme:\\s*(\\w+)\\s*(?:\\,\\s*default:\\s*([\\\\\"\\']?[\\.\\,\\(\\)\\#\\-\\s\\w]*[\\.\\,\\(\\)\\#\\-\\w][\\\"\\']?))?\\s*\\][\\'\\\"]/g;\nvar now = function () { return (typeof performance !== 'undefined' && !!performance.now) ? performance.now() : Date.now(); };\nfunction measure(func) {\n    var start = now();\n    func();\n    var end = now();\n    _themeState.perf.duration += end - start;\n}\n/**\n * initialize global state object\n */\nfunction initializeThemeState() {\n    var state = _root.__themeState__ || {\n        theme: undefined,\n        lastStyleElement: undefined,\n        registeredStyles: []\n    };\n    if (!state.runState) {\n        state = __assign({}, (state), { perf: {\n                count: 0,\n                duration: 0\n            }, runState: {\n                flushTimer: 0,\n                mode: 0 /* sync */,\n                buffer: []\n            } });\n    }\n    if (!state.registeredThemableStyles) {\n        state = __assign({}, (state), { registeredThemableStyles: [] });\n    }\n    _root.__themeState__ = state;\n    return state;\n}\n/**\n * Loads a set of style text. If it is registered too early, we will register it when the window.load\n * event is fired.\n * @param {string | ThemableArray} styles Themable style text to register.\n * @param {boolean} loadAsync When true, always load styles in async mode, irrespective of current sync mode.\n */\nfunction loadStyles(styles, loadAsync) {\n    if (loadAsync === void 0) { loadAsync = false; }\n    measure(function () {\n        var styleParts = Array.isArray(styles) ? styles : splitStyles(styles);\n        var _a = _themeState.runState, mode = _a.mode, buffer = _a.buffer, flushTimer = _a.flushTimer;\n        if (loadAsync || mode === 1 /* async */) {\n            buffer.push(styleParts);\n            if (!flushTimer) {\n                _themeState.runState.flushTimer = asyncLoadStyles();\n            }\n        }\n        else {\n            applyThemableStyles(styleParts);\n        }\n    });\n}\nexports.loadStyles = loadStyles;\n/**\n * Allows for customizable loadStyles logic. e.g. for server side rendering application\n * @param {(processedStyles: string, rawStyles?: string | ThemableArray) => void}\n * a loadStyles callback that gets called when styles are loaded or reloaded\n */\nfunction configureLoadStyles(loadStylesFn) {\n    _themeState.loadStyles = loadStylesFn;\n}\nexports.configureLoadStyles = configureLoadStyles;\n/**\n * Configure run mode of load-themable-styles\n * @param mode load-themable-styles run mode, async or sync\n */\nfunction configureRunMode(mode) {\n    _themeState.runState.mode = mode;\n}\nexports.configureRunMode = configureRunMode;\n/**\n * external code can call flush to synchronously force processing of currently buffered styles\n */\nfunction flush() {\n    measure(function () {\n        var styleArrays = _themeState.runState.buffer.slice();\n        _themeState.runState.buffer = [];\n        var mergedStyleArray = [].concat.apply([], styleArrays);\n        if (mergedStyleArray.length > 0) {\n            applyThemableStyles(mergedStyleArray);\n        }\n    });\n}\nexports.flush = flush;\n/**\n * register async loadStyles\n */\nfunction asyncLoadStyles() {\n    return setTimeout(function () {\n        _themeState.runState.flushTimer = 0;\n        flush();\n    }, 0);\n}\n/**\n * Loads a set of style text. If it is registered too early, we will register it when the window.load event\n * is fired.\n * @param {string} styleText Style to register.\n * @param {IStyleRecord} styleRecord Existing style record to re-apply.\n */\nfunction applyThemableStyles(stylesArray, styleRecord) {\n    if (_themeState.loadStyles) {\n        _themeState.loadStyles(resolveThemableArray(stylesArray).styleString, stylesArray);\n    }\n    else {\n        registerStyles(stylesArray);\n    }\n}\n/**\n * Registers a set theme tokens to find and replace. If styles were already registered, they will be\n * replaced.\n * @param {theme} theme JSON object of theme tokens to values.\n */\nfunction loadTheme(theme) {\n    _themeState.theme = theme;\n    // reload styles.\n    reloadStyles();\n}\nexports.loadTheme = loadTheme;\n/**\n * Clear already registered style elements and style records in theme_State object\n * @param option - specify which group of registered styles should be cleared.\n * Default to be both themable and non-themable styles will be cleared\n */\nfunction clearStyles(option) {\n    if (option === void 0) { option = 3 /* all */; }\n    if (option === 3 /* all */ || option === 2 /* onlyNonThemable */) {\n        clearStylesInternal(_themeState.registeredStyles);\n        _themeState.registeredStyles = [];\n    }\n    if (option === 3 /* all */ || option === 1 /* onlyThemable */) {\n        clearStylesInternal(_themeState.registeredThemableStyles);\n        _themeState.registeredThemableStyles = [];\n    }\n}\nexports.clearStyles = clearStyles;\nfunction clearStylesInternal(records) {\n    records.forEach(function (styleRecord) {\n        var styleElement = styleRecord && styleRecord.styleElement;\n        if (styleElement && styleElement.parentElement) {\n            styleElement.parentElement.removeChild(styleElement);\n        }\n    });\n}\n/**\n * Reloads styles.\n */\nfunction reloadStyles() {\n    if (_themeState.theme) {\n        var themableStyles = [];\n        for (var _i = 0, _a = _themeState.registeredThemableStyles; _i < _a.length; _i++) {\n            var styleRecord = _a[_i];\n            themableStyles.push(styleRecord.themableStyle);\n        }\n        if (themableStyles.length > 0) {\n            clearStyles(1 /* onlyThemable */);\n            applyThemableStyles([].concat.apply([], themableStyles));\n        }\n    }\n}\n/**\n * Find theme tokens and replaces them with provided theme values.\n * @param {string} styles Tokenized styles to fix.\n */\nfunction detokenize(styles) {\n    if (styles) {\n        styles = resolveThemableArray(splitStyles(styles)).styleString;\n    }\n    return styles;\n}\nexports.detokenize = detokenize;\n/**\n * Resolves ThemingInstruction objects in an array and joins the result into a string.\n * @param {ThemableArray} splitStyleArray ThemableArray to resolve and join.\n */\nfunction resolveThemableArray(splitStyleArray) {\n    var theme = _themeState.theme;\n    var themable = false;\n    // Resolve the array of theming instructions to an array of strings.\n    // Then join the array to produce the final CSS string.\n    var resolvedArray = (splitStyleArray || []).map(function (currentValue) {\n        var themeSlot = currentValue.theme;\n        if (themeSlot) {\n            themable = true;\n            // A theming annotation. Resolve it.\n            var themedValue = theme ? theme[themeSlot] : undefined;\n            var defaultValue = currentValue.defaultValue || 'inherit';\n            // Warn to console if we hit an unthemed value even when themes are provided, but only if \"DEBUG\" is true.\n            // Allow the themedValue to be undefined to explicitly request the default value.\n            if (theme && !themedValue && console && !(themeSlot in theme) && typeof DEBUG !== 'undefined' && DEBUG) {\n                console.warn(\"Theming value not provided for \\\"\" + themeSlot + \"\\\". Falling back to \\\"\" + defaultValue + \"\\\".\");\n            }\n            return themedValue || defaultValue;\n        }\n        else {\n            // A non-themable string. Preserve it.\n            return currentValue.rawString;\n        }\n    });\n    return {\n        styleString: resolvedArray.join(''),\n        themable: themable\n    };\n}\n/**\n * Split tokenized CSS into an array of strings and theme specification objects\n * @param {string} styles Tokenized styles to split.\n */\nfunction splitStyles(styles) {\n    var result = [];\n    if (styles) {\n        var pos = 0; // Current position in styles.\n        var tokenMatch = void 0; // eslint-disable-line @rushstack/no-null\n        while ((tokenMatch = _themeTokenRegex.exec(styles))) {\n            var matchIndex = tokenMatch.index;\n            if (matchIndex > pos) {\n                result.push({\n                    rawString: styles.substring(pos, matchIndex)\n                });\n            }\n            result.push({\n                theme: tokenMatch[1],\n                defaultValue: tokenMatch[2] // May be undefined\n            });\n            // index of the first character after the current match\n            pos = _themeTokenRegex.lastIndex;\n        }\n        // Push the rest of the string after the last match.\n        result.push({\n            rawString: styles.substring(pos)\n        });\n    }\n    return result;\n}\nexports.splitStyles = splitStyles;\n/**\n * Registers a set of style text. If it is registered too early, we will register it when the\n * window.load event is fired.\n * @param {ThemableArray} styleArray Array of IThemingInstruction objects to register.\n * @param {IStyleRecord} styleRecord May specify a style Element to update.\n */\nfunction registerStyles(styleArray) {\n    if (typeof document === 'undefined') {\n        return;\n    }\n    var head = document.getElementsByTagName('head')[0];\n    var styleElement = document.createElement('style');\n    var _a = resolveThemableArray(styleArray), styleString = _a.styleString, themable = _a.themable;\n    styleElement.setAttribute('data-load-themed-styles', 'true');\n    if (_styleNonce) {\n        styleElement.setAttribute('nonce', _styleNonce);\n    }\n    styleElement.appendChild(document.createTextNode(styleString));\n    _themeState.perf.count++;\n    head.appendChild(styleElement);\n    var ev = document.createEvent('HTMLEvents');\n    ev.initEvent('styleinsert', true /* bubbleEvent */, false /* cancelable */);\n    ev.args = {\n        newStyle: styleElement\n    };\n    document.dispatchEvent(ev);\n    var record = {\n        styleElement: styleElement,\n        themableStyle: styleArray\n    };\n    if (themable) {\n        _themeState.registeredThemableStyles.push(record);\n    }\n    else {\n        _themeState.registeredStyles.push(record);\n    }\n}\n//# sourceMappingURL=index.js.map","/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {};\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (colorNames.hasOwnProperty(name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar keyword = /(\\D+)/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\n\t\tif (!rgb) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = (parseFloat(match[1]) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = num.toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","'use strict';\n\nvar colorString = require('color-string');\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\n\nvar skippedModels = [\n\t// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// shouldn't really be in color-convert either...\n\t'hex'\n];\n\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n\thashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\n\nvar limiters = {};\n\nfunction Color(obj, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tvar i;\n\tvar channels;\n\n\tif (obj == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (obj instanceof Color) {\n\t\tthis.model = obj.model;\n\t\tthis.color = obj.color.slice();\n\t\tthis.valpha = obj.valpha;\n\t} else if (typeof obj === 'string') {\n\t\tvar result = colorString.get(obj);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + obj);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (obj.length) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tvar newArr = _slice.call(obj, 0, channels);\n\t\tthis.color = zeroArray(newArr, channels);\n\t\tthis.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n\t} else if (typeof obj === 'number') {\n\t\t// this is always RGB - can be converted later on.\n\t\tobj &= 0xFFFFFF;\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(obj >> 16) & 0xFF,\n\t\t\t(obj >> 8) & 0xFF,\n\t\t\tobj & 0xFF\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tvar keys = Object.keys(obj);\n\t\tif ('alpha' in obj) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n\t\t}\n\n\t\tvar hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tvar labels = convert[this.model].labels;\n\t\tvar color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(obj[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tvar limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString: function () {\n\t\treturn this.string();\n\t},\n\n\ttoJSON: function () {\n\t\treturn this[this.model]();\n\t},\n\n\tstring: function (places) {\n\t\tvar self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString: function (places) {\n\t\tvar self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray: function () {\n\t\treturn this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n\t},\n\n\tobject: function () {\n\t\tvar result = {};\n\t\tvar channels = convert[this.model].channels;\n\t\tvar labels = convert[this.model].labels;\n\n\t\tfor (var i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray: function () {\n\t\tvar rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject: function () {\n\t\tvar rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround: function (places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n\t},\n\n\talpha: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) { return ((val % 360) + 360) % 360; }), // eslint-disable-line brace-style\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(100)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(100)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.rgb().color;\n\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.rgb().color;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight: function () {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = this.rgb();\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\t\treturn rgb;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale: function () {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar rgb = this.rgb().color;\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(val, val, val);\n\t},\n\n\tfade: function (ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer: function (ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.hsl();\n\t\tvar hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix: function (mixinColor, weight) {\n\t\t// ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\t\tvar color1 = mixinColor.rgb();\n\t\tvar color2 = this.rgb();\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t}\n};\n\n// model conversion methods and static constructors\nObject.keys(convert).forEach(function (model) {\n\tif (skippedModels.indexOf(model) !== -1) {\n\t\treturn;\n\t}\n\n\tvar channels = convert[model].channels;\n\n\t// conversion methods\n\tColor.prototype[model] = function () {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (arguments.length) {\n\t\t\treturn new Color(arguments, model);\n\t\t}\n\n\t\tvar newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n\t\treturn new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (color) {\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(_slice.call(arguments), channels);\n\t\t}\n\t\treturn new Color(color, model);\n\t};\n});\n\nfunction roundTo(num, places) {\n\treturn Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (num) {\n\t\treturn roundTo(num, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tmodel.forEach(function (m) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t});\n\n\tmodel = model[0];\n\n\treturn function (val) {\n\t\tvar result;\n\n\t\tif (arguments.length) {\n\t\t\tif (modifier) {\n\t\t\t\tval = modifier(val);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = val;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(val) {\n\treturn Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n\tfor (var i = 0; i < length; i++) {\n\t\tif (typeof arr[i] !== 'number') {\n\t\t\tarr[i] = 0;\n\t\t}\n\t}\n\n\treturn arr;\n}\n\nmodule.exports = Color;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(prefers-color-scheme: dark){button{background-color:#0091a1;color:#aaf7ff;border:solid 1px #007b8b}select,input,textarea{background-color:#333;color:#aaf7ff;border:solid 1px #007b8b}}._2bo1k8lHl_uV-BG6znDJAB{display:flex;flex-direction:column;width:100%;height:100%}._2w6Qajx0rNoAfiZ90ELvWi{flex:0 0 auto;overflow-x:hidden}.Wu-w1vnX5xXDlokHB7qep{flex:1 1 auto;position:relative;display:flex}._1QRxv0rbFhdjIh9rjvd2w4{width:\\\"100%\\\";min-width:200px;flex-grow:1;flex-shrink:1;position:relative}@media(prefers-color-scheme: dark){._1QRxv0rbFhdjIh9rjvd2w4 a:link,._1QRxv0rbFhdjIh9rjvd2w4 a:visited{color:#ba7cff}}._3a-q_waO25gsrEedKcbvzq{border:solid 1px #0bc;overflow:auto;padding:10px;outline:none;position:absolute;left:0;top:0;right:0;bottom:0}._2fUtCc9nx7qZAmJvSYE2Ij{flex-grow:0;flex-shrink:0;width:6px;cursor:col-resize}._2fUtCc9nx7qZAmJvSYE2Ij:hover{background-color:#ccc}._2ksqVkP0P8VOnkTSDwC9gZ{flex-grow:0;flex-shrink:0;width:30px;cursor:hand;white-space:nowrap}._2ksqVkP0P8VOnkTSDwC9gZ div{transform:rotate(-90deg)}._2ksqVkP0P8VOnkTSDwC9gZ:hover{background-color:#ccc}.p_p04H6Z22MyE14zIJ1QR{min-width:340px;flex-shrink:0;flex-grow:0;width:300px}.p_p04H6Z22MyE14zIJ1QR._3aTZ87z1JhQNydo6VrKJpL{width:100%}@media(prefers-color-scheme: dark){._3a-q_waO25gsrEedKcbvzq{border:solid 1px #007b8b}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"mainPane\": \"_2bo1k8lHl_uV-BG6znDJAB\",\n\t\"noGrow\": \"_2w6Qajx0rNoAfiZ90ELvWi\",\n\t\"body\": \"Wu-w1vnX5xXDlokHB7qep\",\n\t\"editorContainer\": \"_1QRxv0rbFhdjIh9rjvd2w4\",\n\t\"editor\": \"_3a-q_waO25gsrEedKcbvzq\",\n\t\"resizer\": \"_2fUtCc9nx7qZAmJvSYE2Ij\",\n\t\"showSidePane\": \"_2ksqVkP0P8VOnkTSDwC9gZ\",\n\t\"sidePane\": \"p_p04H6Z22MyE14zIJ1QR\",\n\t\"sidePaneFullWidth\": \"_3aTZ87z1JhQNydo6VrKJpL\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".zzrG7QTYWevpNEutHRteL{border:solid 1px #000;position:relative;width:100%;height:250px}.zzrG7QTYWevpNEutHRteL ._2oyU282TgFscZ5UHgcUmdp{position:absolute;top:5px;left:5px;right:60px;bottom:25px}.zzrG7QTYWevpNEutHRteL ._2oyU282TgFscZ5UHgcUmdp .tACuk57Dyi-G8vSeWqr1J{width:100%;height:100%;background:linear-gradient(to right, white, rgba(255, 255, 255, 0))}.zzrG7QTYWevpNEutHRteL ._2oyU282TgFscZ5UHgcUmdp ._2spr_UnliyPKejcb4aR4VA{width:100%;height:100%;background:linear-gradient(to top, black, rgba(0, 0, 0, 0))}.zzrG7QTYWevpNEutHRteL ._2oyU282TgFscZ5UHgcUmdp .w4z5tFrATWvV5ruSLWsJp{position:absolute}.zzrG7QTYWevpNEutHRteL ._2oyU282TgFscZ5UHgcUmdp .w4z5tFrATWvV5ruSLWsJp div{position:absolute;box-sizing:border-box;left:-6px;top:-6px;width:12px;height:12px;border:solid 2px #000;border-radius:50%}.zzrG7QTYWevpNEutHRteL .dtqPj9iGhxveR4Am-elmu{position:absolute;top:5px;width:50px;right:5px;bottom:50%}.zzrG7QTYWevpNEutHRteL ._3eWedriXwotOrDVbydtjbM{position:absolute;top:50%;width:50px;right:5px;bottom:5px}.zzrG7QTYWevpNEutHRteL ._3MccxpeP-m7bKvTxQer9Ky{position:absolute;left:5px;right:60px;bottom:5px;height:15px;background:linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)}.zzrG7QTYWevpNEutHRteL ._3MccxpeP-m7bKvTxQer9Ky .w4z5tFrATWvV5ruSLWsJp{position:absolute;height:100%}.zzrG7QTYWevpNEutHRteL ._3MccxpeP-m7bKvTxQer9Ky .w4z5tFrATWvV5ruSLWsJp div{position:absolute;box-sizing:border-box;left:-4px;width:8px;top:-2px;bottom:-2px;border:solid 2px #000;border-radius:20%}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"container\": \"zzrG7QTYWevpNEutHRteL\",\n\t\"picker\": \"_2oyU282TgFscZ5UHgcUmdp\",\n\t\"layer1\": \"tACuk57Dyi-G8vSeWqr1J\",\n\t\"layer2\": \"_2spr_UnliyPKejcb4aR4VA\",\n\t\"currentColor\": \"w4z5tFrATWvV5ruSLWsJp\",\n\t\"newColor\": \"dtqPj9iGhxveR4Am-elmu\",\n\t\"initColor\": \"_3eWedriXwotOrDVbydtjbM\",\n\t\"hueBar\": \"_3MccxpeP-m7bKvTxQer9Ky\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1XG2Bco-v9O5NAoH3itX7Q{height:20px;vertical-align:top;padding:2px;border-width:1px;border-color:#888;background-color:#ccc}._1XG2Bco-v9O5NAoH3itX7Q:hover{background-color:#fff}._3v5ta2KP4K-0EgGtd3bQK_{font-weight:bold;background-color:#eee;border-bottom:none}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"button\": \"_1XG2Bco-v9O5NAoH3itX7Q\",\n\t\"buttonChecked\": \"_3v5ta2KP4K-0EgGtd3bQK_\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2GEQ9Uklm2RgowVT5wloM5{margin-bottom:2px;display:flex;font-family:\\\"Segoe UI\\\",Tahoma,Geneva,Verdana,sans-serif;font-size:12pt;border:solid 2px #ccc;flex:1 1 auto;display:flex;flex-direction:column}._2GEQ9Uklm2RgowVT5wloM5._1SGC81fRmFiRryJnOCUYUA{border-color:#0aa}._2GEQ9Uklm2RgowVT5wloM5 ._3mTUXQnR6WVKJ3TIojfBxV{border-color:blue}._1VCYY8CALrYrYoxHKLOR4P{flex:0 0 auto;white-space:nowrap;overflow:hidden;padding:3px 0 0 0;height:20px}._1VCYY8CALrYrYoxHKLOR4P:hover .ub-CPWuXr_N9mRIZPU7_I{display:block}._3SCrXbMz2KKukvkwCWTGdf{font-weight:bold;padding:0 5px;float:left}._1kZx8vRULBT9npbnyJBuc9{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis}.ub-CPWuXr_N9mRIZPU7_I{float:right;display:none}._16PbfQXLdPWe8joev_gpv1{border-bottom:solid 1px #888}.KbF2K3xE3GR0RxLEUbmOI{background-color:#fff;padding:4px;display:flex;flex-direction:column}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelWrapper\": \"_2GEQ9Uklm2RgowVT5wloM5\",\n\t\"childSelected\": \"_1SGC81fRmFiRryJnOCUYUA\",\n\t\"selected\": \"_3mTUXQnR6WVKJ3TIojfBxV\",\n\t\"titleBar\": \"_1VCYY8CALrYrYoxHKLOR4P\",\n\t\"buttonGroup\": \"ub-CPWuXr_N9mRIZPU7_I\",\n\t\"title\": \"_3SCrXbMz2KKukvkwCWTGdf\",\n\t\"subTitle\": \"_1kZx8vRULBT9npbnyJBuc9\",\n\t\"titleWithBorder\": \"_16PbfQXLdPWe8joev_gpv1\",\n\t\"expandedBody\": \"KbF2K3xE3GR0RxLEUbmOI\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".oWxDoOcJZm6FiLp8R9doV{display:table}._1MRfJEKwXkTsWv0iJ-vp_0{display:table-row;height:24px}._2LoglwXHTK6h_k0iBs_O6k{display:table-cell;width:120px;vertical-align:top}._3HcoL7AQ-tp5YkzIl3mYj9{display:table-cell;margin:2px;overflow-x:hidden}._1ZUjp1XfsLv5W05XJC-yHg{color:red;font-weight:bold}.gydAIDg3ErAaS1zSeeuyA{width:60px}.glbDMIRcOZLB6uttC-OMc{width:95%}._35ylXsle1EnTq1SQZNPxAb{width:95%;height:80px}._2DP7dT0OkQLaRfU9QBRWGs{width:80px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"formatTable\": \"oWxDoOcJZm6FiLp8R9doV\",\n\t\"formatRow\": \"_1MRfJEKwXkTsWv0iJ-vp_0\",\n\t\"formatName\": \"_2LoglwXHTK6h_k0iBs_O6k\",\n\t\"formatValue\": \"_3HcoL7AQ-tp5YkzIl3mYj9\",\n\t\"errorMessage\": \"_1ZUjp1XfsLv5W05XJC-yHg\",\n\t\"colorValue\": \"gydAIDg3ErAaS1zSeeuyA\",\n\t\"textValue\": \"glbDMIRcOZLB6uttC-OMc\",\n\t\"multiLineValue\": \"_35ylXsle1EnTq1SQZNPxAb\",\n\t\"numberValue\": \"_2DP7dT0OkQLaRfU9QBRWGs\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3AxKJernZ4-yqwa_1a-E_Q{background-color:#cff}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelBr\": \"_3AxKJernZ4-yqwa_1a-E_Q\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1htVWp5WjKy-H11id0kYoy{background-color:#093}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelCode\": \"_1htVWp5WjKy-H11id0kYoy\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".SzAPBNvfwSEs9ZB-TdEJo{background-color:#c0f}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelDivider\": \"SzAPBNvfwSEs9ZB-TdEJo\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._8Zkp-BcezdCSurVQQVKEO{background-color:#ddd}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelDocument\": \"_8Zkp-BcezdCSurVQQVKEO\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3ZSCq_xeNTupfMzY2Ru2Bp{background-color:#3b2}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelEntity\": \"_3ZSCq_xeNTupfMzY2Ru2Bp\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".BywJYW0DKFb7EVGTLPKzi{background-color:#a8a}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelFormatContainer\": \"BywJYW0DKFb7EVGTLPKzi\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1EZG3xw5ewbbyW0GpZTTUQ{background-color:#cfc}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelGeneral\": \"_1EZG3xw5ewbbyW0GpZTTUQ\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1ds6to0NHohXvwGPPunJ0X{max-width:100px}._1nx1rBpjrPCd4cDcqPs8fA{background-color:#ff3}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"image\": \"_1ds6to0NHohXvwGPPunJ0X\",\n\t\"modelImage\": \"_1nx1rBpjrPCd4cDcqPs8fA\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".Iywlk_OkpYROuncmQ4PcD{margin:0;font-size:13px;word-break:break-all;white-space:pre-wrap}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"json\": \"Iywlk_OkpYROuncmQ4PcD\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DJcEiH6WFtND_54zovraZ{background-color:#07f}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelLink\": \"DJcEiH6WFtND_54zovraZ\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2VoVfljozZbZcTgt3lNWnz{background-color:#fb7}._1O7j-qkGcWWYm65HLLz2xI{width:100%}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelListItem\": \"_2VoVfljozZbZcTgt3lNWnz\",\n\t\"hr\": \"_1O7j-qkGcWWYm65HLLz2xI\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._32LMnZyuA6QyMQE-nWjkoV{background-color:#bdf}._2jkb_ijQSG8B_W4LIGJ7YQ{background-color:#ccf}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelParagraph\": \"_32LMnZyuA6QyMQE-nWjkoV\",\n\t\"modelDecorator\": \"_2jkb_ijQSG8B_W4LIGJ7YQ\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._18pEffJ4lYmtsOB10zXC-S{background-color:#7ef}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelSelectionMarker\": \"_18pEffJ4lYmtsOB10zXC-S\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2G6nJ-wUvIVFiltEkbKI1V{background-color:#fbd}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelTableCell\": \"_2G6nJ-wUvIVFiltEkbKI1V\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2Ok59Ge7z9BTMr_2iCW49a{background-color:#a88}._3MpKDhrjzKUJOzbuG5WIUt{width:40px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelTableRow\": \"_2Ok59Ge7z9BTMr_2iCW49a\",\n\t\"sizeInput\": \"_3MpKDhrjzKUJOzbuG5WIUt\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1Ggt2n9oUJ-EdkAiKF6Cmz{background-color:#df8}._19aUZi4gbsA50rFiPAAEo0{width:40px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelTable\": \"_1Ggt2n9oUJ-EdkAiKF6Cmz\",\n\t\"sizeInput\": \"_19aUZi4gbsA50rFiPAAEo0\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3t8NafdkqMYrJOBA5RCf95{background-color:#fca}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modelText\": \"_3t8NafdkqMYrJOBA5RCf95\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(prefers-color-scheme: dark){button{background-color:#0091a1;color:#aaf7ff;border:solid 1px #007b8b}select,input,textarea{background-color:#333;color:#aaf7ff;border:solid 1px #007b8b}}._1PlpDVxjlx0PpeYJornEhO{display:flex;flex-direction:column;overflow:auto hidden;border:solid 1px #0bc}.bUl77zUyQ8rsLeCWewoHf{font-family:\\\"Tahoma\\\";font-size:12pt;font-weight:bold;background-color:#09a;color:#fff;padding:2px;border:solid 1px #fff;cursor:pointer;flex:0 0 auto}.bUl77zUyQ8rsLeCWewoHf:hover{background-color:#00b0c4}._1Wy64YypxEm0pHdAFt3XyU{display:flex;flex-direction:column;flex:1 1 auto}._1Wy64YypxEm0pHdAFt3XyU ._3n6qkPOj7d7pT5EreXLpW_{flex:1 1 auto;display:flex;position:relative}._1Wy64YypxEm0pHdAFt3XyU ._3n6qkPOj7d7pT5EreXLpW_ ._1kHOYplq2tIl0x8bAqBZrs{position:absolute;left:0;top:0;right:0;bottom:0;display:flex;flex-direction:column;font-family:Arial,Helvetica,sans-serif;padding:10px;overflow-y:auto}._2l2WY2-sLGfv8zWnCEMFYu{flex:0 0 auto}._2l2WY2-sLGfv8zWnCEMFYu ._3n6qkPOj7d7pT5EreXLpW_{height:0;overflow:hidden}@media(prefers-color-scheme: dark){._1PlpDVxjlx0PpeYJornEhO{color:#0bc;border:solid 1px #007b8b}.bUl77zUyQ8rsLeCWewoHf{background-color:#0091a1;color:#333}.bUl77zUyQ8rsLeCWewoHf:hover{background-color:#00a8bb}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"sidePane\": \"_1PlpDVxjlx0PpeYJornEhO\",\n\t\"title\": \"bUl77zUyQ8rsLeCWewoHf\",\n\t\"activePane\": \"_1Wy64YypxEm0pHdAFt3XyU\",\n\t\"bodyContainer\": \"_3n6qkPOj7d7pT5EreXLpW_\",\n\t\"body\": \"_1kHOYplq2tIl0x8bAqBZrs\",\n\t\"inactivePane\": \"_2l2WY2-sLGfv8zWnCEMFYu\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._12Yaq4bmIYMlsqqYimZ13I{flex:0 0 auto;padding-bottom:5px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"header\": \"_12Yaq4bmIYMlsqqYimZ13I\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1_jgBU84mPgcYlpMVPoqWE{overflow:hidden;text-overflow:ellipsis;cursor:pointer;margin:3px 0;white-space:nowrap}._1_jgBU84mPgcYlpMVPoqWE:hover{background-color:#eee}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"block\": \"_1_jgBU84mPgcYlpMVPoqWE\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2QN9z7UV4YLHwj9CQ-6ra6{position:absolute;left:25px;right:25px;top:25px;bottom:25px}.KAuwbJuev3yAQmPcrB-wl,._2r_v4LIS95O1jezeMfgUpS,.bIPZz2lZ0Dy0-dW2Poeua{position:relative;width:100px;height:100px;border:solid 1px #000}.bIPZz2lZ0Dy0-dW2Poeua{background-color:#fff}._2r_v4LIS95O1jezeMfgUpS{background-color:#333}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"result\": \"_2QN9z7UV4YLHwj9CQ-6ra6\",\n\t\"backgroundBase\": \"KAuwbJuev3yAQmPcrB-wl\",\n\t\"darkBackground\": \"_2r_v4LIS95O1jezeMfgUpS\",\n\t\"lightBackground\": \"bIPZz2lZ0Dy0-dW2Poeua\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1hYhx3hKo_jDHdj3blAjc{margin-top:2px;margin-bottom:2px;line-height:2px}._5v3zhTlG_yH7GaGVgXfQP{width:30px;margin-left:4px}._1RrgLiiHLlvBCf-d5YWxnu{margin-top:2px;margin-bottom:2px}._3V3Ji0Va8o5p54tjedX892{font-weight:bold}._137J0ZhSm3qals9lhoTtS3{line-height:20px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"input\": \"_1hYhx3hKo_jDHdj3blAjc\",\n\t\"coordinates\": \"_5v3zhTlG_yH7GaGVgXfQP\",\n\t\"button\": \"_1RrgLiiHLlvBCf-d5YWxnu\",\n\t\"title\": \"_3V3Ji0Va8o5p54tjedX892\",\n\t\"containerInfo\": \"_137J0ZhSm3qals9lhoTtS3\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3zqjTFVESq7ErkoLCRZ-6U{resize:none;min-height:100px;max-height:200px}._3eEmGG3kPCcFFRLXYSrjlt{text-align:center}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"text\": \"_3zqjTFVESq7ErkoLCRZ-6U\",\n\t\"buttonRow\": \"_3eEmGG3kPCcFFRLXYSrjlt\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3w8Hon1pjNxrKF0BoO_5HY{outline:none;resize:none;min-height:40px;width:90%}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"textarea\": \"_3w8Hon1pjNxrKF0BoO_5HY\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(prefers-color-scheme: dark){button{background-color:#0091a1;color:#aaf7ff;border:solid 1px #007b8b}select,input,textarea{background-color:#333;color:#aaf7ff;border:solid 1px #007b8b}}.deySpGrN2RNEpBoMFR8Uh{font-weight:bold;background-color:#aaf7ff}._2mBGUX8vWQF-5jynECLtGD{background-color:#00b0c4;border:solid 2px #09a}@media(prefers-color-scheme: dark){.deySpGrN2RNEpBoMFR8Uh{background-color:#a1f6ff}._2mBGUX8vWQF-5jynECLtGD{background-color:#00a8bb;border:solid 2px #0091a1}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"regionNode\": \"deySpGrN2RNEpBoMFR8Uh\",\n\t\"hover\": \"_2mBGUX8vWQF-5jynECLtGD\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".z_Kjs2wjz5dWJBsuOtSYN{outline:none;resize:none;min-height:100px;height:300px}._1jzoyXnrzDHw1HFmidMaWi{margin:10px;height:35px;width:80px;flex:0 0 auto}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"textarea\": \"z_Kjs2wjz5dWJBsuOtSYN\",\n\t\"button\": \"_1jzoyXnrzDHw1HFmidMaWi\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1npSAsDS54nnYHLeTCHICi{text-align:center}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"buttonRow\": \"_1npSAsDS54nnYHLeTCHICi\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".CbjnP9kr5_9Gii4apK5Fd{flex:1 1 auto;overflow:auto}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"contentModel\": \"CbjnP9kr5_9Gii4apK5Fd\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3QUL-cTI2rzYtI4ueZE5lr{vertical-align:top}._pll-4jUC7rvgi0vFQdY1{white-space:nowrap}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"checkboxColumn\": \"_3QUL-cTI2rzYtI4ueZE5lr\",\n\t\"defaultFormatLabel\": \"_pll-4jUC7rvgi0vFQdY1\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2TlmgQ1bW5R050B6jYhEX{max-width:100%;max-height:300px}.ffJacBjxWzCVBw1QPEOh4{font-family:\\\"Courier New\\\";font-size:10.5pt;margin:10px}.bUF-XqoekK8dhSeJ-0o5c{margin-left:20px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"img\": \"_2TlmgQ1bW5R050B6jYhEX\",\n\t\"pasteContent\": \"ffJacBjxWzCVBw1QPEOh4\",\n\t\"eventContent\": \"bUF-XqoekK8dhSeJ-0o5c\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2HXvsNDp44ok-mZyQwNNCy{color:#eee}._1HxlX2f9hy_xnwciZLYJ3w{font-weight:bold}@media(prefers-color-scheme: dark){._2HXvsNDp44ok-mZyQwNNCy{color:#555}}.dark ._2HXvsNDp44ok-mZyQwNNCy{color:#555}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"inactive\": \"_2HXvsNDp44ok-mZyQwNNCy\",\n\t\"title\": \"_1HxlX2f9hy_xnwciZLYJ3w\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(prefers-color-scheme: dark){button{background-color:#0091a1;color:#aaf7ff;border:solid 1px #007b8b}select,input,textarea{background-color:#333;color:#aaf7ff;border:solid 1px #007b8b}}.HibV3xkyKxOpjnAyk0qr4{flex:1 1 auto;display:flex;flex-direction:column}._1yCf4MUqqEDULqM4RSNRBS{margin-bottom:10px;flex:0 0 auto}.E1MpWNg-lFB-dmiOBDnVv{flex:1 1 auto;resize:none;min-height:100px;border-color:#0bc}._2WqAZxlRXbhGBPoaHrJ1Gv{min-height:100px;max-height:200px;overflow:hidden auto;border:solid 1px #0bc}._2WqAZxlRXbhGBPoaHrJ1Gv pre{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer;margin:0}._2WqAZxlRXbhGBPoaHrJ1Gv pre:hover{background-color:#eee}._2WqAZxlRXbhGBPoaHrJ1Gv pre._21blMEsk_K31sbjM73Q_V2{font-weight:bold}._2WqAZxlRXbhGBPoaHrJ1Gv pre.t0z_eiUKKfEvZR3eNUMXy{background-color:#ff0}@media(prefers-color-scheme: dark){._2WqAZxlRXbhGBPoaHrJ1Gv{border:solid 1px #007b8b}.E1MpWNg-lFB-dmiOBDnVv{border-color:#007b8b}._2WqAZxlRXbhGBPoaHrJ1Gv{border:solid 1px #007b8b}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"snapshotPane\": \"HibV3xkyKxOpjnAyk0qr4\",\n\t\"buttons\": \"_1yCf4MUqqEDULqM4RSNRBS\",\n\t\"textarea\": \"E1MpWNg-lFB-dmiOBDnVv\",\n\t\"snapshotList\": \"_2WqAZxlRXbhGBPoaHrJ1Gv\",\n\t\"current\": \"_21blMEsk_K31sbjM73Q_V2\",\n\t\"autoComplete\": \"t0z_eiUKKfEvZR3eNUMXy\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media(prefers-color-scheme: dark){button{background-color:#0091a1;color:#aaf7ff;border:solid 1px #007b8b}select,input,textarea{background-color:#333;color:#aaf7ff;border:solid 1px #007b8b}}._38B2xrPpolo75ScC_XTUJ0{display:flex;background-color:#09a;padding:5px 10px;margin-bottom:10px;border-radius:10px;align-items:center}._3rKujTCbT6hEqSSJowznfl{flex:0 0 auto;font-size:24pt;font-family:Arial;font-weight:bold;font-style:italic;color:#fff;text-shadow:2px 2px 2px #000}.LmRq7AaEB4aAjkYn1_Fx1{flex:1 1 auto;color:#fff;font-family:Calibri;font-size:14pt;margin:10px 0 0 10px}._2pD0Ll-40t-pFcvxGbmrDa{color:#fff;flex:0 0 auto;text-align:right;font-size:14pt;font-family:Calibri}.NlCA34doW26bRa3ETK3MV{color:#fff;text-decoration:none}.NlCA34doW26bRa3ETK3MV:hover{text-decoration:underline}._1TClD7zQfb72l9_IIRB9Bu{vertical-align:middle}@media(prefers-color-scheme: dark){._38B2xrPpolo75ScC_XTUJ0{background-color:#0091a1}._3rKujTCbT6hEqSSJowznfl,.NlCA34doW26bRa3ETK3MV{color:#bbd1e1}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"titleBar\": \"_38B2xrPpolo75ScC_XTUJ0\",\n\t\"title\": \"_3rKujTCbT6hEqSSJowznfl\",\n\t\"version\": \"LmRq7AaEB4aAjkYn1_Fx1\",\n\t\"links\": \"_2pD0Ll-40t-pFcvxGbmrDa\",\n\t\"link\": \"NlCA34doW26bRa3ETK3MV\",\n\t\"externalLink\": \"_1TClD7zQfb72l9_IIRB9Bu\"\n};\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*! @license DOMPurify 2.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.0/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.DOMPurify = factory());\n}(this, function () { 'use strict';\n\n  function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  var hasOwnProperty = Object.hasOwnProperty,\n      setPrototypeOf = Object.setPrototypeOf,\n      isFrozen = Object.isFrozen,\n      getPrototypeOf = Object.getPrototypeOf,\n      getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n  var freeze = Object.freeze,\n      seal = Object.seal,\n      create = Object.create; // eslint-disable-line import/no-mutable-exports\n\n  var _ref = typeof Reflect !== 'undefined' && Reflect,\n      apply = _ref.apply,\n      construct = _ref.construct;\n\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return new (Function.prototype.bind.apply(Func, [null].concat(_toConsumableArray(args))))();\n    };\n  }\n\n  var arrayForEach = unapply(Array.prototype.forEach);\n  var arrayPop = unapply(Array.prototype.pop);\n  var arrayPush = unapply(Array.prototype.push);\n\n  var stringToLowerCase = unapply(String.prototype.toLowerCase);\n  var stringMatch = unapply(String.prototype.match);\n  var stringReplace = unapply(String.prototype.replace);\n  var stringIndexOf = unapply(String.prototype.indexOf);\n  var stringTrim = unapply(String.prototype.trim);\n\n  var regExpTest = unapply(RegExp.prototype.test);\n\n  var typeErrorCreate = unconstruct(TypeError);\n\n  function unapply(func) {\n    return function (thisArg) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return apply(func, thisArg, args);\n    };\n  }\n\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return construct(func, args);\n    };\n  }\n\n  /* Add properties to a lookup table */\n  function addToSet(set, array) {\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n\n    var l = array.length;\n    while (l--) {\n      var element = array[l];\n      if (typeof element === 'string') {\n        var lcElement = stringToLowerCase(element);\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n\n          element = lcElement;\n        }\n      }\n\n      set[element] = true;\n    }\n\n    return set;\n  }\n\n  /* Shallow clone an object */\n  function clone(object) {\n    var newObject = create(null);\n\n    var property = void 0;\n    for (property in object) {\n      if (apply(hasOwnProperty, object, [property])) {\n        newObject[property] = object[property];\n      }\n    }\n\n    return newObject;\n  }\n\n  /* IE10 doesn't support __lookupGetter__ so lets'\n   * simulate it. It also automatically checks\n   * if the prop is function or getter and behaves\n   * accordingly. */\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      var desc = getOwnPropertyDescriptor(object, prop);\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n\n      object = getPrototypeOf(object);\n    }\n\n    function fallbackValue(element) {\n      console.warn('fallback value for', element);\n      return null;\n    }\n\n    return fallbackValue;\n  }\n\n  var html = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n  // SVG\n  var svg = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n\n  var svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n  // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n  var svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'feimage', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n\n  var mathMl = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\n  // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n  var mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n\n  var text = freeze(['#text']);\n\n  var html$1 = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\n\n  var svg$1 = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\n  var mathMl$1 = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\n  var xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  // eslint-disable-next-line unicorn/better-regex\n  var MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n  var ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\n  var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n  var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n  var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  function _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  var getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n   * @param {Document} document The document object (to determine policy name suffix)\n   * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n   * are not supported).\n   */\n  var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n    if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    }\n\n    // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n    var suffix = null;\n    var ATTR_NAME = 'data-tt-policy-suffix';\n    if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n      suffix = document.currentScript.getAttribute(ATTR_NAME);\n    }\n\n    var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML: function createHTML(html$$1) {\n          return html$$1;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n\n  function createDOMPurify() {\n    var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n    var DOMPurify = function DOMPurify(root) {\n      return createDOMPurify(root);\n    };\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '2.3.0';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n\n    if (!window || !window.document || window.document.nodeType !== 9) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n\n      return DOMPurify;\n    }\n\n    var originalDocument = window.document;\n\n    var document = window.document;\n    var DocumentFragment = window.DocumentFragment,\n        HTMLTemplateElement = window.HTMLTemplateElement,\n        Node = window.Node,\n        Element = window.Element,\n        NodeFilter = window.NodeFilter,\n        _window$NamedNodeMap = window.NamedNodeMap,\n        NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n        Text = window.Text,\n        Comment = window.Comment,\n        DOMParser = window.DOMParser,\n        trustedTypes = window.trustedTypes;\n\n\n    var ElementPrototype = Element.prototype;\n\n    var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n      var template = document.createElement('template');\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n\n    var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n    var emptyHTML = trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML('') : '';\n\n    var _document = document,\n        implementation = _document.implementation,\n        createNodeIterator = _document.createNodeIterator,\n        createDocumentFragment = _document.createDocumentFragment,\n        getElementsByTagName = _document.getElementsByTagName;\n    var importNode = originalDocument.importNode;\n\n\n    var documentMode = {};\n    try {\n      documentMode = clone(document).documentMode ? document.documentMode : {};\n    } catch (_) {}\n\n    var hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n\n    var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n        ERB_EXPR$$1 = ERB_EXPR,\n        DATA_ATTR$$1 = DATA_ATTR,\n        ARIA_ATTR$$1 = ARIA_ATTR,\n        IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n        ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n    var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n\n    var ALLOWED_TAGS = null;\n    var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(html), _toConsumableArray$1(svg), _toConsumableArray$1(svgFilters), _toConsumableArray$1(mathMl), _toConsumableArray$1(text)));\n\n    /* Allowed attribute names */\n    var ALLOWED_ATTR = null;\n    var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray$1(html$1), _toConsumableArray$1(svg$1), _toConsumableArray$1(mathMl$1), _toConsumableArray$1(xml)));\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    var FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    var FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    var ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    var ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    var SAFE_FOR_TEMPLATES = false;\n\n    /* Decide if document with <html>... should be returned */\n    var WHOLE_DOCUMENT = false;\n\n    /* Track whether config is already set on this instance of DOMPurify. */\n    var SET_CONFIG = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    var FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    var RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n    var RETURN_DOM_FRAGMENT = false;\n\n    /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n     * `Node` is imported into the current `Document`. If this flag is not enabled the\n     * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n     * DOMPurify.\n     *\n     * This defaults to `true` starting DOMPurify 2.2.0. Note that setting it to `false`\n     * might cause XSS from attacks hidden in closed shadowroots in case the browser\n     * supports Declarative Shadow: DOM https://web.dev/declarative-shadow-dom/\n     */\n    var RETURN_DOM_IMPORT = true;\n\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n    var RETURN_TRUSTED_TYPE = false;\n\n    /* Output should be free from DOM clobbering attacks? */\n    var SANITIZE_DOM = true;\n\n    /* Keep element content when removing element? */\n    var KEEP_CONTENT = true;\n\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n    var IN_PLACE = false;\n\n    /* Allow usage of profiles like html, svg and mathMl */\n    var USE_PROFILES = {};\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    var FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n    /* Tags that are safe for data: URIs */\n    var DATA_URI_TAGS = null;\n    var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n    /* Attributes safe for values like \"javascript:\" */\n    var URI_SAFE_ATTRIBUTES = null;\n    var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n    var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n    var NAMESPACE = HTML_NAMESPACE;\n    var IS_EMPTY_INPUT = false;\n\n    /* Keep a reference to config to pass to hooks */\n    var CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    var formElement = document.createElement('form');\n\n    /**\n     * _parseConfig\n     *\n     * @param  {Object} cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n    var _parseConfig = function _parseConfig(cfg) {\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n\n      /* Shield configuration object from tampering */\n      if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n        cfg = {};\n      }\n\n      /* Shield configuration object from prototype pollution */\n      cfg = clone(cfg);\n\n      /* Set configuration parameters */\n      ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n      URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n      FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n      FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n      USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n      RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT !== false; // Default true\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n      IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n\n      /* Parse profile info */\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(text)));\n        ALLOWED_ATTR = [];\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html);\n          addToSet(ALLOWED_ATTR, html$1);\n        }\n\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg);\n          addToSet(ALLOWED_ATTR, svg$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl);\n          addToSet(ALLOWED_ATTR, mathMl$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n\n      /* Merge configuration parameters */\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n      }\n\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n      }\n\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n      }\n\n      /* Add #text in case KEEP_CONTENT is set to true */\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      }\n\n      // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n      if (freeze) {\n        freeze(cfg);\n      }\n\n      CONFIG = cfg;\n    };\n\n    var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n\n    var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']);\n\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n    var ALL_SVG_TAGS = addToSet({}, svg);\n    addToSet(ALL_SVG_TAGS, svgFilters);\n    addToSet(ALL_SVG_TAGS, svgDisallowed);\n\n    var ALL_MATHML_TAGS = addToSet({}, mathMl);\n    addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n\n    /**\n     *\n     *\n     * @param  {Element} element a DOM element whose namespace is being checked\n     * @returns {boolean} Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n    var _checkValidNamespace = function _checkValidNamespace(element) {\n      var parent = getParentNode(element);\n\n      // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: HTML_NAMESPACE,\n          tagName: 'template'\n        };\n      }\n\n      var tagName = stringToLowerCase(element.tagName);\n      var parentTagName = stringToLowerCase(parent.tagName);\n\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        }\n\n        // The only way to switch from MathML to SVG is via\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        }\n\n        // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        }\n\n        // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        }\n\n        // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        // Certain elements are allowed in both SVG and HTML\n        // namespace. We need to specify them explicitly\n        // so that they don't get erronously deleted from\n        // HTML namespace.\n        var commonSvgAndHTMLElements = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n        // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n        return !ALL_MATHML_TAGS[tagName] && (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName]);\n      }\n\n      // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG or MathML). Return false just in case.\n      return false;\n    };\n\n    /**\n     * _forceRemove\n     *\n     * @param  {Node} node a DOM node\n     */\n    var _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, { element: node });\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        node.parentNode.removeChild(node);\n      } catch (_) {\n        try {\n          node.outerHTML = emptyHTML;\n        } catch (_) {\n          node.remove();\n        }\n      }\n    };\n\n    /**\n     * _removeAttribute\n     *\n     * @param  {String} name an Attribute name\n     * @param  {Node} node a DOM node\n     */\n    var _removeAttribute = function _removeAttribute(name, node) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: node.getAttributeNode(name),\n          from: node\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: node\n        });\n      }\n\n      node.removeAttribute(name);\n\n      // We void attribute values for unremovable \"is\"\" attributes\n      if (name === 'is' && !ALLOWED_ATTR[name]) {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(node);\n          } catch (_) {}\n        } else {\n          try {\n            node.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n\n    /**\n     * _initDocument\n     *\n     * @param  {String} dirty a string of dirty markup\n     * @return {Document} a DOM, filled with the dirty markup\n     */\n    var _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      var doc = void 0;\n      var leadingWhitespace = void 0;\n\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n\n      var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, 'text/html');\n        } catch (_) {}\n      }\n\n      /* Use createHTMLDocument in case DOMParser is not available */\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n        } catch (_) {\n          // Syntax error if dirtyPayload is invalid xml\n        }\n      }\n\n      var body = doc.body || doc.documentElement;\n\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n\n      /* Work on whole document or just its body */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n\n    /**\n     * _createIterator\n     *\n     * @param  {Document} root document/fragment to create iterator for\n     * @return {Iterator} iterator instance\n     */\n    var _createIterator = function _createIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  {Node} elm element to check for clobbering attacks\n     * @return {Boolean} true if clobbered, false if safe\n     */\n    var _isClobbered = function _isClobbered(elm) {\n      if (elm instanceof Text || elm instanceof Comment) {\n        return false;\n      }\n\n      if (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function') {\n        return true;\n      }\n\n      return false;\n    };\n\n    /**\n     * _isNode\n     *\n     * @param  {Node} obj object to check whether it's a DOM node\n     * @return {Boolean} true is object is a DOM node\n     */\n    var _isNode = function _isNode(object) {\n      return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? object instanceof Node : object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode node to work on with the hook\n     * @param  {Object} data additional hook parameters\n     */\n    var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n      if (!hooks[entryPoint]) {\n        return;\n      }\n\n      arrayForEach(hooks[entryPoint], function (hook) {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   {Node} currentNode to check for permission to exist\n     * @return  {Boolean} true if node was killed, false if left alive\n     */\n    var _sanitizeElements = function _sanitizeElements(currentNode) {\n      var content = void 0;\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeElements', currentNode, null);\n\n      /* Check if element is clobbered or can clobber */\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check if tagname contains Unicode */\n      if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Now let's check the element's type and name */\n      var tagName = stringToLowerCase(currentNode.nodeName);\n\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeElement', currentNode, {\n        tagName: tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n\n      /* Detect mXSS attempts abusing namespace confusion */\n      if (!_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove element if anything forbids its presence */\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Keep content except for bad-listed elements */\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n          if (childNodes && parentNode) {\n            var childCount = childNodes.length;\n\n            for (var i = childCount - 1; i >= 0; --i) {\n              parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n            }\n          }\n        }\n\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check whether element has a valid namespace */\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Sanitize element content to be template-safe */\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        content = stringReplace(content, MUSTACHE_EXPR$$1, ' ');\n        content = stringReplace(content, ERB_EXPR$$1, ' ');\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n          currentNode.textContent = content;\n        }\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeElements', currentNode, null);\n\n      return false;\n    };\n\n    /**\n     * _isValidAttribute\n     *\n     * @param  {string} lcTag Lowercase tag name of containing element.\n     * @param  {string} lcName Lowercase attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n    var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        return false;\n\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if (!value) ; else {\n        return false;\n      }\n\n      return true;\n    };\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param  {Node} currentNode to sanitize\n     */\n    var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      var attr = void 0;\n      var value = void 0;\n      var lcName = void 0;\n      var l = void 0;\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n      var attributes = currentNode.attributes;\n\n      /* Check if we have attributes; if not we might have a text node */\n\n      if (!attributes) {\n        return;\n      }\n\n      var hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR\n      };\n      l = attributes.length;\n\n      /* Go backwards over all attributes; safely remove bad ones */\n      while (l--) {\n        attr = attributes[l];\n        var _attr = attr,\n            name = _attr.name,\n            namespaceURI = _attr.namespaceURI;\n\n        value = stringTrim(attr.value);\n        lcName = stringToLowerCase(name);\n\n        /* Execute a hook if present */\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n        value = hookEvent.attrValue;\n        /* Did the hooks approve of the attribute? */\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n\n        /* Remove attribute */\n        _removeAttribute(name, currentNode);\n\n        /* Did the hooks approve of the attribute? */\n        if (!hookEvent.keepAttr) {\n          continue;\n        }\n\n        /* Work around a security issue in jQuery 3.0 */\n        if (regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Sanitize attribute content to be template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          value = stringReplace(value, MUSTACHE_EXPR$$1, ' ');\n          value = stringReplace(value, ERB_EXPR$$1, ' ');\n        }\n\n        /* Is `value` valid for this attribute? */\n        var lcTag = currentNode.nodeName.toLowerCase();\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          continue;\n        }\n\n        /* Handle invalid data-* attribute set by try-catching it */\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          arrayPop(DOMPurify.removed);\n        } catch (_) {}\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  {DocumentFragment} fragment to iterate over recursively\n     */\n    var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      var shadowNode = void 0;\n      var shadowIterator = _createIterator(fragment);\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(shadowNode)) {\n          continue;\n        }\n\n        /* Deep shadow DOM detected */\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(shadowNode);\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * Sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} configuration object\n     */\n    // eslint-disable-next-line complexity\n    DOMPurify.sanitize = function (dirty, cfg) {\n      var body = void 0;\n      var importedNode = void 0;\n      var currentNode = void 0;\n      var oldNode = void 0;\n      var returnNode = void 0;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n      IS_EMPTY_INPUT = !dirty;\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n\n      /* Stringify, in case dirty is an object */\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        // eslint-disable-next-line no-negated-condition\n        if (typeof dirty.toString !== 'function') {\n          throw typeErrorCreate('toString is not a function');\n        } else {\n          dirty = dirty.toString();\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        }\n      }\n\n      /* Check we can run. Otherwise fall back or ignore */\n      if (!DOMPurify.isSupported) {\n        if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n          if (typeof dirty === 'string') {\n            return window.toStaticHTML(dirty);\n          }\n\n          if (_isNode(dirty)) {\n            return window.toStaticHTML(dirty.outerHTML);\n          }\n        }\n\n        return dirty;\n      }\n\n      /* Assign config vars */\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n\n      /* Clean up removed elements */\n      DOMPurify.removed = [];\n\n      /* Check if dirty is correctly typed for IN_PLACE */\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n\n      if (IN_PLACE) ; else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n        if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n\n        /* Initialize the document to work on */\n        body = _initDocument(dirty);\n\n        /* Check we have a DOM node from the data */\n        if (!body) {\n          return RETURN_DOM ? null : emptyHTML;\n        }\n      }\n\n      /* Remove first element node (ours) if FORCE_BODY is set */\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n\n      /* Get node iterator */\n      var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n      /* Now start iterating over the created document */\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Fix IE's strange behavior with manipulated textNodes #89 */\n        if (currentNode.nodeType === 3 && currentNode === oldNode) {\n          continue;\n        }\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(currentNode)) {\n          continue;\n        }\n\n        /* Shadow DOM detected, sanitize it */\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(currentNode);\n\n        oldNode = currentNode;\n      }\n\n      oldNode = null;\n\n      /* If we sanitized `dirty` in-place, return it. */\n      if (IN_PLACE) {\n        return dirty;\n      }\n\n      /* Return sanitized string or DOM */\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n\n        if (RETURN_DOM_IMPORT) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n\n        return returnNode;\n      }\n\n      var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n      /* Sanitize final string template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$$1, ' ');\n        serializedHTML = stringReplace(serializedHTML, ERB_EXPR$$1, ' ');\n      }\n\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n\n    /**\n     * Public method to set the configuration once\n     * setConfig\n     *\n     * @param {Object} cfg configuration object\n     */\n    DOMPurify.setConfig = function (cfg) {\n      _parseConfig(cfg);\n      SET_CONFIG = true;\n    };\n\n    /**\n     * Public method to remove the configuration\n     * clearConfig\n     *\n     */\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n\n    /**\n     * Public method to check if an attribute value is valid.\n     * Uses last set config, if any. Otherwise, uses config defaults.\n     * isValidAttribute\n     *\n     * @param  {string} tag Tag name of containing element.\n     * @param  {string} attr Attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n     */\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n\n      var lcTag = stringToLowerCase(tag);\n      var lcName = stringToLowerCase(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n\n    /**\n     * AddHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint entry point for the hook to add\n     * @param {Function} hookFunction function to execute\n     */\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n\n      hooks[entryPoint] = hooks[entryPoint] || [];\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n\n    /**\n     * RemoveHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint entry point for the hook to remove\n     */\n    DOMPurify.removeHook = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        arrayPop(hooks[entryPoint]);\n      }\n    };\n\n    /**\n     * RemoveHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint entry point for the hooks to remove\n     */\n    DOMPurify.removeHooks = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        hooks[entryPoint] = [];\n      }\n    };\n\n    /**\n     * RemoveAllHooks\n     * Public method to remove all DOMPurify hooks\n     *\n     */\n    DOMPurify.removeAllHooks = function () {\n      hooks = {};\n    };\n\n    return DOMPurify;\n  }\n\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","import { SidePaneElementProps } from './sidePane/SidePaneElement';\nimport {\n    ContentEditFeatureSettings,\n    DefaultFormat,\n    ExperimentalFeatures,\n} from 'roosterjs-editor-types';\n\nexport const UrlPlaceholder = '$url$';\n\nexport interface BuildInPluginList {\n    contentEdit: boolean;\n    hyperlink: boolean;\n    paste: boolean;\n    watermark: boolean;\n    imageEdit: boolean;\n    cutPasteListChain: boolean;\n    tableCellSelection: boolean;\n    tableResize: boolean;\n    customReplace: boolean;\n    listEditMenu: boolean;\n    imageEditMenu: boolean;\n    tableEditMenu: boolean;\n    contextMenu: boolean;\n    autoFormat: boolean;\n    contentModelPaste: boolean;\n}\n\nexport default interface BuildInPluginState {\n    pluginList: BuildInPluginList;\n    contentEditFeatures: ContentEditFeatureSettings;\n    defaultFormat: DefaultFormat;\n    linkTitle: string;\n    watermarkText: string;\n    experimentalFeatures: ExperimentalFeatures[];\n    forcePreserveRatio: boolean;\n    isRtl: boolean;\n}\n\nexport interface BuildInPluginProps extends BuildInPluginState, SidePaneElementProps {}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport ApiPlaygroundPlugin from './sidePane/apiPlayground/ApiPlaygroundPlugin';\nimport BuildInPluginState from './BuildInPluginState';\nimport ContentModelPanePlugin from './sidePane/contentModel/ContentModelPanePlugin';\nimport ContentModelRibbon from './ribbonButtons/contentModel/ContentModelRibbon';\nimport EditorOptionsPlugin from './sidePane/editorOptions/EditorOptionsPlugin';\nimport EventViewPlugin from './sidePane/eventViewer/EventViewPlugin';\nimport FormatPainterPlugin from './contentModel/plugins/FormatPainterPlugin';\nimport FormatStatePlugin from './sidePane/formatState/FormatStatePlugin';\nimport getToggleablePlugins from './getToggleablePlugins';\nimport MainPaneBase from './MainPaneBase';\nimport SampleEntityPlugin from './sampleEntity/SampleEntityPlugin';\nimport SidePane from './sidePane/SidePane';\nimport SnapshotPlugin from './sidePane/snapshot/SnapshotPlugin';\nimport TitleBar from './titleBar/TitleBar';\nimport { arrayPush } from 'roosterjs-editor-dom';\nimport { ContentModelEditor } from 'roosterjs-content-model';\nimport { ContentModelRibbonPlugin } from './ribbonButtons/contentModel/ContentModelRibbonPlugin';\nimport { darkMode, DarkModeButtonStringKey } from './ribbonButtons/darkMode';\nimport { EditorOptions, EditorPlugin } from 'roosterjs-editor-types';\nimport { ExportButtonStringKey, exportContent } from './ribbonButtons/export';\nimport { getDarkColor } from 'roosterjs-color-utils';\nimport { PartialTheme, ThemeProvider } from '@fluentui/react/lib/Theme';\nimport { popout, PopoutButtonStringKey } from './ribbonButtons/popout';\nimport { registerWindowForCss, unregisterWindowForCss } from '../utils/cssMonitor';\nimport { trustedHTMLHandler } from '../utils/trustedHTMLHandler';\nimport { WindowProvider } from '@fluentui/react/lib/WindowProvider';\nimport { zoom, ZoomButtonStringKey } from './ribbonButtons/zoom';\nimport {\n    AllButtonStringKeys,\n    createRibbonPlugin,\n    createUpdateContentPlugin,\n    getButtons,\n    RibbonPlugin,\n    Ribbon,\n    RibbonButton,\n    Rooster,\n    UpdateContentPlugin,\n    UpdateMode,\n    AllButtonKeys,\n    createPasteOptionPlugin,\n    createEmojiPlugin,\n} from 'roosterjs-react';\n\nconst styles = require('./MainPane.scss');\nconst PopoutRoot = 'mainPane';\nconst POPOUT_HTML = `<!doctype html><html><head><title>RoosterJs Demo Site</title></head><body><div id=${PopoutRoot}></div></body></html>`;\nconst POPOUT_FEATURES = 'menubar=no,statusbar=no,width=1200,height=800';\nconst POPOUT_URL = 'about:blank';\nconst POPOUT_TARGET = '_blank';\n\nconst LightTheme: PartialTheme = {\n    palette: {\n        themePrimary: '#0099aa',\n        themeLighterAlt: '#f2fbfc',\n        themeLighter: '#cbeef2',\n        themeLight: '#a1dfe6',\n        themeTertiary: '#52c0cd',\n        themeSecondary: '#16a5b5',\n        themeDarkAlt: '#008a9a',\n        themeDark: '#007582',\n        themeDarker: '#005660',\n        neutralLighterAlt: '#faf9f8',\n        neutralLighter: '#f3f2f1',\n        neutralLight: '#edebe9',\n        neutralQuaternaryAlt: '#e1dfdd',\n        neutralQuaternary: '#d0d0d0',\n        neutralTertiaryAlt: '#c8c6c4',\n        neutralTertiary: '#a19f9d',\n        neutralSecondary: '#605e5c',\n        neutralPrimaryAlt: '#3b3a39',\n        neutralPrimary: '#323130',\n        neutralDark: '#201f1e',\n        black: '#000000',\n        white: '#ffffff',\n    },\n};\n\nconst DarkTheme: PartialTheme = {\n    palette: {\n        themePrimary: '#0091A1',\n        themeLighterAlt: '#f1fafb',\n        themeLighter: '#caecf0',\n        themeLight: '#9fdce3',\n        themeTertiary: '#4fbac6',\n        themeSecondary: '#159dac',\n        themeDarkAlt: '#008291',\n        themeDark: '#006e7a',\n        themeDarker: '#00515a',\n        neutralLighterAlt: '#3c3c3c',\n        neutralLighter: '#444444',\n        neutralLight: '#515151',\n        neutralQuaternaryAlt: '#595959',\n        neutralQuaternary: '#5f5f5f',\n        neutralTertiaryAlt: '#7a7a7a',\n        neutralTertiary: '#c8c8c8',\n        neutralSecondary: '#d0d0d0',\n        neutralPrimaryAlt: '#dadada',\n        neutralPrimary: '#ffffff',\n        neutralDark: '#f4f4f4',\n        black: '#f8f8f8',\n        white: '#333333',\n    },\n};\n\ntype RibbonStringKeys =\n    | AllButtonStringKeys\n    | DarkModeButtonStringKey\n    | ZoomButtonStringKey\n    | ExportButtonStringKey\n    | PopoutButtonStringKey;\n\nclass MainPane extends MainPaneBase {\n    private mouseX: number;\n    private popoutRoot: HTMLElement;\n    private themeMatch = window.matchMedia?.('(prefers-color-scheme: dark)');\n\n    private formatStatePlugin: FormatStatePlugin;\n    private editorOptionPlugin: EditorOptionsPlugin;\n    private eventViewPlugin: EventViewPlugin;\n    private apiPlaygroundPlugin: ApiPlaygroundPlugin;\n    private snapshotPlugin: SnapshotPlugin;\n    private ContentModelPanePlugin: ContentModelPanePlugin;\n    private ribbonPlugin: RibbonPlugin;\n    private contentModelRibbonPlugin: RibbonPlugin;\n    private pasteOptionPlugin: EditorPlugin;\n    private emojiPlugin: EditorPlugin;\n    private updateContentPlugin: UpdateContentPlugin;\n    private toggleablePlugins: EditorPlugin[] | null = null;\n    private formatPainterPlugin: FormatPainterPlugin;\n    private sampleEntityPlugin: SampleEntityPlugin;\n    private mainWindowButtons: RibbonButton<RibbonStringKeys>[];\n    private popoutWindowButtons: RibbonButton<RibbonStringKeys>[];\n\n    private content: string = '';\n\n    private sidePane = React.createRef<SidePane>();\n\n    constructor(props: {}) {\n        super(props);\n\n        this.formatStatePlugin = new FormatStatePlugin();\n        this.editorOptionPlugin = new EditorOptionsPlugin();\n        this.eventViewPlugin = new EventViewPlugin();\n        this.apiPlaygroundPlugin = new ApiPlaygroundPlugin();\n        this.snapshotPlugin = new SnapshotPlugin();\n        this.ContentModelPanePlugin = new ContentModelPanePlugin();\n        this.ribbonPlugin = createRibbonPlugin();\n        this.contentModelRibbonPlugin = new ContentModelRibbonPlugin();\n        this.pasteOptionPlugin = createPasteOptionPlugin();\n        this.emojiPlugin = createEmojiPlugin();\n        this.updateContentPlugin = createUpdateContentPlugin(UpdateMode.OnDispose, this.onUpdate);\n        this.formatPainterPlugin = new FormatPainterPlugin();\n        this.sampleEntityPlugin = new SampleEntityPlugin();\n        this.mainWindowButtons = getButtons([\n            ...AllButtonKeys,\n            darkMode,\n            zoom,\n            exportContent,\n            popout,\n        ]);\n        this.popoutWindowButtons = getButtons([...AllButtonKeys, darkMode, zoom, exportContent]);\n        this.state = {\n            showSidePane: window.location.hash != '',\n            popoutWindow: null,\n            initState: this.editorOptionPlugin.getBuildInPluginState(),\n            scale: 1,\n            isDarkMode: this.themeMatch?.matches || false,\n            editorCreator: null,\n            isRtl: false,\n            showContentModelRibbon: false,\n        };\n    }\n\n    render() {\n        return (\n            <ThemeProvider\n                applyTo=\"body\"\n                theme={this.state.isDarkMode ? DarkTheme : LightTheme}\n                className={styles.mainPane}>\n                <TitleBar className={styles.noGrow} />\n                {!this.state.popoutWindow && this.renderRibbon(false /*isPopout*/)}\n                {this.state.showContentModelRibbon && this.renderContentModelRibbon()}\n                <div className={styles.body + ' ' + (this.state.isDarkMode ? 'dark' : '')}>\n                    {this.state.popoutWindow ? this.renderPopout() : this.renderMainPane()}\n                </div>\n            </ThemeProvider>\n        );\n    }\n\n    resetEditorPlugin(pluginState: BuildInPluginState) {\n        this.updateContentPlugin.forceUpdate();\n        this.setState({\n            initState: pluginState,\n        });\n\n        this.resetEditor();\n    }\n\n    updateFormatState() {\n        this.formatStatePlugin.updateFormatState();\n    }\n\n    popout() {\n        this.updateContentPlugin.forceUpdate();\n\n        const win = window.open(POPOUT_URL, POPOUT_TARGET, POPOUT_FEATURES);\n        win.document.write(trustedHTMLHandler(POPOUT_HTML));\n        win.addEventListener('beforeunload', () => {\n            this.updateContentPlugin.forceUpdate();\n\n            unregisterWindowForCss(win);\n            this.setState({ popoutWindow: null });\n        });\n\n        registerWindowForCss(win);\n\n        this.popoutRoot = win.document.getElementById(PopoutRoot);\n        this.setState({\n            popoutWindow: win,\n        });\n    }\n\n    setScale(scale: number): void {\n        this.setState({\n            scale: scale,\n        });\n    }\n\n    toggleDarkMode(): void {\n        this.setState({\n            isDarkMode: !this.state.isDarkMode,\n        });\n    }\n\n    setPageDirection(isRtl: boolean): void {\n        this.setState({ isRtl: isRtl });\n        [window, this.state.popoutWindow].forEach(win => {\n            if (win) {\n                win.document.body.dir = isRtl ? 'rtl' : 'ltr';\n            }\n        });\n    }\n\n    toggleContentModelRibbon(): void {\n        this.setState({\n            showContentModelRibbon: !this.state.showContentModelRibbon,\n        });\n    }\n\n    componentDidMount() {\n        this.themeMatch?.addEventListener('change', this.onThemeChange);\n        this.resetEditor();\n    }\n\n    componentWillUnmount() {\n        this.themeMatch?.removeEventListener('change', this.onThemeChange);\n    }\n\n    private onThemeChange = () => {\n        this.setState({\n            isDarkMode: this.themeMatch?.matches || false,\n        });\n    };\n\n    private onMouseDown = (e: React.MouseEvent<EventTarget>) => {\n        document.addEventListener('mousemove', this.onMouseMove, true);\n        document.addEventListener('mouseup', this.onMouseUp, true);\n        document.body.style.userSelect = 'none';\n        this.mouseX = e.pageX;\n    };\n\n    private onMouseMove = (e: MouseEvent) => {\n        this.sidePane.current.changeWidth(this.mouseX - e.pageX);\n        this.mouseX = e.pageX;\n    };\n\n    private onMouseUp = (e: MouseEvent) => {\n        document.removeEventListener('mousemove', this.onMouseMove, true);\n        document.removeEventListener('mouseup', this.onMouseUp, true);\n        document.body.style.userSelect = '';\n    };\n\n    private onShowSidePane = () => {\n        this.setState({\n            showSidePane: true,\n        });\n        this.resetEditor();\n    };\n\n    private onHideSidePane = () => {\n        this.setState({\n            showSidePane: false,\n        });\n        this.resetEditor();\n        window.location.hash = '';\n    };\n\n    private onUpdate = (content: string) => {\n        this.content = content;\n    };\n\n    private renderRibbon(isPopout: boolean) {\n        return (\n            <Ribbon\n                buttons={isPopout ? this.popoutWindowButtons : this.mainWindowButtons}\n                plugin={this.ribbonPlugin}\n                dir={this.state.isRtl ? 'rtl' : 'ltr'}\n            />\n        );\n    }\n\n    private renderContentModelRibbon() {\n        return (\n            <ContentModelRibbon\n                ribbonPlugin={this.contentModelRibbonPlugin}\n                isRtl={this.state.isRtl}\n            />\n        );\n    }\n\n    private renderPopout() {\n        return (\n            <>\n                {this.renderSidePane(true /*fullWidth*/)}\n                {ReactDOM.createPortal(\n                    <WindowProvider window={this.state.popoutWindow}>\n                        <ThemeProvider\n                            applyTo=\"body\"\n                            theme={this.state.isDarkMode ? DarkTheme : LightTheme}>\n                            <div className={styles.mainPane}>\n                                {this.renderRibbon(true /*isPopout*/)}\n                                {this.state.showContentModelRibbon &&\n                                    this.renderContentModelRibbon()}\n                                <div className={styles.body}>{this.renderEditor()}</div>\n                            </div>\n                        </ThemeProvider>\n                    </WindowProvider>,\n                    this.popoutRoot\n                )}\n            </>\n        );\n    }\n\n    private renderMainPane() {\n        return (\n            <>\n                {this.renderEditor()}\n                {this.state.showSidePane ? (\n                    <>\n                        <div className={styles.resizer} onMouseDown={this.onMouseDown} />\n                        {this.renderSidePane(false /*fullWidth*/)}\n                        {this.renderSidePaneButton()}\n                    </>\n                ) : (\n                    this.renderSidePaneButton()\n                )}\n            </>\n        );\n    }\n\n    private renderSidePane(fullWidth: boolean) {\n        return (\n            <SidePane\n                ref={this.sidePane}\n                plugins={this.getSidePanePlugins()}\n                className={`main-pane ${styles.sidePane} ${\n                    fullWidth ? styles.sidePaneFullWidth : ''\n                }`}\n            />\n        );\n    }\n\n    private renderEditor() {\n        const allPlugins = this.getPlugins();\n        const editorStyles = {\n            transform: `scale(${this.state.scale})`,\n            transformOrigin: this.state.isRtl ? 'right top' : 'left top',\n            height: `calc(${100 / this.state.scale}%)`,\n            width: `calc(${100 / this.state.scale}%)`,\n        };\n\n        this.updateContentPlugin.forceUpdate();\n\n        return (\n            <div className={styles.editorContainer}>\n                <div style={editorStyles}>\n                    {this.state.editorCreator && (\n                        <Rooster\n                            className={styles.editor}\n                            plugins={allPlugins}\n                            defaultFormat={this.state.initState.defaultFormat}\n                            inDarkMode={this.state.isDarkMode}\n                            getDarkColor={getDarkColor}\n                            experimentalFeatures={this.state.initState.experimentalFeatures}\n                            undoMetadataSnapshotService={this.snapshotPlugin.getSnapshotService()}\n                            trustedHTMLHandler={trustedHTMLHandler}\n                            zoomScale={this.state.scale}\n                            initialContent={this.content}\n                            editorCreator={this.state.editorCreator}\n                            dir={this.state.isRtl ? 'rtl' : 'ltr'}\n                        />\n                    )}\n                </div>\n            </div>\n        );\n    }\n\n    private renderSidePaneButton() {\n        return (\n            <button\n                className={`side-pane-toggle ${this.state.showSidePane ? 'open' : 'close'} ${\n                    styles.showSidePane\n                }`}\n                onClick={this.state.showSidePane ? this.onHideSidePane : this.onShowSidePane}>\n                <div>{this.state.showSidePane ? 'Hide side pane' : 'Show side pane'}</div>\n            </button>\n        );\n    }\n\n    private getSidePanePlugins() {\n        return [\n            this.formatStatePlugin,\n            this.editorOptionPlugin,\n            this.eventViewPlugin,\n            this.apiPlaygroundPlugin,\n            this.snapshotPlugin,\n            this.ContentModelPanePlugin,\n        ];\n    }\n\n    private getPlugins() {\n        this.toggleablePlugins =\n            this.toggleablePlugins || getToggleablePlugins(this.state.initState);\n\n        const plugins = [\n            ...this.toggleablePlugins,\n            this.ribbonPlugin,\n            this.contentModelRibbonPlugin,\n            this.ContentModelPanePlugin.getInnerRibbonPlugin(),\n            this.pasteOptionPlugin,\n            this.emojiPlugin,\n            this.formatPainterPlugin,\n            this.sampleEntityPlugin,\n        ];\n\n        if (this.state.showSidePane || this.state.popoutWindow) {\n            arrayPush(plugins, this.getSidePanePlugins());\n        }\n\n        plugins.push(this.updateContentPlugin);\n\n        return plugins;\n    }\n\n    private resetEditor() {\n        this.toggleablePlugins = null;\n        this.setState({\n            editorCreator: (div: HTMLDivElement, options: EditorOptions) =>\n                new ContentModelEditor(div, options),\n        });\n    }\n}\n\nexport function mount(parent: HTMLElement) {\n    ReactDOM.render(<MainPane />, parent);\n}\n","import * as React from 'react';\nimport BuildInPluginState from './BuildInPluginState';\nimport { EditorOptions, IEditor } from 'roosterjs-editor-types';\n\nexport interface MainPaneBaseState {\n    showSidePane: boolean;\n    popoutWindow: Window;\n    initState: BuildInPluginState;\n    scale: number;\n    isDarkMode: boolean;\n    editorCreator: (div: HTMLDivElement, options: EditorOptions) => IEditor;\n    isRtl: boolean;\n    showContentModelRibbon: boolean;\n}\n\nexport default abstract class MainPaneBase extends React.Component<{}, MainPaneBaseState> {\n    private static instance: MainPaneBase;\n\n    static getInstance() {\n        return this.instance;\n    }\n\n    constructor(props: {}) {\n        super(props);\n\n        MainPaneBase.instance = this;\n    }\n\n    abstract resetEditorPlugin(pluginState: BuildInPluginState): void;\n\n    abstract updateFormatState(): void;\n\n    abstract popout(): void;\n\n    abstract setScale(scale: number): void;\n\n    abstract toggleDarkMode(): void;\n\n    abstract setPageDirection(isRtl: boolean): void;\n\n    abstract toggleContentModelRibbon(): void;\n}\n","import * as Color from 'color';\nimport * as React from 'react';\nimport { getComputedStyle } from 'roosterjs-editor-dom';\n\nconst styles = require('./ColorPicker.scss');\n\nexport interface ColorPickerProps {\n    initColor: Color;\n    onSelect?: (color: Color) => void;\n    className?: string;\n}\n\nconst enum Keys {\n    PageUp = 33,\n    PageDown = 34,\n    End = 35,\n    Home = 36,\n    Left = 37,\n    Up = 38,\n    Right = 39,\n    Down = 40,\n}\n\nexport default function ColorPicker(props: ColorPickerProps): JSX.Element {\n    const hueBar = React.useRef<HTMLDivElement>(null);\n    const picker = React.useRef<HTMLDivElement>(null);\n    const hsv = props.initColor.hsv();\n    const [hue, setHue] = React.useState(hsv.hue());\n    const [saturation, setSaturation] = React.useState(hsv.saturationv());\n    const [value, setValue] = React.useState(hsv.value());\n    const isRtl = getComputedStyle(document.body, 'direction') == 'rtl';\n\n    const onMouseDownHueBar = React.useCallback((e: React.MouseEvent<EventTarget>) => {\n        startDrag(hueBar.current!, x => setHue(x * 360));\n    }, []);\n\n    const onMouseDownPicker = React.useCallback((e: React.MouseEvent<EventTarget>) => {\n        startDrag(picker.current!, (x, y) => {\n            setSaturation(x * 100);\n            setValue(100 - y * 100);\n        });\n    }, []);\n\n    const onChangeHue = React.useCallback(\n        (e: React.KeyboardEvent<EventTarget>) => {\n            let newHue = hue;\n            switch (e.which) {\n                case Keys.Left:\n                    newHue += isRtl ? 1 : -1;\n                    break;\n                case Keys.Up:\n                    newHue--;\n                    break;\n                case Keys.Right:\n                    newHue += isRtl ? -1 : 1;\n                    break;\n                case Keys.Down:\n                    newHue++;\n                    break;\n                case Keys.PageUp:\n                    newHue -= 10;\n                    break;\n                case Keys.PageDown:\n                    newHue += 10;\n                    break;\n                case Keys.Home:\n                    newHue = 0;\n                    break;\n                case Keys.End:\n                    newHue = 360;\n                    break;\n            }\n            setHue(Math.max(Math.min(newHue, 360), 0));\n        },\n        [hue, isRtl]\n    );\n\n    const onChangeColor = React.useCallback(\n        (e: React.KeyboardEvent<EventTarget>) => {\n            let newSaturation = saturation;\n            let newValue = value;\n            switch (e.which) {\n                case Keys.Left:\n                    newSaturation += isRtl ? 1 : -1;\n                    break;\n                case Keys.Right:\n                    newSaturation += isRtl ? -1 : 1;\n                    break;\n                case Keys.Home:\n                    newSaturation = 0;\n                    break;\n                case Keys.End:\n                    newSaturation = 100;\n                    break;\n                case Keys.Up:\n                    newValue++;\n                    break;\n                case Keys.Down:\n                    newValue--;\n                    break;\n                case Keys.PageUp:\n                    newValue += 10;\n                    break;\n                case Keys.PageDown:\n                    newValue -= 10;\n                    break;\n            }\n            setSaturation(Math.max(Math.min(newSaturation, 100), 0));\n            setValue(Math.max(Math.min(newValue, 100), 0));\n        },\n        [saturation, value, isRtl]\n    );\n\n    React.useEffect(() => {\n        props.onSelect?.(props.initColor);\n    }, []);\n\n    React.useEffect(() => {\n        props.onSelect?.(Color.hsv(hue, saturation, value).rgb());\n    }, [hue, saturation, value]);\n\n    return (\n        <div className={styles.container}>\n            <div\n                tabIndex={0}\n                className={styles.picker}\n                ref={picker}\n                style={{\n                    backgroundColor: Color.hsv(hue, 100, 100).rgb().toString(),\n                }}\n                onKeyDown={onChangeColor}\n                onMouseDown={onMouseDownPicker}>\n                <div className={styles.layer1}>\n                    <div className={styles.layer2} />\n                </div>\n                <div\n                    className={styles.currentColor}\n                    style={{\n                        left: saturation + '%',\n                        top: 100 - value + '%',\n                    }}>\n                    <div />\n                </div>\n            </div>\n\n            <div\n                className={styles.newColor}\n                style={{ backgroundColor: Color.hsv(hue, saturation, value).rgb().toString() }}\n            />\n            <div\n                className={styles.initColor}\n                style={{ backgroundColor: props.initColor.toString() }}\n            />\n\n            <div\n                className={styles.hueBar}\n                ref={hueBar}\n                tabIndex={0}\n                onMouseDown={onMouseDownHueBar}\n                onKeyDown={onChangeHue}>\n                <div\n                    className={styles.currentColor}\n                    style={{\n                        left: hue / 3.6 + '%',\n                    }}>\n                    <div />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction startDrag(element: HTMLElement, callback: (x: number, y: number) => void) {\n    const rect = element.getBoundingClientRect();\n    const document = element.ownerDocument;\n\n    const onMouseChange = (e: MouseEvent) => {\n        const left = e.pageX - rect.left;\n        const top = e.pageY - rect.top;\n        let x = Math.round((left * 100) / rect.width) / 100;\n        let y = Math.round((top * 100) / rect.height) / 100;\n        x = Math.min(Math.max(x, 0), 1);\n        y = Math.min(Math.max(y, 0), 1);\n\n        callback(x, y);\n\n        if (e.type == 'mouseup') {\n            document.removeEventListener('mousemove', onMouseChange, true /*useCapture*/);\n            document.removeEventListener('mouseup', onMouseChange, true /*useCapture*/);\n        } else {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    };\n\n    document.addEventListener('mousemove', onMouseChange, true /*useCapture*/);\n    document.addEventListener('mouseup', onMouseChange, true /*useCapture*/);\n}\n","import * as React from 'react';\nimport { css } from '@fluentui/react/lib/Utilities';\n\nconst styles = require('./ButtonGroup.scss');\n\nexport function ButtonGroup(props: {\n    hasFormat: boolean;\n    hasContent: boolean;\n    hasDataset: boolean;\n    bodyState: 'children' | 'format' | 'json' | 'collapsed' | 'dataset';\n    toggleVisual: () => void;\n    toggleFormat: () => void;\n    toggleJson: () => void;\n    toggleMetadata: () => void;\n}) {\n    const {\n        hasContent,\n        hasFormat,\n        hasDataset,\n        bodyState,\n        toggleFormat,\n        toggleJson,\n        toggleVisual,\n        toggleMetadata,\n    } = props;\n\n    return (\n        <div>\n            {hasContent ? (\n                <button\n                    onClick={toggleVisual}\n                    title=\"Content\"\n                    className={css(styles.button, {\n                        [styles.buttonChecked]: bodyState == 'children',\n                    })}>\n                    🔎\n                </button>\n            ) : null}\n            {hasFormat ? (\n                <button\n                    onClick={toggleFormat}\n                    title=\"Format\"\n                    className={css(styles.button, {\n                        [styles.buttonChecked]: bodyState == 'format',\n                    })}>\n                    🖹\n                </button>\n            ) : null}\n            {hasDataset ? (\n                <button\n                    onClick={toggleMetadata}\n                    title=\"Dataset\"\n                    className={css(styles.button, {\n                        [styles.buttonChecked]: bodyState == 'dataset',\n                    })}>\n                    🏴\n                </button>\n            ) : null}\n            <button\n                onClick={toggleJson}\n                title=\"JSON\"\n                className={css(styles.button, {\n                    [styles.buttonChecked]: bodyState == 'json',\n                })}>\n                🅙\n            </button>\n        </div>\n    );\n}\n","import * as React from 'react';\nimport { ButtonGroup } from './ButtonGroup';\nimport { ContentModelJson } from './model/ContentModelJson';\nimport { css } from '@fluentui/react/lib/Utilities';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { useProperty } from '../hooks/useProperty';\nimport {\n    ContentModelBlockWithCache,\n    ContentModelEntity,\n    ContentModelGeneralBlock,\n    ContentModelWithDataset,\n    DatasetFormat,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelView.scss');\nconst MetadataKey = 'editingInfo';\n\nexport function ContentModelView(props: {\n    className: string;\n    title: string;\n    subTitle?: string;\n    hasSelection?: boolean;\n    isSelected?: boolean;\n    jsonSource: Object;\n    getContent?: (() => JSX.Element) | null;\n    getFormat?: (() => JSX.Element) | null;\n    getMetadata?: (() => JSX.Element) | null;\n    isExpanded?: boolean;\n}) {\n    const {\n        title,\n        subTitle,\n        isExpanded,\n        className,\n        hasSelection,\n        isSelected: isSelection,\n        jsonSource,\n        getContent,\n        getFormat,\n        getMetadata,\n    } = props;\n    const [bodyState, setBodyState] = useProperty<\n        'collapsed' | 'children' | 'format' | 'json' | 'dataset'\n    >(isExpanded ? 'children' : 'collapsed');\n    const highlightBorder = React.useRef<HTMLElement>(null);\n\n    const toggleVisual = React.useCallback(() => {\n        setBodyState(bodyState == 'children' ? 'collapsed' : 'children');\n    }, [bodyState]);\n\n    const toggleFormat = React.useCallback(() => {\n        setBodyState(bodyState == 'format' ? 'collapsed' : 'format');\n    }, [bodyState]);\n\n    const toggleJson = React.useCallback(() => {\n        setBodyState(bodyState == 'json' ? 'collapsed' : 'json');\n    }, [bodyState]);\n\n    const toggleDataset = React.useCallback(() => {\n        setBodyState(bodyState == 'dataset' ? 'collapsed' : 'dataset');\n    }, [bodyState]);\n\n    const getCachedElement = React.useCallback(() => {\n        return (\n            (jsonSource as ContentModelBlockWithCache)?.cachedElement ||\n            (jsonSource as ContentModelGeneralBlock)?.element ||\n            (jsonSource as ContentModelEntity)?.wrapper\n        );\n    }, [jsonSource]);\n    const onMouseOver = React.useCallback(\n        (e: React.MouseEvent) => {\n            const cachedElement = getCachedElement();\n            const doc = cachedElement?.ownerDocument;\n\n            if (cachedElement && doc) {\n                onMouseOut();\n\n                const rect = cachedElement.getBoundingClientRect();\n                const div = doc.createElement('div');\n\n                if (div) {\n                    div.style.position = 'fixed';\n                    div.style.zIndex = '10000';\n                    div.style.left = rect.left + 'px';\n                    div.style.top = rect.top + 'px';\n                    div.style.width = rect.width + 'px';\n                    div.style.height = rect.height + 'px';\n                    div.style.border = 'solid 2px #8888ff';\n                    div.style.boxSizing = 'border-box';\n                    doc.body.appendChild(div);\n\n                    highlightBorder.current = div;\n                }\n\n                e.stopPropagation();\n            }\n        },\n        [getCachedElement]\n    );\n    const onMouseOut = React.useCallback(() => {\n        if (highlightBorder.current) {\n            highlightBorder.current.parentNode?.removeChild(highlightBorder.current);\n            highlightBorder.current = null;\n        }\n    }, [getCachedElement]);\n\n    const dataset = (jsonSource as ContentModelWithDataset<any>).dataset;\n\n    React.useEffect(() => () => {\n        onMouseOut();\n    });\n\n    return (\n        <div\n            className={css(styles.modelWrapper, className, {\n                [styles.childSelected]: hasSelection,\n                [styles.selected]: isSelection,\n            })}\n            onMouseOver={onMouseOver}\n            onMouseOut={onMouseOut}>\n            <div className={styles.titleBar}>\n                <div\n                    className={css(styles.title, {\n                        [styles.titleWithBorder]: bodyState != 'collapsed',\n                    })}>\n                    {title}\n                </div>\n                <div className={styles.buttonGroup}>\n                    <ButtonGroup\n                        hasContent={!!getContent}\n                        hasFormat={!!getFormat}\n                        hasDataset={!!dataset}\n                        bodyState={bodyState}\n                        toggleJson={toggleJson}\n                        toggleFormat={toggleFormat}\n                        toggleVisual={toggleVisual}\n                        toggleMetadata={toggleDataset}\n                    />\n                </div>\n                <div\n                    className={css(styles.subTitle, {\n                        [styles.titleWithBorder]: bodyState != 'collapsed',\n                    })}\n                    title={subTitle || ''}>\n                    {subTitle || '\\u00a0'}\n                </div>\n            </div>\n            {bodyState == 'json' ? (\n                <div className={styles.expandedBody}>\n                    <ContentModelJson jsonSource={jsonSource} />\n                </div>\n            ) : bodyState == 'children' && !!getContent ? (\n                <div className={styles.expandedBody}>{getContent()}</div>\n            ) : bodyState == 'format' && !!getFormat ? (\n                <div className={styles.expandedBody}>{getFormat()}</div>\n            ) : bodyState == 'dataset' && !!dataset ? (\n                <div className={styles.expandedBody}>\n                    <DatasetView dataset={dataset} getMetadata={getMetadata} />\n                </div>\n            ) : null}\n        </div>\n    );\n}\n\nfunction DatasetView(props: { dataset: DatasetFormat; getMetadata?: (() => JSX.Element) | null }) {\n    const { dataset, getMetadata } = props;\n\n    return (\n        <>\n            {getObjectKeys(dataset).map(name =>\n                !getMetadata || name != MetadataKey ? (\n                    <DatasetItemView dataset={dataset} name={name} />\n                ) : null\n            )}\n            {getMetadata ? (\n                <>\n                    <div>Metadata:</div>\n                    {getMetadata()}\n                </>\n            ) : null}\n        </>\n    );\n}\n\nfunction DatasetItemView(props: { dataset: DatasetFormat; name: string }) {\n    const { dataset, name } = props;\n    const [value, setValue] = useProperty(dataset[name]);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n    const onChange = React.useCallback(() => {\n        const newValue = inputRef.current.value;\n        dataset[name] = newValue;\n        setValue(newValue);\n    }, [value, setValue]);\n\n    return (\n        <div>\n            {name}\n            <input type=\"text\" ref={inputRef} value={value} onChange={onChange} />\n        </div>\n    );\n}\n","import * as React from 'react';\nimport { BackgroundColorFormatRenderer } from './formatPart/BackgroundColorFormatRenderer';\nimport { BorderFormatRenderers } from './formatPart/BorderFormatRenderers';\nimport { ContentModelBlockFormat, ContentModelSegmentFormat } from 'roosterjs-content-model';\nimport { DirectionFormatRenderer } from './formatPart/DirectionFormatRenderer';\nimport { FormatRenderer } from './utils/FormatRenderer';\nimport { FormatView } from './FormatView';\nimport { HtmlAlignFormatRenderer } from './formatPart/HtmlAlignFormatRenderer';\nimport { LineHeightFormatRenderer } from './formatPart/LineHeightFormatRenderer';\nimport { MarginFormatRenderer } from './formatPart/MarginFormatRenderer';\nimport { PaddingFormatRenderer } from './formatPart/PaddingFormatRenderer';\nimport { TextAlignFormatRenderer } from './formatPart/TextAlignFormatRenderer';\nimport { WhiteSpaceFormatRenderer } from './formatPart/WhiteSpaceFormatRenderer';\n\nconst BlockFormatRenders: FormatRenderer<ContentModelBlockFormat>[] = [\n    BackgroundColorFormatRenderer,\n    DirectionFormatRenderer,\n    TextAlignFormatRenderer,\n    HtmlAlignFormatRenderer,\n    MarginFormatRenderer,\n    PaddingFormatRenderer,\n    LineHeightFormatRenderer,\n    WhiteSpaceFormatRenderer,\n    ...BorderFormatRenderers,\n];\n\nexport function BlockFormatView(props: { format: ContentModelSegmentFormat }) {\n    const { format } = props;\n    return <FormatView format={format} renderers={BlockFormatRenders} />;\n}\n","import * as React from 'react';\nimport { FormatRenderer } from './utils/FormatRenderer';\n\nconst styles = require('./FormatView.scss');\n\nexport function FormatView<T>(props: {\n    format: T;\n    renderers: FormatRenderer<T>[];\n    onUpdate?: () => void;\n}) {\n    const { format, renderers, onUpdate } = props;\n\n    return <div className={styles.formatTable}>{renderers.map(x => x(format, onUpdate))}</div>;\n}\n","import * as React from 'react';\nimport { ContentModelHyperLinkFormat, LinkFormat } from 'roosterjs-content-model';\nimport { createTextFormatRenderer } from './utils/createTextFormatRenderer';\nimport { DisplayFormatRenderer } from './formatPart/DisplayFormatRenderer';\nimport { FormatRenderer } from './utils/FormatRenderer';\nimport { FormatView } from './FormatView';\nimport { MarginFormatRenderer } from './formatPart/MarginFormatRenderer';\nimport { PaddingFormatRenderer } from './formatPart/PaddingFormatRenderer';\nimport { TextColorFormatRenderer } from './formatPart/TextColorFormatRenderer';\nimport { UnderlineFormatRenderer } from './formatPart/BasicFormatRenderers';\n\nconst LinkFormatRenderers: FormatRenderer<ContentModelHyperLinkFormat>[] = [\n    createTextFormatRenderer<LinkFormat>(\n        'Name',\n        format => format.name,\n        (format, value) => (format.name = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'Href',\n        format => format.href,\n        (format, value) => (format.href = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'Target',\n        format => format.target,\n        (format, value) => (format.target = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'AnchorId',\n        format => format.anchorId,\n        (format, value) => (format.anchorId = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'AnchorClass',\n        format => format.anchorClass,\n        (format, value) => (format.anchorClass = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'AnchorTitle',\n        format => format.anchorTitle,\n        (format, value) => (format.anchorTitle = value)\n    ),\n    createTextFormatRenderer<LinkFormat>(\n        'Relationship',\n        format => format.relationship,\n        (format, value) => (format.relationship = value)\n    ),\n    TextColorFormatRenderer,\n    UnderlineFormatRenderer,\n    DisplayFormatRenderer,\n    MarginFormatRenderer,\n    PaddingFormatRenderer,\n];\n\nexport function LinkFormatView(props: { format: LinkFormat }) {\n    const { format } = props;\n    return <FormatView format={format} renderers={LinkFormatRenderers} />;\n}\n","import * as React from 'react';\nimport { ContentModelWithDataset } from 'roosterjs-content-model';\nimport { FormatRenderer } from './utils/FormatRenderer';\n\nconst styles = require('./FormatView.scss');\n\nexport function MetadataView<T>(props: {\n    model: ContentModelWithDataset<T>;\n    renderers: FormatRenderer<T>[];\n    updater: (model: ContentModelWithDataset<T>, callback: (format: T | null) => T | null) => void;\n}) {\n    const { model, renderers, updater } = props;\n    const metadata = React.useRef<T>(null);\n\n    const onUpdate = React.useCallback(() => {\n        updater(model, () => metadata.current);\n    }, [model]);\n\n    let result: JSX.Element | null = null;\n\n    updater(model, format => {\n        metadata.current = format;\n        result = format ? (\n            <div className={styles.formatTable}>{renderers.map(x => x(format, onUpdate))}</div>\n        ) : null;\n\n        return format;\n    });\n\n    return result;\n}\n","import * as React from 'react';\nimport { BackgroundColorFormatRenderer } from './formatPart/BackgroundColorFormatRenderer';\nimport { ContentModelSegmentFormat } from 'roosterjs-content-model';\nimport { FontFamilyFormatRenderer } from './formatPart/FontFamilyFormatRenderer';\nimport { FontSizeFormatRenderer } from './formatPart/FontSizeFormatRenderer';\nimport { FormatRenderer } from './utils/FormatRenderer';\nimport { FormatView } from './FormatView';\nimport { LetterSpacingFormatRenderer } from './formatPart/LetterSpacingFormatRenderer';\nimport { LineHeightFormatRenderer } from './formatPart/LineHeightFormatRenderer';\nimport { TextColorFormatRenderer } from './formatPart/TextColorFormatRenderer';\nimport {\n    BoldFormatRenderer,\n    ItalicFormatRenderer,\n    StrikeFormatRenderer,\n    UnderlineFormatRenderer,\n    SuperOrSubScriptFormatRenderer,\n} from './formatPart/BasicFormatRenderers';\n\nconst SegmentFormatRenders: FormatRenderer<ContentModelSegmentFormat>[] = [\n    TextColorFormatRenderer,\n    BackgroundColorFormatRenderer,\n    FontSizeFormatRenderer,\n    FontFamilyFormatRenderer,\n    BoldFormatRenderer,\n    ItalicFormatRenderer,\n    UnderlineFormatRenderer,\n    StrikeFormatRenderer,\n    SuperOrSubScriptFormatRenderer,\n    LineHeightFormatRenderer,\n    LetterSpacingFormatRenderer,\n];\n\nexport function SegmentFormatView(props: { format: ContentModelSegmentFormat }) {\n    const { format } = props;\n    return <FormatView format={format} renderers={SegmentFormatRenders} />;\n}\n","import { BackgroundColorFormat } from 'roosterjs-content-model';\nimport { createColorFormatRenderer } from '../utils/createColorFormatRender';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\nexport const BackgroundColorFormatRenderer: FormatRenderer<BackgroundColorFormat> = createColorFormatRenderer<\n    BackgroundColorFormat\n>(\n    'Back color',\n    format => format.backgroundColor,\n    (format, value) => (format.backgroundColor = value)\n);\n","import { createCheckboxFormatRenderer } from '../utils/createCheckboxFormatRenderer';\nimport { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport {\n    BoldFormat,\n    ItalicFormat,\n    StrikeFormat,\n    SuperOrSubScriptFormat,\n    UnderlineFormat,\n} from 'roosterjs-content-model';\n\nexport const BoldFormatRenderer: FormatRenderer<BoldFormat> = createTextFormatRenderer<BoldFormat>(\n    'Bold',\n    format => format.fontWeight,\n    (format, value) => (format.fontWeight = value)\n);\n\nexport const ItalicFormatRenderer: FormatRenderer<ItalicFormat> = createCheckboxFormatRenderer<\n    ItalicFormat\n>(\n    'Italic',\n    format => format.italic,\n    (format, value) => (format.italic = value)\n);\n\nexport const UnderlineFormatRenderer: FormatRenderer<UnderlineFormat> = createCheckboxFormatRenderer<\n    UnderlineFormat\n>(\n    'Underline',\n    format => format.underline,\n    (format, value) => (format.underline = value)\n);\n\nexport const StrikeFormatRenderer: FormatRenderer<StrikeFormat> = createCheckboxFormatRenderer<\n    StrikeFormat\n>(\n    'Strike',\n    format => format.strikethrough,\n    (format, value) => (format.strikethrough = value)\n);\n\nexport const SuperOrSubScriptFormatRenderer: FormatRenderer<SuperOrSubScriptFormat> = createTextFormatRenderer<\n    SuperOrSubScriptFormat\n>(\n    'SuperOrSubScript',\n    format => format.superOrSubScriptSequence,\n    (format, value) => (format.superOrSubScriptSequence = value)\n);\n","import { BorderBoxFormat } from 'roosterjs-content-model';\nimport { createCheckboxFormatRenderer } from '../utils/createCheckboxFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\nexport const BorderBoxFormatRenderer: FormatRenderer<BorderBoxFormat> = createCheckboxFormatRenderer<\n    BorderBoxFormat\n>(\n    'UseBorderBox',\n    format => format.useBorderBox,\n    (format, value) => (format.useBorderBox = value)\n);\n","import { BorderFormat, combineBorderValue, extractBorderValues } from 'roosterjs-content-model';\nimport { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\ntype BorderStyle =\n    | 'dashed'\n    | 'dotted'\n    | 'double'\n    | 'groove'\n    | 'none'\n    | 'outset'\n    | 'solid'\n    | 'hidden'\n    | 'ridge'\n    | 'inset';\nconst BorderStyles: BorderStyle[] = [\n    'none',\n    'hidden',\n    'dotted',\n    'dashed',\n    'solid',\n    'double',\n    'groove',\n    'ridge',\n    'inset',\n    'outset',\n];\n\nfunction createBorderRenderer(position: keyof BorderFormat): FormatRenderer<BorderFormat>[] {\n    return [\n        createTextFormatRenderer<BorderFormat>(\n            position + 'Width',\n            format => extractBorderValues(format[position]).width,\n            (format, newValue) => {\n                const border = extractBorderValues(format[position]);\n                border.width = newValue;\n                format[position] = combineBorderValue(border);\n            }\n        ),\n        createDropDownFormatRenderer<BorderFormat, BorderStyle>(\n            position + 'Style',\n            BorderStyles,\n            format => extractBorderValues(format[position]).style as BorderStyle,\n            (format, newValue) => {\n                const border = extractBorderValues(format[position]);\n                border.style = newValue;\n                format[position] = combineBorderValue(border);\n            }\n        ),\n        createTextFormatRenderer<BorderFormat>(\n            position + 'Color',\n            format => extractBorderValues(format[position]).color,\n            (format, newValue) => {\n                const border = extractBorderValues(format[position]);\n                border.color = newValue;\n                format[position] = combineBorderValue(border);\n            }\n        ),\n    ];\n}\n\nexport const BorderFormatRenderers: FormatRenderer<BorderFormat>[] = [\n    ...createBorderRenderer('borderTop'),\n    ...createBorderRenderer('borderRight'),\n    ...createBorderRenderer('borderBottom'),\n    ...createBorderRenderer('borderLeft'),\n];\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { DirectionFormat } from 'roosterjs-content-model';\n\nexport const DirectionFormatRenderer = createDropDownFormatRenderer<DirectionFormat, 'ltr' | 'rtl'>(\n    'Direction',\n    ['ltr', 'rtl'],\n    format => format.direction,\n    (format, value) => (format.direction = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { DisplayFormat } from 'roosterjs-content-model';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\nexport const DisplayFormatRenderer: FormatRenderer<DisplayFormat> = createTextFormatRenderer<\n    DisplayFormat\n>(\n    'Display',\n    format => format.display,\n    (format, value) => (format.display = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FontFamilyFormat } from 'roosterjs-content-model';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\nexport const FontFamilyFormatRenderer: FormatRenderer<FontFamilyFormat> = createTextFormatRenderer<\n    FontFamilyFormat\n>(\n    'Font family',\n    format => format.fontFamily,\n    (format, value) => {\n        format.fontFamily = value;\n        return undefined;\n    }\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FontSizeFormat } from 'roosterjs-content-model';\nimport { FormatRenderer } from '../utils/FormatRenderer';\n\nexport const FontSizeFormatRenderer: FormatRenderer<FontSizeFormat> = createTextFormatRenderer<\n    FontSizeFormat\n>(\n    'Font size',\n    format => format.fontSize,\n    (format, value) => {\n        format.fontSize = value;\n        return undefined;\n    }\n);\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { HtmlAlignFormat } from 'roosterjs-content-model';\n\nexport const HtmlAlignFormatRenderer = createDropDownFormatRenderer<\n    HtmlAlignFormat,\n    'start' | 'center' | 'end' | 'justify' | 'initial'\n>(\n    'HTML align',\n    ['start', 'center', 'end'],\n    format => format.htmlAlign,\n    (format, value) => (format.htmlAlign = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { IdFormat } from 'roosterjs-content-model';\n\nexport const IdFormatRenderer: FormatRenderer<IdFormat> = createTextFormatRenderer<IdFormat>(\n    'Id',\n    format => format.id,\n    (format, value) => (format.id = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { ImageMetadataFormat } from 'roosterjs-content-model';\n\nexport const ImageMetadataFormatRenderers: FormatRenderer<ImageMetadataFormat>[] = [\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataWidth',\n        format => (format.widthPx || '') + '',\n        (format, value) => (format.widthPx = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataHeight',\n        format => (format.heightPx || '') + '',\n        (format, value) => (format.heightPx = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataLeft',\n        format => (format.leftPercent || '') + '',\n        (format, value) => (format.leftPercent = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataRight',\n        format => (format.rightPercent || '') + '',\n        (format, value) => (format.rightPercent = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataTop',\n        format => (format.topPercent || '') + '',\n        (format, value) => (format.topPercent = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataBottom',\n        format => (format.bottomPercent || '') + '',\n        (format, value) => (format.bottomPercent = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'MetadataAngle',\n        format => (format.angleRad || '') + '',\n        (format, value) => (format.angleRad = parseFloat(value)),\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'OriginalSrc',\n        format => format.src,\n        () => {},\n        'multiline'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'NaturalWidth',\n        format => (format.naturalWidth || '') + '',\n        () => {},\n        'number'\n    ),\n    createTextFormatRenderer<ImageMetadataFormat>(\n        'NaturalHeight',\n        format => (format.naturalHeight || '') + '',\n        () => {},\n        'number'\n    ),\n];\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { LetterSpacingFormat } from 'roosterjs-content-model';\n\nexport const LetterSpacingFormatRenderer: FormatRenderer<LetterSpacingFormat> = createTextFormatRenderer<\n    LetterSpacingFormat\n>(\n    'Letter spacing',\n    format => format.letterSpacing,\n    (format, value) => {\n        format.letterSpacing = value;\n    }\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { LineHeightFormat } from 'roosterjs-content-model';\n\nexport const LineHeightFormatRenderer: FormatRenderer<LineHeightFormat> = createTextFormatRenderer<\n    LineHeightFormat\n>(\n    'LineHeight',\n    format => format.lineHeight,\n    (format, value) => (format.lineHeight = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { ListMetadataFormat } from 'roosterjs-content-model';\n\nexport const ListMetadataFormatRenderers: FormatRenderer<ListMetadataFormat>[] = [\n    createTextFormatRenderer(\n        'Ordered style',\n        format => format.orderedStyleType + '',\n        (format, value) => (format.orderedStyleType = parseInt(value)),\n        'number'\n    ),\n    createTextFormatRenderer(\n        'Unordered style',\n        format => format.unorderedStyleType + '',\n        (format, value) => (format.unorderedStyleType = parseInt(value)),\n        'number'\n    ),\n];\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { ListStylePositionFormat } from 'roosterjs-content-model';\n\nexport const ListStylePositionFormatRenderer: FormatRenderer<ListStylePositionFormat> = createDropDownFormatRenderer(\n    'List Type',\n    ['inside', 'outside'],\n    format => format.listStylePosition,\n    (format, value) => (format.listStylePosition = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { ListThreadFormat } from 'roosterjs-content-model';\n\nexport const ListThreadFormatRenderers: FormatRenderer<ListThreadFormat>[] = [\n    createTextFormatRenderer(\n        'Start number',\n        format => format.startNumberOverride + '',\n        (format, value) => (format.startNumberOverride = parseInt(value)),\n        'number'\n    ),\n];\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { ListTypeFormat } from 'roosterjs-content-model';\n\nexport const ListTypeFormatRenderer: FormatRenderer<ListTypeFormat> = createDropDownFormatRenderer(\n    'List Type',\n    ['OL', 'UL'],\n    format => format.listType,\n    (format, value) => (format.listType = value)\n);\n","import { createTextFormatRendererGroup } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { MarginFormat } from 'roosterjs-content-model';\n\ntype MarginName = keyof MarginFormat;\nconst MarginNames: MarginName[] = ['marginTop', 'marginRight', 'marginBottom', 'marginLeft'];\n\nexport const MarginFormatRenderer: FormatRenderer<MarginFormat> = createTextFormatRendererGroup<\n    MarginFormat,\n    MarginName\n>(\n    MarginNames,\n    format => MarginNames.map(name => format[name]),\n    (format, name, value) => {\n        format[name] = value;\n    }\n);\n","import { createTextFormatRendererGroup } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { PaddingFormat } from 'roosterjs-content-model';\n\ntype PaddingName = keyof PaddingFormat;\nconst PaddingNames: PaddingName[] = ['paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft'];\n\nexport const PaddingFormatRenderer: FormatRenderer<PaddingFormat> = createTextFormatRendererGroup<\n    PaddingFormat,\n    PaddingName\n>(\n    PaddingNames,\n    format => PaddingNames.map(name => format[name]),\n    (format, name, value) => {\n        format[name] = value;\n    }\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { SizeFormat } from 'roosterjs-content-model';\n\nexport const SizeFormatRenderers: FormatRenderer<SizeFormat>[] = [\n    createTextFormatRenderer<SizeFormat>(\n        'Width',\n        format => format.width,\n        (format, value) => (format.width = value)\n    ),\n    createTextFormatRenderer<SizeFormat>(\n        'Height',\n        format => format.height,\n        (format, value) => (format.height = value)\n    ),\n    createTextFormatRenderer<SizeFormat>(\n        'MaxWidth',\n        format => format.maxWidth,\n        (format, value) => (format.maxWidth = value)\n    ),\n    createTextFormatRenderer<SizeFormat>(\n        'MaxHeight',\n        format => format.maxHeight,\n        (format, value) => (format.maxHeight = value)\n    ),\n    createTextFormatRenderer<SizeFormat>(\n        'MinWidth',\n        format => format.minWidth,\n        (format, value) => (format.minWidth = value)\n    ),\n    createTextFormatRenderer<SizeFormat>(\n        'MinHeight',\n        format => format.minHeight,\n        (format, value) => (format.minHeight = value)\n    ),\n];\n","import { createCheckboxFormatRenderer } from '../utils/createCheckboxFormatRenderer';\nimport { SpacingFormat } from 'roosterjs-content-model';\n\nexport const SpacingFormatRenderer = createCheckboxFormatRenderer<SpacingFormat>(\n    'BorderCollapsed',\n    format => format.borderCollapse,\n    (format, value) => (format.borderCollapse = value)\n);\n","import { createCheckboxFormatRenderer } from '../utils/createCheckboxFormatRenderer';\nimport { TableCellMetadataFormat } from 'roosterjs-editor-types';\n\nexport const TableCellMetadataFormatRender = createCheckboxFormatRenderer<TableCellMetadataFormat>(\n    'BgColorOverride',\n    format => format.bgColorOverride,\n    (format, value) => (format.bgColorOverride = value)\n);\n","import { CompatibleTableBorderFormat } from 'roosterjs-editor-types/lib/compatibleTypes';\nimport { createCheckboxFormatRenderer } from '../utils/createCheckboxFormatRenderer';\nimport { createColorFormatRenderer } from '../utils/createColorFormatRender';\nimport { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { TableMetadataFormat } from 'roosterjs-content-model';\n\nexport const TableMetadataFormatRenders: FormatRenderer<TableMetadataFormat>[] = [\n    createColorFormatRenderer<TableMetadataFormat>(\n        'TopBorderColor',\n        format => format.topBorderColor,\n        (format, value) => {\n            format.topBorderColor = value;\n        }\n    ),\n    createColorFormatRenderer<TableMetadataFormat>(\n        'BottomBorderColor',\n        format => format.bottomBorderColor,\n        (format, value) => (format.bottomBorderColor = value)\n    ),\n    createColorFormatRenderer<TableMetadataFormat>(\n        'VerticalBorderColor',\n        format => format.verticalBorderColor,\n        (format, value) => (format.verticalBorderColor = value)\n    ),\n    createCheckboxFormatRenderer<TableMetadataFormat>(\n        'HasHeaderRow',\n        format => format.hasHeaderRow,\n        (format, value) => (format.hasHeaderRow = value)\n    ),\n    createColorFormatRenderer<TableMetadataFormat>(\n        'HeaderRowColor',\n        format => format.headerRowColor,\n        (format, value) => (format.headerRowColor = value)\n    ),\n    createCheckboxFormatRenderer<TableMetadataFormat>(\n        'HasFirstColumn',\n        format => format.hasFirstColumn,\n        (format, value) => (format.hasFirstColumn = value)\n    ),\n    createCheckboxFormatRenderer<TableMetadataFormat>(\n        'HasBandedColumns',\n        format => format.hasBandedColumns,\n        (format, value) => (format.hasBandedColumns = value)\n    ),\n    createCheckboxFormatRenderer<TableMetadataFormat>(\n        'HasBandedRows',\n        format => format.hasBandedRows,\n        (format, value) => (format.hasBandedRows = value)\n    ),\n    createColorFormatRenderer<TableMetadataFormat>(\n        'BgColorEven',\n        format => format.bgColorEven,\n        (format, value) => (format.bgColorEven = value)\n    ),\n    createColorFormatRenderer<TableMetadataFormat>(\n        'BgColorOdd',\n        format => format.bgColorOdd,\n        (format, value) => (format.bgColorOdd = value)\n    ),\n    createDropDownFormatRenderer<TableMetadataFormat, keyof typeof CompatibleTableBorderFormat>(\n        'TableBorderFormat',\n        [\n            'DEFAULT',\n            'LIST_WITH_SIDE_BORDERS',\n            'NO_HEADER_BORDERS',\n            'NO_SIDE_BORDERS',\n            'FIRST_COLUMN_HEADER_EXTERNAL',\n            'ESPECIAL_TYPE_1',\n            'ESPECIAL_TYPE_2',\n            'ESPECIAL_TYPE_3',\n            'CLEAR',\n        ],\n        format =>\n            CompatibleTableBorderFormat[\n                format.tableBorderFormat\n            ] as keyof typeof CompatibleTableBorderFormat,\n        (format, newValue) => (format.tableBorderFormat = CompatibleTableBorderFormat[newValue])\n    ),\n];\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { TextAlignFormat } from 'roosterjs-content-model';\n\nexport const TextAlignFormatRenderer = createDropDownFormatRenderer<\n    TextAlignFormat,\n    'start' | 'center' | 'end' | 'justify' | 'initial'\n>(\n    'Text align',\n    ['start', 'center', 'end'],\n    format => format.textAlign,\n    (format, value) => (format.textAlign = value)\n);\n","import * as Color from 'color';\nimport { createColorFormatRenderer } from '../utils/createColorFormatRender';\nimport { FormatRenderer } from '../utils/FormatRenderer';\nimport { TextColorFormat } from 'roosterjs-content-model';\n\nexport const TextColorFormatRenderer: FormatRenderer<TextColorFormat> = createColorFormatRenderer<\n    TextColorFormat\n>(\n    'Text color',\n    format => (format.textColor ? Color(format.textColor).hex() : ''),\n    (format, value) => {\n        format.textColor = value;\n        return undefined;\n    }\n);\n","import { createDropDownFormatRenderer } from '../utils/createDropDownFormatRenderer';\nimport { VerticalAlignFormat } from 'roosterjs-content-model';\n\nexport const VerticalAlignFormatRenderer = createDropDownFormatRenderer<\n    VerticalAlignFormat,\n    'top' | 'middle' | 'bottom'\n>(\n    'Vertical align',\n    ['top', 'middle', 'bottom'],\n    format => format.verticalAlign,\n    (format, value) => (format.verticalAlign = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\nimport { WhiteSpaceFormat } from 'roosterjs-content-model';\n\nexport const WhiteSpaceFormatRenderer = createTextFormatRenderer<WhiteSpaceFormat>(\n    'White space',\n    format => format.whiteSpace,\n    (format, value) => (format.whiteSpace = value)\n);\n","import { createTextFormatRenderer } from '../utils/createTextFormatRenderer';\r\nimport { WordBreakFormat } from 'roosterjs-content-model';\r\n\r\nexport const WordBreakFormatRenderer = createTextFormatRenderer<WordBreakFormat>(\r\n    'Word break',\r\n    format => format.wordBreak,\r\n    (format, value) => (format.wordBreak = value)\r\n);\r\n","import * as React from 'react';\nimport { FormatRenderer } from './FormatRenderer';\nimport { useProperty } from '../../../hooks/useProperty';\n\nconst styles = require('../FormatView.scss');\n\nfunction CheckboxFormatItem<TFormat>(props: {\n    name: string;\n    format: TFormat;\n    getter: (format: TFormat) => boolean;\n    setter?: (format: TFormat, newValue: boolean) => void;\n    onUpdate?: () => void;\n}) {\n    const { name, getter, setter, format, onUpdate } = props;\n    const checkbox = React.useRef<HTMLInputElement>(null);\n    const [value, setValue] = useProperty<boolean>(getter(format));\n\n    const onChange = React.useCallback(() => {\n        const newValue = checkbox.current.checked;\n        setValue(newValue);\n        setter?.(format, newValue);\n        onUpdate?.();\n    }, [format, setter, setValue]);\n\n    return (\n        <div className={styles.formatRow}>\n            <div className={styles.formatName}>{name}</div>\n            <div className={styles.formatValue}>\n                <input type=\"checkbox\" ref={checkbox} checked={value} onChange={onChange} />\n            </div>\n        </div>\n    );\n}\n\nexport function createCheckboxFormatRenderer<T>(\n    name: string,\n    getter: (format: T) => boolean,\n    setter?: (format: T, newValue: boolean) => void\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => (\n        <CheckboxFormatItem\n            name={name}\n            getter={getter}\n            setter={setter}\n            format={format}\n            onUpdate={onUpdate}\n            key={name}\n        />\n    );\n}\n","import * as Color from 'color';\nimport * as React from 'react';\nimport { FormatRenderer } from './FormatRenderer';\nimport { useProperty } from '../../../hooks/useProperty';\n\nconst styles = require('../FormatView.scss');\nconst Transparent = 'transparent';\n\nfunction ColorFormatItem<T>(props: {\n    name: string;\n    format: T;\n    getter: (format: T) => string;\n    setter?: (format: T, newValue: string) => void;\n    onUpdate?: () => void;\n}) {\n    const { name, getter, setter, format, onUpdate } = props;\n    const colorPickerBox = React.useRef<HTMLInputElement & HTMLTextAreaElement>(null);\n    const colorValueBox = React.useRef<HTMLInputElement>(null);\n    const transparentCheckBox = React.useRef<HTMLInputElement>(null);\n\n    let initValue = getter(format);\n\n    if (initValue && initValue != Transparent) {\n        try {\n            const color = Color(initValue);\n            initValue = color.hex();\n        } catch {}\n    }\n\n    const [value, setValue] = useProperty(initValue);\n\n    const updateValue = React.useCallback(\n        (newValue: string) => {\n            if (newValue != Transparent) {\n                try {\n                    const color = Color(newValue);\n                    newValue = color.hex();\n                } catch {}\n            }\n\n            setValue(newValue);\n            setter?.(format, newValue);\n            onUpdate?.();\n        },\n        [setter, format]\n    );\n\n    const onTextBoxChange = React.useCallback(() => {\n        updateValue(colorPickerBox.current.value);\n    }, [updateValue]);\n\n    const onColorValueChange = React.useCallback(() => {\n        updateValue(colorValueBox.current.value);\n    }, [updateValue]);\n\n    const onToggleTransparent = React.useCallback(() => {\n        updateValue(\n            transparentCheckBox.current.checked ? Transparent : colorPickerBox.current.value\n        );\n    }, [updateValue]);\n\n    let content = (\n        <>\n            <input type=\"color\" ref={colorPickerBox} value={value} onChange={onTextBoxChange} />\n            <input\n                type=\"text\"\n                className={styles.colorValue}\n                ref={colorValueBox}\n                value={value}\n                onChange={onColorValueChange}\n            />\n            <input\n                type=\"checkbox\"\n                ref={transparentCheckBox}\n                checked={value == Transparent}\n                onChange={onToggleTransparent}\n            />\n            {Transparent}\n        </>\n    );\n\n    return (\n        <div className={styles.formatRow}>\n            <div className={styles.formatName}>{name}</div>\n            <div className={styles.formatValue}>{content}</div>\n        </div>\n    );\n}\n\nexport function createColorFormatRenderer<T>(\n    name: string,\n    getter: (format: T) => string,\n    setter?: (format: T, newValue: string) => void\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => (\n        <ColorFormatItem\n            name={name}\n            getter={getter}\n            setter={setter}\n            format={format}\n            key={name}\n            onUpdate={onUpdate}\n        />\n    );\n}\n\nexport function createColorFormatRendererGroup<T, V extends string>(\n    names: V[],\n    getter: (format: T) => string[],\n    setter?: (format: T, name: V, newValue: string) => void\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => {\n        const initValues = getter(format);\n\n        return (\n            <>\n                {names.map((name, index) => (\n                    <ColorFormatItem\n                        name={name}\n                        getter={() => initValues[index]}\n                        setter={(format, newValue) => setter?.(format, name, newValue)}\n                        format={format}\n                        onUpdate={onUpdate}\n                        key={name}\n                    />\n                ))}\n            </>\n        );\n    };\n}\n","import * as React from 'react';\nimport { FormatRenderer } from './FormatRenderer';\nimport { useProperty } from '../../../hooks/useProperty';\n\nconst styles = require('../FormatView.scss');\n\nfunction DropDownFormatItem<TFormat, TOption extends string>(props: {\n    name: string;\n    format: TFormat;\n    options: TOption[];\n    getter: (format: TFormat) => TOption | undefined;\n    setter?: (format: TFormat, newValue: TOption | undefined) => void;\n    onUpdate?: () => void;\n}) {\n    const { name, getter, setter, format, options, onUpdate } = props;\n    const dropDown = React.useRef<HTMLSelectElement>(null);\n    const [value, setValue] = useProperty(getter(format));\n\n    const onChange = React.useCallback(() => {\n        const newValue =\n            dropDown.current.value == '' ? undefined : (dropDown.current.value as TOption);\n        setValue(newValue);\n        setter?.(format, newValue);\n        onUpdate?.();\n    }, [format, setter]);\n\n    return (\n        <div className={styles.formatRow}>\n            <div className={styles.formatName}>{name}</div>\n            <div className={styles.formatValue}>\n                <select ref={dropDown} value={value === undefined ? '' : value} onChange={onChange}>\n                    <option value=\"\"></option>\n                    {options.map(o => (\n                        <option value={o} key={o}>\n                            {o}\n                        </option>\n                    ))}\n                </select>\n            </div>\n        </div>\n    );\n}\n\nexport function createDropDownFormatRenderer<T, O extends string>(\n    name: string,\n    options: O[],\n    getter: (format: T) => O,\n    setter?: (format: T, newValue: O) => void\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => (\n        <DropDownFormatItem\n            name={name}\n            getter={getter}\n            setter={setter}\n            format={format}\n            options={options}\n            onUpdate={onUpdate}\n            key={name}\n        />\n    );\n}\n\nexport function createDropDownFormatRendererGroup<T, O extends string, V extends string>(\n    names: V[],\n    options: O[],\n    getter: (format: T) => O[],\n    setter?: (format: T, name: V, newValue: O) => void\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => {\n        const initValues = getter(format);\n        return (\n            <>\n                {names.map((name, index) => (\n                    <DropDownFormatItem\n                        name={name}\n                        getter={() => initValues[index]}\n                        setter={(format, newValue) => setter?.(format, name, newValue)}\n                        format={format}\n                        options={options}\n                        onUpdate={onUpdate}\n                        key={name}\n                    />\n                ))}\n            </>\n        );\n    };\n}\n","import * as React from 'react';\nimport { FormatRenderer } from './FormatRenderer';\nimport { useProperty } from '../../../hooks/useProperty';\n\nconst styles = require('../FormatView.scss');\n\nfunction TextFormatItem<T>(props: {\n    name: string;\n    format: T;\n    getter: (format: T) => string;\n    setter?: (format: T, newValue: string) => void;\n    onUpdate?: () => void;\n    type: 'text' | 'number' | 'multiline';\n}) {\n    const { name, getter, setter, format, type, onUpdate } = props;\n    const textBox = React.useRef<HTMLInputElement & HTMLTextAreaElement>(null);\n    const [value, setValue] = useProperty(getter(format));\n\n    const updateValue = React.useCallback(\n        (newValue: string) => {\n            setValue(newValue);\n            setter?.(format, newValue);\n            onUpdate();\n        },\n        [setter, format]\n    );\n\n    const onTextBoxChange = React.useCallback(() => {\n        updateValue(textBox.current.value);\n    }, [updateValue]);\n\n    let content: JSX.Element;\n\n    switch (type) {\n        case 'multiline':\n            content = (\n                <textarea\n                    ref={textBox}\n                    onChange={onTextBoxChange}\n                    className={styles.multiLineValue}\n                    value={value}\n                />\n            );\n            break;\n        case 'number':\n            content = (\n                <input\n                    type=\"number\"\n                    className={styles.numberValue}\n                    ref={textBox}\n                    value={value}\n                    onChange={onTextBoxChange}\n                />\n            );\n            break;\n        case 'text':\n            content = (\n                <input\n                    type=\"text\"\n                    className={styles.textValue}\n                    ref={textBox}\n                    value={value}\n                    onChange={onTextBoxChange}\n                />\n            );\n            break;\n    }\n\n    return (\n        <div className={styles.formatRow}>\n            <div className={styles.formatName}>{name}</div>\n            <div className={styles.formatValue}>{content}</div>\n        </div>\n    );\n}\n\nexport function createTextFormatRenderer<T>(\n    name: string,\n    getter: (format: T) => string,\n    setter?: (format: T, newValue: string) => void,\n    type: 'text' | 'number' | 'multiline' = 'text'\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => (\n        <TextFormatItem\n            name={name}\n            getter={getter}\n            setter={setter}\n            format={format}\n            type={type}\n            onUpdate={onUpdate}\n            key={name}\n        />\n    );\n}\n\nexport function createTextFormatRendererGroup<T, V extends string>(\n    names: V[],\n    getter: (format: T) => string[],\n    setter?: (format: T, name: V, newValue: string) => void,\n    type: 'text' | 'number' | 'multiline' = 'text'\n): FormatRenderer<T> {\n    return (format: T, onUpdate?: () => void) => {\n        const initValues = getter(format);\n\n        return (\n            <>\n                {names.map((name, index) => (\n                    <TextFormatItem\n                        name={name}\n                        getter={() => initValues[index]}\n                        setter={(format, newValue) => setter?.(format, name, newValue)}\n                        format={format}\n                        type={type}\n                        onUpdate={onUpdate}\n                        key={name}\n                    />\n                ))}\n            </>\n        );\n    };\n}\n","import * as React from 'react';\nimport { ContentModelBlockGroup } from 'roosterjs-content-model';\nimport { ContentModelBlockView } from './ContentModelBlockView';\n\nexport function BlockGroupContentView(props: { group: ContentModelBlockGroup }) {\n    const { group } = props;\n\n    return (\n        <>\n            {group.blocks.map((block, index) => (\n                <ContentModelBlockView block={block} key={index} />\n            ))}\n        </>\n    );\n}\n","import * as React from 'react';\nimport { ContentModelBlockGroup } from 'roosterjs-content-model';\nimport { ContentModelDocumentView } from './ContentModelDocumentView';\nimport { ContentModelFormatContainerView } from './ContentModelFormatContainerView';\nimport { ContentModelGeneralView } from './ContentModelGeneralView';\nimport { ContentModelListItemView } from './ContentModelListItemView';\nimport { ContentModelTableCellView } from './ContentModelTableCellView';\n\nexport function ContentModelBlockGroupView(props: { group: ContentModelBlockGroup }) {\n    const { group } = props;\n\n    switch (group.blockGroupType) {\n        case 'Document':\n            return <ContentModelDocumentView doc={group} />;\n\n        case 'General':\n            return <ContentModelGeneralView model={group} />;\n\n        case 'ListItem':\n            return <ContentModelListItemView listItem={group} />;\n\n        case 'FormatContainer':\n            return <ContentModelFormatContainerView container={group} />;\n\n        case 'TableCell':\n            return <ContentModelTableCellView cell={group} />;\n    }\n}\n","import * as React from 'react';\nimport { ContentModelBlock } from 'roosterjs-content-model';\nimport { ContentModelBlockGroupView } from './ContentModelBlockGroupView';\nimport { ContentModelDividerView } from './ContentModelDividerView';\nimport { ContentModelEntityView } from './ContentModelEntityView';\nimport { ContentModelParagraphView } from './ContentModelParagraphView';\nimport { ContentModelTableView } from './ContentModelTableView';\n\nexport function ContentModelBlockView(props: { block: ContentModelBlock }) {\n    const { block } = props;\n\n    switch (block.blockType) {\n        case 'BlockGroup':\n            return <ContentModelBlockGroupView group={block} />;\n\n        case 'Paragraph':\n            return <ContentModelParagraphView paragraph={block} />;\n\n        case 'Table':\n            return <ContentModelTableView table={block} />;\n\n        case 'Entity':\n            return <ContentModelEntityView entity={block} />;\n\n        case 'Divider':\n            return <ContentModelDividerView divider={block} />;\n    }\n}\n","import * as React from 'react';\nimport { ContentModelBr } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\n\nconst styles = require('./ContentModelBrView.scss');\n\nexport function ContentModelBrView(props: { br: ContentModelBr }) {\n    const { br } = props;\n    const getFormat = React.useCallback(() => {\n        return <SegmentFormatView format={br.format} />;\n    }, [br.format]);\n\n    return (\n        <ContentModelView\n            title=\"BR\"\n            className={styles.modelBr}\n            isSelected={br.isSelected}\n            jsonSource={br}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { ContentModelCode, ContentModelCodeFormat } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { DisplayFormatRenderer } from '../format/formatPart/DisplayFormatRenderer';\nimport { FontFamilyFormatRenderer } from '../format/formatPart/FontFamilyFormatRenderer';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\n\nconst CodeRenderers: FormatRenderer<ContentModelCodeFormat>[] = [\n    FontFamilyFormatRenderer,\n    DisplayFormatRenderer,\n];\n\nconst styles = require('./ContentModelCodeView.scss');\n\nexport function ContentModelCodeView(props: { code: ContentModelCode }) {\n    const { code } = props;\n\n    const getFormat = React.useCallback(() => {\n        return <FormatView format={code.format} renderers={CodeRenderers} />;\n    }, [code.format]);\n\n    return (\n        <ContentModelView\n            title=\"Code\"\n            className={styles.modelCode}\n            jsonSource={code}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BackgroundColorFormatRenderer } from '../format/formatPart/BackgroundColorFormatRenderer';\nimport { BorderFormatRenderers } from '../format/formatPart/BorderFormatRenderers';\nimport { ContentModelDivider, ContentModelDividerFormat } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { DirectionFormatRenderer } from '../format/formatPart/DirectionFormatRenderer';\nimport { DisplayFormatRenderer } from '../format/formatPart/DisplayFormatRenderer';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { LineHeightFormatRenderer } from '../format/formatPart/LineHeightFormatRenderer';\nimport { MarginFormatRenderer } from '../format/formatPart/MarginFormatRenderer';\nimport { PaddingFormatRenderer } from '../format/formatPart/PaddingFormatRenderer';\nimport { SizeFormatRenderers } from '../format/formatPart/SizeFormatRenderers';\nimport { useProperty } from '../../hooks/useProperty';\nimport { WhiteSpaceFormatRenderer } from '../format/formatPart/WhiteSpaceFormatRenderer';\n\nconst styles = require('./ContentModelDividerView.scss');\nconst DividerFormatRenders: FormatRenderer<ContentModelDividerFormat>[] = [\n    BackgroundColorFormatRenderer,\n    DirectionFormatRenderer,\n    MarginFormatRenderer,\n    PaddingFormatRenderer,\n    LineHeightFormatRenderer,\n    WhiteSpaceFormatRenderer,\n    ...BorderFormatRenderers,\n    DisplayFormatRenderer,\n    ...SizeFormatRenderers,\n];\n\nexport function ContentModelDividerView(props: { divider: ContentModelDivider }) {\n    const { divider } = props;\n    const [tagName, setTagName] = useProperty(divider.tagName);\n    const tagNameDropDown = React.useRef<HTMLSelectElement>(null);\n    const onTagNameChange = React.useCallback(() => {\n        const newValue = tagNameDropDown.current.value as 'hr' | 'div';\n        divider.tagName = newValue;\n        setTagName(newValue);\n    }, [divider, setTagName]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <div>\n                TagName:\n                <select value={tagName} ref={tagNameDropDown} onChange={onTagNameChange}>\n                    <option value=\"hr\">HR</option>\n                    <option value=\"div\">DIV</option>\n                </select>\n            </div>\n        );\n    }, [tagName]);\n\n    const getFormat = React.useCallback(() => {\n        return <FormatView format={divider.format} renderers={DividerFormatRenders} />;\n    }, [divider.format]);\n\n    return (\n        <ContentModelView\n            title=\"Divider\"\n            className={styles.modelDivider}\n            isSelected={divider.isSelected}\n            jsonSource={divider}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BlockGroupContentView } from './BlockGroupContentView';\nimport { ContentModelDocument, hasSelectionInBlockGroup } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\n\nconst styles = require('./ContentModelDocumentView.scss');\n\nexport function ContentModelDocumentView(props: { doc: ContentModelDocument }) {\n    const { doc } = props;\n    const getContent = React.useCallback(() => {\n        return <BlockGroupContentView group={doc} />;\n    }, [doc]);\n\n    return (\n        <ContentModelView\n            title=\"Document\"\n            className={styles.modelDocument}\n            hasSelection={hasSelectionInBlockGroup(doc)}\n            jsonSource={doc}\n            getContent={getContent}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BlockFormatView } from '../format/BlockFormatView';\nimport { ContentModelEntity } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport { useProperty } from '../../hooks/useProperty';\n\nconst styles = require('./ContentModelEntityView.scss');\n\nexport function ContentModelEntityView(props: { entity: ContentModelEntity }) {\n    const { entity } = props;\n\n    const [id, setId] = useProperty(entity.id);\n    const [isReadonly, setIsReadonly] = useProperty(entity.isReadonly);\n    const [type, setType] = useProperty(entity.type);\n\n    const idTextBox = React.useRef<HTMLInputElement>(null);\n    const isReadonlyCheckBox = React.useRef<HTMLInputElement>(null);\n    const typeTextBox = React.useRef<HTMLInputElement>(null);\n\n    const onIdChange = React.useCallback(() => {\n        const newValue = idTextBox.current.value;\n        entity.id = newValue;\n        setId(newValue);\n    }, [id, setId]);\n    const onTypeChange = React.useCallback(() => {\n        const newValue = typeTextBox.current.value;\n        entity.type = newValue;\n        setType(newValue);\n    }, [type, setType]);\n    const onReadonlyChange = React.useCallback(() => {\n        const newValue = isReadonlyCheckBox.current.checked;\n        entity.isReadonly = newValue;\n        setIsReadonly(newValue);\n    }, [id, setId]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <div>\n                    Id: <input type=\"text\" value={id} ref={idTextBox} onChange={onIdChange} />\n                </div>\n                <div>\n                    Type:\n                    <input type=\"text\" value={type} ref={typeTextBox} onChange={onTypeChange} />\n                </div>\n                <div>\n                    IsReadonly:\n                    <input\n                        type=\"checkbox\"\n                        checked={isReadonly}\n                        ref={isReadonlyCheckBox}\n                        onChange={onReadonlyChange}\n                    />\n                </div>\n            </>\n        );\n    }, [type, isReadonly, id]);\n\n    const getFormat = React.useCallback(() => {\n        return (\n            <>\n                <SegmentFormatView format={entity.format} />\n                <BlockFormatView format={entity.format} />\n            </>\n        );\n    }, [entity.format]);\n\n    return (\n        <ContentModelView\n            title=\"Entity\"\n            subTitle={id}\n            className={styles.modelEntity}\n            isSelected={entity.isSelected}\n            jsonSource={entity}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BlockFormatView } from '../format/BlockFormatView';\nimport { BlockGroupContentView } from './BlockGroupContentView';\nimport { ContentModelView } from '../ContentModelView';\nimport { DisplayFormatRenderer } from '../format/formatPart/DisplayFormatRenderer';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport { SizeFormatRenderers } from '../format/formatPart/SizeFormatRenderers';\nimport {\n    ContentModelFormatContainer,\n    ContentModelFormatContainerFormat,\n    hasSelectionInBlock,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelFormatContainerView.scss');\n\nconst FormatContainerFormatRenderers: FormatRenderer<ContentModelFormatContainerFormat>[] = [\n    ...SizeFormatRenderers,\n    DisplayFormatRenderer,\n];\n\nexport function ContentModelFormatContainerView(props: { container: ContentModelFormatContainer }) {\n    const { container } = props;\n    const getContent = React.useCallback(() => {\n        return <BlockGroupContentView group={container} />;\n    }, [container]);\n\n    const getFormat = React.useCallback(() => {\n        return (\n            <>\n                <BlockFormatView format={container.format} />\n                <SegmentFormatView format={container.format} />\n                <FormatView format={container.format} renderers={FormatContainerFormatRenderers} />\n            </>\n        );\n    }, [container]);\n\n    return (\n        <ContentModelView\n            title=\"FormatContainer\"\n            subTitle={container.tagName}\n            className={styles.modelFormatContainer}\n            hasSelection={hasSelectionInBlock(container)}\n            jsonSource={container}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BlockGroupContentView } from './BlockGroupContentView';\nimport { ContentModelCodeView } from './ContentModelCodeView';\nimport { ContentModelLinkView } from './ContentModelLinkView';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport {\n    ContentModelGeneralBlock,\n    ContentModelGeneralSegment,\n    hasSelectionInBlock,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelGeneralView.scss');\n\nexport function ContentModelGeneralView(props: { model: ContentModelGeneralBlock }) {\n    const { model } = props;\n    const segment = isGeneralSegment(model) ? model : undefined;\n    const link = segment?.link;\n    const code = segment?.code;\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                {link ? <ContentModelLinkView link={link} /> : null}\n                {code ? <ContentModelCodeView code={code} /> : null}\n                <BlockGroupContentView group={model} />\n            </>\n        );\n    }, [model, link]);\n\n    const getFormat = React.useCallback(() => {\n        return <SegmentFormatView format={model.format} />;\n    }, [segment?.format]);\n\n    return (\n        <ContentModelView\n            title=\"General\"\n            subTitle={model.element?.tagName || 'NULL'}\n            className={styles.modelGeneral}\n            hasSelection={hasSelectionInBlock(model)}\n            isSelected={isGeneralSegment(model) ? model.isSelected : false}\n            jsonSource={model}\n            getContent={getContent}\n            getFormat={segment ? getFormat : undefined}\n        />\n    );\n}\n\nfunction isGeneralSegment(block: ContentModelGeneralBlock): block is ContentModelGeneralSegment {\n    return (block as ContentModelGeneralSegment).segmentType == 'General';\n}\n","import * as React from 'react';\nimport { ContentModelCodeView } from './ContentModelCodeView';\nimport { ContentModelImage, ContentModelImageFormat } from 'roosterjs-content-model';\nimport { ContentModelLinkView } from './ContentModelLinkView';\nimport { ContentModelView } from '../ContentModelView';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { IdFormatRenderer } from '../format/formatPart/IdFormatRenderer';\nimport { ImageMetadataFormatRenderers } from '../format/formatPart/ImageMetadataFormatRenderers';\nimport { MarginFormatRenderer } from '../format/formatPart/MarginFormatRenderer';\nimport { MetadataView } from '../format/MetadataView';\nimport { PaddingFormatRenderer } from '../format/formatPart/PaddingFormatRenderer';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport { SizeFormatRenderers } from '../format/formatPart/SizeFormatRenderers';\nimport { updateImageMetadata } from 'roosterjs-content-model';\nimport { useProperty } from '../../hooks/useProperty';\n\nconst styles = require('./ContentModelImageView.scss');\n\nconst ImageFormatRenderers: FormatRenderer<ContentModelImageFormat>[] = [\n    IdFormatRenderer,\n    ...SizeFormatRenderers,\n    MarginFormatRenderer,\n    PaddingFormatRenderer,\n];\n\nexport function ContentModelImageView(props: { image: ContentModelImage }) {\n    const { image } = props;\n    const srcTextArea = React.useRef<HTMLTextAreaElement>(null);\n    const imageSelectionCheckBox = React.useRef<HTMLInputElement>(null);\n\n    const [src, setSrc] = useProperty(image.src);\n    const [imageSelected, setImageSelected] = useProperty(\n        image.isSelectedAsImageSelection || false\n    );\n\n    const getFormat = React.useCallback(() => {\n        return (\n            <>\n                <SegmentFormatView format={image.format} />\n                <FormatView format={image.format} renderers={ImageFormatRenderers} />\n            </>\n        );\n    }, [image.format]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <img src={src} className={styles.image} />\n                <textarea value={src} ref={srcTextArea} onChange={onSrcChange} />\n                <div>\n                    <input\n                        type=\"checkbox\"\n                        checked={imageSelected}\n                        ref={imageSelectionCheckBox}\n                        onChange={onImageSelectionChange}\n                    />\n                    Image selection\n                </div>\n                {image.link ? <ContentModelLinkView link={image.link} /> : null}{' '}\n                {image.code ? <ContentModelCodeView code={image.code} /> : null}\n            </>\n        );\n    }, [src, imageSelected, image.link]);\n\n    const getMetadata = React.useCallback(() => {\n        return (\n            <MetadataView\n                model={image}\n                renderers={ImageMetadataFormatRenderers}\n                updater={updateImageMetadata}\n            />\n        );\n    }, [image]);\n\n    const onSrcChange = React.useCallback(() => {\n        const newValue = srcTextArea.current.value;\n        image.src = newValue;\n        setSrc(newValue);\n    }, [src, setSrc]);\n\n    const onImageSelectionChange = React.useCallback(() => {\n        const newValue = imageSelectionCheckBox.current.checked;\n        image.isSelectedAsImageSelection = newValue;\n        setImageSelected(newValue);\n    }, [imageSelected, setImageSelected]);\n\n    return (\n        <ContentModelView\n            title=\"Image\"\n            subTitle={imageSelected ? '[ImageSelection]' : ''}\n            className={styles.modelImage}\n            isSelected={image.isSelected}\n            jsonSource={image}\n            getFormat={getFormat}\n            getContent={getContent}\n            getMetadata={getMetadata}\n        />\n    );\n}\n","import * as React from 'react';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\nconst styles = require('./ContentModelJson.scss');\n\nexport function ContentModelJson(props: { jsonSource: Object }) {\n    const { jsonSource } = props;\n    const json = JSON.stringify(\n        jsonSource,\n        (key, value) => {\n            if (safeInstanceOf(value, 'HTMLElement')) {\n                return (\n                    Object.prototype.toString.apply(value) +\n                    ': ' +\n                    (value.cloneNode() as HTMLElement).outerHTML\n                );\n            } else if (safeInstanceOf(value, 'Node')) {\n                return Object.prototype.toString.apply(value);\n            } else if (key == 'src' && typeof value == 'string') {\n                return value.length > 100 ? value.substring(0, 97) + '...' : value;\n            } else {\n                return value;\n            }\n        },\n        2\n    );\n\n    return <pre className={styles.json}>{json}</pre>;\n}\n","import * as React from 'react';\nimport { ContentModelLink } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { LinkFormatView } from '../format/LinkFormatView';\n\nconst styles = require('./ContentModelLinkView.scss');\n\nexport function ContentModelLinkView(props: { link: ContentModelLink }) {\n    const { link } = props;\n\n    const getFormat = React.useCallback(() => {\n        return <LinkFormatView format={link.format} />;\n    }, [link.format]);\n\n    return (\n        <ContentModelView\n            title=\"Link\"\n            subTitle={link.format.href}\n            className={styles.modelLink}\n            jsonSource={link}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { ContentModelBlockView } from './ContentModelBlockView';\nimport { ContentModelView } from '../ContentModelView';\nimport { DirectionFormatRenderer } from '../format/formatPart/DirectionFormatRenderer';\nimport { FontFamilyFormatRenderer } from '../format/formatPart/FontFamilyFormatRenderer';\nimport { FontSizeFormatRenderer } from '../format/formatPart/FontSizeFormatRenderer';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { LineHeightFormatRenderer } from '../format/formatPart/LineHeightFormatRenderer';\nimport { ListMetadataFormatRenderers } from '../format/formatPart/ListMetadataFormatRenderers';\nimport { ListStylePositionFormatRenderer } from '../format/formatPart/ListStylePositionFormatRenderer';\nimport { ListThreadFormatRenderers } from '../format/formatPart/ListThreadFormatRenderer';\nimport { ListTypeFormatRenderer } from '../format/formatPart/ListTypeFormatRenderer';\nimport { MarginFormatRenderer } from '../format/formatPart/MarginFormatRenderer';\nimport { PaddingFormatRenderer } from '../format/formatPart/PaddingFormatRenderer';\nimport { TextAlignFormatRenderer } from '../format/formatPart/TextAlignFormatRenderer';\nimport { TextColorFormatRenderer } from '../format/formatPart/TextColorFormatRenderer';\nimport { useProperty } from '../../hooks/useProperty';\nimport {\n    ContentModelListItem,\n    ContentModelListItemFormat,\n    ContentModelListItemLevelFormat,\n    ContentModelSegmentFormat,\n    hasSelectionInBlockGroup,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelListItemView.scss');\n\nconst ListLevelFormatRenders: FormatRenderer<ContentModelListItemLevelFormat>[] = [\n    ListTypeFormatRenderer,\n    ...ListThreadFormatRenderers,\n    ...ListMetadataFormatRenderers,\n    DirectionFormatRenderer,\n    TextAlignFormatRenderer,\n    MarginFormatRenderer,\n    PaddingFormatRenderer,\n    ListStylePositionFormatRenderer,\n];\nconst ListItemFormatRenderers: FormatRenderer<ContentModelListItemFormat>[] = [\n    DirectionFormatRenderer,\n    TextAlignFormatRenderer,\n    LineHeightFormatRenderer,\n    MarginFormatRenderer,\n];\nconst ListItemFormatHolderRenderers: FormatRenderer<ContentModelSegmentFormat>[] = [\n    TextColorFormatRenderer,\n    FontSizeFormatRenderer,\n    FontFamilyFormatRenderer,\n];\n\nfunction getSubTitle(listItem: ContentModelListItem) {\n    return listItem.levels.map(level => level.listType || 'UL').join('/');\n}\n\nexport function ContentModelListItemView(props: { listItem: ContentModelListItem }) {\n    const { listItem } = props;\n    const [subTitle, setSubTitle] = useProperty(getSubTitle(listItem));\n    const onFormatChanged = React.useCallback(() => {\n        setSubTitle(getSubTitle(listItem));\n    }, [setSubTitle, listItem]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                {listItem.blocks.map((block, index) => (\n                    <ContentModelBlockView block={block} key={index} />\n                ))}\n            </>\n        );\n    }, [listItem]);\n\n    const getFormat = React.useCallback(() => {\n        return (\n            <>\n                <div>List levels:</div>\n                {listItem.levels.map((level, index) => (\n                    <FormatView\n                        format={level}\n                        renderers={ListLevelFormatRenders}\n                        onUpdate={onFormatChanged}\n                        key={index}\n                    />\n                ))}\n                <hr className={styles.hr} />\n\n                <div>List item format:</div>\n                <FormatView format={listItem.format} renderers={ListItemFormatRenderers} />\n\n                <div>List marker format:</div>\n                <FormatView\n                    format={listItem.formatHolder.format}\n                    renderers={ListItemFormatHolderRenderers}\n                />\n            </>\n        );\n    }, [listItem.levels, subTitle]);\n\n    return (\n        <ContentModelView\n            title=\"ListItem\"\n            subTitle={subTitle}\n            isExpanded={false}\n            className={styles.modelListItem}\n            hasSelection={hasSelectionInBlockGroup(listItem)}\n            jsonSource={listItem}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BlockFormatView } from '../format/BlockFormatView';\nimport { ContentModelSegmentView } from './ContentModelSegmentView';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport { useProperty } from '../../hooks/useProperty';\nimport {\n    ContentModelParagraph,\n    ContentModelParagraphDecorator,\n    hasSelectionInBlock,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelParagraphView.scss');\n\nexport function ContentModelParagraphView(props: { paragraph: ContentModelParagraph }) {\n    const { paragraph } = props;\n    const implicitCheckbox = React.useRef<HTMLInputElement>(null);\n    const zeroFontCheckbox = React.useRef<HTMLInputElement>(null);\n    const [isImplicit, setIsImplicit] = useProperty(!!paragraph.isImplicit);\n    const [isZeroFont, setZeroFont] = useProperty(!!paragraph.zeroFontSize);\n\n    const onIsImplicitChange = React.useCallback(() => {\n        const newValue = implicitCheckbox.current.checked;\n        paragraph.isImplicit = newValue;\n        setIsImplicit(newValue);\n    }, [paragraph, setIsImplicit]);\n\n    const onChangeZeroFontSize = React.useCallback(() => {\n        const newValue = zeroFontCheckbox.current.checked;\n        paragraph.zeroFontSize = newValue;\n        setZeroFont(newValue);\n    }, [paragraph, setIsImplicit]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <div>\n                    <input\n                        type=\"checkbox\"\n                        checked={isImplicit}\n                        ref={implicitCheckbox}\n                        onChange={onIsImplicitChange}\n                    />\n                    Implicit\n                </div>\n                <div>\n                    <input\n                        type=\"checkbox\"\n                        checked={isZeroFont}\n                        ref={zeroFontCheckbox}\n                        onChange={onChangeZeroFontSize}\n                    />\n                    Zero font size\n                </div>\n                {paragraph.decorator && (\n                    <ContentModelParagraphDecoratorView decorator={paragraph.decorator} />\n                )}\n                {paragraph.segments.map((segment, index) => (\n                    <ContentModelSegmentView segment={segment} key={index} />\n                ))}\n            </>\n        );\n    }, [\n        paragraph,\n        isImplicit,\n        // headerLevel\n    ]);\n\n    const getFormat = React.useCallback(() => {\n        return <BlockFormatView format={paragraph.format} />;\n    }, [paragraph.format]);\n\n    return (\n        <ContentModelView\n            title=\"Paragraph\"\n            subTitle={paragraph.isImplicit ? ' (Implicit)' : ''}\n            isExpanded={true}\n            className={styles.modelParagraph}\n            hasSelection={hasSelectionInBlock(paragraph)}\n            jsonSource={paragraph}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n\nfunction ContentModelParagraphDecoratorView(props: { decorator: ContentModelParagraphDecorator }) {\n    const { decorator } = props;\n    const tagNameDropDown = React.useRef<HTMLSelectElement>(null);\n    const [tagName, setTagName] = useProperty(decorator.tagName || '');\n\n    const onTagNameChange = React.useCallback(() => {\n        const newValue = tagNameDropDown.current.value;\n\n        decorator.tagName = newValue;\n        setTagName(newValue);\n    }, [decorator, setTagName]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <div>\n                Tag name:\n                <select value={tagName} ref={tagNameDropDown} onChange={onTagNameChange}>\n                    <option value=\"p\">P</option>\n                    <option value=\"h1\">H1</option>\n                    <option value=\"h2\">H2</option>\n                    <option value=\"h3\">H3</option>\n                    <option value=\"h4\">H4</option>\n                    <option value=\"h5\">H5</option>\n                    <option value=\"h6\">H6</option>\n                </select>\n            </div>\n        );\n    }, [decorator, tagName]);\n\n    const getFormat = React.useCallback(() => {\n        return <SegmentFormatView format={decorator.format} />;\n    }, [decorator.format]);\n\n    return (\n        <ContentModelView\n            title=\"Decorator\"\n            subTitle={decorator.tagName}\n            className={styles.modelDecorator}\n            jsonSource={decorator}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { ContentModelBrView } from './ContentModelBrView';\nimport { ContentModelEntityView } from './ContentModelEntityView';\nimport { ContentModelGeneralView } from './ContentModelGeneralView';\nimport { ContentModelImageView } from './ContentModelImageView';\nimport { ContentModelSegment } from 'roosterjs-content-model';\nimport { ContentModelSelectionMarkerView } from './ContentModelSelectionMarkerView';\nimport { ContentModelTextView } from './ContentModelTextView';\n\nexport function ContentModelSegmentView(props: { segment: ContentModelSegment }) {\n    const { segment } = props;\n\n    switch (segment.segmentType) {\n        case 'Br':\n            return <ContentModelBrView br={segment} />;\n\n        case 'General':\n            return <ContentModelGeneralView model={segment} />;\n\n        case 'SelectionMarker':\n            return <ContentModelSelectionMarkerView marker={segment} />;\n\n        case 'Text':\n            return <ContentModelTextView text={segment} />;\n\n        case 'Entity':\n            return <ContentModelEntityView entity={segment} />;\n\n        case 'Image':\n            return <ContentModelImageView image={segment} />;\n    }\n}\n","import * as React from 'react';\nimport { ContentModelCodeView } from './ContentModelCodeView';\nimport { ContentModelLinkView } from './ContentModelLinkView';\nimport { ContentModelSelectionMarker } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\n\nconst styles = require('./ContentModelSelectionMarkerView.scss');\n\nexport function ContentModelSelectionMarkerView(props: { marker: ContentModelSelectionMarker }) {\n    const { marker } = props;\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                {marker.link ? <ContentModelLinkView link={marker.link} /> : null}\n                {marker.code ? <ContentModelCodeView code={marker.code} /> : null}\n            </>\n        );\n    }, [marker.link]);\n\n    const getFormat = React.useCallback(() => {\n        return <SegmentFormatView format={marker.format} />;\n    }, [marker.format]);\n\n    return (\n        <ContentModelView\n            title=\"SelectionMarker\"\n            className={styles.modelSelectionMarker}\n            isSelected={true}\n            jsonSource={marker}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\r\nimport { BackgroundColorFormatRenderer } from '../format/formatPart/BackgroundColorFormatRenderer';\r\nimport { BlockGroupContentView } from './BlockGroupContentView';\r\nimport { BorderBoxFormatRenderer } from '../format/formatPart/BorderBoxFormatRenderer';\r\nimport { BorderFormatRenderers } from '../format/formatPart/BorderFormatRenderers';\r\nimport { ContentModelView } from '../ContentModelView';\r\nimport { DirectionFormatRenderer } from '../format/formatPart/DirectionFormatRenderer';\r\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\r\nimport { FormatView } from '../format/FormatView';\r\nimport { HtmlAlignFormatRenderer } from '../format/formatPart/HtmlAlignFormatRenderer';\r\nimport { MetadataView } from '../format/MetadataView';\r\nimport { PaddingFormatRenderer } from '../format/formatPart/PaddingFormatRenderer';\r\nimport { TableCellMetadataFormatRender } from '../format/formatPart/TableCellMetadataFormatRender';\r\nimport { TextAlignFormatRenderer } from '../format/formatPart/TextAlignFormatRenderer';\r\nimport { TextColorFormatRenderer } from '../format/formatPart/TextColorFormatRenderer';\r\nimport { updateTableCellMetadata } from 'roosterjs-content-model';\r\nimport { useProperty } from '../../hooks/useProperty';\r\nimport { VerticalAlignFormatRenderer } from '../format/formatPart/VerticalAlignFormatRenderer';\r\nimport { WordBreakFormatRenderer } from '../format/formatPart/WordBreakFormatRenderer';\r\nimport {\r\n    ContentModelTableCell,\r\n    ContentModelTableCellFormat,\r\n    hasSelectionInBlockGroup,\r\n} from 'roosterjs-content-model';\r\n\r\nconst styles = require('./ContentModelTableCellView.scss');\r\n\r\nconst TableCellFormatRenderers: FormatRenderer<ContentModelTableCellFormat>[] = [\r\n    ...BorderFormatRenderers,\r\n    DirectionFormatRenderer,\r\n    TextAlignFormatRenderer,\r\n    HtmlAlignFormatRenderer,\r\n    BorderBoxFormatRenderer,\r\n    BackgroundColorFormatRenderer,\r\n    PaddingFormatRenderer,\r\n    VerticalAlignFormatRenderer,\r\n    WordBreakFormatRenderer,\r\n    TextColorFormatRenderer,\r\n];\r\n\r\nexport function ContentModelTableCellView(props: { cell: ContentModelTableCell }) {\r\n    const { cell } = props;\r\n    const checkboxHeader = React.useRef<HTMLInputElement>(null);\r\n    const checkboxSpanLeft = React.useRef<HTMLInputElement>(null);\r\n    const checkboxSpanAbove = React.useRef<HTMLInputElement>(null);\r\n    const [isHeader, setIsHeader] = useProperty(cell.isHeader);\r\n    const [spanLeft, setSpanLeft] = useProperty(cell.spanLeft);\r\n    const [spanAbove, setSpanAbove] = useProperty(cell.spanAbove);\r\n\r\n    const onHeaderChanged = React.useCallback(() => {\r\n        const value = checkboxHeader.current.checked;\r\n        cell.isHeader = value;\r\n        setIsHeader(value);\r\n    }, [cell, setIsHeader]);\r\n\r\n    const onSpanLeftChanged = React.useCallback(() => {\r\n        const value = checkboxSpanLeft.current.checked;\r\n        cell.spanLeft = value;\r\n        setSpanLeft(value);\r\n    }, [cell, setSpanLeft]);\r\n\r\n    const onSpanAboveChanged = React.useCallback(() => {\r\n        const value = checkboxSpanAbove.current.checked;\r\n        cell.spanAbove = value;\r\n        setSpanAbove(value);\r\n    }, [cell, setSpanAbove]);\r\n\r\n    const getContent = React.useCallback(() => {\r\n        return (\r\n            <>\r\n                <div>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={isHeader}\r\n                        ref={checkboxHeader}\r\n                        onChange={onHeaderChanged}\r\n                    />\r\n                    Header\r\n                </div>\r\n                <div>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={spanLeft}\r\n                        ref={checkboxSpanLeft}\r\n                        onChange={onSpanLeftChanged}\r\n                    />\r\n                    Span Left\r\n                </div>\r\n                <div>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={spanAbove}\r\n                        ref={checkboxSpanAbove}\r\n                        onChange={onSpanAboveChanged}\r\n                    />\r\n                    Span Above\r\n                </div>\r\n                <BlockGroupContentView group={cell} />\r\n            </>\r\n        );\r\n    }, [cell, isHeader, spanAbove, spanLeft]);\r\n\r\n    const getMetadata = React.useCallback(() => {\r\n        return (\r\n            <MetadataView\r\n                model={cell}\r\n                renderers={[TableCellMetadataFormatRender]}\r\n                updater={updateTableCellMetadata}\r\n            />\r\n        );\r\n    }, [cell]);\r\n\r\n    const getFormat = React.useCallback(() => {\r\n        return <FormatView format={cell.format} renderers={TableCellFormatRenderers} />;\r\n    }, [cell.format]);\r\n\r\n    const subTitle =\r\n        cell.spanAbove && cell.spanLeft ? '↖' : cell.spanLeft ? '←' : cell.spanAbove ? '↑' : '';\r\n\r\n    return (\r\n        <ContentModelView\r\n            title={isHeader ? 'TableCellHeader' : 'TableCell'}\r\n            subTitle={subTitle}\r\n            className={styles.modelTableCell}\r\n            hasSelection={hasSelectionInBlockGroup(cell)}\r\n            isSelected={cell.isSelected}\r\n            jsonSource={cell}\r\n            getContent={getContent}\r\n            getFormat={getFormat}\r\n            getMetadata={getMetadata}\r\n        />\r\n    );\r\n}\r\n","import * as React from 'react';\nimport { BackgroundColorFormatRenderer } from '../format/formatPart/BackgroundColorFormatRenderer';\nimport { ContentModelBlockGroupView } from './ContentModelBlockGroupView';\nimport { ContentModelView } from '../ContentModelView';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { useProperty } from '../../hooks/useProperty';\nimport {\n    ContentModelBlockFormat,\n    ContentModelTableRow,\n    hasSelectionInBlockGroup,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelTableRowView.scss');\n\nconst TableRowFormatRenderers: FormatRenderer<ContentModelBlockFormat>[] = [\n    BackgroundColorFormatRenderer,\n];\n\nexport function ContentModelTableRowView(props: { row: ContentModelTableRow }) {\n    const { row } = props;\n    const [height, setHeight] = useProperty(row.height);\n    const textBoxRef = React.useRef<HTMLInputElement>(null);\n    const onChange = React.useCallback(() => {\n        const newValue = parseInt(textBoxRef.current.value);\n        row.height = newValue;\n        setHeight(newValue);\n    }, [row]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <div>\n                    Height:\n                    <input\n                        type=\"number\"\n                        value={height}\n                        onChange={onChange}\n                        ref={textBoxRef}\n                        className={styles.sizeInput}\n                    />\n                </div>\n                {row.cells.map((cell, j) => (\n                    <ContentModelBlockGroupView group={cell} key={j} />\n                ))}\n            </>\n        );\n    }, [row]);\n\n    const getFormat = React.useCallback(() => {\n        return <FormatView format={row.format} renderers={TableRowFormatRenderers} />;\n    }, [row.format]);\n\n    return (\n        <ContentModelView\n            title=\"Table Row\"\n            isExpanded={false}\n            className={styles.modelTableRow}\n            hasSelection={row.cells.some(cell => hasSelectionInBlockGroup(cell))}\n            jsonSource={row}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\nimport { BackgroundColorFormatRenderer } from '../format/formatPart/BackgroundColorFormatRenderer';\nimport { BorderBoxFormatRenderer } from '../format/formatPart/BorderBoxFormatRenderer';\nimport { BorderFormatRenderers } from '../format/formatPart/BorderFormatRenderers';\nimport { ContentModelTableRowView } from './ContentModelTableRowView';\nimport { ContentModelView } from '../ContentModelView';\nimport { DisplayFormatRenderer } from '../format/formatPart/DisplayFormatRenderer';\nimport { FormatRenderer } from '../format/utils/FormatRenderer';\nimport { FormatView } from '../format/FormatView';\nimport { IdFormatRenderer } from '../format/formatPart/IdFormatRenderer';\nimport { MarginFormatRenderer } from '../format/formatPart/MarginFormatRenderer';\nimport { MetadataView } from '../format/MetadataView';\nimport { SpacingFormatRenderer } from '../format/formatPart/SpacingFormatRenderer';\nimport { TableMetadataFormatRenders } from '../format/formatPart/TableMetadataFormatRenders';\nimport { updateTableMetadata } from 'roosterjs-content-model';\nimport { useProperty } from '../../hooks/useProperty';\nimport {\n    ContentModelTable,\n    ContentModelTableFormat,\n    hasSelectionInBlock,\n} from 'roosterjs-content-model';\n\nconst styles = require('./ContentModelTableView.scss');\n\nconst TableFormatRenderers: FormatRenderer<ContentModelTableFormat>[] = [\n    IdFormatRenderer,\n    SpacingFormatRenderer,\n    BackgroundColorFormatRenderer,\n    MarginFormatRenderer,\n    ...BorderFormatRenderers,\n    BorderBoxFormatRenderer,\n    DisplayFormatRenderer,\n];\n\nexport function ContentModelTableView(props: { table: ContentModelTable }) {\n    const { table } = props;\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <div>\n                    Widths:\n                    {table.widths.map((_, index) => (\n                        <NumberView values={table.widths} index={index} key={index} />\n                    ))}\n                </div>\n                {table.rows.map((row, i) => (\n                    <ContentModelTableRowView row={row} key={i} />\n                ))}\n            </>\n        );\n    }, [table]);\n\n    const getFormat = React.useCallback(() => {\n        return <FormatView format={table.format} renderers={TableFormatRenderers} />;\n    }, [table.format]);\n\n    const getMetadata = React.useCallback(() => {\n        return (\n            <MetadataView\n                model={table}\n                renderers={TableMetadataFormatRenders}\n                updater={updateTableMetadata}\n            />\n        );\n    }, [table]);\n\n    return (\n        <ContentModelView\n            title=\"Table\"\n            subTitle={`${table.rows.length} x ${table.rows[0]?.cells.length || 0}`}\n            isExpanded={true}\n            className={styles.modelTable}\n            hasSelection={hasSelectionInBlock(table)}\n            jsonSource={table}\n            getContent={getContent}\n            getFormat={getFormat}\n            getMetadata={getMetadata}\n        />\n    );\n}\n\nfunction NumberView(props: { values: number[]; index: number }) {\n    const { values, index } = props;\n    const textBoxRef = React.useRef<HTMLInputElement>(null);\n    const [value, setValue] = useProperty(values[index]);\n    const onChange = React.useCallback(() => {\n        const newValue = parseInt(textBoxRef.current.value);\n        values[index] = newValue;\n        setValue(newValue);\n    }, [values, index]);\n\n    return (\n        <input\n            type=\"number\"\n            value={value}\n            onChange={onChange}\n            ref={textBoxRef}\n            className={styles.sizeInput}\n        />\n    );\n}\n","import * as React from 'react';\nimport { ContentModelCodeView } from './ContentModelCodeView';\nimport { ContentModelLinkView } from './ContentModelLinkView';\nimport { ContentModelText } from 'roosterjs-content-model';\nimport { ContentModelView } from '../ContentModelView';\nimport { SegmentFormatView } from '../format/SegmentFormatView';\nimport { useProperty } from '../../hooks/useProperty';\n\nconst styles = require('./ContentModelTextView.scss');\n\nexport function ContentModelTextView(props: { text: ContentModelText }) {\n    const { text } = props;\n    const [value, setValue] = useProperty(text.text);\n\n    const textArea = React.useRef<HTMLTextAreaElement>(null);\n    const onChange = React.useCallback(() => {\n        const newValue = textArea.current.value;\n        text.text = newValue;\n        setValue(newValue);\n    }, [text, setValue]);\n\n    const getContent = React.useCallback(() => {\n        return (\n            <>\n                <textarea ref={textArea} onChange={onChange} value={value} />\n                {text.link ? <ContentModelLinkView link={text.link} /> : null}\n                {text.code ? <ContentModelCodeView code={text.code} /> : null}\n            </>\n        );\n    }, [text, value, text.link]);\n\n    const getFormat = React.useCallback(() => {\n        return <SegmentFormatView format={text.format} />;\n    }, [text.format]);\n\n    return (\n        <ContentModelView\n            title=\"Text\"\n            subTitle={value}\n            className={styles.modelText}\n            isSelected={text.isSelected}\n            jsonSource={text}\n            getContent={getContent}\n            getFormat={getFormat}\n        />\n    );\n}\n","import * as React from 'react';\n\nexport function useProperty<V>(currentValue: V): [V, (value: V) => void] {\n    const [value, setValue] = React.useState(currentValue);\n\n    React.useEffect(() => {\n        setValue(currentValue);\n    }, [currentValue]);\n\n    return [value, setValue];\n}\n","import { EditorPlugin, IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport {\n    applySegmentFormat,\n    ContentModelSegmentFormat,\n    getSegmentFormat,\n    IContentModelEditor,\n} from 'roosterjs-content-model';\n\nconst FORMATPAINTERCURSOR_SVG = require('./formatpaintercursor.svg');\nconst FORMATPAINTERCURSOR_STYLE = `;cursor: url(\"${FORMATPAINTERCURSOR_SVG}\") 8.5 16, auto`;\nconst CURSOR_REGEX = /;?\\s*cursor:\\s*url\\(\\\".*?\\\"\\)[^;]*/gi;\n\ninterface FormatPainterFormatHolder {\n    format: ContentModelSegmentFormat | null;\n}\n\nexport default class FormatPainterPlugin implements EditorPlugin {\n    private editor: IContentModelEditor | null = null;\n\n    getName() {\n        return 'FormatPainter';\n    }\n\n    initialize(editor: IEditor) {\n        this.editor = editor as IContentModelEditor;\n    }\n\n    dispose() {\n        this.editor = null;\n    }\n\n    onPluginEvent(event: PluginEvent) {\n        if (this.editor && event.eventType == PluginEventType.MouseUp) {\n            const formatHolder = getFormatHolder(this.editor);\n\n            if (formatHolder.format) {\n                applySegmentFormat(this.editor, formatHolder.format);\n                formatHolder.format = null;\n\n                setFormatPainterCursor(this.editor, false /*isOn*/);\n            }\n        }\n    }\n\n    static startFormatPainter(editor: IContentModelEditor) {\n        const formatHolder = getFormatHolder(editor);\n        const format = getSegmentFormat(editor);\n\n        if (format) {\n            formatHolder.format = { ...format };\n            setFormatPainterCursor(editor, true /*isOn*/);\n        }\n    }\n}\n\nfunction getFormatHolder(editor: IEditor): FormatPainterFormatHolder {\n    return editor.getCustomData('__FormatPainterFormat', () => {\n        return {} as FormatPainterFormatHolder;\n    });\n}\n\nfunction setFormatPainterCursor(editor: IEditor, isOn: boolean) {\n    let styles = editor.getEditorDomAttribute('style') || '';\n    styles = styles.replace(CURSOR_REGEX, '');\n\n    if (isOn) {\n        styles += FORMATPAINTERCURSOR_STYLE;\n    }\n\n    editor.setEditorDomAttribute('style', styles);\n}\n","import BuildInPluginState, { BuildInPluginList, UrlPlaceholder } from './BuildInPluginState';\nimport { AutoFormat } from 'roosterjs-editor-plugins/lib/AutoFormat';\nimport { ContentEdit } from 'roosterjs-editor-plugins/lib/ContentEdit';\nimport { CustomReplace as CustomReplacePlugin } from 'roosterjs-editor-plugins/lib/CustomReplace';\nimport { CutPasteListChain } from 'roosterjs-editor-plugins/lib/CutPasteListChain';\nimport { EditorPlugin } from 'roosterjs-editor-types';\nimport { HyperLink } from 'roosterjs-editor-plugins/lib/HyperLink';\nimport { ImageEdit } from 'roosterjs-editor-plugins/lib/ImageEdit';\nimport { Paste } from 'roosterjs-editor-plugins/lib/Paste';\nimport { TableCellSelection } from 'roosterjs-editor-plugins/lib/TableCellSelection';\nimport { TableResize } from 'roosterjs-editor-plugins/lib/TableResize';\nimport { Watermark } from 'roosterjs-editor-plugins/lib/Watermark';\nimport { ContentModelPastePlugin } from 'roosterjs-content-model';\nimport {\n    createContextMenuPlugin,\n    createImageEditMenuProvider,\n    createListEditMenuProvider,\n    createTableEditMenuProvider,\n} from 'roosterjs-react/lib/contextMenu';\n\nexport default function getToggleablePlugins(initState: BuildInPluginState) {\n    const { pluginList, linkTitle } = initState;\n    const imageEdit = pluginList.imageEdit\n        ? new ImageEdit({\n              preserveRatio: initState.forcePreserveRatio,\n          })\n        : null;\n\n    const plugins: Record<keyof BuildInPluginList, EditorPlugin | null> = {\n        contentEdit: pluginList.contentEdit ? new ContentEdit(initState.contentEditFeatures) : null,\n        hyperlink: pluginList.hyperlink\n            ? new HyperLink(\n                  linkTitle?.indexOf(UrlPlaceholder) >= 0\n                      ? url => linkTitle.replace(UrlPlaceholder, url)\n                      : linkTitle\n                      ? () => linkTitle\n                      : null\n              )\n            : null,\n        paste: pluginList.paste ? new Paste() : null,\n        watermark: pluginList.watermark ? new Watermark(initState.watermarkText) : null,\n        imageEdit,\n        cutPasteListChain: pluginList.cutPasteListChain ? new CutPasteListChain() : null,\n        tableCellSelection: pluginList.tableCellSelection ? new TableCellSelection() : null,\n        tableResize: pluginList.tableResize ? new TableResize() : null,\n        customReplace: pluginList.customReplace ? new CustomReplacePlugin() : null,\n        autoFormat: pluginList.autoFormat ? new AutoFormat() : null,\n        listEditMenu:\n            pluginList.contextMenu && pluginList.listEditMenu ? createListEditMenuProvider() : null,\n        imageEditMenu:\n            pluginList.contextMenu && pluginList.imageEditMenu && imageEdit\n                ? createImageEditMenuProvider(imageEdit)\n                : null,\n        tableEditMenu:\n            pluginList.contextMenu && pluginList.tableEditMenu\n                ? createTableEditMenuProvider()\n                : null,\n        contextMenu: pluginList.contextMenu ? createContextMenuPlugin() : null,\n        contentModelPaste: pluginList.contentModelPaste ? new ContentModelPastePlugin() : null,\n    };\n\n    return Object.values(plugins);\n}\n","import * as React from 'react';\nimport { alignCenterButton } from './alignCenterButton';\nimport { alignLeftButton } from './alignLeftButton';\nimport { alignRightButton } from './alignRightButton';\nimport { backgroundColorButton } from './backgroundColorButton';\nimport { blockQuoteButton } from './blockQuoteButton';\nimport { boldButton } from './boldButton';\nimport { bulletedListButton } from './bulletedListButton';\nimport { changeImageButton } from './changeImageButton';\nimport { clearFormatButton } from './clearFormatButton';\nimport { codeButton } from './codeButton';\nimport { decreaseFontSizeButton } from './decreaseFontSizeButton';\nimport { decreaseIndentButton } from './decreaseIndentButton';\nimport { fontButton } from './fontButton';\nimport { fontSizeButton } from './fontSizeButton';\nimport { formatPainterButton } from './formatPainterButton';\nimport { formatTableButton } from './formatTableButton';\nimport { imageBorderColorButton } from './imageBorderColorButton';\nimport { imageBorderStyleButton } from './imageBorderStyleButton';\nimport { imageBorderWidthButton } from './imageBorderWidthButton';\nimport { imageBorderRemoveButton } from './imageBorderRemoveButton';\nimport { imageBoxShadowButton } from './imageBoxShadowButton';\nimport { increaseFontSizeButton } from './increaseFontSizeButton';\nimport { increaseIndentButton } from './increaseIndentButton';\nimport { insertImageButton } from './insertImageButton';\nimport { insertLinkButton } from './insertLinkButton';\nimport { insertTableButton } from './insertTableButton';\nimport { italicButton } from './italicButton';\nimport { listStartNumberButton } from './listStartNumberButton';\nimport { ltrButton } from './ltrButton';\nimport { numberedListButton } from './numberedListButton';\nimport { removeLinkButton } from './removeLinkButton';\nimport { Ribbon, RibbonPlugin } from 'roosterjs-react';\nimport { rtlButton } from './rtlButton';\nimport { setBulletedListStyleButton } from './setBulletedListStyleButton';\nimport { setHeaderLevelButton } from './setHeaderLevelButton';\nimport { setNumberedListStyleButton } from './setNumberedListStyleButton';\nimport { setTableCellShadeButton } from './setTableCellShadeButton';\nimport { setTableHeaderButton } from './setTableHeaderButton';\nimport { spaceAfterButton, spaceBeforeButton } from './spaceBeforeAfterButtons';\nimport { spacingButton } from './spacingButton';\nimport { strikethroughButton } from './strikethroughButton';\nimport { subscriptButton } from './subscriptButton';\nimport { superscriptButton } from './superscriptButton';\nimport { textColorButton } from './textColorButton';\nimport { underlineButton } from './underlineButton';\nimport {\n    tableAlignCellButton,\n    tableAlignTableButton,\n    tableDeleteButton,\n    tableInsertButton,\n    tableMergeButton,\n    tableSplitButton,\n} from './tableEditButtons';\n\nconst buttons = [\n    formatPainterButton,\n    boldButton,\n    italicButton,\n    underlineButton,\n    fontButton,\n    fontSizeButton,\n    increaseFontSizeButton,\n    decreaseFontSizeButton,\n    textColorButton,\n    backgroundColorButton,\n    bulletedListButton,\n    numberedListButton,\n    decreaseIndentButton,\n    increaseIndentButton,\n    blockQuoteButton,\n    alignLeftButton,\n    alignCenterButton,\n    alignRightButton,\n    insertLinkButton,\n    removeLinkButton,\n    insertTableButton,\n    insertImageButton,\n    superscriptButton,\n    subscriptButton,\n    strikethroughButton,\n    setHeaderLevelButton,\n    codeButton,\n    ltrButton,\n    rtlButton,\n    clearFormatButton,\n    setBulletedListStyleButton,\n    setNumberedListStyleButton,\n    listStartNumberButton,\n    formatTableButton,\n    setTableCellShadeButton,\n    setTableHeaderButton,\n    tableInsertButton,\n    tableDeleteButton,\n    tableMergeButton,\n    tableSplitButton,\n    tableAlignCellButton,\n    tableAlignTableButton,\n    imageBorderColorButton,\n    imageBorderWidthButton,\n    imageBorderStyleButton,\n    imageBorderRemoveButton,\n    changeImageButton,\n    imageBoxShadowButton,\n    spacingButton,\n    spaceBeforeButton,\n    spaceAfterButton,\n];\n\nexport default function ContentModelRibbon(props: { ribbonPlugin: RibbonPlugin; isRtl: boolean }) {\n    const { ribbonPlugin, isRtl } = props;\n\n    return <Ribbon buttons={buttons} plugin={ribbonPlugin} dir={isRtl ? 'rtl' : 'ltr'} />;\n}\n","import { FormatState, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { getFormatState, IContentModelEditor } from 'roosterjs-content-model';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { LocalizedStrings, RibbonButton, RibbonPlugin, UIUtilities } from 'roosterjs-react';\n\nexport class ContentModelRibbonPlugin implements RibbonPlugin {\n    private editor: IContentModelEditor | null = null;\n    private onFormatChanged: ((formatState: FormatState) => void) | null = null;\n    private timer = 0;\n    private formatState: FormatState | null = null;\n    private uiUtilities: UIUtilities | null = null;\n\n    /**\n     * Construct a new instance of RibbonPlugin object\n     * @param delayUpdateTime The time to wait before refresh the button when user do some editing operation in editor\n     */\n    constructor(private delayUpdateTime: number = 200) {}\n\n    /**\n     * Get a friendly name of this plugin\n     */\n    getName() {\n        return 'Ribbon';\n    }\n\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    initialize(editor: IContentModelEditor) {\n        this.editor = editor;\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    onPluginEvent(event: PluginEvent) {\n        switch (event.eventType) {\n            case PluginEventType.EditorReady:\n            case PluginEventType.ContentChanged:\n            case PluginEventType.ZoomChanged:\n                this.updateFormat();\n                break;\n\n            case PluginEventType.KeyDown:\n            case PluginEventType.MouseUp:\n                this.delayUpdate();\n                break;\n        }\n    }\n\n    /**\n     * Set the UI utilities objects to this plugin to help render additional UI elements\n     * @param uiUtilities The UI utilities object to set\n     */\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n\n    /**\n     * Register a callback to be invoked when format state of editor is changed, returns a disposer function.\n     */\n    registerFormatChangedCallback(callback: (formatState: FormatState) => void) {\n        this.onFormatChanged = callback;\n\n        return () => {\n            this.onFormatChanged = null;\n        };\n    }\n\n    /**\n     * When user clicks on a button, call this method to let the plugin to handle this click event\n     * @param button The button that is clicked\n     * @param key Key of child menu item that is clicked if any\n     * @param strings The localized string map for this button\n     */\n    onButtonClick<T extends string>(\n        button: RibbonButton<T>,\n        key: T,\n        strings?: LocalizedStrings<T>\n    ) {\n        if (this.editor && this.uiUtilities) {\n            this.editor.stopShadowEdit();\n\n            button.onClick(this.editor, key, strings, this.uiUtilities);\n\n            if (button.isChecked || button.isDisabled || button.dropDownMenu?.getSelectedItemKey) {\n                this.updateFormat();\n            }\n        }\n    }\n\n    /**\n     * Enter live preview state (shadow edit) of editor if there is a non-collapsed selection\n     * @param button The button that triggered this action\n     * @param key Key of the hovered button sub item\n     * @param strings The localized string map for this button\n     */\n    startLivePreview<T extends string>(\n        button: RibbonButton<T>,\n        key: T,\n        strings?: LocalizedStrings<T>\n    ) {\n        if (this.editor && this.uiUtilities) {\n            const isInShadowEdit = this.editor.isInShadowEdit();\n\n            // If editor is already in shadow edit, no need to check again.\n            // And the check result may be incorrect because the content is changed from last shadow edit and the cached selection path won't apply\n            const range = !isInShadowEdit && this.editor.getSelectionRangeEx();\n\n            if (isInShadowEdit || (range && !range.areAllCollapsed)) {\n                this.editor.startShadowEdit();\n                button.onClick(this.editor, key, strings, this.uiUtilities);\n            }\n        }\n    }\n\n    /**\n     * Leave live preview state (shadow edit) of editor\n     */\n    stopLivePreview() {\n        this.editor?.stopShadowEdit();\n    }\n\n    private delayUpdate() {\n        const window = this.editor?.getDocument().defaultView;\n\n        if (!window) {\n            return;\n        }\n\n        if (this.timer) {\n            window.clearTimeout(this.timer);\n        }\n\n        this.timer = window.setTimeout(() => {\n            this.timer = 0;\n            this.updateFormat?.();\n        }, this.delayUpdateTime);\n    }\n\n    private updateFormat() {\n        if (this.editor && this.onFormatChanged) {\n            const newFormatState = getFormatState(this.editor);\n\n            if (\n                !this.formatState ||\n                getObjectKeys(newFormatState).some(\n                    key => newFormatState[key] != this.formatState?.[key]\n                )\n            ) {\n                this.formatState = newFormatState;\n                this.onFormatChanged(newFormatState);\n            }\n        }\n    }\n}\n","import { AlignCenterButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setAlignment } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Align center\" button on the format ribbon\n */\nexport const alignCenterButton: RibbonButton<AlignCenterButtonStringKey> = {\n    key: 'buttonNameAlignCenter',\n    unlocalizedText: 'Align center',\n    iconName: 'AlignCenter',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setAlignment(editor, 'center');\n        }\n        return true;\n    },\n};\n","import { AlignLeftButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setAlignment } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Align left\" button on the format ribbon\n */\nexport const alignLeftButton: RibbonButton<AlignLeftButtonStringKey> = {\n    key: 'buttonNameAlignLeft',\n    unlocalizedText: 'Align left',\n    iconName: 'AlignLeft',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setAlignment(editor, 'left');\n        }\n        return true;\n    },\n};\n","import { AlignRightButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setAlignment } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Align right\" button on the format ribbon\n */\nexport const alignRightButton: RibbonButton<AlignRightButtonStringKey> = {\n    key: 'buttonNameAlignRight',\n    unlocalizedText: 'Align right',\n    iconName: 'AlignRight',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setAlignment(editor, 'right');\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { setBackgroundColor } from 'roosterjs-content-model';\nimport {\n    BackgroundColorButtonStringKey,\n    getBackgroundColorValue,\n    getButtons,\n    KnownRibbonButtonKey,\n    RibbonButton,\n} from 'roosterjs-react';\n\nconst originalButton = getButtons([KnownRibbonButtonKey.BackgroundColor])[0] as RibbonButton<\n    BackgroundColorButtonStringKey\n>;\n\n/**\n * @internal\n * \"Background color\" button on the format ribbon\n */\nexport const backgroundColorButton: RibbonButton<BackgroundColorButtonStringKey> = {\n    ...originalButton,\n    onClick: (editor, key) => {\n        // This check will always be true, add it here just to satisfy compiler\n        if (key != 'buttonNameBackgroundColor' && isContentModelEditor(editor)) {\n            setBackgroundColor(editor, getBackgroundColorValue(key).lightModeColor);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { QuoteButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { toggleBlockQuote } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Block quote\" button on the format ribbon\n */\nexport const blockQuoteButton: RibbonButton<QuoteButtonStringKey> = {\n    key: 'buttonNameQuote',\n    unlocalizedText: 'Quote',\n    iconName: 'RightDoubleQuote',\n    isChecked: formatState => !!formatState.isBlockQuote,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleBlockQuote(editor);\n        }\n        return true;\n    },\n};\n","import { BoldButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { toggleBold } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Bold\" button on the format ribbon\n */\nexport const boldButton: RibbonButton<BoldButtonStringKey> = {\n    key: 'buttonNameBold',\n    unlocalizedText: 'Bold',\n    iconName: 'Bold',\n    isChecked: formatState => formatState.isBold,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleBold(editor);\n        }\n        return true;\n    },\n};\n","import { BulletedListButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { toggleBullet } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Bulleted list\" button on the format ribbon\n */\nexport const bulletedListButton: RibbonButton<BulletedListButtonStringKey> = {\n    key: 'buttonNameBulletedList',\n    unlocalizedText: 'Bulleted list',\n    iconName: 'BulletedList',\n    isChecked: formatState => formatState.isBullet,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleBullet(editor);\n        }\n        return true;\n    },\n};\n","import { changeImage } from 'roosterjs-content-model';\nimport { createElement } from 'roosterjs-editor-dom';\nimport { CreateElementData } from 'roosterjs-editor-types';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\n\nconst FileInput: CreateElementData = {\n    tag: 'input',\n    attributes: {\n        type: 'file',\n        accept: 'image/*',\n        display: 'none',\n    },\n};\n\n/**\n * @internal\n * \"Change Image\" button on the format ribbon\n */\nexport const changeImageButton: RibbonButton<'buttonNameChangeImage'> = {\n    key: 'buttonNameChangeImage',\n    unlocalizedText: 'Change Image',\n    iconName: 'ImageSearch',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            const document = editor.getDocument();\n            const fileInput = createElement(FileInput, document) as HTMLInputElement;\n            document.body.appendChild(fileInput);\n\n            fileInput.addEventListener('change', () => {\n                if (fileInput.files) {\n                    for (let i = 0; i < fileInput.files.length; i++) {\n                        changeImage(editor, fileInput.files[i]);\n                    }\n                }\n            });\n\n            try {\n                fileInput.click();\n            } finally {\n                document.body.removeChild(fileInput);\n            }\n        }\n    },\n};\n","import { clearFormat } from 'roosterjs-content-model';\nimport { ClearFormatButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\n/**\n * \"Clear format\" button on the format ribbon\n */\nexport const clearFormatButton: RibbonButton<ClearFormatButtonStringKey> = {\n    key: 'buttonNameClearFormat',\n    unlocalizedText: 'Clear format',\n    iconName: 'ClearFormatting',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            clearFormat(editor);\n        }\n    },\n};\n","import { CodeButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor, toggleCode } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Code\" button on the format ribbon\n */\nexport const codeButton: RibbonButton<CodeButtonStringKey> = {\n    key: 'buttonNameCode',\n    unlocalizedText: 'Code',\n    iconName: 'Code',\n    isChecked: formatState => !!formatState.isCodeInline,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleCode(editor);\n        }\n    },\n};\n","import { changeFontSize } from 'roosterjs-content-model';\nimport { DecreaseFontSizeButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Decrease font size\" button on the format ribbon\n */\nexport const decreaseFontSizeButton: RibbonButton<DecreaseFontSizeButtonStringKey> = {\n    key: 'buttonNameDecreaseFontSize',\n    unlocalizedText: 'Decrease font size',\n    iconName: 'FontDecrease',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            changeFontSize(editor, 'decrease');\n        }\n    },\n};\n","import { DecreaseIndentButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setIndentation } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Decrease indent\" button on the format ribbon\n */\nexport const decreaseIndentButton: RibbonButton<DecreaseIndentButtonStringKey> = {\n    key: 'buttonNameDecreaseIndent',\n    unlocalizedText: 'Decrease indent',\n    iconName: 'DecreaseIndentLegacy',\n    flipWhenRtl: true,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setIndentation(editor, 'outdent');\n        }\n    },\n};\n","import { FontButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setFontName } from 'roosterjs-content-model';\n\ninterface FontName {\n    name: string;\n    family: string;\n    localizedName?: string;\n}\nconst FontNames: FontName[] = [\n    { name: 'Arial', family: 'Arial,Helvetica,sans-serif' },\n    { name: 'Arial Black', family: \"'Arial Black',Arial,sans-serif\" },\n    { name: 'Calibri', family: 'Calibri,Helvetica,sans-serif' },\n    { name: 'Calibri Light', family: \"'Calibri Light','Helvetica Light',sans-serif\" },\n    { name: 'Cambria', family: 'Cambria,Georgia,serif' },\n    { name: 'Candara', family: 'Candara,Optima,sans-serif' },\n    { name: 'Century Gothic', family: \"'Century Gothic',sans-serif\" },\n    { name: 'Comic Sans MS', family: \"'Comic Sans MS',Chalkboard,cursive\" },\n    { name: 'Consolas', family: 'Consolas,Courier,monospace' },\n    { name: 'Constantia', family: \"Constantia,'Hoefler Text',serif\" },\n    { name: 'Corbel', family: 'Corbel,Skia,sans-serif' },\n    { name: 'Courier New', family: \"'Courier New',monospace\" },\n    {\n        name: 'Franklin Gothic Book',\n        family: \"'Franklin Gothic Book','Avenir Next Condensed',sans-serif\",\n    },\n    {\n        name: 'Franklin Gothic Demi',\n        family: \"'Franklin Gothic Demi','Avenir Next Condensed Demi Bold',sans-serif\",\n    },\n    {\n        name: 'Franklin Gothic Medium',\n        family: \"'Franklin Gothic Medium','Avenir Next Condensed Medium',sans-serif\",\n    },\n    { name: 'Garamond', family: 'Garamond,Georgia,serif' },\n    { name: 'Georgia', family: 'Georgia,serif' },\n    { name: 'Impact', family: 'Impact,Charcoal,sans-serif' },\n    { name: 'Lucida Console', family: \"'Lucida Console',Monaco,monospace\" },\n    { name: 'Lucida Handwriting', family: \"'Lucida Handwriting','Apple Chancery',cursive\" },\n    { name: 'Lucida Sans Unicode', family: \"'Lucida Sans Unicode','Lucida Grande',sans-serif\" },\n    { name: 'Palatino Linotype', family: \"'Palatino Linotype','Book Antiqua',Palatino,serif\" },\n    {\n        name: 'Segoe UI',\n        family: \"'Segoe UI', 'Segoe UI Web (West European)', 'Helvetica Neue', sans-serif\",\n    },\n    { name: 'Sitka Heading', family: \"'Sitka Heading',Cochin,serif\" },\n    { name: 'Sitka Text', family: \"'Sitka Text',Cochin,serif\" },\n    { name: 'Tahoma', family: 'Tahoma,Geneva,sans-serif' },\n    { name: 'Times', family: \"Times,'Times New Roman',serif\" },\n    { name: 'Times New Roman', family: \"'Times New Roman',Times,serif\" },\n    { name: 'Trebuchet MS', family: \"'Trebuchet MS',Trebuchet,sans-serif\" },\n    { name: 'TW Cen MT', family: \"'TW Cen MT','Century Gothic',sans-serif\" },\n    { name: 'Verdana', family: 'Verdana,Geneva,sans-serif' },\n    { name: '-', family: 'FontDivider0' }, //divider between fonts for different scripts (order is by style)\n    {\n        name: 'Microsoft YaHei',\n        family: \"'Microsoft YaHei','微软雅黑',STHeiti,sans-serif\",\n        localizedName: '微软雅黑',\n    }, //chineseS Microsoft recommended font\n    { name: 'SimHei', family: \"SimHei,'黑体',STHeiti,sans-serif\", localizedName: '黑体' }, //chineseS\n    {\n        name: 'NSimSun',\n        family: \"NSimSun,'新宋体',SimSun,'宋体',SimSun-ExtB,'宋体-ExtB',STSong,serif\",\n        localizedName: '新宋体',\n    }, //chineseS\n    { name: 'FangSong', family: \"FangSong,'仿宋',STFangsong,serif\", localizedName: '仿宋' }, //chineseS\n    { name: 'SimLi', family: \"SimLi,'隶书','Baoli SC',serif\", localizedName: '隶书' }, //chineseS\n    { name: 'KaiTi', family: \"KaiTi,'楷体',STKaiti,serif\", localizedName: '楷体' }, //chineseS\n    { name: '-', family: 'FontDivider1' }, //divider between fonts for different scripts (order is by style)\n    {\n        name: 'Microsoft JhengHei',\n        family: \"'Microsoft JhengHei','微軟正黑體','Apple LiGothic',sans-serif\",\n        localizedName: '微軟正黑體',\n    }, //chineseT Microsoft recommended font\n    {\n        name: 'PMingLiU',\n        family: \"PMingLiU,'新細明體',PMingLiU-ExtB,'新細明體-ExtB','Apple LiSung',serif\",\n        localizedName: '新細明體',\n    }, //chineseT\n    { name: 'DFKai-SB', family: \"DFKai-SB,'標楷體','BiauKai',serif\", localizedName: '標楷體' }, //chineseT\n    { name: '-', family: 'FontDivider2' }, //divider between fonts for different scripts (order is alphabetical by foundry)\n    {\n        name: 'Meiryo',\n        family: \"Meiryo,'メイリオ','Hiragino Sans',sans-serif\",\n        localizedName: 'メイリオ',\n    }, //japanese\n    {\n        name: 'MS PGothic',\n        family:\n            \"'MS PGothic','ＭＳ Ｐゴシック','MS Gothic','ＭＳ ゴシック','Hiragino Kaku Gothic ProN',sans-serif\",\n        localizedName: 'ＭＳ Ｐゴシック',\n    }, //japanese\n    {\n        name: 'MS PMincho',\n        family: \"'MS PMincho','ＭＳ Ｐ明朝','MS Mincho','ＭＳ 明朝','Hiragino Mincho ProN',serif\",\n        localizedName: 'ＭＳ Ｐ明朝',\n    }, //japanese\n    {\n        name: 'Yu Gothic',\n        family: \"'Yu Gothic','游ゴシック','YuGothic',sans-serif\",\n        localizedName: '游ゴシック',\n    }, //japanese\n    { name: 'Yu Mincho', family: \"'Yu Mincho','游明朝','YuMincho',serif\", localizedName: '游明朝' }, //japanese\n    { name: '-', family: 'FontDivider3' }, //divider between fonts for different scripts (order is for legacy reasons)\n    {\n        name: 'Malgun Gothic',\n        family: \"'Malgun Gothic','맑은 고딕',AppleGothic,sans-serif\",\n        localizedName: '맑은 고딕',\n    }, //korean Microsoft recommended font\n    { name: 'Gulim', family: \"Gulim,'굴림','Nanum Gothic',sans-serif\", localizedName: '굴림' }, //korean\n    { name: 'Dotum', family: \"Dotum,'돋움',AppleGothic,sans-serif\", localizedName: '돋움' }, //korean\n    { name: 'Batang', family: \"Batang,'바탕',AppleMyungjo,serif\", localizedName: '바탕' }, //korean\n    { name: 'BatangChe', family: \"BatangChe,'바탕체',AppleMyungjo,serif\", localizedName: '바탕체' }, //korean\n    { name: 'Gungsuh', family: \"Gungsuh,'궁서',GungSeo,serif\", localizedName: '궁서' }, //korean\n    { name: '-', family: 'FontDivider4' }, //divider between fonts for different scripts (order is alphabetical)\n    { name: 'Leelawadee UI', family: \"'Leelawadee UI',Thonburi,sans-serif\" }, //thai Microsoft recommended font\n    { name: 'Angsana New', family: \"'Angsana New','Leelawadee UI',Sathu,serif\" }, //thai\n    { name: 'Cordia New', family: \"'Cordia New','Leelawadee UI',Silom,sans-serif\" }, //thai\n    { name: 'DaunPenh', family: \"DaunPenh,'Leelawadee UI','Khmer MN',sans-serif\" }, //khmer\n    { name: '-', family: 'FontDivider5' }, //divider between fonts for different scripts (order is alphabetical)\n    { name: 'Nirmala UI', family: \"'Nirmala UI',sans-serif\" }, //indic Microsoft recommended font\n    { name: 'Gautami', family: \"Gautami,'Nirmala UI','Telugu MN',sans-serif\" }, //indic\n    { name: 'Iskoola Pota', family: \"'Iskoola Pota','Nirmala UI','Sinhala MN',sans-serif\" }, //indic\n    { name: 'Kalinga', family: \"Kalinga,'Nirmala UI','Oriya MN',sans-serif\" }, //indic\n    { name: 'Kartika', family: \"Kartika,'Nirmala UI','Malayalam MN',sans-serif\" }, //indic\n    { name: 'Latha', family: \"Latha,'Nirmala UI','Tamil MN',sans-serif\" }, //indic\n    { name: 'Mangal', family: \"Mangal,'Nirmala UI','Devanagari Sangam MN',sans-serif\" }, //indic\n    { name: 'Raavi', family: \"Raavi,'Nirmala UI','Gurmukhi MN',sans-serif\" }, //indic\n    { name: 'Shruti', family: \"Shruti,'Nirmala UI','Gujarati Sangam MN',sans-serif\" }, //indic\n    { name: 'Tunga', family: \"Tunga,'Nirmala UI','Kannada MN',sans-serif\" }, //indic\n    { name: 'Vrinda', family: \"Vrinda,'Nirmala UI','Bangla MN',sans-serif\" }, //indic\n    { name: '-', family: 'FontDivider6' }, //divider between fonts for different scripts\n    { name: 'Nyala', family: 'Nyala,Kefa,sans-serif' }, //other-ethiopic\n    { name: 'Sylfaen', family: 'Sylfaen,Mshtakan,Menlo,serif' }, //other-armenian-georgian\n];\n\nconst DropDownItems = FontNames.reduce((items, font) => {\n    items[font.family] = font.localizedName || font.name;\n    return items;\n}, <Record<string, string>>{});\n\nconst LowerCaseFontMap = FontNames.reduce((items, font) => {\n    items[font.name.toLowerCase()] = font.family;\n    return items;\n}, <Record<string, string>>{});\n\nconst FirstFontRegex = /^['\"]?([^'\",]+)/i;\n\n/**\n * @internal\n * \"Font\" button on the format ribbon\n */\nexport const fontButton: RibbonButton<FontButtonStringKey> = {\n    key: 'buttonNameFont',\n    unlocalizedText: 'Font',\n    iconName: 'Font',\n    dropDownMenu: {\n        items: DropDownItems,\n        getSelectedItemKey: formatState => {\n            const matches = formatState.fontName?.match(FirstFontRegex);\n            const firstName = matches?.[1]?.toLowerCase();\n            const selectedKey = (firstName && LowerCaseFontMap[firstName]) || '';\n\n            return selectedKey;\n        },\n        allowLivePreview: true,\n    },\n    onClick: (editor, font) => {\n        if (isContentModelEditor(editor)) {\n            setFontName(editor, font);\n        }\n    },\n};\n","import { FontSizeButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setFontSize } from 'roosterjs-content-model';\n\nconst FONT_SIZES = [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];\n\n/**\n * @internal\n * \"Font Size\" button on the format ribbon\n */\nexport const fontSizeButton: RibbonButton<FontSizeButtonStringKey> = {\n    key: 'buttonNameFontSize',\n    unlocalizedText: 'Font size',\n    iconName: 'FontSize',\n    dropDownMenu: {\n        items: FONT_SIZES.reduce((map, size) => {\n            map[size + 'pt'] = size.toString();\n            return map;\n        }, <Record<string, string>>{}),\n        getSelectedItemKey: formatState => formatState.fontSize,\n        allowLivePreview: true,\n    },\n    onClick: (editor, size) => {\n        if (isContentModelEditor(editor)) {\n            setFontSize(editor, size);\n        }\n    },\n};\n","import FormatPainterPlugin from '../../contentModel/plugins/FormatPainterPlugin';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\n\n/**\n * @internal\n * \"Format Painter\" button on the format ribbon\n */\nexport const formatPainterButton: RibbonButton<'formatPainter'> = {\n    key: 'formatPainter',\n    unlocalizedText: 'Format painter',\n    iconName: 'Brush',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            FormatPainterPlugin.startFormatPainter(editor);\n        }\n        return true;\n    },\n};\n","import { formatTable } from 'roosterjs-content-model';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { PREDEFINED_STYLES } from '../../sidePane/shared/PredefinedTableStyles';\nimport { RibbonButton } from 'roosterjs-react';\n\nexport const formatTableButton: RibbonButton<'ribbonButtonTableFormat'> = {\n    key: 'ribbonButtonTableFormat',\n    iconName: 'TableComputed',\n    unlocalizedText: 'Format Table',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            DEFAULT: 'Default',\n            DEFAULT_WITH_BACKGROUND_COLOR: 'Default with background color',\n            GRID_WITHOUT_BORDER: 'Gride without border',\n            LIST: 'list',\n            BANDED_ROWS_FIRST_COLUMN_NO_BORDER: 'Banded rows first column no border',\n            EXTERNAL: 'External',\n            NO_HEADER_VERTICAL: 'No header vertical',\n            ESPECIAL_TYPE_1: 'Especial type 1',\n            ESPECIAL_TYPE_2: 'Especial type 2',\n            ESPECIAL_TYPE_3: 'Especial type 3',\n            CLEAR: 'Clear',\n        },\n    },\n    onClick: (editor, key) => {\n        const format = PREDEFINED_STYLES[key]?.('#ABABAB', '#ABABAB20');\n\n        if (format && isContentModelEditor(editor)) {\n            formatTable(editor, format);\n        }\n    },\n};\n","import { getButtons, getTextColorValue, KnownRibbonButtonKey } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setImageBorder } from 'roosterjs-content-model';\n\nconst originalButton = getButtons([KnownRibbonButtonKey.TextColor])[0] as RibbonButton<\n    'buttonNameImageBorderColor'\n>;\n\n/**\n * @internal\n * \"Image Border Color\" button on the format ribbon\n */\nexport const imageBorderColorButton: RibbonButton<'buttonNameImageBorderColor'> = {\n    ...originalButton,\n    unlocalizedText: 'Image Border Color',\n    iconName: 'Photo2',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    onClick: (editor, key) => {\n        // This check will always be true, add it here just to satisfy compiler\n        if (key != 'buttonNameImageBorderColor' && isContentModelEditor(editor)) {\n            setImageBorder(editor, { color: getTextColorValue(key).lightModeColor }, '5px');\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setImageBorder } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Remove Image Border\" button on the format ribbon\n */\nexport const imageBorderRemoveButton: RibbonButton<'buttonNameImageBorderRemove'> = {\n    key: 'buttonNameImageBorderRemove',\n    unlocalizedText: 'Remove Image Border',\n    iconName: 'Cancel',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setImageBorder(editor, null);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setImageBorder } from 'roosterjs-content-model';\n\nconst STYLES: Record<string, string> = {\n    dashed: 'dashed',\n    dotted: 'dotted',\n    solid: 'solid',\n    double: 'doubled',\n    groove: 'groove',\n    ridge: 'ridge',\n    inset: 'inset',\n    outset: 'outset',\n};\n\n/**\n * @internal\n * \"Image Border Style\" button on the format ribbon\n */\nexport const imageBorderStyleButton: RibbonButton<'buttonNameImageBorderStyle'> = {\n    key: 'buttonNameImageBorderStyle',\n    unlocalizedText: 'Image Border Style',\n    iconName: 'BorderDash',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    dropDownMenu: {\n        items: STYLES,\n        allowLivePreview: true,\n    },\n    onClick: (editor, style) => {\n        if (isContentModelEditor(editor)) {\n            setImageBorder(editor, { style: style }, '5px');\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setImageBorder } from 'roosterjs-content-model';\n\nconst WIDTH = [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];\n\n/**\n * @internal\n * \"Image Border Width\" button on the format ribbon\n */\nexport const imageBorderWidthButton: RibbonButton<'buttonNameImageBorderWidth'> = {\n    key: 'buttonNameImageBorderWidth',\n    unlocalizedText: 'Image Border Width',\n    iconName: 'Photo2',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    dropDownMenu: {\n        items: WIDTH.reduce((map, size) => {\n            map[size + 'pt'] = size.toString();\n            return map;\n        }, <Record<string, string>>{}),\n        allowLivePreview: true,\n    },\n    onClick: (editor, size) => {\n        if (isContentModelEditor(editor)) {\n            setImageBorder(\n                editor,\n                {\n                    width: size,\n                },\n                '5px'\n            );\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setImageBoxShadow } from 'roosterjs-content-model';\n\nconst STYLES_NAMES: Record<string, string> = {\n    noShadow: 'noShadow',\n    bottomRight: 'bottomRight',\n    bottom: 'bottom',\n    bottomLeft: 'bottomLeft',\n    right: 'right',\n    center: 'center',\n    left: 'left',\n    topRight: 'topRight',\n    top: 'top',\n    topLeft: 'topLeft',\n};\n\nconst STYLES: Record<string, string> = {\n    noShadow: '',\n    bottomRight: '4px 4px 3px #aaaaaa',\n    bottom: '0px 4px  3px 0px #aaaaaa',\n    bottomLeft: '-4px 4px 3px 3px #aaaaaa',\n    right: '4px 0px 3px 0px #aaaaaa',\n    center: '0px 0px 3px 3px #aaaaaa',\n    left: '-4px 0px 3px 0px #aaaaaa',\n    topRight: '4px -4px 3px 3px #aaaaaa',\n    top: '0px -4px 3px 0px #aaaaaa',\n    topLeft: '-4px -4px 3px 0px #aaaaaa',\n};\n\n/**\n * @internal\n * \"Image Shadow\" button on the format ribbon\n */\nexport const imageBoxShadowButton: RibbonButton<'buttonNameImageBoxSHadow'> = {\n    key: 'buttonNameImageBoxSHadow',\n    unlocalizedText: 'Image Shadow',\n    iconName: 'Photo2',\n    isDisabled: formatState => !formatState.canAddImageAltText,\n    dropDownMenu: {\n        items: STYLES_NAMES,\n        allowLivePreview: true,\n    },\n    onClick: (editor, size) => {\n        if (isContentModelEditor(editor)) {\n            setImageBoxShadow(editor, STYLES[size]);\n        }\n        return true;\n    },\n};\n","import { changeFontSize } from 'roosterjs-content-model';\nimport { IncreaseFontSizeButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Increase font size\" button on the format ribbon\n */\nexport const increaseFontSizeButton: RibbonButton<IncreaseFontSizeButtonStringKey> = {\n    key: 'buttonNameIncreaseFontSize',\n    unlocalizedText: 'Increase font size',\n    iconName: 'FontIncrease',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            changeFontSize(editor, 'increase');\n        }\n    },\n};\n","import { IncreaseIndentButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setIndentation } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Increase indent\" button on the format ribbon\n */\nexport const increaseIndentButton: RibbonButton<IncreaseIndentButtonStringKey> = {\n    key: 'buttonNameIncreaseIndent',\n    unlocalizedText: 'Increase indent',\n    iconName: 'IncreaseIndentLegacy',\n    flipWhenRtl: true,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setIndentation(editor, 'indent');\n        }\n    },\n};\n","import { createElement } from 'roosterjs-editor-dom';\nimport { CreateElementData } from 'roosterjs-editor-types';\nimport { insertImage } from 'roosterjs-content-model';\nimport { InsertImageButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\nconst FileInput: CreateElementData = {\n    tag: 'input',\n    attributes: {\n        type: 'file',\n        accept: 'image/*',\n        display: 'none',\n    },\n};\n\n/**\n * @internal\n * \"Insert image\" button on the format ribbon\n */\nexport const insertImageButton: RibbonButton<InsertImageButtonStringKey> = {\n    key: 'buttonNameInsertImage',\n    unlocalizedText: 'Insert image',\n    iconName: 'Photo2',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            const document = editor.getDocument();\n            const fileInput = createElement(FileInput, document) as HTMLInputElement;\n            document.body.appendChild(fileInput);\n\n            fileInput.addEventListener('change', () => {\n                if (fileInput.files) {\n                    for (let i = 0; i < fileInput.files.length; i++) {\n                        insertImage(editor, fileInput.files[i]);\n                    }\n                }\n            });\n\n            try {\n                fileInput.click();\n            } finally {\n                document.body.removeChild(fileInput);\n            }\n        }\n    },\n};\n","import showInputDialog from 'roosterjs-react/lib/inputDialog/utils/showInputDialog';\nimport { adjustLinkSelection, insertLink } from 'roosterjs-content-model';\nimport { InsertLinkButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Insert link\" button on the format ribbon\n */\nexport const insertLinkButton: RibbonButton<InsertLinkButtonStringKey> = {\n    key: 'buttonNameInsertLink',\n    unlocalizedText: 'Insert link',\n    iconName: 'Link',\n    // isDisabled: formatState => !!formatState.isMultilineSelection,\n    onClick: (editor, _, strings, uiUtilities) => {\n        if (isContentModelEditor(editor)) {\n            const [displayText, url] = adjustLinkSelection(editor);\n            const items = {\n                url: {\n                    autoFocus: true,\n                    labelKey: 'insertLinkDialogUrl' as const,\n                    unlocalizedLabel: 'Web address (URL)',\n                    initValue: url,\n                },\n                displayText: {\n                    labelKey: 'insertLinkDialogDisplayAs' as const,\n                    unlocalizedLabel: 'Display as',\n                    initValue: displayText,\n                },\n            };\n\n            showInputDialog(\n                uiUtilities,\n                'insertLinkTitle',\n                'Insert link',\n                items,\n                strings,\n                (itemName, newValue, values) => {\n                    if (itemName == 'url' && values.displayText == values.url) {\n                        values.displayText = newValue;\n                        values.url = newValue;\n                        return values;\n                    } else {\n                        return null;\n                    }\n                }\n            ).then(result => {\n                editor.focus();\n\n                if (\n                    result &&\n                    result.url &&\n                    (result.displayText != displayText || result.url != url)\n                ) {\n                    insertLink(editor, result.url, result.url, result.displayText);\n                }\n            });\n        }\n    },\n};\n","import { getButtons, KnownRibbonButtonKey } from 'roosterjs-react';\nimport { insertTable } from 'roosterjs-content-model';\nimport { InsertTableButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\n\nconst originalPasteButton: RibbonButton<InsertTableButtonStringKey> = getButtons([\n    KnownRibbonButtonKey.InsertTable,\n])[0] as RibbonButton<InsertTableButtonStringKey>;\n\nexport const insertTableButton: RibbonButton<InsertTableButtonStringKey> = {\n    ...originalPasteButton,\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor)) {\n            const { row, col } = parseKey(key);\n            insertTable(editor, col, row);\n        }\n    },\n};\n\nfunction parseKey(key: string): { row: number; col: number } {\n    const [row, col] = key.split(',');\n    return {\n        row: parseInt(row),\n        col: parseInt(col),\n    };\n}\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { ItalicButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { toggleItalic } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Italic\" button on the format ribbon\n */\nexport const italicButton: RibbonButton<ItalicButtonStringKey> = {\n    key: 'buttonNameItalic',\n    unlocalizedText: 'Italic',\n    iconName: 'Italic',\n    isChecked: formatState => formatState.isItalic,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleItalic(editor);\n        }\n        return true;\n    },\n};\n","import showInputDialog from 'roosterjs-react/lib/inputDialog/utils/showInputDialog';\nimport { CancelButtonStringKey, OkButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setListStartNumber } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Bulleted list\" button on the format ribbon\n */\nexport const listStartNumberButton: RibbonButton<\n    | 'ribbonButtonSetStartNumber'\n    | 'ribbonButtonSetStartNumberTo1'\n    | 'ribbonButtonSetStartNumberCustomize'\n    | OkButtonStringKey\n    | CancelButtonStringKey\n> = {\n    key: 'ribbonButtonSetStartNumber',\n    dropDownMenu: {\n        items: {\n            ribbonButtonSetStartNumberTo1: 'Restart at 1',\n            ribbonButtonSetStartNumberCustomize: 'Start numbering value',\n        },\n    },\n    unlocalizedText: 'Set list start number',\n    iconName: 'NumberSymbol',\n    isDisabled: formatState => !formatState.isNumbering,\n    onClick: (editor, key, strings, uiUtility) => {\n        const li = editor.getElementAtCursor('li') as HTMLLIElement;\n\n        if (li && isContentModelEditor(editor)) {\n            if (key == 'ribbonButtonSetStartNumberCustomize') {\n                showInputDialog(\n                    uiUtility,\n                    'ribbonButtonSetStartNumberCustomize',\n                    'Start numbering value',\n                    {\n                        startNumber: {\n                            labelKey: null,\n                            unlocalizedLabel: null,\n                            initValue: '1',\n                        },\n                    },\n                    strings\n                ).then(values => {\n                    const newValue = parseInt(values.startNumber);\n\n                    if (newValue > 0) {\n                        editor.select(li);\n                        setListStartNumber(editor, newValue);\n                    }\n                });\n            } else {\n                editor.select(li);\n                setListStartNumber(editor, 1);\n            }\n        }\n\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { LtrButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { setDirection } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Left to right\" button on the format ribbon\n */\nexport const ltrButton: RibbonButton<LtrButtonStringKey> = {\n    key: 'buttonNameLtr',\n    unlocalizedText: 'Left to right',\n    iconName: 'BidiLtr',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setDirection(editor, 'ltr');\n        }\n\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { NumberedListButtonStringKey, RibbonButton } from 'roosterjs-react';\nimport { toggleNumbering } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Numbering list\" button on the format ribbon\n */\nexport const numberedListButton: RibbonButton<NumberedListButtonStringKey> = {\n    key: 'buttonNameNumberedList',\n    unlocalizedText: 'Numbered List',\n    iconName: 'NumberedList',\n    isChecked: formatState => formatState.isNumbering,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleNumbering(editor);\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { removeLink } from 'roosterjs-content-model';\nimport { RemoveLinkButtonStringKey, RibbonButton } from 'roosterjs-react';\n\n/**\n * @internal\n * \"Remove link\" button on the format ribbon\n */\nexport const removeLinkButton: RibbonButton<RemoveLinkButtonStringKey> = {\n    key: 'buttonNameRemoveLink',\n    unlocalizedText: 'Remove link',\n    iconName: 'RemoveLink',\n    isDisabled: formatState => !formatState.canUnlink,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            removeLink(editor);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton, RtlButtonStringKey } from 'roosterjs-react';\nimport { setDirection } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Right to left\" button on the format ribbon\n */\nexport const rtlButton: RibbonButton<RtlButtonStringKey> = {\n    key: 'buttonNameRtl',\n    unlocalizedText: 'Right to left',\n    iconName: 'BidiRtl',\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            setDirection(editor, 'rtl');\n        }\n        return true;\n    },\n};\n","import { BulletListType } from 'roosterjs-editor-types';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setListStyle } from 'roosterjs-content-model';\n\nconst dropDownMenuItems = {\n    [BulletListType.Disc]: 'Disc',\n    [BulletListType.Dash]: 'Dash',\n    [BulletListType.Square]: 'Square',\n    [BulletListType.ShortArrow]: 'ShortArrow',\n    [BulletListType.LongArrow]: 'LongArrow',\n    [BulletListType.UnfilledArrow]: 'UnfilledArrow',\n    [BulletListType.Hyphen]: 'Hyphen',\n    [BulletListType.DoubleLongArrow]: 'DoubleLongArrow',\n    [BulletListType.Circle]: 'Circle',\n};\n\nexport const setBulletedListStyleButton: RibbonButton<'ribbonButtonBulletedListStyle'> = {\n    key: 'ribbonButtonBulletedListStyle',\n    dropDownMenu: { items: dropDownMenuItems },\n    unlocalizedText: 'Set unordered list style',\n    iconName: 'BulletedList',\n    isDisabled: formatState => !formatState.isBullet,\n    onClick: (editor, key) => {\n        const li = editor.getElementAtCursor('li') as HTMLLIElement;\n        const value = parseInt(key) as BulletListType;\n\n        if (\n            isContentModelEditor(editor) &&\n            li &&\n            value >= BulletListType.Min &&\n            value <= BulletListType.Max\n        ) {\n            editor.select(li);\n\n            setListStyle(editor, {\n                unorderedStyleType: value,\n            });\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { setHeaderLevel } from 'roosterjs-content-model';\nimport {\n    getButtons,\n    HeaderButtonStringKey,\n    KnownRibbonButtonKey,\n    RibbonButton,\n} from 'roosterjs-react';\n\nconst originalHeadersButton: RibbonButton<HeaderButtonStringKey> = getButtons([\n    KnownRibbonButtonKey.Header,\n])[0] as RibbonButton<HeaderButtonStringKey>;\nconst keys: HeaderButtonStringKey[] = [\n    'buttonNameNoHeader',\n    'buttonNameHeader1',\n    'buttonNameHeader2',\n    'buttonNameHeader3',\n    'buttonNameHeader4',\n    'buttonNameHeader5',\n    'buttonNameHeader6',\n];\n\nexport const setHeaderLevelButton: RibbonButton<HeaderButtonStringKey> = {\n    dropDownMenu: {\n        ...originalHeadersButton.dropDownMenu,\n    },\n    key: 'buttonNameHeader',\n    unlocalizedText: 'Header',\n    iconName: 'Header1',\n    onClick: (editor, key) => {\n        const headerLevel = keys.indexOf(key);\n\n        if (isContentModelEditor(editor) && headerLevel >= 0) {\n            setHeaderLevel(editor, headerLevel as 0 | 1 | 2 | 3 | 4 | 5 | 6);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { NumberingListType } from 'roosterjs-editor-types';\nimport { RibbonButton } from 'roosterjs-react';\nimport { setListStyle } from 'roosterjs-content-model';\n\nconst dropDownMenuItems = {\n    [NumberingListType.Decimal]: 'Decimal',\n    [NumberingListType.DecimalDash]: 'DecimalDash',\n    [NumberingListType.DecimalParenthesis]: 'DecimalParenthesis',\n    [NumberingListType.DecimalDoubleParenthesis]: 'DecimalDoubleParenthesis',\n    [NumberingListType.LowerAlpha]: 'LowerAlpha',\n    [NumberingListType.LowerAlphaParenthesis]: 'LowerAlphaParenthesis',\n    [NumberingListType.LowerAlphaDoubleParenthesis]: 'LowerAlphaDoubleParenthesis',\n    [NumberingListType.LowerAlphaDash]: 'LowerAlphaDash',\n    [NumberingListType.UpperAlpha]: 'UpperAlpha',\n    [NumberingListType.UpperAlphaParenthesis]: 'UpperAlphaParenthesis',\n    [NumberingListType.UpperAlphaDoubleParenthesis]: 'UpperAlphaDoubleParenthesis',\n    [NumberingListType.UpperAlphaDash]: 'UpperAlphaDash',\n    [NumberingListType.LowerRoman]: 'LowerRoman',\n    [NumberingListType.LowerRomanParenthesis]: 'LowerRomanParenthesis',\n    [NumberingListType.LowerRomanDoubleParenthesis]: 'LowerRomanDoubleParenthesis',\n    [NumberingListType.LowerRomanDash]: 'LowerRomanDash',\n    [NumberingListType.UpperRoman]: 'UpperRoman',\n    [NumberingListType.UpperRomanParenthesis]: 'UpperRomanParenthesis',\n    [NumberingListType.UpperRomanDoubleParenthesis]: 'UpperRomanDoubleParenthesis',\n    [NumberingListType.UpperRomanDash]: 'UpperRomanDash',\n};\n\nexport const setNumberedListStyleButton: RibbonButton<'ribbonButtonNumberedListStyle'> = {\n    key: 'ribbonButtonNumberedListStyle',\n    dropDownMenu: { items: dropDownMenuItems },\n    unlocalizedText: 'Set ordered list style',\n    iconName: 'NumberedList',\n    isDisabled: formatState => !formatState.isNumbering,\n    onClick: (editor, key) => {\n        const li = editor.getElementAtCursor('li') as HTMLLIElement;\n        const value = parseInt(key) as NumberingListType;\n\n        if (\n            isContentModelEditor(editor) &&\n            li &&\n            value >= NumberingListType.Min &&\n            value <= NumberingListType.Max\n        ) {\n            editor.select(li);\n\n            setListStyle(editor, {\n                orderedStyleType: value,\n            });\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { setTableCellShade } from 'roosterjs-content-model';\nimport {\n    BackgroundColorKeys,\n    getBackgroundColorValue,\n    getButtons,\n    KnownRibbonButtonKey,\n    RibbonButton,\n} from 'roosterjs-react';\n\nconst originalBackgroundColorButton: RibbonButton<BackgroundColorKeys> = getButtons([\n    KnownRibbonButtonKey.BackgroundColor,\n])[0] as RibbonButton<BackgroundColorKeys>;\n\nexport const setTableCellShadeButton: RibbonButton<\n    'ribbonButtonSetTableCellShade' | BackgroundColorKeys\n> = {\n    dropDownMenu: {\n        ...originalBackgroundColorButton.dropDownMenu,\n        allowLivePreview: true,\n    },\n    key: 'ribbonButtonSetTableCellShade',\n    unlocalizedText: 'Set table shade color',\n    iconName: 'BackgroundColor',\n    isDisabled: formatState => !formatState.isInTable,\n    onClick: (editor, key) => {\n        if (key != 'ribbonButtonSetTableCellShade' && isContentModelEditor(editor)) {\n            const color = getBackgroundColorValue(key);\n\n            // Content Model doesn't need dark mode color at this point, so always pass in light mode color\n            setTableCellShade(editor, color.lightModeColor);\n        }\n    },\n};\n","import { formatTable } from 'roosterjs-content-model';\nimport { getFormatState } from 'roosterjs-editor-api';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\n\nexport const setTableHeaderButton: RibbonButton<'ribbonButtonSetTableHeader'> = {\n    key: 'ribbonButtonSetTableHeader',\n    unlocalizedText: 'Toggle table header',\n    iconName: 'Header',\n    isDisabled: formatState => !formatState.isInTable,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            const format = getFormatState(editor);\n            formatTable(editor, { hasHeaderRow: !format.tableHasHeader }, true /*keepCellShade*/);\n        }\n    },\n};\n","import { RibbonButton } from 'roosterjs-react';\nimport { getFormatState, isContentModelEditor, setParagraphMargin } from 'roosterjs-content-model';\n\nconst spaceAfterButtonKey = 'buttonNameSpaceAfter';\nconst spaceBeforeButtonKey = 'buttonNameSpaceBefore';\n\n/**\n * @internal\n * \"Add space after\" button on the format ribbon\n */\nexport const spaceAfterButton: RibbonButton<typeof spaceAfterButtonKey> = {\n    key: spaceAfterButtonKey,\n    unlocalizedText: 'Remove space after',\n    iconName: 'CaretDown8',\n    isChecked: formatState => !formatState.marginBottom || parseInt(formatState.marginBottom) <= 0,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            const marginBottom = getFormatState(editor).marginBottom;\n            setParagraphMargin(\n                editor,\n                undefined /* marginTop */,\n                parseInt(marginBottom) ? null : '8pt'\n            );\n        }\n        return true;\n    },\n};\n\n/**\n * @internal\n * \"Add space before\" button on the format ribbon\n */\nexport const spaceBeforeButton: RibbonButton<typeof spaceBeforeButtonKey> = {\n    key: spaceBeforeButtonKey,\n    unlocalizedText: 'Add space before',\n    iconName: 'CaretUp8',\n    isChecked: formatState => parseInt(formatState.marginTop) > 0,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            const marginTop = getFormatState(editor).marginTop;\n            setParagraphMargin(\n                editor,\n                parseInt(marginTop) ? null : '12pt',\n                undefined /* marginBottom */\n            );\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor, setSpacing } from 'roosterjs-content-model';\nimport type { RibbonButton } from 'roosterjs-react';\n\nconst SPACING_OPTIONS = ['1.0', '1.15', '1.5', '2.0'];\nconst NORMAL_SPACING = 1.2;\nconst spacingButtonKey = 'buttonNameSpacing';\n\nfunction findClosest(lineHeight?: string) {\n    if (Number.isNaN(+lineHeight)) {\n        return '';\n    }\n    const query = +lineHeight / NORMAL_SPACING;\n    return SPACING_OPTIONS.find(opt => Math.abs(query - +opt) < 0.05);\n}\n\n/**\n * @internal\n * \"Spacing\" button on the format ribbon\n */\nexport const spacingButton: RibbonButton<typeof spacingButtonKey> = {\n    key: spacingButtonKey,\n    unlocalizedText: 'Spacing',\n    iconName: 'LineSpacing',\n    dropDownMenu: {\n        items: SPACING_OPTIONS.reduce((map, size) => {\n            map[size] = size;\n            return map;\n        }, <Record<string, string>>{}),\n        getSelectedItemKey: formatState => findClosest(formatState.lineHeight),\n        allowLivePreview: true,\n    },\n    onClick: (editor, size) => {\n        if (isContentModelEditor(editor)) {\n            setSpacing(editor, +size * NORMAL_SPACING);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton, StrikethroughButtonStringKey } from 'roosterjs-react';\nimport { toggleStrikethrough } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Strikethrough\" button on the format ribbon\n */\nexport const strikethroughButton: RibbonButton<StrikethroughButtonStringKey> = {\n    key: 'buttonNameStrikethrough',\n    unlocalizedText: 'Strikethrough',\n    iconName: 'Strikethrough',\n    isChecked: formatState => formatState.isStrikeThrough,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleStrikethrough(editor);\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton, SubscriptButtonStringKey } from 'roosterjs-react';\nimport { toggleSubscript } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Subscript\" button on the format ribbon\n */\nexport const subscriptButton: RibbonButton<SubscriptButtonStringKey> = {\n    key: 'buttonNameSubscript',\n    unlocalizedText: 'Subscript',\n    iconName: 'Subscript',\n    isChecked: formatState => formatState.isSubscript,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleSubscript(editor);\n        }\n        return true;\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton, SuperscriptButtonStringKey } from 'roosterjs-react';\nimport { toggleSuperscript } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Superscript\" button on the format ribbon\n */\nexport const superscriptButton: RibbonButton<SuperscriptButtonStringKey> = {\n    key: 'buttonNameSuperscript',\n    unlocalizedText: 'Superscript',\n    iconName: 'Superscript',\n    isChecked: formatState => formatState.isSuperscript,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleSuperscript(editor);\n        }\n        return true;\n    },\n};\n","import { editTable } from 'roosterjs-content-model';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport {\n    RibbonButton,\n    TableEditAlignMenuItemStringKey,\n    TableEditAlignTableMenuItemStringKey,\n    TableEditDeleteMenuItemStringKey,\n    TableEditInsertMenuItemStringKey,\n    TableEditMenuItemStringKey,\n    TableEditMergeMenuItemStringKey,\n    TableEditSplitMenuItemStringKey,\n} from 'roosterjs-react';\n\nconst TableEditOperationMap: Partial<Record<TableEditMenuItemStringKey, TableOperation>> = {\n    menuNameTableInsertAbove: TableOperation.InsertAbove,\n    menuNameTableInsertBelow: TableOperation.InsertBelow,\n    menuNameTableInsertLeft: TableOperation.InsertLeft,\n    menuNameTableInsertRight: TableOperation.InsertRight,\n    menuNameTableDeleteTable: TableOperation.DeleteTable,\n    menuNameTableDeleteColumn: TableOperation.DeleteColumn,\n    menuNameTableDeleteRow: TableOperation.DeleteRow,\n    menuNameTableMergeAbove: TableOperation.MergeAbove,\n    menuNameTableMergeBelow: TableOperation.MergeBelow,\n    menuNameTableMergeLeft: TableOperation.MergeLeft,\n    menuNameTableMergeRight: TableOperation.MergeRight,\n    menuNameTableMergeCells: TableOperation.MergeCells,\n    menuNameTableSplitHorizontally: TableOperation.SplitHorizontally,\n    menuNameTableSplitVertically: TableOperation.SplitVertically,\n    menuNameTableAlignLeft: TableOperation.AlignCellLeft,\n    menuNameTableAlignCenter: TableOperation.AlignCellCenter,\n    menuNameTableAlignRight: TableOperation.AlignCellRight,\n    menuNameTableAlignTop: TableOperation.AlignCellTop,\n    menuNameTableAlignMiddle: TableOperation.AlignCellMiddle,\n    menuNameTableAlignBottom: TableOperation.AlignCellBottom,\n    menuNameTableAlignTableLeft: TableOperation.AlignLeft,\n    menuNameTableAlignTableCenter: TableOperation.AlignCenter,\n    menuNameTableAlignTableRight: TableOperation.AlignRight,\n};\n\nexport const tableInsertButton: RibbonButton<\n    'ribbonButtonTableInsert' | TableEditInsertMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableInsert',\n    iconName: 'InsertColumnsRight',\n    unlocalizedText: 'Insert',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableInsertAbove: 'Insert above',\n            menuNameTableInsertBelow: 'Insert below',\n            menuNameTableInsertLeft: 'Insert left',\n            menuNameTableInsertRight: 'Insert right',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableInsert') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n\nexport const tableDeleteButton: RibbonButton<\n    'ribbonButtonTableDelete' | TableEditDeleteMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableDelete',\n    iconName: 'DeleteTable',\n    unlocalizedText: 'Delete',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableDeleteColumn: 'Delete column',\n            menuNameTableDeleteRow: 'Delete row',\n            menuNameTableDeleteTable: 'Delete table',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableDelete') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n\nexport const tableMergeButton: RibbonButton<\n    'ribbonButtonTableMerge' | TableEditMergeMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableMerge',\n    iconName: 'TableComputed',\n    unlocalizedText: 'Merge',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableMergeAbove: 'Merge above',\n            menuNameTableMergeBelow: 'Merge below',\n            menuNameTableMergeLeft: 'Merge left',\n            menuNameTableMergeRight: 'Merge right',\n            '-': '-',\n            menuNameTableMergeCells: 'Merge selected cells',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableMerge') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n\nexport const tableSplitButton: RibbonButton<\n    'ribbonButtonTableSplit' | TableEditSplitMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableSplit',\n    iconName: 'TableComputed',\n    unlocalizedText: 'Split',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableSplitHorizontally: 'Split horizontally',\n            menuNameTableSplitVertically: 'Split vertically',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableSplit') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n\nexport const tableAlignCellButton: RibbonButton<\n    'ribbonButtonTableAlignCell' | TableEditAlignMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableAlignCell',\n    iconName: 'TableComputed',\n    unlocalizedText: 'Align table cell',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableAlignLeft: 'Align left',\n            menuNameTableAlignCenter: 'Align center',\n            menuNameTableAlignRight: 'Align right',\n            '-': '-',\n            menuNameTableAlignTop: 'Align top',\n            menuNameTableAlignMiddle: 'Align middle',\n            menuNameTableAlignBottom: 'Align bottom',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableAlignCell') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n\nexport const tableAlignTableButton: RibbonButton<\n    'ribbonButtonTableAlignTable' | TableEditAlignTableMenuItemStringKey\n> = {\n    key: 'ribbonButtonTableAlignTable',\n    iconName: 'TableComputed',\n    unlocalizedText: 'Align table',\n    isDisabled: formatState => !formatState.isInTable,\n    dropDownMenu: {\n        items: {\n            menuNameTableAlignTableLeft: 'Align left',\n            menuNameTableAlignTableCenter: 'Align center',\n            menuNameTableAlignTableRight: 'Align right',\n        },\n    },\n    onClick: (editor, key) => {\n        if (isContentModelEditor(editor) && key != 'ribbonButtonTableAlignTable') {\n            editTable(editor, TableEditOperationMap[key]);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { setTextColor } from 'roosterjs-content-model';\nimport {\n    getButtons,\n    getTextColorValue,\n    KnownRibbonButtonKey,\n    RibbonButton,\n    TextColorButtonStringKey,\n} from 'roosterjs-react';\n\nconst originalButton = getButtons([KnownRibbonButtonKey.TextColor])[0] as RibbonButton<\n    TextColorButtonStringKey\n>;\n\n/**\n * @internal\n * \"Text color\" button on the format ribbon\n */\nexport const textColorButton: RibbonButton<TextColorButtonStringKey> = {\n    ...originalButton,\n    onClick: (editor, key) => {\n        // This check will always be true, add it here just to satisfy compiler\n        if (key != 'buttonNameTextColor' && isContentModelEditor(editor)) {\n            setTextColor(editor, getTextColorValue(key).lightModeColor);\n        }\n    },\n};\n","import { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton, UnderlineButtonStringKey } from 'roosterjs-react';\nimport { toggleUnderline } from 'roosterjs-content-model';\n\n/**\n * @internal\n * \"Underline\" button on the format ribbon\n */\nexport const underlineButton: RibbonButton<UnderlineButtonStringKey> = {\n    key: 'buttonNameUnderline',\n    unlocalizedText: 'Underline',\n    iconName: 'Underline',\n    isChecked: formatState => formatState.isUnderline,\n    onClick: editor => {\n        if (isContentModelEditor(editor)) {\n            toggleUnderline(editor);\n        }\n        return true;\n    },\n};\n","import MainPaneBase from '../MainPaneBase';\nimport { RibbonButton } from 'roosterjs-react';\n\n/**\n * Key of localized strings of Dark mode button\n */\nexport type DarkModeButtonStringKey = 'buttonNameDarkMode';\n\n/**\n * \"Dark mode\" button on the format ribbon\n */\nexport const darkMode: RibbonButton<DarkModeButtonStringKey> = {\n    key: 'buttonNameDarkMode',\n    unlocalizedText: 'Dark Mode',\n    iconName: 'ClearNight',\n    isChecked: formatState => formatState.isDarkMode,\n    onClick: editor => {\n        editor.setDarkModeState(!editor.isDarkMode());\n        editor.focus();\n\n        // Let main pane know this state change so that it can be persisted when pop out/pop in\n        MainPaneBase.getInstance().toggleDarkMode();\n        return true;\n    },\n};\n","import { RibbonButton } from 'roosterjs-react';\nimport { trustedHTMLHandler } from '../../utils/trustedHTMLHandler';\n\n/**\n * Key of localized strings of Zoom button\n */\nexport type ExportButtonStringKey = 'buttonNameExport';\n\n/**\n * \"Export content\" button on the format ribbon\n */\nexport const exportContent: RibbonButton<ExportButtonStringKey> = {\n    key: 'buttonNameExport',\n    unlocalizedText: 'Export',\n    iconName: 'Export',\n    flipWhenRtl: true,\n    onClick: editor => {\n        const win = editor.getDocument().defaultView.open();\n        win.document.write(trustedHTMLHandler(editor.getContent()));\n    },\n};\n","import MainPaneBase from '../MainPaneBase';\nimport { RibbonButton } from 'roosterjs-react';\n\n/**\n * Key of localized strings of Popout button\n */\nexport type PopoutButtonStringKey = 'buttonNamePopout';\n\n/**\n * \"Popout\" button on the format ribbon\n */\nexport const popout: RibbonButton<PopoutButtonStringKey> = {\n    key: 'buttonNamePopout',\n    unlocalizedText: 'Open in a separate window',\n    iconName: 'OpenInNewWindow',\n    flipWhenRtl: true,\n    onClick: _ => {\n        MainPaneBase.getInstance().popout();\n    },\n};\n","import MainPaneBase from '../MainPaneBase';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { RibbonButton } from 'roosterjs-react';\n\nconst DropDownItems = {\n    'zoom50%': '50%',\n    'zoom75%': '75%',\n    'zoom100%': '100%',\n    'zoom150%': '150%',\n    'zoom200%': '200%',\n};\n\nconst DropDownValues: { [key in keyof typeof DropDownItems]: number } = {\n    'zoom50%': 0.5,\n    'zoom75%': 0.75,\n    'zoom100%': 1,\n    'zoom150%': 1.5,\n    'zoom200%': 2,\n};\n\n/**\n * Key of localized strings of Zoom button\n */\nexport type ZoomButtonStringKey = 'buttonNameZoom';\n\n/**\n * \"Zoom\" button on the format ribbon\n */\nexport const zoom: RibbonButton<ZoomButtonStringKey> = {\n    key: 'buttonNameZoom',\n    unlocalizedText: 'Zoom',\n    iconName: 'ZoomIn',\n    dropDownMenu: {\n        items: DropDownItems,\n        getSelectedItemKey: formatState =>\n            getObjectKeys(DropDownItems).filter(\n                key => DropDownValues[key] == formatState.zoomScale\n            )[0],\n    },\n    onClick: (editor, key) => {\n        const zoomScale = DropDownValues[key as keyof typeof DropDownItems];\n        editor.setZoomScale(zoomScale);\n        editor.focus();\n\n        // Let main pane know this state change so that it can be persisted when pop out/pop in\n        MainPaneBase.getInstance().setScale(zoomScale);\n        return true;\n    },\n};\n","import { insertEntity } from 'roosterjs-editor-api';\nimport {\n    createNumberDefinition,\n    createObjectDefinition,\n    findClosestElementAncestor,\n    getEntityFromElement,\n    getEntitySelector,\n    getMetadata,\n    setMetadata,\n} from 'roosterjs-editor-dom';\nimport {\n    EditorPlugin,\n    Entity,\n    EntityOperation,\n    EntityState,\n    IEditor,\n    PluginEvent,\n    PluginEventType,\n} from 'roosterjs-editor-types';\n\nconst EntityType = 'SampleEntity';\n\ninterface EntityMetadata {\n    count: number;\n}\n\nconst EntityMetadataDefinition = createObjectDefinition<EntityMetadata>({\n    count: createNumberDefinition(),\n});\n\nexport default class SampleEntityPlugin implements EditorPlugin {\n    private editor: IEditor;\n\n    getName() {\n        return 'SampleEntity';\n    }\n\n    initialize(editor: IEditor) {\n        this.editor = editor;\n    }\n\n    dispose() {\n        this.editor = null;\n    }\n\n    onPluginEvent(event: PluginEvent) {\n        if (\n            event.eventType == PluginEventType.KeyDown &&\n            event.rawEvent.key == 'm' &&\n            event.rawEvent.ctrlKey\n        ) {\n            const entityNode = this.createEntity();\n            let entity: Entity | undefined;\n\n            this.editor.addUndoSnapshot(\n                () => {\n                    entity = insertEntity(this.editor, EntityType, entityNode, true, true);\n                },\n                undefined /*changeSource*/,\n                false /*canUndoByBackspace*/,\n                {\n                    getEntityState: () => this.getEntityStates(entity),\n                }\n            );\n\n            event.rawEvent.preventDefault();\n        } else if (\n            event.eventType == PluginEventType.EntityOperation &&\n            event.entity.type == EntityType\n        ) {\n            switch (event.operation) {\n                case EntityOperation.NewEntity:\n                    this.dehydrate(event.entity);\n                    this.hydrate(event.entity);\n\n                    event.shouldPersist = true;\n\n                    break;\n\n                case EntityOperation.RemoveFromEnd:\n                case EntityOperation.RemoveFromStart:\n                case EntityOperation.Overwrite:\n                case EntityOperation.ReplaceTemporaryContent:\n                    this.dehydrate(event.entity);\n\n                    break;\n\n                case EntityOperation.UpdateEntityState:\n                    if (event.state) {\n                        setMetadata(\n                            event.entity.wrapper,\n                            JSON.parse(event.state),\n                            EntityMetadataDefinition\n                        );\n                        this.updateEntity(event.entity);\n                    }\n\n                    break;\n            }\n        }\n    }\n\n    private hydrate(entity: Entity) {\n        const containerDiv = entity.wrapper.querySelector('div');\n\n        const span = document.createElement('span');\n        const button = document.createElement('button');\n\n        containerDiv.appendChild(span);\n        containerDiv.appendChild(button);\n\n        button.textContent = 'Test entity';\n        button.addEventListener('click', this.onClickEntity);\n\n        this.updateEntity(entity);\n    }\n\n    private dehydrate(entity: Entity) {\n        const containerDiv = entity.wrapper.querySelector('div');\n        const button = containerDiv.querySelector('button');\n\n        if (button) {\n            button.removeEventListener('click', this.onClickEntity);\n            containerDiv.removeChild(button);\n        }\n    }\n\n    private updateEntity(entity: Entity, increase: number = 0) {\n        const metadata = getMetadata<EntityMetadata>(entity.wrapper);\n        const count = (metadata?.count || 0) + increase;\n\n        setMetadata(entity.wrapper, {\n            count,\n        });\n\n        entity.wrapper.querySelector('span').textContent = 'Count: ' + count;\n    }\n\n    private createEntity() {\n        const div = document.createElement('div');\n\n        return div;\n    }\n\n    private onClickEntity = (e: MouseEvent) => {\n        const wrapper = findClosestElementAncestor(\n            e.target as Node,\n            undefined,\n            getEntitySelector(EntityType)\n        );\n        const entity = getEntityFromElement(wrapper);\n\n        if (entity) {\n            this.editor.addUndoSnapshot(\n                () => {\n                    this.updateEntity(entity, 1);\n                },\n                undefined /*changeSource*/,\n                false /*canUndoByBackspace*/,\n                {\n                    getEntityState: () => this.getEntityStates(entity),\n                }\n            );\n        }\n    };\n\n    private getEntityStates(entity: Entity | undefined): EntityState[] {\n        return entity\n            ? [\n                  {\n                      id: entity.id,\n                      type: entity.type,\n                      state: entity.wrapper.dataset.editingInfo,\n                  },\n              ]\n            : undefined;\n    }\n}\n","import * as React from 'react';\nimport SidePanePlugin from '../SidePanePlugin';\n\nconst styles = require('./SidePane.scss');\n\nexport interface SidePaneProps {\n    plugins: SidePanePlugin[];\n    className?: string;\n}\n\nexport interface SidePaneState {\n    currentPane: SidePanePlugin;\n}\n\nexport default class SidePane extends React.Component<SidePaneProps, SidePaneState> {\n    private div = React.createRef<HTMLDivElement>();\n\n    constructor(props: SidePaneProps) {\n        super(props);\n        this.state = {\n            currentPane: this.props.plugins[0],\n        };\n\n        window.addEventListener('hashchange', this.updateStateFromHash);\n    }\n\n    componentDidMount() {\n        this.updateStateFromHash();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('hashchange', this.updateStateFromHash);\n    }\n\n    render() {\n        let className = (this.props.className || '') + ' ' + styles.sidePane;\n        return (\n            <div className={className} ref={this.div}>\n                {this.props.plugins.map(this.renderSidePane)}\n            </div>\n        );\n    }\n\n    changeWidth(widthDelta: number) {\n        let div = this.div.current;\n        if (div) {\n            div.style.width = div.clientWidth + widthDelta + 'px';\n        }\n    }\n\n    updateHash = (pluginName?: string, path?: string[]) => {\n        window.location.hash =\n            (pluginName || this.state.currentPane.getName()) + (path ? '/' + path.join('/') : '');\n    };\n\n    private updateStateFromHash = () => {\n        let hash = window.location.hash;\n        let hashes = (hash ? hash.substr(1) : '').split('/');\n        let pluginName = hashes[0];\n        let plugin =\n            pluginName && this.props.plugins.filter(plugin => plugin.getName() == pluginName)[0];\n\n        if (plugin) {\n            this.setState({\n                currentPane: plugin,\n            });\n\n            window.setTimeout(() => {\n                hashes.splice(0, 1);\n                if (plugin.setHashPath) {\n                    plugin.setHashPath(hashes);\n                }\n            }, 0);\n        }\n    };\n\n    private renderSidePane = (plugin: SidePanePlugin): JSX.Element => {\n        let title = plugin.getTitle();\n        let isCurrent = this.state.currentPane == plugin;\n        return (\n            <div key={title} className={isCurrent ? styles.activePane : styles.inactivePane}>\n                <div className={styles.title} onClick={() => this.updateHash(plugin.getName())}>\n                    {title}\n                </div>\n                <div className={styles.bodyContainer}>\n                    <div className={styles.body}>{plugin.renderSidePane(this.updateHash)}</div>\n                </div>\n            </div>\n        );\n    };\n}\n","import * as React from 'react';\nimport SidePanePlugin from '../SidePanePlugin';\nimport { IEditor } from 'roosterjs-editor-types';\nimport { SidePaneElement, SidePaneElementProps } from './SidePaneElement';\n\ninterface SidePaneComponent<P extends SidePaneElementProps>\n    extends React.Component<P, any>,\n        SidePaneElement {}\n\nexport default abstract class SidePanePluginImpl<\n    T extends SidePaneComponent<P>,\n    P extends SidePaneElementProps\n> implements SidePanePlugin {\n    protected editor: IEditor;\n    private component = React.createRef<T>();\n\n    constructor(\n        private readonly componentCtor: { new (props: P): T },\n        private readonly pluginName: string,\n        private readonly title: string\n    ) {}\n\n    getName() {\n        return this.pluginName;\n    }\n\n    initialize(editor: IEditor) {\n        this.editor = editor;\n    }\n\n    dispose() {\n        this.editor = null;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    renderSidePane(updateHash: (pluginName?: string, path?: string[]) => void) {\n        return React.createElement<P>(this.componentCtor, {\n            ...this.getComponentProps({\n                updateHash,\n            }),\n            ref: this.component,\n        });\n    }\n\n    setHashPath(path: string[]) {\n        if (this.component.current && this.component.current.setHashPath) {\n            this.component.current.setHashPath(path);\n        }\n    }\n\n    protected abstract getComponentProps(baseProps: SidePaneElementProps): P;\n\n    protected getComponent(callback: (component: T) => void) {\n        if (this.component.current) {\n            callback(this.component.current);\n        }\n    }\n}\n","import * as React from 'react';\nimport apiEntries, { ApiPlaygroundReactComponent } from './apiEntries';\nimport ApiPaneProps from './ApiPaneProps';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { PluginEvent } from 'roosterjs-editor-types';\nimport { SidePaneElement } from '../SidePaneElement';\n\nconst styles = require('./ApiPlaygroundPane.scss');\n\nexport interface ApiPlaygroundPaneState {\n    current: string;\n}\n\nexport default class ApiPlaygroundPane extends React.Component<ApiPaneProps, ApiPlaygroundPaneState>\n    implements SidePaneElement {\n    private select = React.createRef<HTMLSelectElement>();\n    private pane = React.createRef<ApiPlaygroundReactComponent>();\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = { current: 'empty' };\n    }\n\n    render() {\n        let componentClass = apiEntries[this.state.current].component;\n        let pane: JSX.Element = null;\n        if (componentClass) {\n            pane = React.createElement(componentClass, { ...this.props, ref: this.pane });\n        }\n\n        return (\n            <>\n                <div className={styles.header}>\n                    <h3>Select an API to try</h3>\n\n                    <select ref={this.select} value={this.state.current} onChange={this.onChange}>\n                        {getObjectKeys(apiEntries).map(key => (\n                            <option value={key} key={key}>\n                                {apiEntries[key].name}\n                            </option>\n                        ))}\n                    </select>\n                </div>\n                {pane}\n            </>\n        );\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        if (this.pane.current && this.pane.current.onPluginEvent) {\n            this.pane.current.onPluginEvent(e);\n        }\n    }\n\n    setHashPath(path: string[]) {\n        let paneName = path && getObjectKeys(apiEntries).indexOf(path[0]) >= 0 ? path[0] : null;\n\n        if (paneName && paneName != this.state.current) {\n            this.setState({\n                current: paneName,\n            });\n        } else {\n            this.props.updateHash(null, [this.state.current]);\n        }\n    }\n\n    private onChange = () => {\n        this.props.updateHash(null, [this.select.current.value]);\n    };\n}\n","import ApiPaneProps from './ApiPaneProps';\nimport ApiPlaygroundPane from './ApiPlaygroundPane';\nimport SidePanePluginImpl from '../SidePanePluginImpl';\nimport { PluginEvent } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nexport default class ApiPlaygroundPlugin extends SidePanePluginImpl<\n    ApiPlaygroundPane,\n    ApiPaneProps\n> {\n    constructor() {\n        super(ApiPlaygroundPane, 'api', 'API Playground');\n    }\n\n    getComponentProps(base: SidePaneElementProps) {\n        return {\n            ...base,\n            getEditor: () => {\n                return this.editor;\n            },\n        };\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        this.getComponent(component => component.onPluginEvent(e));\n    }\n}\n","import * as React from 'react';\nimport ApiPaneProps, { ApiPlaygroundComponent } from './ApiPaneProps';\nimport BlockElementsPane from './blockElements/BlockElementsPane';\nimport GetDarkColorPane from './darkColor/GetDarkColorPane';\nimport GetSelectedRegionsPane from './region/GetSelectedRegionsPane';\nimport GetSelectionPane from './getSelection/getSelectionPane';\nimport InsertContentPane from './insertContent/InsertContentPane';\nimport InsertEntityPane from './insertEntity/InsertEntityPane';\nimport MatchLinkPane from './matchLink/MatchLinkPane';\nimport SanitizerPane from './sanitizer/SanitizerPane';\nimport VListPane from './vlist/VListPane';\nimport VTablePane from './vtable/VTablePane';\n\nexport interface ApiPlaygroundReactComponent\n    extends React.Component<ApiPaneProps, any>,\n        ApiPlaygroundComponent {}\n\ninterface ApiEntry {\n    name: string;\n    component?: { new (prpos: ApiPaneProps): ApiPlaygroundReactComponent };\n}\n\nconst apiEntries: { [key: string]: ApiEntry } = {\n    empty: {\n        name: 'Please select',\n    },\n    block: {\n        name: 'Block Elements',\n        component: BlockElementsPane,\n    },\n    sanitizer: {\n        name: 'HTML Sanitizer',\n        component: SanitizerPane,\n    },\n    matchlink: {\n        name: 'Match Link',\n        component: MatchLinkPane,\n    },\n    insertContent: {\n        name: 'Insert Content',\n        component: InsertContentPane,\n    },\n    region: {\n        name: 'Get Selected Regions',\n        component: GetSelectedRegionsPane,\n    },\n    entity: {\n        name: 'Insert Entity',\n        component: InsertEntityPane,\n    },\n    vlist: {\n        name: 'VList',\n        component: VListPane,\n    },\n    vtable: {\n        name: 'VTable',\n        component: VTablePane,\n    },\n    getDarkColor: {\n        name: 'getDarkColor',\n        component: GetDarkColorPane,\n    },\n    getSelection: {\n        name: 'getSelection',\n        component: GetSelectionPane,\n    },\n    more: {\n        name: 'Coming soon...',\n    },\n};\n\nexport default apiEntries;\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { BlockElement, PluginEvent, PluginEventType, PositionType } from 'roosterjs-editor-types';\nimport { createRange, isBlockElement } from 'roosterjs-editor-dom';\n\nconst styles = require('./BlockElementsPane.scss');\n\nexport interface BlockElementPaneState {\n    blocks: BlockElement[];\n}\n\nexport default class BlockElementsPane extends React.Component<\n    ApiPaneProps,\n    BlockElementPaneState\n> {\n    private checkGetBlocks = React.createRef<HTMLInputElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            blocks: [],\n        };\n    }\n\n    render() {\n        return (\n            <div>\n                <button onClick={this.onGetBlocks}>Get blocks</button>\n                <input\n                    type=\"checkbox\"\n                    id=\"checkGetBlocks\"\n                    ref={this.checkGetBlocks}\n                    onClick={this.update}\n                />\n                <label htmlFor=\"checkGetBlocks\">Auto refresh</label>\n                {this.state.blocks.map((block, index) => (\n                    <pre\n                        key={index}\n                        className={styles.block}\n                        onMouseOver={() => this.onMouseOver(block)}>\n                        {isNodeBlockElement(block) ? (\n                            this.renderBlock(block)\n                        ) : (\n                            <i onDoubleClick={() => this.collapse(block)}>\n                                {this.renderBlock(block)}\n                            </i>\n                        )}\n                    </pre>\n                ))}\n            </div>\n        );\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        if (\n            e.eventType == PluginEventType.KeyPress ||\n            e.eventType == PluginEventType.ContentChanged\n        ) {\n            if (this.checkGetBlocks.current.checked) {\n                this.update();\n            } else {\n                this.setBlocks([]);\n            }\n        }\n    }\n\n    private update = () => {\n        this.props.getEditor().runAsync(this.onGetBlocks);\n    };\n\n    private collapse(block: BlockElement) {\n        block.collapseToSingleElement();\n        this.props.getEditor().triggerContentChangedEvent();\n        if (!this.checkGetBlocks.current.checked) {\n            this.onGetBlocks();\n        }\n    }\n\n    private renderBlock(block: BlockElement): JSX.Element {\n        let isNodeBlock = isNodeBlockElement(block);\n        return (\n            <div\n                onDoubleClick={!isNodeBlock && (() => this.collapse(block))}\n                title={\n                    isNodeBlock\n                        ? 'This is a NodeBlockElement'\n                        : 'This is a StartEndBlockElement, double to collapse'\n                }\n                style={{ fontStyle: isNodeBlock ? 'normal' : 'italic' }}>\n                {getTextContent(block) || '<NO CONTENT>'}\n            </div>\n        );\n    }\n\n    private setBlocks(blocks: BlockElement[]) {\n        this.setState({\n            blocks: blocks,\n        });\n    }\n\n    private onGetBlocks = () => {\n        let traverser = this.props.getEditor().getBodyTraverser();\n        let block = traverser && traverser.currentBlockElement;\n        let blocks: BlockElement[] = [];\n\n        while (block) {\n            blocks.push(block);\n            block = traverser.getNextBlockElement();\n        }\n\n        this.setBlocks(blocks);\n    };\n\n    private onMouseOver = (block: BlockElement) => {\n        this.props\n            .getEditor()\n            .select(block.getStartNode(), 0, block.getEndNode(), PositionType.End);\n    };\n}\n\nfunction getTextContent(block: BlockElement): string {\n    return block.getStartNode() == block.getEndNode()\n        ? block.getStartNode().textContent\n        : createRange(block.getStartNode(), block.getEndNode()).toString();\n}\n\nfunction isNodeBlockElement(block: BlockElement): boolean {\n    return block.getStartNode() == block.getEndNode() && isBlockElement(block.getStartNode());\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { getDarkColor } from 'roosterjs-color-utils';\n\ninterface GetDarkColorPaneState {\n    lightColor: string;\n    darkColor: string;\n}\n\nconst styles = require('./GetDarkColorPane.scss');\n\nexport default class GetDarkColorPane extends React.Component<ApiPaneProps, GetDarkColorPaneState> {\n    private lightColor = React.createRef<HTMLInputElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            lightColor: '',\n            darkColor: '',\n        };\n    }\n\n    render() {\n        return (\n            <>\n                <div>\n                    Light Color:{' '}\n                    <input\n                        type=\"input\"\n                        ref={this.lightColor}\n                        onChange={this.onInputChange}\n                        value={this.state.lightColor}\n                    />\n                </div>\n                <hr />\n                <div>\n                    Light Color:\n                    <div className={styles.lightBackground}>\n                        <div\n                            className={styles.result}\n                            style={{ backgroundColor: this.state.lightColor }}\n                        />\n                    </div>\n                </div>\n                <div>\n                    DarkColor: <span>{this.state.darkColor}</span>\n                    <div className={styles.darkBackground}>\n                        <div\n                            className={styles.result}\n                            style={{ backgroundColor: this.state.darkColor }}\n                        />\n                    </div>\n                </div>\n            </>\n        );\n    }\n\n    private onInputChange = () => {\n        let lightColor = this.lightColor.current.value;\n        let darkColor = '';\n\n        try {\n            darkColor = getDarkColor(lightColor);\n        } catch (e) {\n            darkColor = e;\n        }\n\n        this.setState({\n            lightColor: lightColor,\n            darkColor: darkColor,\n        });\n    };\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport {\n    PluginEvent,\n    PluginEventType,\n    SelectionRangeEx,\n    SelectionRangeTypes,\n    TableSelection,\n} from 'roosterjs-editor-types';\n\ninterface SelectionPaneState {\n    selection: SelectionRangeEx;\n    selectionMessage: string;\n    isImageSelectionOption: boolean;\n    manualSelect: boolean;\n}\n\nconst styles = require('./getSelectionPane.scss');\n\nexport default class GetSelectionPane extends React.Component<ApiPaneProps, SelectionPaneState> {\n    private selectInfo = React.createRef<HTMLInputElement>();\n    private editor = this.props.getEditor();\n    private firstCellX = React.createRef<HTMLInputElement>();\n    private firstCellY = React.createRef<HTMLInputElement>();\n    private lastCellX = React.createRef<HTMLInputElement>();\n    private lastCellY = React.createRef<HTMLInputElement>();\n    private selectionType: Record<string, string> = {\n        [SelectionRangeTypes.Normal]: 'Normal',\n        [SelectionRangeTypes.TableSelection]: 'Table Selection',\n        [SelectionRangeTypes.ImageSelection]: 'Image Selection',\n    };\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            selection: null,\n            selectionMessage: '',\n            isImageSelectionOption: true,\n            manualSelect: false,\n        };\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        if (e.eventType == PluginEventType.SelectionChanged && !this.state.manualSelect) {\n            this.updateSelection();\n        }\n    }\n\n    private updateSelection = () => {\n        this.setState({\n            selection: this.editor ? this.editor.getSelectionRangeEx() : null,\n        });\n    };\n\n    private selectElement = () => {\n        const queryInfo = this.selectInfo.current.value;\n        if (queryInfo) {\n            if (this.state.isImageSelectionOption) {\n                const elementToSelect = this.editor\n                    .getDocument()\n                    .querySelector(`img[id$=\"${queryInfo}\"]`);\n                const select = elementToSelect ? this.editor.select(elementToSelect) : null;\n                this.setState({\n                    selection: select ? this.editor.getSelectionRangeEx() : null,\n                    selectionMessage: select ? 'Image Found' : 'Image not found',\n                });\n            } else {\n                const elementToSelect = this.editor\n                    .getDocument()\n                    .querySelector(`table[id$=\"${queryInfo}\"]`) as HTMLTableElement;\n                const coordinates = this.getCoordinates();\n                const select =\n                    elementToSelect && coordinates\n                        ? this.editor.select(elementToSelect, coordinates)\n                        : null;\n                this.setState({\n                    selection: select ? this.editor.getSelectionRangeEx() : null,\n                    selectionMessage: select ? 'Table found' : 'Table not found',\n                });\n            }\n        }\n    };\n\n    private getCoordinates = (): TableSelection => {\n        if (\n            this.firstCellX.current.value &&\n            this.firstCellY.current.value &&\n            this.lastCellX.current.value &&\n            this.lastCellY.current.value\n        ) {\n            const coordinates: TableSelection = {\n                firstCell: {\n                    x: parseInt(this.firstCellX.current.value),\n                    y: parseInt(this.firstCellY.current.value),\n                },\n                lastCell: {\n                    x: parseInt(this.lastCellX.current.value),\n                    y: parseInt(this.lastCellY.current.value),\n                },\n            };\n            return coordinates;\n        }\n        return null;\n    };\n\n    private createSelectionInfo = () => {\n        return (\n            <>\n                <div className={styles.containerInfo}>\n                    <span className={styles.title}>Selection Information</span>\n                    <div>Selection type: {this.selectionType[this.state.selection.type]}</div>\n                    <div>Are collapsed: {`${this.state.selection.areAllCollapsed}`}</div>\n                    {this.state.selection.type === SelectionRangeTypes.TableSelection && (\n                        <>\n                            <div>Coordinates</div>\n                            <div>\n                                First cell:\n                                <span> X: {this.state.selection.coordinates.firstCell.x}</span>\n                                <span> Y: {this.state.selection.coordinates.firstCell.y}</span>\n                            </div>\n                            <div>\n                                Last cell:\n                                <span> X: {this.state.selection.coordinates.lastCell.x}</span>\n                                <span> Y: {this.state.selection.coordinates.lastCell.y}</span>\n                            </div>\n                        </>\n                    )}\n                    {this.state.selection.type === SelectionRangeTypes.ImageSelection && (\n                        <>\n                            <div>Image Id: {this.state.selection.image.id}</div>\n                        </>\n                    )}\n                </div>\n            </>\n        );\n    };\n\n    private selectionOption = (label: string, checked: boolean, onChange: () => void) => {\n        return (\n            <>\n                <div>\n                    <label>\n                        <input\n                            className={styles.input}\n                            type=\"radio\"\n                            checked={checked}\n                            onChange={onChange}\n                        />\n                        {label}\n                    </label>\n                </div>\n            </>\n        );\n    };\n\n    private changeSelectionOption = () => {\n        this.setState({\n            isImageSelectionOption: !this.state.isImageSelectionOption,\n        });\n    };\n\n    private createCoordinatesInput = (\n        label: string,\n        coordinateRef: React.RefObject<HTMLInputElement>\n    ) => {\n        return (\n            <>\n                <div>\n                    <label>\n                        {label}\n                        <input\n                            className={styles.coordinates}\n                            min=\"0\"\n                            type=\"number\"\n                            ref={coordinateRef}\n                        />\n                    </label>\n                </div>\n            </>\n        );\n    };\n\n    private showManualSelection = () => {\n        this.setState({\n            manualSelect: !this.state.manualSelect,\n        });\n    };\n\n    render() {\n        return (\n            <>\n                {!this.state.manualSelect && (\n                    <span className={styles.title}>\n                        Click on the screen to get selection information\n                    </span>\n                )}\n                {this.state.selection && <span>{this.createSelectionInfo()}</span>}\n                {this.state.manualSelect && (\n                    <div className={styles.containerInfo}>\n                        <div>\n                            <span className={styles.title}>Select element type:</span>\n                            {this.selectionOption(\n                                'Image',\n                                this.state.isImageSelectionOption,\n                                this.changeSelectionOption\n                            )}\n                            {this.selectionOption(\n                                'Table',\n                                !this.state.isImageSelectionOption,\n                                this.changeSelectionOption\n                            )}\n                            <input\n                                className={styles.input}\n                                placeholder=\"Type element id:\"\n                                type=\"input\"\n                                ref={this.selectInfo}\n                            />\n                            {!this.state.isImageSelectionOption && (\n                                <div>\n                                    <div> Coordinates </div>\n                                    {this.createCoordinatesInput('First cell X', this.firstCellX)}\n                                    {this.createCoordinatesInput('First cell Y', this.firstCellY)}\n                                    {this.createCoordinatesInput('Last cell X', this.lastCellX)}\n                                    {this.createCoordinatesInput('Last cell X', this.lastCellY)}\n                                </div>\n                            )}\n                        </div>\n                        <div>{this.state.selectionMessage}</div>\n                        <div>\n                            {this.selectInfo && (\n                                <button className={styles.button} onClick={this.selectElement}>\n                                    Select Element\n                                </button>\n                            )}\n                        </div>\n                    </div>\n                )}\n\n                <button className={styles.button} onClick={this.showManualSelection}>\n                    {this.state.manualSelect ? 'Hide manual select' : 'Show manual select'}\n                </button>\n            </>\n        );\n    }\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { ContentPosition, InsertOptionBasic } from 'roosterjs-editor-types';\n\nconst styles = require('./InsertContentPane.scss');\n\nexport interface InsertContentPaneState {\n    content: string;\n    position: ContentPosition;\n    updateCursor: boolean;\n    replaceSelection: boolean;\n    insertOnNewLine: boolean;\n}\n\nexport default class InsertContentPane extends React.Component<\n    ApiPaneProps,\n    InsertContentPaneState\n> {\n    private html = React.createRef<HTMLTextAreaElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            content: '',\n            position: ContentPosition.SelectionStart,\n            updateCursor: true,\n            replaceSelection: true,\n            insertOnNewLine: false,\n        };\n    }\n\n    render() {\n        return (\n            <table>\n                <tr>\n                    <td>HTML Content</td>\n                    <td>\n                        <textarea\n                            className={styles.text}\n                            ref={this.html}\n                            value={this.state.content}\n                            onChange={() => this.setState({ content: this.html.current.value })}\n                        />\n                    </td>\n                </tr>\n                <tr>\n                    <td>Insert at</td>\n                    <td>\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"position\"\n                                checked={this.state.position == ContentPosition.Begin}\n                                id=\"insertBegin\"\n                                onClick={() => this.setPosition(ContentPosition.Begin)}\n                            />\n                            <label htmlFor=\"insertBegin\">Begin</label>\n                        </div>\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"position\"\n                                checked={this.state.position == ContentPosition.End}\n                                id=\"insertEnd\"\n                                onClick={() => this.setPosition(ContentPosition.End)}\n                            />\n                            <label htmlFor=\"insertEnd\">End</label>\n                        </div>\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"position\"\n                                checked={this.state.position == ContentPosition.SelectionStart}\n                                id=\"insertSelectionStart\"\n                                onClick={() => this.setPosition(ContentPosition.SelectionStart)}\n                            />\n                            <label htmlFor=\"insertSelectionStart\">SelectionStart</label>\n                        </div>\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"position\"\n                                checked={this.state.position == ContentPosition.Outside}\n                                id=\"insertOutside\"\n                                onClick={() => this.setPosition(ContentPosition.Outside)}\n                            />\n                            <label htmlFor=\"insertOutside\">Outside</label>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Cursor option</td>\n                    <td>\n                        <input\n                            type=\"checkbox\"\n                            id=\"insertUpdateCursor\"\n                            checked={this.state.updateCursor}\n                            onClick={() =>\n                                this.setState({ updateCursor: !this.state.updateCursor })\n                            }\n                        />\n                        <label htmlFor=\"insertUpdateCursor\">Update cursor</label>\n                    </td>\n                </tr>\n                <tr>\n                    <td>Replace option</td>\n                    <td>\n                        <input\n                            type=\"checkbox\"\n                            id=\"insertReplaceSelection\"\n                            checked={this.state.replaceSelection}\n                            onClick={() =>\n                                this.setState({ replaceSelection: !this.state.replaceSelection })\n                            }\n                        />\n                        <label htmlFor=\"insertReplaceSelection\">Replace selection</label>\n                    </td>\n                </tr>\n                <tr>\n                    <td>New line option</td>\n                    <td>\n                        <input\n                            type=\"checkbox\"\n                            id=\"insertOnNewLine\"\n                            checked={this.state.insertOnNewLine}\n                            onClick={() =>\n                                this.setState({ insertOnNewLine: !this.state.insertOnNewLine })\n                            }\n                        />\n                        <label htmlFor=\"insertOnNewLine\">Insert on new line</label>\n                    </td>\n                </tr>\n                <tr>\n                    <td colSpan={2} className={styles.buttonRow}>\n                        <button onClick={this.onClick}>Insert Content</button>\n                    </td>\n                </tr>\n            </table>\n        );\n    }\n\n    private setPosition(position: ContentPosition) {\n        this.setState({\n            position: position,\n        });\n    }\n\n    private onClick = () => {\n        let editor = this.props.getEditor();\n        if (this.state.position != ContentPosition.Range) {\n            const inputOption: InsertOptionBasic = {\n                position: this.state.position,\n                updateCursor: this.state.updateCursor,\n                replaceSelection: this.state.replaceSelection,\n                insertOnNewLine: this.state.insertOnNewLine,\n            };\n            editor.addUndoSnapshot(() => editor.insertContent(this.state.content, inputOption));\n        }\n    };\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { Entity } from 'roosterjs-editor-types';\nimport { getEntityFromElement, getEntitySelector } from 'roosterjs-editor-dom';\nimport { insertEntity } from 'roosterjs-editor-api';\nimport { trustedHTMLHandler } from '../../../../utils/trustedHTMLHandler';\n\nconst styles = require('./InsertEntityPane.scss');\n\ninterface InsertEntityPaneState {\n    entities: Entity[];\n}\n\nexport default class InsertEntityPane extends React.Component<ApiPaneProps, InsertEntityPaneState> {\n    private entityType = React.createRef<HTMLInputElement>();\n    private html = React.createRef<HTMLTextAreaElement>();\n    private styleInline = React.createRef<HTMLInputElement>();\n    private styleBlock = React.createRef<HTMLInputElement>();\n    private isReadonly = React.createRef<HTMLInputElement>();\n    private insertAtRoot = React.createRef<HTMLInputElement>();\n    private focusAfterEntity = React.createRef<HTMLInputElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            entities: [],\n        };\n    }\n\n    render() {\n        return (\n            <>\n                <div>\n                    Type: <input type=\"input\" ref={this.entityType} />\n                </div>\n                <div>\n                    HTML: <textarea className={styles.textarea} ref={this.html}></textarea>\n                </div>\n                <div>\n                    Style:\n                    <input\n                        type=\"radio\"\n                        name=\"entityStyle\"\n                        ref={this.styleInline}\n                        id=\"styleInline\"\n                    />\n                    <label htmlFor=\"styleInline\">Inline</label>\n                    <input type=\"radio\" name=\"entityStyle\" ref={this.styleBlock} id=\"styleBlock\" />\n                    <label htmlFor=\"styleBlock\">Block</label>\n                </div>\n                <div>\n                    <input id=\"readonly\" type=\"checkbox\" ref={this.isReadonly} />\n                    <label htmlFor=\"readonly\">Readonly </label>\n                </div>\n                <div>\n                    <input id=\"insertAtRoot\" type=\"checkbox\" ref={this.insertAtRoot} />\n                    <label htmlFor=\"insertAtRoot\">Force insert at root of region</label>\n                </div>\n                <div>\n                    <input id=\"focusAfterEntity\" type=\"checkbox\" ref={this.focusAfterEntity} />\n                    <label htmlFor=\"focusAfterEntity\">Focus after entity</label>\n                </div>\n                <div>\n                    <button onClick={this.insertEntity}>Insert Entity</button>\n                </div>\n                <hr />\n                <div>\n                    <button onClick={this.onGetEntities}>Get all entities</button>\n                </div>\n                <div>\n                    {this.state.entities.map(entity => (\n                        <EntityButton key={entity.id} entity={entity} />\n                    ))}\n                </div>\n            </>\n        );\n    }\n\n    private insertEntity = () => {\n        const entityType = this.entityType.current.value;\n        const node = document.createElement('span');\n        node.innerHTML = trustedHTMLHandler(this.html.current.value);\n        const isBlock = this.styleBlock.current.checked;\n        const isReadonly = this.isReadonly.current.checked;\n        const insertAtRoot = this.insertAtRoot.current.checked;\n        const focusAfterEntity = this.focusAfterEntity.current.checked;\n\n        if (node) {\n            const editor = this.props.getEditor();\n\n            editor.addUndoSnapshot(() => {\n                insertEntity(\n                    editor,\n                    entityType,\n                    node,\n                    isBlock,\n                    isReadonly,\n                    undefined /*position*/,\n                    insertAtRoot,\n                    focusAfterEntity\n                );\n            });\n        }\n    };\n\n    private onGetEntities = () => {\n        const selector = getEntitySelector();\n        const nodes = this.props.getEditor().queryElements(selector);\n        const allEntities = nodes.map(node => getEntityFromElement(node));\n\n        this.setState({\n            entities: allEntities.filter(e => !!e),\n        });\n    };\n}\n\nfunction EntityButton({ entity }: { entity: Entity }) {\n    let background = '';\n    const onMouseOver = React.useCallback(() => {\n        background = entity.wrapper.style.backgroundColor;\n        entity.wrapper.style.backgroundColor = 'blue';\n    }, [entity]);\n\n    const onMouseOut = React.useCallback(() => {\n        entity.wrapper.style.backgroundColor = background;\n    }, [entity]);\n\n    return (\n        <div onMouseOver={onMouseOver} onMouseOut={onMouseOut}>\n            Type: {entity.type}\n            <br />\n            Id: {entity.id}\n            <br />\n            Readonly: {entity.isReadonly ? 'True' : 'False'}\n            <br />\n        </div>\n    );\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { LinkData } from 'roosterjs-editor-types';\nimport { matchLink } from 'roosterjs-editor-dom';\n\ninterface MatchLinkState {\n    linkData: LinkData;\n}\n\nexport default class MatchLinkPane extends React.Component<ApiPaneProps, MatchLinkState> {\n    private url = React.createRef<HTMLInputElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = { linkData: undefined };\n    }\n\n    render() {\n        let { scheme, originalUrl, normalizedUrl } = this.state.linkData || ({} as LinkData);\n        return (\n            <>\n                <div>\n                    Url: <input type=\"input\" ref={this.url} />{' '}\n                    <button onClick={this.onMatchLink}>Match Link</button>\n                </div>\n                {this.state.linkData === null ? (\n                    <div>Not matched</div>\n                ) : (\n                    <>\n                        <div>Schema: {scheme || ''}</div>\n                        <div>Original Url: {originalUrl || ''}</div>\n                        <div>Normalized Url: {normalizedUrl || ''}</div>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    private onMatchLink = () => {\n        let match = matchLink(this.url.current.value);\n        this.setState({\n            linkData: match,\n        });\n    };\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { IEditor, PositionType, Region } from 'roosterjs-editor-types';\nimport {\n    createRange,\n    getSelectedBlockElementsInRegion,\n    getTagOfNode,\n    safeInstanceOf,\n} from 'roosterjs-editor-dom';\n\nconst styles = require('./GetSelectedRegionsPane.scss');\n\ninterface GetSelectedRegionsPaneState {\n    regions: Region[];\n}\n\nexport default class GetSelectedRegionsPane extends React.Component<\n    ApiPaneProps,\n    GetSelectedRegionsPaneState\n> {\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = { regions: [] };\n    }\n\n    render() {\n        const editor = this.props.getEditor();\n        return (\n            <>\n                <div>\n                    <button onClick={this.getSelectedRegions}>Get Selected Regions</button>&nbsp;\n                    <button onClick={this.clearAll}>Clear</button>\n                </div>\n                <div>\n                    {this.state.regions.map((region, i) => (\n                        <Region key={i} region={region} editor={editor} index={i} />\n                    ))}\n                </div>\n            </>\n        );\n    }\n\n    private getSelectedRegions = () => {\n        this.setState({\n            regions: this.props.getEditor().getSelectedRegions(),\n        });\n    };\n\n    private clearAll = () => {\n        this.setState({\n            regions: [],\n        });\n    };\n}\n\nfunction Region({ region, editor, index }: { region: Region; editor: IEditor; index: number }) {\n    const selectRegion = React.useCallback(() => {\n        const blocks = getSelectedBlockElementsInRegion(region);\n        if (blocks.length > 0) {\n            const range = createRange(\n                blocks[0].getStartNode(),\n                PositionType.Begin,\n                blocks[blocks.length - 1].getEndNode(),\n                PositionType.End\n            );\n            editor.focus();\n            editor.select(range);\n        }\n    }, [region]);\n\n    return (\n        <div>\n            <hr />\n            <div>\n                <b>Region {index}</b>\n            </div>\n            <div>\n                Root node: <NodeName node={region.rootNode} />\n            </div>\n            <div>\n                Node Before: <NodeName node={region.nodeBefore} />\n            </div>\n            <div>\n                Node After: <NodeName node={region.nodeAfter} />\n            </div>\n            <div>\n                Selected blocks: <button onClick={selectRegion}>Select</button>\n            </div>\n        </div>\n    );\n}\n\nfunction NodeName({ node }: { node: Node }) {\n    const mouseOver = React.useCallback(() => {\n        if (safeInstanceOf(node, 'HTMLElement')) {\n            node.className += ' ' + styles.hover;\n        }\n    }, [node]);\n\n    const mouseOut = React.useCallback(() => {\n        if (safeInstanceOf(node, 'HTMLElement')) {\n            let classNames = node.className.split(' ');\n            classNames = classNames.filter(name => name != styles.hover);\n            node.className = classNames.join(' ').trim();\n        }\n    }, [node]);\n\n    return node ? (\n        safeInstanceOf(node, 'HTMLElement') ? (\n            <span onMouseOver={mouseOver} onMouseOut={mouseOut} className={styles.regionNode}>\n                {getTagOfNode(node)}#{node.id}\n            </span>\n        ) : (\n            <span className={styles.regionNode}>{node.nodeValue.substr(0, 10)}</span>\n        )\n    ) : null;\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport { HtmlSanitizer } from 'roosterjs-editor-dom';\nimport { trustedHTMLHandler } from '../../../../utils/trustedHTMLHandler';\n\nconst styles = require('./SanitizerPane.scss');\n\nexport default class SanitizerPane extends React.Component<ApiPaneProps, {}> {\n    private source = React.createRef<HTMLTextAreaElement>();\n    private result = React.createRef<HTMLTextAreaElement>();\n    private sanitizer = new HtmlSanitizer();\n\n    render() {\n        return (\n            <>\n                <h3>Input</h3>\n                <textarea className={styles.textarea} ref={this.source} />\n                <div>\n                    <button className={styles.button} onClick={this.inline}>\n                        Inline CSS\n                    </button>\n                    <button className={styles.button} onClick={this.sanitize}>\n                        Sanitize\n                    </button>\n                </div>\n                <h3>Result</h3>\n                <textarea className={styles.textarea} ref={this.result} />\n            </>\n        );\n    }\n\n    private inline = () => {\n        const doc = this.getDOMDocument();\n\n        if (doc?.body) {\n            this.sanitizer.convertGlobalCssToInlineCss(doc);\n            this.result.current.value = doc.body.innerHTML;\n        }\n    };\n\n    private sanitize = () => {\n        const doc = this.getDOMDocument();\n\n        if (doc?.body) {\n            this.sanitizer.sanitize(doc.body.firstChild);\n            this.result.current.value = doc.body.innerHTML;\n        }\n    };\n\n    private getDOMDocument(): Document {\n        const parser = new DOMParser();\n        const html = trustedHTMLHandler(this.source.current.value) || '';\n        const doc = parser.parseFromString(html, 'text/html');\n        return doc;\n    }\n}\n","import * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport VListItem from 'roosterjs-editor-dom/lib/list/VListItem';\nimport { createVListFromRegion, VList } from 'roosterjs-editor-dom';\nimport { ExperimentalFeatures, IEditor, ListType, PositionType } from 'roosterjs-editor-types';\n\ninterface VListPaneState {\n    vlist: VList;\n}\n\nconst ListTypeToString = {\n    [ListType.None]: 'None',\n    [ListType.Ordered]: 'Ordered',\n    [ListType.Unordered]: 'Unordered',\n};\n\nfunction VListItemPane(props: { editor: IEditor; item: VListItem; onChange: () => void }) {\n    const { item, editor, onChange } = props;\n    const type = item.getListType();\n\n    const onMouseOver = React.useCallback(() => {\n        const node = item.getNode();\n        editor.select(node);\n    }, [props.item, editor]);\n\n    const onOrdered = React.useCallback(() => {\n        item.changeListType(ListType.Ordered);\n        onChange();\n    }, [props.item, editor]);\n    const onUnrdered = React.useCallback(() => {\n        item.changeListType(ListType.Unordered);\n        onChange();\n    }, [props.item, editor]);\n    const onIndent = React.useCallback(() => {\n        item.indent();\n        onChange();\n    }, [props.item, editor]);\n    const onOutdent = React.useCallback(() => {\n        item.outdent();\n        onChange();\n    }, [props.item, editor]);\n\n    return (\n        <div>\n            <button onClick={onOrdered}>1.</button>\n            <button onClick={onUnrdered}>*</button>\n            <button onClick={onOutdent}>&lt;-</button>\n            <button onClick={onIndent}>-&gt;</button>\n            <span\n                style={{\n                    marginLeft: item.getLevel() * 20 + 'px',\n                    display: 'inline-block',\n                    cursor: 'pointer',\n                }}\n                onMouseOver={onMouseOver}>\n                {ListTypeToString[type]}\n            </span>\n        </div>\n    );\n}\n\nexport default class VListPane extends React.Component<ApiPaneProps, VListPaneState> {\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            vlist: null,\n        };\n    }\n\n    render() {\n        const editor = this.props.getEditor();\n        return (\n            <>\n                <button onClick={this.createVList}>Create VList from cursor</button>\n                {this.state.vlist && (\n                    <>\n                        {this.state.vlist.items.map(item => (\n                            <VListItemPane item={item} editor={editor} onChange={this.onChange} />\n                        ))}\n                        <button onClick={this.onWriteback}>Write back</button>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    private createVList = () => {\n        const editor = this.props.getEditor();\n        const node = editor.getElementAtCursor();\n        const region = editor.getSelectedRegions()[0];\n        const vlist = node\n            ? createVListFromRegion(region, false /*includingSiblingList*/, node)\n            : null;\n\n        this.setState({\n            vlist: vlist,\n        });\n    };\n\n    private onWriteback = () => {\n        const editor = this.props.getEditor();\n        editor.addUndoSnapshot(() => {\n            this.state.vlist?.writeBack(\n                editor.isFeatureEnabled(ExperimentalFeatures.ReuseAllAncestorListElements)\n            );\n            editor.focus();\n            editor.select(this.state.vlist.items[0]?.getNode(), PositionType.Begin);\n        });\n        this.createVList();\n    };\n\n    private onChange = () => {\n        this.forceUpdate();\n    };\n}\n","import * as Color from 'color';\nimport * as React from 'react';\nimport ApiPaneProps from '../ApiPaneProps';\nimport ColorPicker from '../../../colorPicker/ColorPicker';\nimport { createTableFormat, PREDEFINED_STYLES } from '../../shared/PredefinedTableStyles';\nimport { editTable, formatTable } from 'roosterjs-editor-api';\nimport { getTagOfNode, VTable } from 'roosterjs-editor-dom';\nimport { IEditor, PositionType, TableFormat, TableOperation, VCell } from 'roosterjs-editor-types';\n\nconst PREDEFINED_STYLES_KEYS = {\n    default: 'DEFAULT',\n    gridWithoutBorder: 'GRID_WITHOUT_BORDER',\n    list: 'LIST',\n    bandedRowsFirstColumnNoBorder: 'BANDED_ROWS_FIRST_COLUMN_NO_BORDER',\n    defaultWithBackgroundColor: 'DEFAULT_WITH_BACKGROUND_COLOR',\n    external: 'EXTERNAL',\n    noHeader: 'NO_HEADER_VERTICAL',\n    especialType1: 'ESPECIAL_TYPE_1',\n    especialType2: 'ESPECIAL_TYPE_2',\n    especialType3: 'ESPECIAL_TYPE_3',\n    clear: 'CLEAR',\n};\n\nconst TABLE_COLORS: Record<string, string> = {\n    transparent: 'transparent',\n    black: '#000000',\n    blue: '#0C64C0',\n    orange: '#DE6A19',\n    yellow: '#DCBE22',\n    red: '#ED5C57',\n    purple: '#B36AE2',\n    green: '#0C882A',\n};\n\ninterface VTablePaneState {\n    vtable: VTable;\n}\n\nconst styles = require('./VTablePane.scss');\n\nfunction TableCell(props: {\n    cell: VCell;\n    editor: IEditor;\n    isCurrent: boolean;\n    onClickCell: (td: HTMLTableCellElement) => void;\n}) {\n    const { cell, editor, isCurrent } = props;\n    const onMouseOver = React.useCallback(() => {\n        editor.select(cell.td);\n    }, [cell, editor]);\n    const onClick = React.useCallback(() => {\n        if (cell.td) {\n            props.onClickCell(cell.td);\n        }\n    }, [cell, editor]);\n\n    const text = cell.td\n        ? getTagOfNode(cell.td)\n        : cell.spanAbove && cell.spanLeft\n        ? '↖'\n        : cell.spanAbove\n        ? '↑'\n        : cell.spanLeft\n        ? '←'\n        : '';\n\n    return (\n        <div\n            style={{ cursor: 'pointer', border: isCurrent ? 'solid 2px black' : '' }}\n            onMouseOver={onMouseOver}\n            onClick={onClick}>\n            {text}\n        </div>\n    );\n}\n\nexport default class VTablePane extends React.Component<ApiPaneProps, VTablePaneState> {\n    private bgColor = React.createRef<HTMLInputElement>();\n    private topBorderColor = React.createRef<HTMLInputElement>();\n    private bottomBorderColor = React.createRef<HTMLInputElement>();\n    private verticalBorderColor = React.createRef<HTMLInputElement>();\n\n    constructor(props: ApiPaneProps) {\n        super(props);\n        this.state = {\n            vtable: null,\n        };\n    }\n\n    render() {\n        const editor = this.props.getEditor();\n        const currentTd = this.state.vtable?.getCurrentTd();\n        return (\n            <>\n                <button onClick={this.createVTable}>Create VTable from cursor</button>\n                {this.state.vtable && (\n                    <>\n                        <table\n                            style={{\n                                border: 'solid 1px black',\n                            }}>\n                            <tbody>\n                                {this.state.vtable.cells.map((row, rowIndex) => (\n                                    <tr key={'row' + rowIndex}>\n                                        {row.map((cell, cellIndex) => (\n                                            <td key={'cell' + cellIndex}>\n                                                <TableCell\n                                                    cell={cell}\n                                                    editor={editor}\n                                                    isCurrent={currentTd == cell.td}\n                                                    onClickCell={this.onClickCell}\n                                                />\n                                            </td>\n                                        ))}\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                        <table>\n                            <tbody>\n                                <tr>\n                                    <th colSpan={2}>Edit Table</th>\n                                </tr>\n                                <tr>\n                                    <td>Insert</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Above',\n                                            TableOperation.InsertAbove\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Below',\n                                            TableOperation.InsertBelow\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Left',\n                                            TableOperation.InsertLeft\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Right',\n                                            TableOperation.InsertRight\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Delete</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Table',\n                                            TableOperation.DeleteTable\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Column',\n                                            TableOperation.DeleteColumn\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Row',\n                                            TableOperation.DeleteRow\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Merge</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Above',\n                                            TableOperation.MergeAbove\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Below',\n                                            TableOperation.MergeBelow\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Left',\n                                            TableOperation.MergeLeft\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Right',\n                                            TableOperation.MergeRight\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Split</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Horizontally',\n                                            TableOperation.SplitHorizontally\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Vertically',\n                                            TableOperation.SplitVertically\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Align</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Left',\n                                            TableOperation.AlignLeft\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Center',\n                                            TableOperation.AlignCenter\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Right',\n                                            TableOperation.AlignRight\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Align Cell</td>\n                                    <td>\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Left',\n                                            TableOperation.AlignCellLeft\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Center',\n                                            TableOperation.AlignCellCenter\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Right',\n                                            TableOperation.AlignCellRight\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Top',\n                                            TableOperation.AlignCellTop\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Middle',\n                                            TableOperation.AlignCellMiddle\n                                        )}\n                                        {this.renderEditTableButton(\n                                            editor,\n                                            'Bottom',\n                                            TableOperation.AlignCellBottom\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <th colSpan={2}>Format Table</th>\n                                </tr>\n                                <tr>\n                                    <td>State:</td>\n                                    <td>\n                                        {this.renderSetHeaderRowButton(editor)}\n                                        {this.renderSetFirstColumnButton(editor)}\n                                        {this.renderSetBandedColumnButton(editor)}\n                                        {this.renderSetBandedRowButton(editor)}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Predefined:</td>\n                                    <td>\n                                        {this.renderFormatTableButton(\n                                            'Default',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.default](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n\n                                        {this.renderFormatTableButton(\n                                            'Grid without border',\n                                            PREDEFINED_STYLES[\n                                                PREDEFINED_STYLES_KEYS.gridWithoutBorder\n                                            ](TABLE_COLORS.blue, `${TABLE_COLORS.blue}20`),\n                                            editor\n                                        )}\n\n                                        {this.renderFormatTableButton(\n                                            'List',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.list](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Banded Row and first column and no border',\n                                            PREDEFINED_STYLES[\n                                                PREDEFINED_STYLES_KEYS.bandedRowsFirstColumnNoBorder\n                                            ](TABLE_COLORS.blue, `${TABLE_COLORS.blue}20`),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Default with background color',\n                                            PREDEFINED_STYLES[\n                                                PREDEFINED_STYLES_KEYS.defaultWithBackgroundColor\n                                            ](TABLE_COLORS.blue, `${TABLE_COLORS.blue}20`),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'External',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.external](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'No Header Vertical',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.noHeader](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Especial type 1',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.especialType1](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Especial type 2',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.especialType2](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Especial type 3',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.especialType3](\n                                                TABLE_COLORS.blue,\n                                                `${TABLE_COLORS.blue}20`\n                                            ),\n                                            editor\n                                        )}\n                                        {this.renderFormatTableButton(\n                                            'Clear',\n                                            PREDEFINED_STYLES[PREDEFINED_STYLES_KEYS.clear](\n                                                TABLE_COLORS.transparent\n                                            ),\n                                            editor\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <th colSpan={2} className={styles.buttonRow}>\n                                        Customized Colors:\n                                    </th>\n                                </tr>\n                                <CustomizeFormatRow\n                                    text=\"BackgroundColor\"\n                                    inputRef={this.bgColor}\n                                />\n                                <CustomizeFormatRow\n                                    text=\"Top border\"\n                                    inputRef={this.topBorderColor}\n                                />\n                                <CustomizeFormatRow\n                                    text=\"Bottom border\"\n                                    inputRef={this.bottomBorderColor}\n                                />\n                                <CustomizeFormatRow\n                                    text=\"Vertical border\"\n                                    inputRef={this.verticalBorderColor}\n                                />\n\n                                <tr>\n                                    <td\n                                        colSpan={2}\n                                        className={styles.buttonRow}\n                                        onClick={this.onCustomizeFormat}>\n                                        <button className={styles.button}>Apply Format</button>\n                                    </td>\n                                </tr>\n\n                                <tr>\n                                    <th colSpan={2} className={styles.buttonRow}>\n                                        Style Info:\n                                    </th>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <button onClick={this.onWriteBack}>Write back</button>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    private createVTable = () => {\n        const editor = this.props.getEditor();\n        const node = editor.getElementAtCursor('td,th') as HTMLTableCellElement;\n        const vtable = node ? new VTable(node) : null;\n\n        this.setState({ vtable });\n    };\n\n    private onClickCell = (td: HTMLTableCellElement) => {\n        const vtable = new VTable(td);\n        this.setState({ vtable });\n    };\n\n    private renderEditTableButton(\n        editor: IEditor,\n        text: string,\n        operation: TableOperation\n    ): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    editTable(editor, operation);\n                    this.forceUpdate();\n                }}>\n                {text}\n            </button>\n        );\n    }\n\n    private renderSetHeaderRowButton(editor: IEditor): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    formatTable(\n                        editor,\n                        setHeaderRow(this.state.vtable.table),\n                        this.state.vtable.table\n                    );\n\n                    this.forceUpdate();\n                }}>\n                Header Row\n            </button>\n        );\n    }\n\n    private renderSetFirstColumnButton(editor: IEditor): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    formatTable(\n                        editor,\n                        setFirstColumn(this.state.vtable.table),\n                        this.state.vtable.table\n                    );\n\n                    this.forceUpdate();\n                }}>\n                First Column\n            </button>\n        );\n    }\n    private renderSetBandedColumnButton(editor: IEditor): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    formatTable(\n                        editor,\n                        setBandedColumn(this.state.vtable.table),\n                        this.state.vtable.table\n                    );\n\n                    this.forceUpdate();\n                }}>\n                Banded Column\n            </button>\n        );\n    }\n    private renderSetBandedRowButton(editor: IEditor): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    formatTable(\n                        editor,\n                        setBandedRow(this.state.vtable.table),\n                        this.state.vtable.table\n                    );\n\n                    this.forceUpdate();\n                }}>\n                Banded Row\n            </button>\n        );\n    }\n\n    private renderFormatTableButton(\n        text: string,\n        format: TableFormat,\n        editor: IEditor\n    ): JSX.Element {\n        return (\n            <button\n                className={styles.button}\n                onClick={() => {\n                    formatTable(editor, format, this.state.vtable.table);\n                    this.forceUpdate();\n                }}>\n                {text}\n            </button>\n        );\n    }\n\n    private onCustomizeFormat = () => {\n        const format = createTableFormat(\n            this.topBorderColor.current.value || undefined,\n            this.bottomBorderColor.current.value || undefined,\n            this.verticalBorderColor.current.value || undefined\n        );\n\n        this.state.vtable.applyFormat(format);\n        this.forceUpdate();\n    };\n\n    private onWriteBack = () => {\n        const editor = this.props.getEditor();\n        editor.addUndoSnapshot(() => {\n            const vtable = this.state.vtable;\n            const td = vtable.getCurrentTd();\n            vtable.writeBack();\n            editor.focus();\n            editor.select(td, PositionType.Begin);\n        });\n        this.createVTable();\n    };\n}\n\nfunction setHeaderRow(table: HTMLTableElement): TableFormat {\n    const vtable = new VTable(table);\n    const format = vtable.formatInfo;\n    format.keepCellShade = true;\n    format.hasHeaderRow = !format.hasHeaderRow;\n\n    return format;\n}\n\nfunction setFirstColumn(table: HTMLTableElement): TableFormat {\n    const vtable = new VTable(table);\n    const format = vtable.formatInfo;\n    format.keepCellShade = true;\n    format.hasFirstColumn = !format.hasFirstColumn;\n    return format;\n}\n\nfunction setBandedColumn(table: HTMLTableElement): TableFormat {\n    const vtable = new VTable(table);\n    const format = vtable.formatInfo;\n    format.keepCellShade = true;\n    format.hasBandedColumns = !format.hasBandedColumns;\n    return format;\n}\n\nfunction setBandedRow(table: HTMLTableElement): TableFormat {\n    const vtable = new VTable(table);\n    const format = vtable.formatInfo;\n    format.keepCellShade = true;\n    format.hasBandedRows = !format.hasBandedRows;\n    return format;\n}\n\nfunction CustomizeFormatRow(props: { text: string; inputRef: React.RefObject<HTMLInputElement> }) {\n    const [isColorPickerShowing, setIsColorPickerShowing] = React.useState(false);\n    const onShowColorPicker = React.useCallback(() => {\n        setIsColorPickerShowing(!isColorPickerShowing);\n    }, [isColorPickerShowing]);\n    const setColor = React.useCallback((color: Color) => {\n        props.inputRef.current.value = color.hex().toString();\n    }, []);\n    let color: Color;\n    try {\n        color = Color(props.inputRef.current.value);\n    } catch {\n        color = Color('white');\n    }\n    return (\n        <>\n            <tr>\n                <td className={styles.label}>\n                    <button onClick={onShowColorPicker}>{props.text}</button>\n                </td>\n                <td>\n                    <input type=\"text\" ref={props.inputRef} />\n                </td>\n            </tr>\n            {isColorPickerShowing && (\n                <tr>\n                    <td colSpan={2}>\n                        <ColorPicker initColor={color} onSelect={setColor} />\n                    </td>\n                </tr>\n            )}\n        </>\n    );\n}\n","import * as React from 'react';\nimport { ContentModelDocument } from 'roosterjs-content-model';\nimport { ContentModelDocumentView } from '../../contentModel/components/model/ContentModelDocumentView';\nimport { contentModelRibbonButton } from './buttons/contentModelRibbonButton';\nimport { exportButton } from './buttons/exportButton';\nimport { refreshButton } from './buttons/refreshButton';\nimport { Ribbon, RibbonButton, RibbonPlugin } from 'roosterjs-react';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nconst styles = require('./ContentModelPane.scss');\n\nexport interface ContentModelPaneState {\n    model: ContentModelDocument;\n}\n\nexport interface ContentModelPaneProps extends ContentModelPaneState, SidePaneElementProps {\n    ribbonPlugin: RibbonPlugin;\n}\n\nexport default class ContentModelPane extends React.Component<\n    ContentModelPaneProps,\n    ContentModelPaneState\n> {\n    private contentModelButtons: RibbonButton<any>[];\n\n    constructor(props: ContentModelPaneProps) {\n        super(props);\n\n        this.contentModelButtons = [refreshButton, exportButton, contentModelRibbonButton];\n\n        this.state = {\n            model: null,\n        };\n    }\n\n    setContentModel(model: ContentModelDocument) {\n        this.setState({\n            model: model,\n        });\n    }\n\n    render() {\n        return (\n            <>\n                <Ribbon buttons={this.contentModelButtons} plugin={this.props.ribbonPlugin} />\n                <div className={styles.contentModel}>\n                    {this.state.model ? <ContentModelDocumentView doc={this.state.model} /> : null}\n                </div>\n            </>\n        );\n    }\n}\n","import ContentModelPane, { ContentModelPaneProps } from './ContentModelPane';\nimport SidePanePluginImpl from '../SidePanePluginImpl';\nimport { createRibbonPlugin, RibbonPlugin } from 'roosterjs-react';\nimport { IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { setCurrentContentModel } from './currentModel';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nexport default class ContentModelPanePlugin extends SidePanePluginImpl<\n    ContentModelPane,\n    ContentModelPaneProps\n> {\n    private contentModelRibbon: RibbonPlugin;\n\n    constructor() {\n        super(ContentModelPane, 'contentModel', 'Content Model (Under development)');\n        this.contentModelRibbon = createRibbonPlugin();\n    }\n\n    initialize(editor: IEditor): void {\n        super.initialize(editor);\n\n        this.contentModelRibbon.initialize(editor);\n        editor.getDocument().addEventListener('selectionchange', this.onModelChangeFromSelection);\n    }\n\n    dispose(): void {\n        this.contentModelRibbon.dispose();\n        this.editor\n            .getDocument()\n            .removeEventListener('selectionchange', this.onModelChangeFromSelection);\n\n        super.dispose();\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        if (e.eventType == PluginEventType.ContentChanged && e.source == 'RefreshModel') {\n            this.getComponent(component => {\n                const model = isContentModelEditor(this.editor)\n                    ? this.editor.createContentModel()\n                    : null;\n                component.setContentModel(model);\n                setCurrentContentModel(this.editor, model);\n            });\n        } else if (\n            e.eventType == PluginEventType.Input ||\n            e.eventType == PluginEventType.ContentChanged\n        ) {\n            this.onModelChange();\n        }\n\n        this.contentModelRibbon.onPluginEvent(e);\n    }\n\n    getInnerRibbonPlugin() {\n        return this.contentModelRibbon;\n    }\n\n    protected getComponentProps(baseProps: SidePaneElementProps): ContentModelPaneProps {\n        return {\n            ...baseProps,\n            model: null,\n            ribbonPlugin: this.contentModelRibbon,\n        };\n    }\n\n    private onModelChangeFromSelection = () => {\n        if (this.editor.hasFocus()) {\n            this.onModelChange();\n        }\n    };\n\n    private onModelChange = () => {\n        this.getComponent(component => {\n            const model = isContentModelEditor(this.editor)\n                ? this.editor.createContentModel()\n                : null;\n            component.setContentModel(model);\n            setCurrentContentModel(this.editor, model);\n        });\n    };\n}\n","import MainPaneBase from '../../../MainPaneBase';\nimport { RibbonButton } from 'roosterjs-react';\n\nexport const contentModelRibbonButton: RibbonButton<'ribbonButtonShowContentModelRibbon'> = {\n    key: 'ribbonButtonShowContentModelRibbon',\n    iconName: 'Edit',\n    unlocalizedText: 'Show/hide Content Model ribbon',\n    onClick: _ => {\n        MainPaneBase.getInstance().toggleContentModelRibbon();\n    },\n};\n","import { ChangeSource } from 'roosterjs-editor-types';\nimport { getCurrentContentModel } from '../currentModel';\nimport { isContentModelEditor } from 'roosterjs-content-model';\nimport { RibbonButton } from 'roosterjs-react';\n\nexport const exportButton: RibbonButton<'buttonNameExport'> = {\n    key: 'buttonNameExport',\n    unlocalizedText: 'Create DOM tree',\n    iconName: 'DOM',\n    onClick: editor => {\n        const model = getCurrentContentModel(editor);\n\n        if (model && isContentModelEditor(editor)) {\n            editor.addUndoSnapshot(() => {\n                editor.focus();\n                editor.setContentModel(model);\n            }, ChangeSource.SetContent);\n        }\n    },\n};\n","import { RibbonButton } from 'roosterjs-react';\n\nexport const refreshButton: RibbonButton<'buttonNameRefresh'> = {\n    key: 'buttonNameRefresh',\n    unlocalizedText: 'Refresh',\n    iconName: 'Refresh',\n    onClick: editor => {\n        editor.triggerContentChangedEvent('RefreshModel');\n    },\n};\n","import { ContentModelDocument } from 'roosterjs-content-model';\nimport { IEditor } from 'roosterjs-editor-types';\n\nconst CurrentContentModelHolderKey = '_CurrentContentModelHolder';\n\ninterface CurrentContentModelHolder {\n    model: ContentModelDocument | null;\n}\n\nfunction getCurrentModelHolder(editor: IEditor) {\n    return editor.getCustomData(\n        CurrentContentModelHolderKey,\n        () => <CurrentContentModelHolder>{ model: null }\n    );\n}\n\nexport function getCurrentContentModel(editor: IEditor): ContentModelDocument | null {\n    return getCurrentModelHolder(editor).model;\n}\n\nexport function setCurrentContentModel(editor: IEditor, model: ContentModelDocument | null) {\n    getCurrentModelHolder(editor).model = model;\n}\n","import * as React from 'react';\nimport BuildInPluginState from '../../BuildInPluginState';\nimport EditorCode from './codes/EditorCode';\n\nexport interface CodeProps {\n    state: BuildInPluginState;\n}\n\nexport default class Code extends React.Component<CodeProps, {}> {\n    render() {\n        let editor = new EditorCode(this.props.state);\n        return (\n            <div>\n                <pre>{editor.getCode()}</pre>\n            </div>\n        );\n    }\n}\n","import * as React from 'react';\nimport BuildInPluginState from '../../BuildInPluginState';\nimport { ContentEditFeatureSettings } from 'roosterjs-editor-types';\nimport { getAllFeatures } from 'roosterjs-editor-plugins/lib/ContentEdit';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\ntype ContentEditItemId = keyof ContentEditFeatureSettings;\n\nconst styles = require('./OptionsPane.scss');\nconst EditFeatureDescriptionMap: Record<keyof ContentEditFeatureSettings, string> = {\n    autoBullet: 'Auto Bullet / Numbering',\n    indentWhenTab: 'Indent list when Tab',\n    outdentWhenShiftTab: 'Outdent list when Shift + Tab',\n    outdentWhenBackspaceOnEmptyFirstLine: 'Outdent list when Backspace on empty first Line',\n    outdentWhenEnterOnEmptyLine: 'Outdent list when Enter on empty line',\n    mergeInNewLineWhenBackspaceOnFirstChar:\n        'Merge in new line when Backspace on first char in list',\n    maintainListChain: 'Maintain the continued list numbers',\n    unquoteWhenBackspaceOnEmptyFirstLine: 'Unquote when Backspace on empty first line',\n    unquoteWhenEnterOnEmptyLine: 'Unquote when Enter on empty line',\n    tabInTable: 'Tab to jump cell in table',\n    upDownInTable: 'Up / Down to jump cell in table',\n    insertLineBeforeStructuredNodeFeature:\n        'Enter to create new line before table/list at beginning of editor content',\n    autoLink: 'Auto link',\n    unlinkWhenBackspaceAfterLink: 'Auto unlink when backspace right after a hyperlink',\n    defaultShortcut: 'Default Shortcuts',\n    noCycleCursorMove: 'Avoid moving cycle moving cursor when Ctrl+Left/Right',\n    clickOnEntity: 'Fire an event when click on a readonly entity',\n    escapeFromEntity: 'Fire an event when Escape from a readonly entity',\n    enterBeforeReadonlyEntity: 'Start a new line when Enter before an event',\n    backspaceAfterEntity: 'Fire an event when Backspace after an entity',\n    deleteBeforeEntity: 'Fire an event when Delete before an event',\n    markdownBold: 'Markdown style Bolding',\n    markdownItalic: 'Markdown style Italics',\n    markdownStrikethru: 'Markdown style Strikethrough',\n    markdownInlineCode: 'Markdown style Code blocks',\n    maintainListChainWhenDelete:\n        'Maintain the list of number in the right order after press delete before the first item',\n    indentTableOnTab: 'Indent the table if it is all cells are selected.',\n    indentWhenTabText:\n        'On Tab indent the selection or add Tab, requires TabKeyFeatures Experimental Feature',\n    outdentWhenTabText:\n        'On Shift + Tab outdent the selection, requires TabKeyFeatures Experimental Feature',\n    autoHyphen: 'Automatically transform -- into hyphen, if typed between two words.',\n    autoBulletList:\n        'When press space after *, -, --, ->, -->, >, =>  in an empty line, toggle bullet',\n    autoNumberingList:\n        'When press space after an number, a letter or roman number followed by ), ., -, or between parenthesis in an empty line, toggle numbering',\n    mergeListOnBackspaceAfterList: 'When backspacing between lists, merge the lists',\n    deleteTableWithBackspace: 'Delete table with backspace key with whole table is selected',\n    moveBetweenDelimitersFeature:\n        'Content edit feature to move the cursor from Delimiters around Entities when using Right or Left Arrow Keys',\n    removeEntityBetweenDelimiters:\n        'When using BACKSPACE or DELETE in a Readonly inline entity delimeter, trigger a Entity Operation',\n    removeCodeWhenEnterOnEmptyLine: 'Remove code line when enter on empty line',\n    removeCodeWhenBackspaceOnEmptyFirstLine: 'Remove code line when backspace on empty first line',\n    indentWhenAltShiftRight: 'Indent list item using Alt + Shift + Right',\n    outdentWhenAltShiftLeft: 'Outdent list item using Alt + Shift + Left',\n};\n\nexport interface ContentEditFeaturessProps {\n    state: ContentEditFeatureSettings;\n    resetState: (callback: (state: BuildInPluginState) => void, resetEditor: boolean) => void;\n}\n\nexport default class ContentEditFeatures extends React.Component<ContentEditFeaturessProps, {}> {\n    render() {\n        const features = getAllFeatures();\n        return (\n            <table>\n                <tbody>\n                    {getObjectKeys(features).map(key =>\n                        this.renderContentEditItem(key, EditFeatureDescriptionMap[key])\n                    )}\n                </tbody>\n            </table>\n        );\n    }\n\n    private renderContentEditItem(\n        id: ContentEditItemId,\n        text: string,\n        moreOptions?: JSX.Element\n    ): JSX.Element {\n        const checked = this.props.state[id];\n\n        return (\n            <tr key={id}>\n                <td className={styles.checkboxColumn}>\n                    <input\n                        type=\"checkbox\"\n                        id={id}\n                        checked={checked}\n                        title={id}\n                        onChange={() => this.onContentEditClick(id)}\n                    />\n                </td>\n                <td>\n                    <div>\n                        <label htmlFor={id} title={id}>\n                            {text}\n                        </label>\n                    </div>\n                    {checked && moreOptions}\n                </td>\n            </tr>\n        );\n    }\n\n    private onContentEditClick = (id: ContentEditItemId) => {\n        this.props.resetState(state => {\n            let checkbox = document.getElementById(id) as HTMLInputElement;\n            state.contentEditFeatures[id] = checkbox.checked;\n        }, true);\n    };\n}\n","import * as React from 'react';\nimport BuildInPluginState from '../../BuildInPluginState';\nimport { DefaultFormat } from 'roosterjs-editor-types';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\ntype ToggleFormatId = 'bold' | 'italic' | 'underline';\ntype ModeIndependentColorId = 'textColors' | 'backgroundColors';\ntype SelectFormatId = Exclude<keyof DefaultFormat, ToggleFormatId | ModeIndependentColorId>;\n\nconst styles = require('./OptionsPane.scss');\nconst NOT_SET = 'NotSet';\n\nexport interface DefaultFormatProps {\n    state: DefaultFormat;\n    resetState: (callback: (state: BuildInPluginState) => void, resetEditor: boolean) => void;\n}\n\nexport default class DefaultFormatPane extends React.Component<DefaultFormatProps, {}> {\n    render() {\n        return (\n            <>\n                <table>\n                    <tbody>\n                        {this.renderFormatItem('bold', 'Bold')}\n                        {this.renderFormatItem('italic', 'Italic')}\n                        {this.renderFormatItem('underline', 'Underline')}\n                    </tbody>\n                </table>\n                <table>\n                    <tbody>\n                        {this.renderSelectItem('fontFamily', 'Font family: ', {\n                            [NOT_SET]: 'Not Set',\n                            Arial: 'Arial',\n                            Calibri: 'Calibri',\n                            'Courier New': 'Courier New',\n                            Tahoma: 'Tahoma',\n                            'Times New Roman': 'Times New Roman',\n                        })}\n                        {this.renderSelectItem('fontSize', 'Font size: ', {\n                            [NOT_SET]: 'Not Set',\n                            '8pt': '8',\n                            '10pt': '10',\n                            '12pt': '12',\n                            '16pt': '16',\n                            '20pt': '20',\n                            '36pt': '36',\n                            '72pt': '72',\n                        })}\n                        {this.renderSelectItem('textColor', 'Text color: ', {\n                            [NOT_SET]: 'Not Set',\n                            '#757b80': 'Gray',\n                            '#bd1398': 'Violet',\n                            '#7232ad': 'Purple',\n                            '#006fc9': 'Blue',\n                            '#4ba524': 'Green',\n                            '#e2c501': 'Yellow',\n                            '#d05c12': 'Orange',\n                            '#ff0000': 'Red',\n                            '#ffffff': 'White',\n                            '#000000': 'Black',\n                        })}\n                        {this.renderSelectItem('backgroundColor', 'Back color: ', {\n                            [NOT_SET]: 'Not Set',\n                            '#ffff00': 'Yellow',\n                            '#00ff00': 'Green',\n                            '#00ffff': 'Cyan',\n                            '#ff00ff': 'Purple',\n                            '#0000ff': 'Blue',\n                            '#ff0000': 'Red',\n                            '#bebebe': 'Gray',\n                            '#666666': 'Dark Gray',\n                            '#ffffff': 'White',\n                            '#000000': 'Black',\n                        })}\n                    </tbody>\n                </table>\n            </>\n        );\n    }\n\n    private renderFormatItem(id: ToggleFormatId, text: string): JSX.Element {\n        let checked = (this.props.state[id] as boolean) || false;\n        return (\n            <tr>\n                <td className={styles.checkboxColumn}>\n                    <input\n                        type=\"checkbox\"\n                        id={id}\n                        checked={checked}\n                        onChange={() => this.onFormatClick(id)}\n                    />\n                </td>\n                <td>\n                    <div>\n                        <label htmlFor={id}>{text}</label>\n                    </div>\n                </td>\n            </tr>\n        );\n    }\n\n    private renderSelectItem(\n        id: SelectFormatId,\n        label: string,\n        items: { [key: string]: string }\n    ): JSX.Element {\n        return (\n            <tr>\n                <td className={styles.defaultFormatLabel}>{label}</td>\n                <td>\n                    <select\n                        id={id}\n                        onChange={() => this.onSelectChanged(id)}\n                        defaultValue={(this.props.state[id] || NOT_SET) as string}>\n                        {getObjectKeys(items).map(key => (\n                            <option value={key} key={key}>\n                                {items[key]}\n                            </option>\n                        ))}\n                    </select>\n                </td>\n            </tr>\n        );\n    }\n\n    private onFormatClick = (id: ToggleFormatId) => {\n        this.props.resetState(state => {\n            let checkbox = document.getElementById(id) as HTMLInputElement;\n            state.defaultFormat[id] = checkbox.checked;\n        }, true);\n    };\n\n    private onSelectChanged = (id: SelectFormatId) => {\n        this.props.resetState(state => {\n            let value = (document.getElementById(id) as HTMLSelectElement).value;\n            state.defaultFormat[id] = value == NOT_SET ? null : value;\n        }, true);\n    };\n}\n","import BuildInPluginState, { BuildInPluginProps, UrlPlaceholder } from '../../BuildInPluginState';\nimport getDefaultContentEditFeatureSettings from './getDefaultContentEditFeatureSettings';\nimport OptionsPane from './OptionsPane';\nimport SidePanePluginImpl from '../SidePanePluginImpl';\nimport { ExperimentalFeatures } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nconst initialState: BuildInPluginState = {\n    pluginList: {\n        contentEdit: true,\n        hyperlink: true,\n        paste: true,\n        watermark: false,\n        imageEdit: true,\n        cutPasteListChain: true,\n        tableCellSelection: true,\n        tableResize: true,\n        customReplace: true,\n        listEditMenu: true,\n        imageEditMenu: true,\n        tableEditMenu: true,\n        contextMenu: true,\n        autoFormat: true,\n        contentModelPaste: false,\n    },\n    contentEditFeatures: getDefaultContentEditFeatureSettings(),\n    defaultFormat: {},\n    linkTitle: 'Ctrl+Click to follow the link:' + UrlPlaceholder,\n    watermarkText: 'Type content here ...',\n    forcePreserveRatio: false,\n    experimentalFeatures: [\n        ExperimentalFeatures.AutoFormatList,\n        ExperimentalFeatures.ReusableContentModel,\n        ExperimentalFeatures.EditWithContentModel,\n        ExperimentalFeatures.InlineEntityReadOnlyDelimiters,\n    ],\n    isRtl: false,\n};\n\nexport default class EditorOptionsPlugin extends SidePanePluginImpl<\n    OptionsPane,\n    BuildInPluginProps\n> {\n    constructor() {\n        super(OptionsPane, 'options', 'Editor Options');\n    }\n\n    getBuildInPluginState(): BuildInPluginState {\n        let result: BuildInPluginState;\n        this.getComponent(component => (result = component.getState()));\n        return result || initialState;\n    }\n\n    getComponentProps(base: SidePaneElementProps) {\n        return {\n            ...initialState,\n            ...base,\n        };\n    }\n}\n","import * as React from 'react';\nimport BuildInPluginState from '../../BuildInPluginState';\nimport { ExperimentalFeatures } from 'roosterjs-editor-types';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\nexport interface ExperimentalFeaturesProps {\n    state: ExperimentalFeatures[];\n    resetState: (callback: (state: BuildInPluginState) => void, resetEditor: boolean) => void;\n}\n\nconst FeatureNames: Partial<Record<ExperimentalFeatures, string>> = {\n    [ExperimentalFeatures.TabKeyTextFeatures]: 'Additional functionality to Tab Key',\n    [ExperimentalFeatures.AutoFormatList]:\n        'Trigger formatting by a especial characters. Ex: (A), 1. i).',\n    [ExperimentalFeatures.ReuseAllAncestorListElements]:\n        \"Reuse ancestor list elements even if they don't match the types from the list item.\",\n    [ExperimentalFeatures.ReusableContentModel]:\n        'Reuse existing DOM structure if possible when convert Content Model back to DOM tree',\n    [ExperimentalFeatures.EditWithContentModel]: 'Handle keyboard edit event with Content Model',\n    [ExperimentalFeatures.DeleteTableWithBackspace]:\n        'Delete a table selected with the table selector pressing Backspace key',\n    [ExperimentalFeatures.InlineEntityReadOnlyDelimiters]:\n        'Add read entities around read only entities to handle browser edge cases.',\n    [ExperimentalFeatures.ContentModelPaste]: 'Paste with content model',\n};\n\nexport default class ExperimentalFeaturesPane extends React.Component<\n    ExperimentalFeaturesProps,\n    {}\n> {\n    render() {\n        return <>{getObjectKeys(FeatureNames).map(name => this.renderFeature(name))}</>;\n    }\n\n    private renderFeature(name: keyof typeof FeatureNames): JSX.Element {\n        let checked = this.props.state.indexOf(name) >= 0;\n        return (\n            <div key={name}>\n                <input\n                    type=\"checkbox\"\n                    checked={checked}\n                    id={name}\n                    onChange={() => this.onClick(name)}\n                />\n                <label htmlFor={name}>{FeatureNames[name]}</label>\n            </div>\n        );\n    }\n\n    private onClick = (name: keyof typeof FeatureNames) => {\n        this.props.resetState(state => {\n            let checkbox = document.getElementById(name) as HTMLInputElement;\n            let index = state.experimentalFeatures.indexOf(name);\n\n            if (checkbox.checked && index < 0) {\n                state.experimentalFeatures.push(name);\n            } else if (!checkbox.checked && index >= 0) {\n                state.experimentalFeatures.splice(index, 1);\n            }\n        }, true);\n    };\n}\n","import * as React from 'react';\nimport BuildInPluginState, { BuildInPluginProps } from '../../BuildInPluginState';\nimport Code from './Code';\nimport ContentEditFeatures from './ContentEditFeatures';\nimport DefaultFormatPane from './DefaultFormat';\nimport EditorCode from './codes/EditorCode';\nimport ExperimentalFeaturesPane from './ExperimentalFeatures';\nimport MainPaneBase from '../../MainPaneBase';\nimport Plugins from './Plugins';\nimport ReactEditorCode from './codes/ReactEditorCode';\n\nconst htmlStart =\n    '<html>\\n' +\n    '<body>\\n' +\n    '<div id=\"contentDiv\" style=\"width: 800px; height: 400px; border: solid 1px black; overflow: auto\"></div>\\n';\nconst htmlButtons =\n    '<button id=buttonB><b>B</b></button>\\n' +\n    '<button id=buttonI><i>I</i></button>\\n' +\n    '<button id=buttonU><u>U</u></button>\\n' +\n    '<button id=buttonBullet>Bullet</button>\\n' +\n    '<button id=buttonNumbering>Numbering</button>\\n' +\n    '<button id=buttonUndo>Undo</button>\\n' +\n    '<button id=buttonRedo>Redo</button>\\n';\nconst darkButton = '<button id=buttonDark>Dark Mode</button>\\n';\nconst htmlEnd =\n    '<script src=\"https://microsoft.github.io/roosterjs/rooster-min.js\"></script>\\n' +\n    '</body>\\n' +\n    '</html>';\n\nconst htmlRoosterReact =\n    '<html>\\n' +\n    '<body>\\n' +\n    '<div id=\"root\"></div>\\n' +\n    '<script src=\"https://unpkg.com/react@16/umd/react.development.js\"></script>\\n' +\n    '<script src=\"https://unpkg.com/react-dom@16/umd/react-dom.development.js\"></script>\\n' +\n    '<script src=\"https://cdnjs.cloudflare.com/ajax/libs/fluentui-react/8.60.1/fluentui-react.min.js\"></script>\\n' +\n    '<script src=\"https://microsoft.github.io/roosterjs/rooster-min.js\"></script>\\n' +\n    '<script src=\"https://microsoft.github.io/roosterjs/rooster-react-min.js\"></script>\\n' +\n    '</body>\\n' +\n    '</html>';\n\nconst cssRoosterReact = '.editor { border: solid 1px black; width: 100%; height: 600px}';\nexport default class OptionsPane extends React.Component<BuildInPluginProps, BuildInPluginState> {\n    private exportForm = React.createRef<HTMLFormElement>();\n    private exportData = React.createRef<HTMLInputElement>();\n    private rtl = React.createRef<HTMLInputElement>();\n\n    constructor(props: BuildInPluginProps) {\n        super(props);\n        this.state = { ...props };\n    }\n    render() {\n        return (\n            <div>\n                <div>\n                    <button onClick={this.onExportRooster}>Try roosterjs in CodePen</button>\n                </div>\n                <div>\n                    <button onClick={this.onExportRoosterReact}>\n                        Try roosterjs-react in CodePen\n                    </button>\n                </div>\n                <div>\n                    <br />\n                </div>\n                <details>\n                    <summary>\n                        <b>Plugins:</b>\n                    </summary>\n                    <Plugins state={this.state} resetState={this.resetState} />\n                </details>\n                <details>\n                    <summary>\n                        <b>Content edit features:</b>\n                    </summary>\n                    <ContentEditFeatures\n                        state={this.state.contentEditFeatures}\n                        resetState={this.resetState}\n                    />\n                </details>\n                <details>\n                    <summary>\n                        <b>Default Format:</b>\n                    </summary>\n                    <DefaultFormatPane\n                        state={this.state.defaultFormat}\n                        resetState={this.resetState}\n                    />\n                </details>\n                <details>\n                    <summary>\n                        <b>Experimental features:</b>\n                    </summary>\n                    <ExperimentalFeaturesPane\n                        state={this.state.experimentalFeatures}\n                        resetState={this.resetState}\n                    />\n                </details>\n                <div>\n                    <br />\n                </div>\n                <div>\n                    <input\n                        id=\"pageRtl\"\n                        type=\"checkbox\"\n                        checked={this.state.isRtl}\n                        onChange={this.onToggleDirection}\n                        ref={this.rtl}\n                    />\n                    <label htmlFor=\"pageRtl\">Show controls from right to left</label>\n                </div>\n                <hr />\n                <details>\n                    <summary>\n                        <b>HTML Code:</b>\n                    </summary>\n                    <div>\n                        <code>\n                            <pre>{this.getHtml()}</pre>\n                        </code>\n                    </div>\n                </details>\n                <details>\n                    <summary>\n                        <b>Typescript Code:</b>\n                    </summary>\n                    <Code state={this.state} />\n                </details>\n                <form\n                    ref={this.exportForm}\n                    method=\"POST\"\n                    action=\"https://codepen.io/pen/define\"\n                    target=\"_blank\">\n                    <input name=\"data\" type=\"hidden\" ref={this.exportData} />\n                </form>\n            </div>\n        );\n    }\n\n    getState(): BuildInPluginState {\n        return { ...this.state };\n    }\n\n    private resetState = (callback: (state: BuildInPluginState) => void, resetEditor: boolean) => {\n        let state: BuildInPluginState = {\n            linkTitle: this.state.linkTitle,\n            watermarkText: this.state.watermarkText,\n            pluginList: { ...this.state.pluginList },\n            contentEditFeatures: { ...this.state.contentEditFeatures },\n            defaultFormat: { ...this.state.defaultFormat },\n            experimentalFeatures: this.state.experimentalFeatures,\n            forcePreserveRatio: this.state.forcePreserveRatio,\n            isRtl: this.state.isRtl,\n        };\n\n        if (callback) {\n            callback(state);\n            this.setState(state);\n        }\n\n        if (resetEditor) {\n            MainPaneBase.getInstance().resetEditorPlugin(state);\n        }\n    };\n\n    private onExportRooster = () => {\n        let editor = new EditorCode(this.state);\n        let code = editor.getCode();\n        let json = {\n            title: 'RoosterJs',\n            html: this.getHtml(),\n            head: '',\n            js: code,\n            js_pre_processor: 'typescript',\n        };\n        this.exportData.current.value = JSON.stringify(json);\n        this.exportForm.current.submit();\n    };\n\n    private onExportRoosterReact = () => {\n        let editor = new ReactEditorCode(this.state);\n        let code = editor.getCode();\n        let json = {\n            title: 'RoosterJs React',\n            html: htmlRoosterReact,\n            css: cssRoosterReact,\n            head: '',\n            js: code,\n            js_pre_processor: 'typescript',\n        };\n        this.exportData.current.value = JSON.stringify(json);\n        this.exportForm.current.submit();\n    };\n\n    private onToggleDirection = () => {\n        let isRtl = this.rtl.current.checked;\n        this.setState({\n            isRtl: isRtl,\n        });\n        MainPaneBase.getInstance().setPageDirection(isRtl);\n    };\n\n    private getHtml() {\n        return `${htmlStart}${htmlButtons}${darkButton}${htmlEnd}`;\n    }\n}\n","import * as React from 'react';\nimport BuildInPluginState, { BuildInPluginList, UrlPlaceholder } from '../../BuildInPluginState';\n\ntype PluginItemId = keyof BuildInPluginList;\n\nconst styles = require('./OptionsPane.scss');\n\nexport interface PluginsProps {\n    state: BuildInPluginState;\n    resetState: (callback: (state: BuildInPluginState) => void, resetEditor: boolean) => void;\n}\n\nexport default class Plugins extends React.Component<PluginsProps, {}> {\n    private linkTitle = React.createRef<HTMLInputElement>();\n    private watermarkText = React.createRef<HTMLInputElement>();\n    private forcePreserveRatio = React.createRef<HTMLInputElement>();\n\n    render() {\n        return (\n            <table>\n                <tbody>\n                    {this.renderPluginItem('contentEdit', 'Content Edit')}\n                    {this.renderPluginItem(\n                        'hyperlink',\n                        'Hyperlink Plugin',\n                        this.renderInputBox(\n                            'Label title: ',\n                            this.linkTitle,\n                            this.props.state.linkTitle,\n                            'Use \"' + UrlPlaceholder + '\" for the url string',\n                            (state, value) => (state.linkTitle = value)\n                        )\n                    )}\n                    {this.renderPluginItem('paste', 'Paste Plugin')}\n                    {this.renderPluginItem(\n                        'watermark',\n                        'Watermark Plugin',\n                        this.renderInputBox(\n                            'Watermark text: ',\n                            this.watermarkText,\n                            this.props.state.watermarkText,\n                            '',\n                            (state, value) => (state.watermarkText = value)\n                        )\n                    )}\n                    {this.renderPluginItem(\n                        'imageEdit',\n                        'Image Edit Plugin',\n                        this.renderCheckBox(\n                            'Force preserve ratio',\n                            this.forcePreserveRatio,\n                            this.props.state.forcePreserveRatio,\n                            (state, value) => (state.forcePreserveRatio = value)\n                        )\n                    )}\n                    {this.renderPluginItem('cutPasteListChain', 'CutPasteListChainPlugin')}\n                    {this.renderPluginItem('tableResize', 'Table Resize Plugin')}\n                    {this.renderPluginItem('customReplace', 'Custom Replace Plugin (autocomplete)')}\n                    {this.renderPluginItem(\n                        'contextMenu',\n                        'Show customized context menu for special cases'\n                    )}\n                    {this.renderPluginItem('tableCellSelection', 'Table Cell Selection')}\n                    {this.renderPluginItem('contentModelPaste', 'Paste Plugin using content model')}\n                </tbody>\n            </table>\n        );\n    }\n\n    private renderPluginItem(\n        id: PluginItemId,\n        text: string,\n        moreOptions?: JSX.Element\n    ): JSX.Element {\n        const checked = this.props.state.pluginList[id];\n\n        return (\n            <tr>\n                <td className={styles.checkboxColumn}>\n                    <input\n                        type=\"checkbox\"\n                        id={id}\n                        checked={checked}\n                        onChange={() => this.onPluginClick(id)}\n                    />\n                </td>\n                <td>\n                    <div>\n                        <label htmlFor={id}>{text}</label>\n                    </div>\n                    {checked && moreOptions}\n                </td>\n            </tr>\n        );\n    }\n\n    private renderInputBox(\n        label: string,\n        ref: React.RefObject<HTMLInputElement>,\n        value: string,\n        placeholder: string,\n        onChange: (state: BuildInPluginState, value: string) => void\n    ): JSX.Element {\n        return (\n            <div>\n                {label}\n                <input\n                    type=\"text\"\n                    ref={ref}\n                    value={value}\n                    placeholder={placeholder}\n                    onChange={() =>\n                        this.props.resetState(state => onChange(state, ref.current.value), false)\n                    }\n                    onBlur={() => this.props.resetState(null, true)}\n                />\n            </div>\n        );\n    }\n\n    private renderCheckBox(\n        label: string,\n        ref: React.RefObject<HTMLInputElement>,\n        value: boolean,\n        onChange: (state: BuildInPluginState, value: boolean) => void\n    ): JSX.Element {\n        return (\n            <div>\n                <input\n                    type=\"checkbox\"\n                    ref={ref}\n                    checked={value}\n                    onChange={() =>\n                        this.props.resetState(state => onChange(state, ref.current.checked), true)\n                    }\n                    onBlur={() => this.props.resetState(null, true)}\n                />\n                {label}\n            </div>\n        );\n    }\n\n    private onPluginClick = (id: PluginItemId) => {\n        this.props.resetState(state => {\n            let checkbox = document.getElementById(id) as HTMLInputElement;\n            state.pluginList[id] = checkbox.checked;\n        }, true);\n    };\n}\n","import CodeElement from './CodeElement';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\nconst codeMap: { [id: string]: string } = {\n    buttonB: 'roosterjs.toggleBold(editor)',\n    buttonI: 'roosterjs.toggleItalic(editor)',\n    buttonU: 'roosterjs.toggleUnderline(editor)',\n    buttonBullet: 'roosterjs.toggleBullet(editor)',\n    buttonNumbering: 'roosterjs.toggleNumbering(editor)',\n    buttonUndo: 'editor.undo()',\n    buttonRedo: 'editor.redo()',\n};\nconst buttonDark = 'editor.setDarkModeState(!editor.isDarkMode())';\n\nexport default class ButtonsCode extends CodeElement {\n    getCode() {\n        const map = { ...codeMap, buttonDark: buttonDark };\n        return getObjectKeys(map)\n            .map(\n                id =>\n                    `document.getElementById('${id}').addEventListener('click', () => ${map[id]});\\n`\n            )\n            .join('');\n    }\n}\n","export default abstract class CodeElement {\n    abstract getCode(): string;\n\n    protected encode(src: string): string {\n        return src.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\");\n    }\n\n    protected indent(src: string): string {\n        return src\n            .split('\\n')\n            .map(line => (line == '' ? '' : '    ' + line + '\\n'))\n            .join('');\n    }\n}\n","import CodeElement from './CodeElement';\nimport ContentEditFeaturesCode from './ContentEditFeaturesCode';\nimport { ContentEditFeatureSettings } from 'roosterjs-editor-types';\n\nexport default class ContentEditCode extends CodeElement {\n    private features: ContentEditFeaturesCode;\n    constructor(settings: ContentEditFeatureSettings) {\n        super();\n        this.features = new ContentEditFeaturesCode(settings);\n    }\n\n    getCode() {\n        return 'new roosterjs.ContentEdit(' + this.features.getCode() + ')';\n    }\n}\n","import CodeElement from './CodeElement';\nimport getDefaultContentEditFeatureSettings from '../getDefaultContentEditFeatureSettings';\nimport { ContentEditFeatureSettings } from 'roosterjs-editor-types';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\nexport default class ContentEditFeaturesCode extends CodeElement {\n    constructor(private state: ContentEditFeatureSettings) {\n        super();\n    }\n\n    getCode() {\n        let defaultValues = getDefaultContentEditFeatureSettings();\n        let features = getObjectKeys(defaultValues)\n            .map(key => {\n                let checked = this.state[key];\n\n                return typeof checked != 'boolean' || checked == defaultValues[key]\n                    ? null\n                    : `${key}: ${checked ? 'true' : 'false'},\\n`;\n            })\n            .filter(line => !!line);\n        return features.length > 0 ? '{\\n' + this.indent(features.join('')) + '}' : '';\n    }\n}\n","import CodeElement from './CodeElement';\n\nexport default class DarkModeCode extends CodeElement {\n    getCode() {\n        return 'roosterjs.getDarkColor';\n    }\n}\n","import CodeElement from './CodeElement';\nimport { DefaultFormat } from 'roosterjs-editor-types';\n\nexport default class DefaultFormatCode extends CodeElement {\n    constructor(private defaultFormat: DefaultFormat) {\n        super();\n    }\n\n    getCode() {\n        let {\n            bold,\n            italic,\n            underline,\n            fontFamily,\n            fontSize,\n            textColor,\n            backgroundColor,\n        } = this.defaultFormat;\n        let lines = [\n            bold ? 'bold: true,\\n' : null,\n            italic ? 'italic: true,\\n' : null,\n            underline ? 'underline: true,\\n' : null,\n            fontFamily ? `fontFamily: '${this.encode(fontFamily)}',\\n` : null,\n            fontSize ? `fontSize: '${this.encode(fontSize)}',\\n` : null,\n            textColor ? `textColor: '${this.encode(textColor)}',\\n` : null,\n            backgroundColor ? `backgroundColor: '${this.encode(backgroundColor)}',\\n` : null,\n        ].filter(line => !!line);\n\n        return lines.length > 0 ? '{\\n' + this.indent(lines.join('')) + '}' : '';\n    }\n}\n","import BuildInPluginState from '../../../BuildInPluginState';\nimport ButtonsCode from './ButtonsCode';\nimport CodeElement from './CodeElement';\nimport DarkModeCode from './DarkModeCode';\nimport DefaultFormatCode from './DefaultFormatCode';\nimport ExperimentalFeaturesCode from './ExperimentalFeaturesCode';\nimport PluginsCode from './PluginsCode';\n\nexport default class EditorCode extends CodeElement {\n    private plugins: PluginsCode;\n    private defaultFormat: DefaultFormatCode;\n    private buttons: ButtonsCode;\n    private experimentalFeatures: ExperimentalFeaturesCode;\n    private darkMode: DarkModeCode;\n\n    constructor(state: BuildInPluginState) {\n        super();\n\n        this.plugins = new PluginsCode(state);\n        this.defaultFormat = new DefaultFormatCode(state.defaultFormat);\n        this.buttons = new ButtonsCode();\n        this.experimentalFeatures = new ExperimentalFeaturesCode(state.experimentalFeatures);\n        this.darkMode = new DarkModeCode();\n    }\n\n    getCode() {\n        let defaultFormat = this.defaultFormat.getCode();\n        let expermientalFeatures = this.experimentalFeatures.getCode();\n        let darkMode = this.darkMode.getCode();\n        let code = \"let contentDiv = document.getElementById('contentDiv') as HTMLDivElement;\\n\";\n        code += `let plugins = ${this.plugins.getCode()};\\n`;\n        code += defaultFormat ? `let defaultFormat: DefaultFormat = ${defaultFormat};\\n` : '';\n        code += 'let options: roosterjs.EditorOptions = {\\n';\n        code += this.indent('plugins: plugins,\\n');\n        code += defaultFormat ? this.indent('defaultFormat: defaultFormat,\\n') : '';\n        code += expermientalFeatures\n            ? this.indent(`experimentalFeatures: [\\n${expermientalFeatures}],\\n`)\n            : '';\n        code += darkMode ? this.indent(`getDarkColor: ${darkMode},\\n`) : '';\n        code += '};\\n';\n        code += 'let editor = new roosterjs.Editor(contentDiv, options);\\n';\n        code += this.buttons ? this.buttons.getCode() : '';\n\n        return code;\n    }\n}\n","import CodeElement from './CodeElement';\nimport { ExperimentalFeatures } from 'roosterjs-editor-types';\n\nexport default class ExperimentalFeaturesCode extends CodeElement {\n    constructor(private experimentalFeatures: ExperimentalFeatures[]) {\n        super();\n    }\n\n    getCode() {\n        return (this.experimentalFeatures || [])\n            .map(name => this.indent(\"'\" + name + \"',\"))\n            .join('\\n');\n    }\n}\n","import CodeElement from './CodeElement';\nimport { UrlPlaceholder } from '../../../BuildInPluginState';\n\nexport default class HyperLinkCode extends CodeElement {\n    constructor(private linkTitle: string) {\n        super();\n    }\n\n    getCode() {\n        return 'new roosterjs.HyperLink(' + this.getLinkCallback() + ')';\n    }\n\n    private getLinkCallback() {\n        if (!this.linkTitle) {\n            return '';\n        }\n\n        let index = this.linkTitle.indexOf(UrlPlaceholder);\n        if (index >= 0) {\n            let left = this.linkTitle.substr(0, index);\n            let right = this.linkTitle.substr(index + UrlPlaceholder.length);\n            return (\n                'url => ' +\n                (left ? `'${this.encode(left)}' + ` : '') +\n                'url' +\n                (right ? ` + '${this.encode(right)}'` : '')\n            );\n        } else {\n            return `() => '${this.linkTitle}'`;\n        }\n    }\n}\n","import BuildInPluginState from '../../../BuildInPluginState';\nimport CodeElement from './CodeElement';\nimport ContentEditCode from './ContentEditCode';\nimport HyperLinkCode from './HyperLinkCode';\nimport TableCellSelectionCode from './TableCellSelectionCode';\nimport WatermarkCode from './WatermarkCode';\nimport {\n    CustomReplaceCode,\n    CutPasteListChainCode,\n    ImageEditCode,\n    PasteCode,\n    TableResizeCode,\n} from './SimplePluginCode';\n\nexport default class PluginsCode extends CodeElement {\n    private plugins: CodeElement[];\n\n    constructor(private state: BuildInPluginState, private additionalPlugins?: string[]) {\n        super();\n\n        let pluginList = state.pluginList;\n        this.plugins = [\n            pluginList.contentEdit && new ContentEditCode(state.contentEditFeatures),\n            pluginList.hyperlink && new HyperLinkCode(state.linkTitle),\n            pluginList.paste && new PasteCode(),\n            pluginList.watermark && new WatermarkCode(this.state.watermarkText),\n            pluginList.imageEdit && new ImageEditCode(),\n            pluginList.cutPasteListChain && new CutPasteListChainCode(),\n            pluginList.tableResize && new TableResizeCode(),\n            pluginList.customReplace && new CustomReplaceCode(),\n            pluginList.tableCellSelection && new TableCellSelectionCode(),\n        ].filter(plugin => !!plugin);\n    }\n\n    getCode() {\n        let code = '[\\n';\n        code += this.indent(this.plugins.map(plugin => plugin.getCode() + ',\\n').join(''));\n\n        if (this.additionalPlugins) {\n            code += this.indent(this.additionalPlugins.map(p => p + ',\\n').join(''));\n        }\n        code += ']';\n        return code;\n    }\n}\n","import BuildInPluginState from '../../../BuildInPluginState';\nimport CodeElement from './CodeElement';\nimport DarkModeCode from './DarkModeCode';\nimport DefaultFormatCode from './DefaultFormatCode';\nimport ExperimentalFeaturesCode from './ExperimentalFeaturesCode';\nimport PluginsCode from './PluginsCode';\nimport RibbonButtonCode from './RibbonButtonCode';\nimport RibbonCode from './RibbonCode';\n\nconst RibbonPluginVarName = 'ribbonPlugin';\n\nexport default class ReactEditorCode extends CodeElement {\n    private plugins: PluginsCode;\n    private defaultFormat: DefaultFormatCode;\n    private ribbon: RibbonCode;\n    private ribbonButton: RibbonButtonCode;\n    private experimentalFeatures: ExperimentalFeaturesCode;\n    private darkMode: DarkModeCode;\n    private isRtl: boolean;\n\n    constructor(state: BuildInPluginState) {\n        super();\n\n        this.ribbonButton = new RibbonButtonCode();\n        this.ribbon = new RibbonCode(state, this.ribbonButton);\n        this.plugins = new PluginsCode(state, this.ribbon ? [RibbonPluginVarName] : undefined);\n        this.defaultFormat = new DefaultFormatCode(state.defaultFormat);\n        this.experimentalFeatures = new ExperimentalFeaturesCode(state.experimentalFeatures);\n        this.darkMode = new DarkModeCode();\n        this.isRtl = state.isRtl;\n    }\n\n    getCode() {\n        let defaultFormat = this.defaultFormat.getCode();\n        let expermientalFeatures = this.experimentalFeatures.getCode();\n        let darkMode = this.darkMode.getCode();\n        let code = \"let root = document.getElementById('root');\\n\";\n\n        if (this.ribbonButton) {\n            code += `let ${RibbonPluginVarName} = roosterjsReact.createRibbonPlugin();\\n`;\n        }\n\n        code += `let plugins = ${this.plugins.getCode()};\\n`;\n        code += defaultFormat ? `let defaultFormat: DefaultFormat = ${defaultFormat};\\n` : '';\n        code += 'let options: roosterjs.EditorOptions = {\\n';\n        code += this.indent('plugins: plugins,\\n');\n        code += defaultFormat ? this.indent('defaultFormat: defaultFormat,\\n') : '';\n        code += expermientalFeatures\n            ? this.indent(`experimentalFeatures: [\\n${expermientalFeatures}],\\n`)\n            : '';\n        code += darkMode ? this.indent(`getDarkColor: ${darkMode},\\n`) : '';\n        code += '};\\n';\n\n        code += `let editor = <roosterjsReact.Rooster className=\"editor\" {...options} ${\n            this.isRtl ? 'dir=\"rtl\" ' : ''\n        }/>;\\n`;\n        let componentCode: string;\n\n        if (this.ribbon && this.ribbonButton) {\n            code += this.ribbonButton.getCode();\n            code += 'let ribbon = ' + this.ribbon.getCode();\n            componentCode = '<>{ribbon}{editor}</>';\n        } else {\n            componentCode = 'editor';\n        }\n\n        code += 'ReactDOM.render(' + componentCode + ', root);\\n';\n\n        return code;\n    }\n}\n","import CodeElement from './CodeElement';\n\nconst ButtonVarName = 'buttons';\n\nexport default class RibbonButtonCode extends CodeElement {\n    private supportDarkMode: boolean;\n\n    getCode() {\n        let code = `let ${ButtonVarName} = roosterjsReact.getButtons();\\n`;\n\n        if (this.supportDarkMode) {\n            code += `${ButtonVarName}.push({\\n`;\n            code += this.indent('key: \"buttonNameDarkMode\",\\n');\n            code += this.indent('unlocalizedText: \"Dark Mode\",\\n');\n            code += this.indent('iconName: \"ClearNight\",\\n');\n            code += this.indent('isChecked: formatState => formatState.isDarkMode,\\n');\n            code += this.indent('onClick: editor => {\\n');\n            code += this.indent('    editor.setDarkModeState(!editor.isDarkMode());\\n');\n            code += this.indent('    editor.focus();\\n');\n            code += this.indent('},\\n');\n            code += '});\\n';\n        }\n\n        return code;\n    }\n\n    getButtonVarName() {\n        return ButtonVarName;\n    }\n}\n","import BuildInPluginState from '../../../BuildInPluginState';\nimport CodeElement from './CodeElement';\nimport RibbonButtonCode from './RibbonButtonCode';\n\nexport default class RibbonCode extends CodeElement {\n    private buttonsVarName: string;\n    private isRtl: boolean;\n\n    constructor(state: BuildInPluginState, ribbonButton: RibbonButtonCode) {\n        super();\n        this.buttonsVarName = ribbonButton.getButtonVarName();\n        this.isRtl = state.isRtl;\n    }\n\n    getCode() {\n        return `<roosterjsReact.Ribbon buttons={${this.buttonsVarName}} plugin={ribbonPlugin} ${\n            this.isRtl ? 'dir=\"rtl\" ' : ''\n        }/>;\\n`;\n    }\n}\n","import CodeElement from './CodeElement';\n\nclass SimplePluginCode extends CodeElement {\n    constructor(private name: string) {\n        super();\n    }\n\n    getCode() {\n        return `new roosterjs.${this.name}()`;\n    }\n}\n\nexport class PasteCode extends SimplePluginCode {\n    constructor() {\n        super('Paste');\n    }\n}\n\nexport class ImageEditCode extends SimplePluginCode {\n    constructor() {\n        super('ImageEdit');\n    }\n}\n\nexport class CutPasteListChainCode extends SimplePluginCode {\n    constructor() {\n        super('CutPasteListChain');\n    }\n}\n\nexport class TableResizeCode extends SimplePluginCode {\n    constructor() {\n        super('TableResize');\n    }\n}\n\nexport class CustomReplaceCode extends SimplePluginCode {\n    constructor() {\n        super('CustomReplace');\n    }\n}\n","import CodeElement from './CodeElement';\n\nexport default class TableCellSelectionCode extends CodeElement {\n    constructor() {\n        super();\n    }\n\n    getCode() {\n        return 'new roosterjs.TableCellSelection()';\n    }\n}\n","import CodeElement from './CodeElement';\n\nexport default class WatermarkCode extends CodeElement {\n    constructor(private watermarkText: string) {\n        super();\n    }\n\n    getCode() {\n        return `new roosterjs.Watermark('${this.encode(this.watermarkText)}')`;\n    }\n}\n","import { ContentEditFeatureSettings } from 'roosterjs-editor-types';\nimport { getAllFeatures } from 'roosterjs-editor-plugins/lib/ContentEdit';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\nexport default function getDefaultContentEditFeatureSettings(): ContentEditFeatureSettings {\n    const allFeatures = getAllFeatures();\n    return {\n        ...getObjectKeys(allFeatures).reduce((settings, key) => {\n            settings[key] = !allFeatures[key].defaultDisabled;\n            return settings;\n        }, <ContentEditFeatureSettings>{}),\n        indentWhenAltShiftRight: true,\n        outdentWhenAltShiftLeft: true,\n    };\n}\n","import * as React from 'react';\nimport { EntityOperation, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\nimport {\n    getObjectKeys,\n    getTagOfNode,\n    HtmlSanitizer,\n    readFile,\n    safeInstanceOf,\n} from 'roosterjs-editor-dom';\n\nconst styles = require('./EventViewPane.scss');\n\nexport interface EventEntry {\n    index: number;\n    time: Date;\n    event: PluginEvent;\n}\n\nexport interface EventViewPaneState {\n    displayCount: number;\n    currentIndex: number;\n}\n\nconst EventTypeMap: { [key in PluginEventType]: string } = {\n    [PluginEventType.BeforeDispose]: 'BeforeDispose',\n    [PluginEventType.BeforePaste]: 'BeforePaste',\n    [PluginEventType.CompositionEnd]: 'CompositionEnd',\n    [PluginEventType.ContentChanged]: 'ContentChanged',\n    [PluginEventType.EditorReady]: 'EditorReady',\n    [PluginEventType.EntityOperation]: 'EntityOperation',\n    [PluginEventType.ExtractContentWithDom]: 'ExtractContentWithDom',\n    [PluginEventType.KeyDown]: 'KeyDown',\n    [PluginEventType.KeyPress]: 'KeyPress',\n    [PluginEventType.KeyUp]: 'KeyUp',\n    [PluginEventType.MouseDown]: 'MouseDown',\n    [PluginEventType.MouseUp]: 'MouseUp',\n    [PluginEventType.Input]: 'Input',\n    [PluginEventType.PendingFormatStateChanged]: 'PendingFormatStateChanged',\n    [PluginEventType.Scroll]: 'Scroll',\n    [PluginEventType.BeforeCutCopy]: 'BeforeCutCopy',\n    [PluginEventType.ContextMenu]: 'ContextMenu',\n    [PluginEventType.EnteredShadowEdit]: 'EnteredShadowEdit',\n    [PluginEventType.LeavingShadowEdit]: 'LeavingShadowEdit',\n    [PluginEventType.EditImage]: 'EditImage',\n    [PluginEventType.BeforeSetContent]: 'BeforeSetContent',\n    [PluginEventType.ZoomChanged]: 'ZoomChanged',\n    [PluginEventType.SelectionChanged]: 'SelectionChanged',\n    [PluginEventType.BeforeKeyboardEditing]: 'BeforeKeyboardEditing',\n};\n\nconst EntityOperationMap: { [key in EntityOperation]: string } = {\n    [EntityOperation.AddShadowRoot]: 'AddShadowRoot',\n    [EntityOperation.RemoveShadowRoot]: 'RemoveShadowRoot',\n    [EntityOperation.Click]: 'Click',\n    [EntityOperation.ContextMenu]: 'ContextMenu',\n    [EntityOperation.Escape]: 'Escape',\n    [EntityOperation.NewEntity]: 'NewEntity',\n    [EntityOperation.Overwrite]: 'Overwrite',\n    [EntityOperation.PartialOverwrite]: 'PartialOverwrite',\n    [EntityOperation.RemoveFromEnd]: 'RemoveFromEnd',\n    [EntityOperation.RemoveFromStart]: 'RemoveFromStart',\n    [EntityOperation.ReplaceTemporaryContent]: 'ReplaceTemporaryContent',\n    [EntityOperation.UpdateEntityState]: 'UpdateEntityState',\n};\n\nexport default class EventViewPane extends React.Component<\n    SidePaneElementProps,\n    EventViewPaneState\n> {\n    private events: EventEntry[] = [];\n    private displayCount = React.createRef<HTMLSelectElement>();\n    private lastIndex = 0;\n\n    constructor(props: SidePaneElementProps) {\n        super(props);\n        this.state = {\n            displayCount: 20,\n            currentIndex: -1,\n        };\n    }\n\n    render() {\n        let displayCount = Math.min(this.events.length, this.state.displayCount);\n        let displayedEvents =\n            displayCount > 0 ? this.events.slice(this.events.length - displayCount) : [];\n        displayedEvents = displayedEvents.reverse();\n\n        return (\n            <>\n                <div>\n                    Show item count:\n                    <select\n                        defaultValue={this.state.displayCount.toString()}\n                        ref={this.displayCount}\n                        onChange={this.onDisplayCountChanged}>\n                        <option value={'0'}>Disabled</option>\n                        <option value={'20'}>20</option>\n                        <option value={'50'}>50</option>\n                        <option value={'100'}>100</option>\n                    </select>{' '}\n                    <button onClick={this.clear}>Clear all</button>\n                </div>\n                <div>\n                    {displayedEvents.map(event => (\n                        <details key={event.index.toString()}>\n                            <summary>\n                                {`${event.time.getHours()}:${event.time.getMinutes()}:${event.time.getSeconds()}.${event.time.getMilliseconds()} `}\n                                {EventTypeMap[event.event.eventType]}\n                            </summary>\n                            <div className={styles.eventContent}>\n                                {this.renderEvent(event.event)}\n                            </div>\n                        </details>\n                    ))}\n                </div>\n            </>\n        );\n    }\n\n    addEvent(event: PluginEvent) {\n        if (this.state.displayCount > 0) {\n            if (event.eventType == PluginEventType.BeforePaste) {\n                const sanitizer = new HtmlSanitizer(event.sanitizingOption);\n                const fragment = event.fragment.cloneNode(true /*deep*/) as DocumentFragment;\n\n                sanitizer.convertGlobalCssToInlineCss(fragment);\n                sanitizer.sanitize(fragment);\n                (event.clipboardData as any).html = this.getHtml(fragment);\n            }\n\n            this.events.push({\n                time: new Date(),\n                event: event,\n                index: this.lastIndex++,\n            });\n\n            while (this.events.length > 100) {\n                this.events.shift();\n            }\n            this.setState({\n                currentIndex: this.lastIndex,\n            });\n        }\n    }\n\n    private renderEvent(event: PluginEvent): JSX.Element {\n        switch (event.eventType) {\n            case PluginEventType.KeyDown:\n            case PluginEventType.KeyPress:\n            case PluginEventType.KeyUp:\n                return (\n                    <span>\n                        Key=\n                        {event.rawEvent.which}\n                    </span>\n                );\n\n            case PluginEventType.MouseDown:\n            case PluginEventType.MouseUp:\n            case PluginEventType.ContextMenu:\n                return (\n                    <span>\n                        Button=\n                        {event.rawEvent.button}, SrcElement=\n                        {event.rawEvent.target && getTagOfNode(event.rawEvent.target as Node)},\n                        PageX=\n                        {event.rawEvent.pageX}, PageY=\n                        {event.rawEvent.pageY}\n                    </span>\n                );\n\n            case PluginEventType.ContentChanged:\n                return (\n                    <span>\n                        Source=\n                        {event.source}, Data=\n                        {event.data && event.data.toString && event.data.toString()}\n                    </span>\n                );\n\n            case PluginEventType.BeforePaste:\n                return (\n                    <span>\n                        Types=\n                        {event.clipboardData.types.join()}\n                        {this.renderPasteContent('Plain text', event.clipboardData.text)}\n                        {this.renderPasteContent(\n                            'Sanitized HTML',\n                            (event.clipboardData as any).html\n                        )}\n                        {this.renderPasteContent('Original HTML', event.clipboardData.rawHtml)}\n                        {this.renderPasteContent('Image', event.clipboardData.image, img => (\n                            <img\n                                ref={ref => ref && this.renderImage(ref, img)}\n                                className={styles.img}\n                            />\n                        ))}\n                        {this.renderPasteContent(\n                            'LinkPreview',\n                            event.clipboardData.linkPreview\n                                ? JSON.stringify(event.clipboardData.linkPreview)\n                                : ''\n                        )}\n                        {getObjectKeys(event.clipboardData.customValues).map(contentType =>\n                            this.renderPasteContent(\n                                contentType,\n                                event.clipboardData.customValues[contentType]\n                            )\n                        )}\n                    </span>\n                );\n            case PluginEventType.PendingFormatStateChanged:\n                const formatState = event.formatState;\n                const keys = getObjectKeys(formatState);\n                return <span>{keys.map(key => `${key}=${event.formatState[key]}; `)}</span>;\n\n            case PluginEventType.EntityOperation:\n                const {\n                    operation,\n                    entity: { id, type },\n                } = event;\n                return (\n                    <span>\n                        Operation={EntityOperationMap[operation]} Type={type}; Id={id}\n                    </span>\n                );\n\n            case PluginEventType.BeforeCutCopy:\n                const { isCut } = event;\n                return <span>isCut={isCut ? 'true' : 'false'}</span>;\n\n            case PluginEventType.EditImage:\n                return (\n                    <>\n                        <span>new src={event.newSrc.substr(0, 100)}</span>\n                    </>\n                );\n\n            case PluginEventType.ZoomChanged:\n                return (\n                    <span>\n                        Old value={event.oldZoomScale} New value={event.newZoomScale}\n                    </span>\n                );\n\n            case PluginEventType.BeforeKeyboardEditing:\n                return <span>Key code={event.rawEvent.which}</span>;\n\n            default:\n                return null;\n        }\n    }\n\n    private clear = () => {\n        this.events = [];\n        this.setState({\n            currentIndex: -1,\n        });\n    };\n\n    private renderImage = (img: HTMLImageElement, imageFile: File) => {\n        readFile(imageFile, dataUrl => (img.src = dataUrl));\n    };\n\n    private onDisplayCountChanged = () => {\n        let value = parseInt(this.displayCount.current.value);\n        this.setState({\n            displayCount: value,\n        });\n    };\n\n    private renderPasteContent(\n        title: string,\n        content: any,\n        renderer: (content: any) => JSX.Element = content => <span>{content}</span>\n    ): JSX.Element {\n        return (\n            content && (\n                <details>\n                    <summary>{title}</summary>\n                    <div className={styles.pasteContent}>{renderer(content)}</div>\n                </details>\n            )\n        );\n    }\n\n    private getHtml(fragment: DocumentFragment) {\n        const stringArray: string[] = [];\n        for (let child = fragment.firstChild; child; child = child.nextSibling) {\n            stringArray.push(\n                safeInstanceOf(child, 'HTMLElement')\n                    ? child.outerHTML\n                    : safeInstanceOf(child, 'Text')\n                    ? child.nodeValue\n                    : ''\n            );\n        }\n\n        return stringArray.join('');\n    }\n}\n","import EventViewPane from './EventViewPane';\nimport SidePanePluginImpl from '../SidePanePluginImpl';\nimport { PluginEvent } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nexport default class EventViewPlugin extends SidePanePluginImpl<\n    EventViewPane,\n    SidePaneElementProps\n> {\n    constructor() {\n        super(EventViewPane, 'event', 'Event Viewer');\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        this.getComponent(component => component.addEvent(e));\n    }\n\n    getComponentProps(base: SidePaneElementProps) {\n        return base;\n    }\n}\n","import * as React from 'react';\nimport { Browser } from 'roosterjs-editor-dom';\nimport { FormatState } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\n\nconst styles = require('./FormatStatePane.scss');\n\nexport interface FormatStatePaneState {\n    format: FormatState;\n    inIME: boolean;\n    x: number;\n    y: number;\n}\nexport interface FormatStatePaneProps extends FormatStatePaneState, SidePaneElementProps {}\n\nexport default class FormatStatePane extends React.Component<\n    FormatStatePaneProps,\n    FormatStatePaneState\n> {\n    constructor(props: FormatStatePaneProps) {\n        super(props);\n        this.state = {\n            format: props.format,\n            inIME: props.inIME,\n            x: props.x,\n            y: props.y,\n        };\n    }\n\n    setFormatState(state: FormatStatePaneState) {\n        this.setState(state);\n    }\n\n    render() {\n        let { format, x, y } = this.state;\n        return format ? (\n            <table>\n                <tbody>\n                    <tr>\n                        <td className={styles.title}>Position</td>\n                        <td>{`${x},${y}`}</td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Font</td>\n                        <td>\n                            <span>{`${format.fontName}, ${format.fontSize}`}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Colors</td>\n                        <td>\n                            <span\n                                style={{\n                                    color: format.textColor,\n                                    backgroundColor: format.backgroundColor,\n                                }}>{`${format.textColor} / ${format.backgroundColor}`}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>IME</td>\n                        <td>{this.renderSpan(this.state.inIME, 'InIME')}</td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Formats</td>\n                        <td>\n                            {this.renderSpan(format.isBold, 'Bold')}\n                            {this.renderSpan(format.isItalic, 'Italic')}\n                            {this.renderSpan(format.isUnderline, 'Underline')}\n                            {this.renderSpan(format.isStrikeThrough, 'Strike')}\n                            {this.renderSpan(format.isSubscript, 'Subscript')}\n                            {this.renderSpan(format.isSuperscript, 'Superscript')}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Structure</td>\n                        <td>\n                            {this.renderSpan(format.isBullet, 'Bullet')}\n                            {this.renderSpan(format.isNumbering, 'Numbering')}\n                            {this.renderSpan(format.isBlockQuote, 'Quote')}\n                            {this.renderSpan(format.canUnlink, 'In Link')}\n                            {this.renderSpan(format.canAddImageAltText, 'In Image')}\n                            {this.renderSpan(format.isInTable, 'In Table')}\n                            {this.renderSpan(format.tableHasHeader, 'Table Has Header')}\n                            <span\n                                className={\n                                    format.headerLevel == 0 && styles.inactive\n                                }>{`Header ${format.headerLevel}`}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Undo</td>\n                        <td>\n                            {this.renderSpan(format.canUndo, 'Can Undo')}\n                            {this.renderSpan(format.canRedo, 'Can Redo')}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>Browser</td>\n                        <td>\n                            {this.renderSpan(Browser.isChrome, 'Chrome')}\n                            {this.renderSpan(Browser.isFirefox, 'Firefox')}\n                            {this.renderSpan(Browser.isSafari, 'Safari')}\n                            {this.renderSpan(Browser.isWebKit, 'Webkit')}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>OS</td>\n                        <td>\n                            {this.renderSpan(Browser.isMac, 'MacOS')}\n                            {this.renderSpan(Browser.isWin, 'Windows')}\n                            {this.renderSpan(Browser.isAndroid, 'Android')}\n                            {this.renderSpan(Browser.isMobileOrTablet, 'Mobile/Tablet')}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>User Agent</td>\n                        <td>{window.navigator.userAgent}</td>\n                    </tr>\n                    <tr>\n                        <td className={styles.title}>App Version</td>\n                        <td>{window.navigator.appVersion}</td>\n                    </tr>\n                </tbody>\n            </table>\n        ) : (\n            <div>Please focus into editor</div>\n        );\n    }\n\n    private renderSpan(formatState: boolean, text: string): JSX.Element {\n        return <span className={formatState ? '' : styles.inactive}>{text + ' '}</span>;\n    }\n}\n","import FormatStatePane, { FormatStatePaneProps } from './FormatStatePane';\nimport SidePanePluginImpl from '../SidePanePluginImpl';\nimport { getFormatState } from 'roosterjs-editor-api';\nimport { getPositionRect } from 'roosterjs-editor-dom';\nimport { IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { SidePaneElementProps } from '../SidePaneElement';\nimport {\n    getFormatState as getFormatStateFromContentModel,\n    isContentModelEditor,\n} from 'roosterjs-content-model';\n\nexport default class FormatStatePlugin extends SidePanePluginImpl<\n    FormatStatePane,\n    FormatStatePaneProps\n> {\n    constructor() {\n        super(FormatStatePane, 'format', 'Format State');\n    }\n\n    initialize(editor: IEditor) {\n        super.initialize(editor);\n        this.editor.runAsync(editor => {\n            editor.focus();\n\n            this.updateFormatState();\n        });\n    }\n\n    getComponentProps(base: SidePaneElementProps) {\n        return {\n            ...base,\n            ...this.getFormatState(),\n        };\n    }\n\n    onPluginEvent(event: PluginEvent) {\n        if (\n            event.eventType == PluginEventType.KeyUp ||\n            event.eventType == PluginEventType.MouseUp ||\n            event.eventType == PluginEventType.ContentChanged\n        ) {\n            this.updateFormatState();\n        }\n    }\n\n    updateFormatState() {\n        this.getComponent(component => component.setFormatState(this.getFormatState()));\n    }\n\n    private getFormatState() {\n        if (!this.editor) {\n            return null;\n        }\n\n        const format = isContentModelEditor(this.editor)\n            ? getFormatStateFromContentModel(this.editor)\n            : getFormatState(this.editor);\n        const position = this.editor && this.editor.getFocusedPosition();\n        const rect = position && getPositionRect(position);\n        return {\n            format,\n            inIME: this.editor && this.editor.isInIME(),\n            x: rect ? rect.left : 0,\n            y: rect ? rect.top : 0,\n        };\n    }\n}\n","import { TableBorderFormat, TableFormat } from 'roosterjs-editor-types';\nimport { TableMetadataFormat } from 'roosterjs-content-model';\n\nexport const PREDEFINED_STYLES: Record<\n    string,\n    (color?: string, lightColor?: string) => TableFormat & TableMetadataFormat\n> = {\n    DEFAULT: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.DEFAULT /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    DEFAULT_WITH_BACKGROUND_COLOR: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.DEFAULT /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    GRID_WITHOUT_BORDER: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            true /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.NO_SIDE_BORDERS /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    LIST: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            null /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.DEFAULT /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    BANDED_ROWS_FIRST_COLUMN_NO_BORDER: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.FIRST_COLUMN_HEADER_EXTERNAL /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    EXTERNAL: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.LIST_WITH_SIDE_BORDERS /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    NO_HEADER_VERTICAL: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.NO_HEADER_BORDERS /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    ESPECIAL_TYPE_1: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.ESPECIAL_TYPE_1 /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    ESPECIAL_TYPE_2: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.ESPECIAL_TYPE_2 /** tableBorderFormat */,\n            null /** bgColorEven */,\n            lightColor /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    ESPECIAL_TYPE_3: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.ESPECIAL_TYPE_3 /** tableBorderFormat */,\n            lightColor /** bgColorEven */,\n            null /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n    CLEAR: (color, lightColor) =>\n        createTableFormat(\n            color /**topBorder */,\n            color /**bottomBorder */,\n            color /** verticalColors*/,\n            false /** bandedRows */,\n            false /** bandedColumns */,\n            false /** headerRow */,\n            false /** firstColumn */,\n            TableBorderFormat.CLEAR /** tableBorderFormat */,\n            lightColor /** bgColorEven */,\n            null /** bgColorOdd */,\n            color /** headerRowColor */\n        ),\n};\n\nexport function createTableFormat(\n    topBorder?: string,\n    bottomBorder?: string,\n    verticalBorder?: string,\n    bandedRows?: boolean,\n    bandedColumns?: boolean,\n    headerRow?: boolean,\n    firstColumn?: boolean,\n    borderFormat?: TableBorderFormat,\n    bgColorEven?: string,\n    bgColorOdd?: string,\n    headerRowColor?: string\n): TableFormat & TableMetadataFormat {\n    return {\n        topBorderColor: topBorder,\n        bottomBorderColor: bottomBorder,\n        verticalBorderColor: verticalBorder,\n        hasBandedRows: bandedRows,\n        bgColorEven: bgColorEven,\n        bgColorOdd: bgColorOdd,\n        hasBandedColumns: bandedColumns,\n        hasHeaderRow: headerRow,\n        headerRowColor: headerRowColor,\n        hasFirstColumn: firstColumn,\n        tableBorderFormat: borderFormat,\n        keepCellShade: false,\n    };\n}\n","import * as React from 'react';\nimport { Snapshot } from 'roosterjs-editor-types';\n\nconst styles = require('./SnapshotPane.scss');\n\nexport interface SnapshotPaneProps {\n    onTakeSnapshot: () => Snapshot;\n    onRestoreSnapshot: (snapshot: Snapshot) => void;\n    onMove: (moveStep: number) => void;\n}\n\nexport interface SnapshotPaneState {\n    snapshots: Snapshot[];\n    currentIndex: number;\n    autoCompleteIndex: number;\n}\n\nexport default class SnapshotPane extends React.Component<SnapshotPaneProps, SnapshotPaneState> {\n    private textarea: HTMLTextAreaElement;\n\n    constructor(props: SnapshotPaneProps) {\n        super(props);\n\n        this.state = {\n            snapshots: [],\n            currentIndex: -1,\n            autoCompleteIndex: -1,\n        };\n    }\n\n    render() {\n        return (\n            <div className={styles.snapshotPane}>\n                <h3>Undo Snapshots</h3>\n                <div className={styles.snapshotList}>\n                    {this.state.snapshots.map(this.renderItem)}\n                </div>\n                <h3>Selected Snapshot</h3>\n                <div className={styles.buttons}>\n                    <button onClick={this.takeSnapshot}>{'Take snapshot'}</button>{' '}\n                    <button\n                        onClick={() =>\n                            this.props.onRestoreSnapshot({\n                                html: this.textarea.value,\n                                metadata: null,\n                                knownColors: [],\n                            })\n                        }>\n                        {'Restore snapshot'}\n                    </button>\n                </div>\n                <textarea\n                    ref={ref => (this.textarea = ref)}\n                    className={styles.textarea}\n                    spellCheck={false}\n                />\n            </div>\n        );\n    }\n\n    updateSnapshots(snapshots: Snapshot[], currentIndex: number, autoCompleteIndex: number) {\n        this.setState({\n            snapshots,\n            currentIndex,\n            autoCompleteIndex,\n        });\n    }\n\n    snapshotToString(snapshot: Snapshot) {\n        return (\n            snapshot.html + (snapshot.metadata ? `<!--${JSON.stringify(snapshot.metadata)}-->` : '')\n        );\n    }\n\n    private takeSnapshot = () => {\n        const snapshot = this.props.onTakeSnapshot();\n        this.setSnapshot(this.snapshotToString(snapshot));\n    };\n\n    private setSnapshot = (snapshot: string) => {\n        this.textarea.value = snapshot;\n    };\n\n    private renderItem = (snapshot: Snapshot, index: number) => {\n        let className = '';\n        if (index == this.state.currentIndex) {\n            className += ' ' + styles.current;\n        }\n        if (index == this.state.autoCompleteIndex) {\n            className += ' ' + styles.autoComplete;\n        }\n\n        const snapshotStr = this.snapshotToString(snapshot);\n        return (\n            <pre\n                className={className}\n                key={index}\n                onClick={() => this.setSnapshot(snapshotStr)}\n                onDoubleClick={() => this.props.onMove(index - this.state.currentIndex)}>\n                {(snapshotStr || '<EMPTY SNAPSHOT>').substring(0, 1000)}\n            </pre>\n        );\n    };\n}\n","import * as React from 'react';\nimport SidePanePlugin from '../../SidePanePlugin';\nimport SnapshotPane from './SnapshotPane';\nimport UndoSnapshots from './UndoSnapshots';\nimport { createSnapshots } from 'roosterjs-editor-dom';\nimport { IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { Snapshot } from 'roosterjs-editor-types';\n\nexport default class SnapshotPlugin implements SidePanePlugin {\n    private editorInstance: IEditor;\n    private component: SnapshotPane;\n    private snapshotService: UndoSnapshots;\n    private static snapshots = createSnapshots<Snapshot>(1e7);\n\n    constructor() {\n        this.snapshotService = new UndoSnapshots(SnapshotPlugin.snapshots, this.updateSnapshots);\n    }\n\n    getName() {\n        return 'Snapshot';\n    }\n\n    initialize(editor: IEditor) {\n        this.editorInstance = editor;\n    }\n\n    dispose() {\n        this.editorInstance = null;\n    }\n\n    onPluginEvent(e: PluginEvent) {\n        if (e.eventType == PluginEventType.EditorReady) {\n            this.updateSnapshots();\n        }\n    }\n\n    getTitle() {\n        return 'Undo Snapshots';\n    }\n\n    renderSidePane() {\n        return <SnapshotPane {...this.getComponentProps()} ref={this.refCallback} />;\n    }\n\n    getSnapshotService() {\n        return this.snapshotService;\n    }\n\n    private refCallback = (ref: SnapshotPane) => {\n        this.component = ref;\n        if (ref) {\n            this.updateSnapshots();\n        }\n    };\n\n    private getComponentProps() {\n        return {\n            onRestoreSnapshot: this.onRestoreSnapshot,\n            onTakeSnapshot: this.onTakeSnapshot,\n            onMove: this.onMove,\n        };\n    }\n\n    private onTakeSnapshot = (): Snapshot => {\n        let newSnapshot: Snapshot;\n\n        try {\n            this.snapshotService.startHijackUndoSnapshot(snapshot => {\n                newSnapshot = snapshot;\n            });\n            this.editorInstance.addUndoSnapshot();\n        } finally {\n            this.snapshotService.stopHijackUndoSnapshot();\n        }\n\n        return newSnapshot;\n    };\n\n    private onMove = (step: number) => {\n        const snapshot = this.snapshotService.move(step);\n        this.onRestoreSnapshot(snapshot);\n    };\n\n    private onRestoreSnapshot = (snapshot: Snapshot) => {\n        this.editorInstance.focus();\n        this.editorInstance.setContent(\n            this.component.snapshotToString(snapshot),\n            false /*triggerContentChangedEvent*/\n        );\n    };\n\n    private updateSnapshots = () => {\n        if (!this.component) {\n            return;\n        }\n\n        this.component.updateSnapshots(\n            this.snapshotService.getSnapshots(),\n            this.snapshotService.getCurrentIndex(),\n            this.snapshotService.getAutoCompleteIndex()\n        );\n    };\n}\n","import { Snapshot, Snapshots, UndoSnapshotsService } from 'roosterjs-editor-types';\nimport {\n    addSnapshotV2,\n    canMoveCurrentSnapshot,\n    moveCurrentSnapshot,\n    clearProceedingSnapshotsV2,\n    canUndoAutoComplete,\n} from 'roosterjs-editor-dom';\n\nexport default class UndoSnapshots implements UndoSnapshotsService<Snapshot> {\n    private hijackUndoSnapshotCallback: undefined | ((snapshot: Snapshot) => void);\n\n    constructor(private snapshots: Snapshots<Snapshot>, private onChange: () => void) {}\n\n    public isUndoSnapshotServiceV2(): true {\n        return true;\n    }\n\n    public startHijackUndoSnapshot(callback: (snapshot: Snapshot) => void) {\n        this.hijackUndoSnapshotCallback = callback;\n    }\n\n    public stopHijackUndoSnapshot() {\n        this.hijackUndoSnapshotCallback = undefined;\n    }\n\n    public canMove(delta: number): boolean {\n        return canMoveCurrentSnapshot(this.snapshots, delta);\n    }\n\n    public move(delta: number): Snapshot {\n        const result = moveCurrentSnapshot(this.snapshots, delta);\n        this.onChange();\n        return result;\n    }\n\n    public addSnapshot(snapshot: Snapshot, isAutoCompleteSnapshot: boolean) {\n        if (this.hijackUndoSnapshotCallback) {\n            this.hijackUndoSnapshotCallback(snapshot);\n        } else {\n            addSnapshotV2(this.snapshots, snapshot, isAutoCompleteSnapshot);\n            this.onChange();\n        }\n    }\n\n    public clearRedo() {\n        clearProceedingSnapshotsV2(this.snapshots);\n        this.onChange();\n    }\n\n    public getSnapshots() {\n        return this.snapshots.snapshots;\n    }\n\n    public getCurrentIndex() {\n        return this.snapshots.currentIndex;\n    }\n\n    public getAutoCompleteIndex() {\n        return this.snapshots.autoCompleteIndex;\n    }\n\n    public canUndoAutoComplete() {\n        return canUndoAutoComplete(this.snapshots);\n    }\n}\n","import * as React from 'react';\n\nconst styles = require('./TitleBar.scss');\nconst github = require('./iconmonstr-github-1.svg');\n\nexport interface TitleBarProps {\n    className?: string;\n}\n\nexport default class TitleBar extends React.Component<TitleBarProps, {}> {\n    render() {\n        let className = styles.titleBar + ' ' + (this.props.className || '');\n        return (\n            <div className={className}>\n                <div className={styles.title}>\n                    <span className={styles.titleText}>RoosterJs Demo Site</span>\n                </div>\n                <div className={styles.version}></div>\n                <div className={styles.links}>\n                    <a\n                        href=\"https://github.com/Microsoft/roosterjs/wiki\"\n                        target=\"_blank\"\n                        className={styles.link}>\n                        Wiki\n                    </a>\n                    {' | '}\n                    <a href=\"docs/index.html\" target=\"_blank\" className={styles.link}>\n                        References\n                    </a>\n                    {' | '}\n                    <a href=\"coverage/index.html\" target=\"_blank\" className={styles.link}>\n                        Test\n                    </a>\n                    {' | '}\n                    <a\n                        href=\"https://github.com/microsoft/roosterjs/actions/workflows/build-and-deploy.yml\"\n                        target=\"_blank\">\n                        <img\n                            className={styles.externalLink}\n                            src=\"https://github.com/microsoft/roosterjs/actions/workflows/build-and-deploy.yml/badge.svg\"\n                            alt=\"Build Status\"\n                        />\n                    </a>{' '}\n                    <a href=\"http://badge.fury.io/js/roosterjs\" target=\"_blank\">\n                        <img\n                            src=\"https://badge.fury.io/js/roosterjs.svg\"\n                            alt=\"NPM Version\"\n                            className={styles.externalLink}\n                        />\n                    </a>{' '}\n                    <a\n                        href=\"https://github.com/microsoft/roosterjs\"\n                        target=\"_blank\"\n                        className={styles.link}\n                        title=\"RoosterJs on Github\">\n                        <img className={styles.externalLink} src={github} />\n                    </a>\n                </div>\n            </div>\n        );\n    }\n}\n","import { Stylesheet } from '@fluentui/merge-styles/lib/Stylesheet';\n\nlet isCssMonitorStarted: boolean = false;\nconst activeWindows: Window[] = [];\n\nfunction startCssMonitor() {\n    if (!isCssMonitorStarted) {\n        isCssMonitorStarted = true;\n        Stylesheet.getInstance().setConfig({\n            onInsertRule: (cssText: string) => {\n                activeWindows.forEach(win => {\n                    const style = win.document.createElement('style');\n                    style.textContent = cssText;\n                    win.document.head.appendChild(style);\n                });\n            },\n        });\n    }\n}\n\nexport function registerWindowForCss(win: Window) {\n    startCssMonitor();\n\n    activeWindows.push(win);\n\n    const styles = document.getElementsByTagName('STYLE');\n    const fragment = win.document.createDocumentFragment();\n\n    for (let i = 0; i < styles.length; i++) {\n        const style = win.document.createElement('style');\n        fragment.appendChild(style);\n\n        const originalStyle = styles[i] as HTMLStyleElement;\n        const rules = originalStyle.sheet.cssRules;\n        let cssText = '';\n\n        for (let j = 0; j < rules.length; j++) {\n            const rule = rules[j] as CSSStyleRule;\n            cssText += rule.cssText;\n        }\n\n        style.textContent = cssText;\n    }\n\n    win.document.head.appendChild(fragment);\n}\n\nexport function unregisterWindowForCss(win: Window) {\n    const index = activeWindows.indexOf(win);\n\n    if (index >= 0) {\n        activeWindows.splice(index, 1);\n    }\n}\n","import * as DOMPurify from 'dompurify';\n\nexport function trustedHTMLHandler(html: string): string {\n    const result = DOMPurify.sanitize(html, {\n        ADD_TAGS: ['head', 'meta', '#comment', 'iframe'],\n        ADD_ATTR: ['name', 'content'],\n        WHOLE_DOCUMENT: true,\n        RETURN_TRUSTED_TYPE: true,\n        ALLOW_UNKNOWN_PROTOCOLS: true,\n    });\n    return <string>(<any>result);\n}\n","import * as React from 'react';\nimport { IContextualMenuItem } from '@fluentui/react/lib/ContextualMenu';\nimport { mergeStyleSets } from '@fluentui/react/lib/Styling';\nimport { ModeIndependentColor } from 'roosterjs-editor-types';\n\nconst classNames = mergeStyleSets({\n    colorSquare: {\n        width: '20px',\n        height: '20px',\n        margin: '4px',\n        borderStyle: 'solid',\n        borderWidth: '2px',\n        '&:hover': {\n            borderColor: 'red',\n        },\n    },\n    colorSquareBorder: {\n        borderColor: 'transparent',\n    },\n    colorSquareBorderWhite: {\n        borderColor: '#bebebe',\n    },\n});\n\n/**\n * @internal\n */\nexport function renderColorPicker<Strings extends string>(\n    item: IContextualMenuItem,\n    colorDef: Record<Strings, ModeIndependentColor>,\n    onClick: (\n        e: React.MouseEvent<Element, MouseEvent> | React.KeyboardEvent<Element>,\n        item: IContextualMenuItem\n    ) => void\n) {\n    const key = item.key as Strings;\n    const buttonColor = colorDef[key].lightModeColor;\n\n    return (\n        <button onClick={e => onClick(e, item)} title={item.text}>\n            <div\n                className={\n                    classNames.colorSquare +\n                    ' ' +\n                    (key == 'textColorWhite' || key == 'backgroundColorWhite'\n                        ? classNames.colorSquareBorderWhite\n                        : classNames.colorSquareBorder)\n                }\n                style={{\n                    backgroundColor: buttonColor,\n                }}></div>\n        </button>\n    );\n}\n","export { BackgroundColorKeys, TextColorKeys } from './types/stringKeys';\nexport { getBackgroundColorValue } from './utils/backgroundColors';\nexport { getTextColorValue } from './utils/textColors';\n","import { BackgroundColorKeys } from '../types/stringKeys';\nimport { ModeIndependentColor } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nconst BackgroundColors: Record<BackgroundColorKeys, ModeIndependentColor> = {\n    backgroundColorCyan: { lightModeColor: '#00ffff', darkModeColor: '#005357' },\n    backgroundColorGreen: { lightModeColor: '#00ff00', darkModeColor: '#005e00' },\n    backgroundColorYellow: { lightModeColor: '#ffff00', darkModeColor: '#383e00' },\n    backgroundColorOrange: { lightModeColor: '#ff8000', darkModeColor: '#bf4c00' },\n    backgroundColorRed: { lightModeColor: '#ff0000', darkModeColor: '#ff2711' },\n    backgroundColorMagenta: { lightModeColor: '#ff00ff', darkModeColor: '#e700e8' },\n    backgroundColorLightCyan: { lightModeColor: '#80ffff', darkModeColor: '#004c4f' },\n    backgroundColorLightGreen: { lightModeColor: '#80ff80', darkModeColor: '#005400' },\n    backgroundColorLightYellow: { lightModeColor: '#ffff80', darkModeColor: '#343c00' },\n    backgroundColorLightOrange: { lightModeColor: '#ffc080', darkModeColor: '#77480b' },\n    backgroundColorLightRed: { lightModeColor: '#ff8080', darkModeColor: '#bc454a' },\n    backgroundColorLightMagenta: { lightModeColor: '#ff80ff', darkModeColor: '#aa2bad' },\n    backgroundColorWhite: { lightModeColor: '#ffffff', darkModeColor: '#333333' },\n    backgroundColorLightGray: { lightModeColor: '#cccccc', darkModeColor: '#535353' },\n    backgroundColorGray: { lightModeColor: '#999999', darkModeColor: '#777777' },\n    backgroundColorDarkGray: { lightModeColor: '#666666', darkModeColor: '#a0a0a0' },\n    backgroundColorDarkerGray: { lightModeColor: '#333333', darkModeColor: '#cfcfcf' },\n    backgroundColorBlack: { lightModeColor: '#000000', darkModeColor: '#ffffff' },\n};\n\n/**\n * @internal\n * List of colors in drop down list\n */\nconst BackgroundColorDropDownItems: Record<BackgroundColorKeys, string> = {\n    backgroundColorCyan: 'Cyan',\n    backgroundColorGreen: 'Green',\n    backgroundColorYellow: 'Yellow',\n    backgroundColorOrange: 'Orange',\n    backgroundColorRed: 'Red',\n    backgroundColorMagenta: 'Magenta',\n    backgroundColorLightCyan: 'Light cyan',\n    backgroundColorLightGreen: 'Light green',\n    backgroundColorLightYellow: 'Light yellow',\n    backgroundColorLightOrange: 'Light orange',\n    backgroundColorLightRed: 'Light red',\n    backgroundColorLightMagenta: 'Light magenta',\n    backgroundColorWhite: 'White',\n    backgroundColorLightGray: 'Light gray',\n    backgroundColorGray: 'Gray',\n    backgroundColorDarkGray: 'Dark gray',\n    backgroundColorDarkerGray: 'Darker gray',\n    backgroundColorBlack: 'Black',\n};\n\n/**\n * Get mode independent color value of background color from the given color key\n * @param key The key to get color from\n * @returns A model independent color value of the given key\n */\nfunction getBackgroundColorValue(key: BackgroundColorKeys): ModeIndependentColor {\n    return BackgroundColors[key];\n}\n\nexport { BackgroundColors, BackgroundColorDropDownItems, getBackgroundColorValue };\n","import { mergeStyleSets } from '@fluentui/react/lib/Styling';\n\nconst classNames = mergeStyleSets({\n    colorPickerContainer: {\n        width: '192px',\n        padding: '8px',\n        overflow: 'hidden',\n        '& ul': {\n            width: '192px',\n            overflow: 'hidden',\n        },\n    },\n    colorMenuItem: {\n        display: 'inline-block',\n        width: '32px',\n        height: '32px',\n        '& button': {\n            padding: '0px',\n            minWidth: '0px',\n            background: 'transparent',\n            border: 'none',\n        },\n    },\n});\n\n/**\n * @internal\n */\nexport function getColorPickerContainerClassName() {\n    return classNames.colorPickerContainer;\n}\n\n/**\n * @internal\n */\nexport function getColorPickerItemClassName() {\n    return classNames.colorMenuItem;\n}\n","import { ModeIndependentColor } from 'roosterjs-editor-types';\nimport { TextColorKeys } from '../types/stringKeys';\n\n/**\n * @internal\n */\nconst TextColors: Record<TextColorKeys, ModeIndependentColor> = {\n    textColorLightBlue: { lightModeColor: '#51a7f9', darkModeColor: '#0075c2' },\n    textColorLightGreen: { lightModeColor: '#6fc040', darkModeColor: '#207a00' },\n    textColorLightYellow: { lightModeColor: '#f5d427', darkModeColor: '#5d4d00' },\n    textColorLightOrange: { lightModeColor: '#f3901d', darkModeColor: '#ab5500' },\n    textColorLightRed: { lightModeColor: '#ed5c57', darkModeColor: '#df504d' },\n    textColorLightPurple: { lightModeColor: '#b36ae2', darkModeColor: '#ab63da' },\n    textColorBlue: { lightModeColor: '#0c64c0', darkModeColor: '#6da0ff' },\n    textColorGreen: { lightModeColor: '#0c882a', darkModeColor: '#3da848' },\n    textColorYellow: { lightModeColor: '#dcbe22', darkModeColor: '#6d5c00' },\n    textColorOrange: { lightModeColor: '#de6a19', darkModeColor: '#d3610c' },\n    textColorRed: { lightModeColor: '#c82613', darkModeColor: '#ff6847' },\n    textColorPurple: { lightModeColor: '#763e9b', darkModeColor: '#d394f9' },\n    textColorDarkBlue: { lightModeColor: '#174e86', darkModeColor: '#93b8f9' },\n    textColorDarkGreen: { lightModeColor: '#0f5c1a', darkModeColor: '#7fc57b' },\n    textColorDarkYellow: { lightModeColor: '#c3971d', darkModeColor: '#946f00' },\n    textColorDarkOrange: { lightModeColor: '#be5b17', darkModeColor: '#de7633' },\n    textColorDarkRed: { lightModeColor: '#861106', darkModeColor: '#ff9b7c' },\n    textColorDarkPurple: { lightModeColor: '#5e327c', darkModeColor: '#dea9fd' },\n    textColorDarkerBlue: { lightModeColor: '#002451', darkModeColor: '#cedbff' },\n    textColorDarkerGreen: { lightModeColor: '#06400c', darkModeColor: '#a3da9b' },\n    textColorDarkerYellow: { lightModeColor: '#a37519', darkModeColor: '#b5852a' },\n    textColorDarkerOrange: { lightModeColor: '#934511', darkModeColor: '#ef935c' },\n    textColorDarkerRed: { lightModeColor: '#570606', darkModeColor: '#ffc0b1' },\n    textColorDarkerPurple: { lightModeColor: '#3b204d', darkModeColor: '#eecaff' },\n    textColorWhite: { lightModeColor: '#ffffff', darkModeColor: '#333333' },\n    textColorLightGray: { lightModeColor: '#cccccc', darkModeColor: '#535353' },\n    textColorGray: { lightModeColor: '#999999', darkModeColor: '#777777' },\n    textColorDarkGray: { lightModeColor: '#666666', darkModeColor: '#a0a0a0' },\n    textColorDarkerGray: { lightModeColor: '#333333', darkModeColor: '#cfcfcf' },\n    textColorBlack: { lightModeColor: '#000000', darkModeColor: '#ffffff' },\n};\n\n/**\n * @internal\n */\nconst TextColorDropDownItems: Record<TextColorKeys, string> = {\n    textColorLightBlue: 'Light blue',\n    textColorLightGreen: 'Light green',\n    textColorLightYellow: 'Light yellow',\n    textColorLightOrange: 'Light orange',\n    textColorLightRed: 'Light red',\n    textColorLightPurple: 'Light purple',\n    textColorBlue: 'Blue',\n    textColorGreen: 'Green',\n    textColorYellow: 'Yellow',\n    textColorOrange: 'Orange',\n    textColorRed: 'Red',\n    textColorPurple: 'Purple',\n    textColorDarkBlue: 'Dark blue',\n    textColorDarkGreen: 'Dark green',\n    textColorDarkYellow: 'Dark yellow',\n    textColorDarkOrange: 'Dark orange',\n    textColorDarkRed: 'Dark red',\n    textColorDarkPurple: 'Dark purple',\n    textColorDarkerBlue: 'Darker blue',\n    textColorDarkerGreen: 'Darker green',\n    textColorDarkerYellow: 'Darker yellow',\n    textColorDarkerOrange: 'Darker orange',\n    textColorDarkerRed: 'Darker red',\n    textColorDarkerPurple: 'Darker purple',\n    textColorWhite: 'White',\n    textColorLightGray: 'Light gray',\n    textColorGray: 'Gray',\n    textColorDarkGray: 'Dark gray',\n    textColorDarkerGray: 'Darker gray',\n    textColorBlack: 'Black',\n};\n\n/**\n * Get mode independent color value of text color from the given color key\n * @param key The key to get color from\n * @returns A model independent color value of the given key\n */\nfunction getTextColorValue(key: TextColorKeys): ModeIndependentColor {\n    return TextColors[key];\n}\n\nexport { TextColors, TextColorDropDownItems, getTextColorValue };\n","export {\n    LocalizedStrings,\n    OkButtonStringKey,\n    CancelButtonStringKey,\n    MenuItemSplitterKey0,\n} from './type/LocalizedStrings';\nexport { default as UIUtilities } from './type/UIUtilities';\nexport { default as ReactEditorPlugin } from './type/ReactEditorPlugin';\nexport { default as createUIUtilities } from './utils/createUIUtilities';\nexport { default as getLocalizedString } from './utils/getLocalizedString';\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport UIUtilities from '../type/UIUtilities';\nimport { getComputedStyles } from 'roosterjs-editor-dom';\nimport { PartialTheme, ThemeProvider } from '@fluentui/react/lib/Theme';\nimport { WindowProvider } from '@fluentui/react/lib/WindowProvider';\n\n/**\n * Create the UI Utilities object for plugins to render additional react components\n * @param container Container DIV of editor\n * @param theme Current theme used by editor\n * @returns A UIUtilities object\n */\nexport default function createUIUtilities(\n    container: HTMLDivElement,\n    theme: PartialTheme\n): UIUtilities {\n    return {\n        renderComponent: element => {\n            const doc = container.ownerDocument;\n            const div = doc.createElement('div');\n            doc.body.appendChild(div);\n\n            ReactDOM.render(\n                <WindowProvider window={doc.defaultView!}>\n                    <ThemeProvider theme={theme}>{element}</ThemeProvider>\n                </WindowProvider>,\n                div\n            );\n\n            return () => {\n                ReactDOM.unmountComponentAtNode(div);\n                doc.body.removeChild(div);\n            };\n        },\n        isRightToLeft: () => {\n            const dir = container && getComputedStyles(container, 'direction')[0];\n\n            return dir == 'rtl';\n        },\n    };\n}\n","import { LocalizedStrings } from '../type/LocalizedStrings';\n\n/**\n * Get a localized string\n * @param strings The LocalizedStrings map\n * @param key Key of the string\n * @param defaultString Default unlocalized string, will be used if strings is not specified or the give key doesn't exist in strings\n * @returns A localized string from the string map, or defaultString\n */\nexport default function getLocalizedString<T extends string, R extends string | null | undefined>(\n    strings: LocalizedStrings<T> | undefined,\n    key: T,\n    defaultString: R\n) {\n    const str = strings?.[key];\n\n    if (typeof str == 'function') {\n        return str();\n    } else if (typeof str == 'string') {\n        return str;\n    } else {\n        return defaultString;\n    }\n}\n","import UIUtilities from '../type/UIUtilities';\n\n/**\n * @internal\n */\nexport function renderReactComponent(uiUtilities: UIUtilities | null, reactElement: JSX.Element) {\n    if (uiUtilities) {\n        return uiUtilities.renderComponent(reactElement);\n    } else {\n        throw new Error(\n            'UIUtilities is required but not provided. Please call ReactEditorPlugin.setUIUtilities() to set a valid uiUtilities object'\n        );\n    }\n}\n","export { default as createContextMenuPlugin } from './plugin/createContextMenuPlugin';\nexport { default as createContextMenuProvider } from './utils/createContextMenuProvider';\nexport { default as createListEditMenuProvider } from './menus/createListEditMenuProvider';\nexport { default as createImageEditMenuProvider } from './menus/createImageEditMenuProvider';\nexport { default as createTableEditMenuProvider } from './menus/createTableEditMenuProvider';\nexport { default as ContextMenuItem } from './types/ContextMenuItem';\nexport {\n    ListNumberMenuItemStringKey,\n    ImageEditMenuItemStringKey,\n    TableEditInsertMenuItemStringKey,\n    TableEditDeleteMenuItemStringKey,\n    TableEditMergeMenuItemStringKey,\n    TableEditSplitMenuItemStringKey,\n    TableEditAlignMenuItemStringKey,\n    TableEditShadeMenuItemStringKey,\n    TableEditMenuItemStringKey,\n    TableEditAlignTableMenuItemStringKey,\n} from './types/ContextMenuItemStringKeys';\n","import ContextMenuItem from '../types/ContextMenuItem';\nimport createContextMenuProvider from '../utils/createContextMenuProvider';\nimport showInputDialog from '../../inputDialog/utils/showInputDialog';\nimport { DocumentCommand, EditorPlugin, IEditor, ImageEditOperation } from 'roosterjs-editor-types';\nimport { ImageEditMenuItemStringKey } from '../types/ContextMenuItemStringKeys';\nimport { LocalizedStrings } from '../../common/type/LocalizedStrings';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\nimport { setImageAltText } from 'roosterjs-editor-api';\nimport {\n    canRegenerateImage,\n    ImageEdit,\n    resetImage,\n    resizeByPercentage,\n} from 'roosterjs-editor-plugins';\n\nconst ImageAltTextMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageAltText',\n    unlocalizedText: 'Add alternate text',\n    onClick: (_, editor, node, strings, uiUtilities) => {\n        const image = node as HTMLImageElement;\n        const initValue = image.alt;\n\n        showInputDialog(\n            uiUtilities,\n            'menuNameImageAltText',\n            'Add alternate text',\n            {\n                altText: {\n                    labelKey: null,\n                    unlocalizedLabel: null,\n                    initValue: initValue,\n                },\n            },\n            strings\n        ).then(values => {\n            editor.focus();\n            editor.select(image);\n\n            if (values) {\n                setImageAltText(editor, values.altText);\n            }\n        });\n    },\n};\n\nconst ImageResizeMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageResize',\n    unlocalizedText: 'Size',\n    subItems: {\n        menuNameImageSizeBestFit: 'Best fit',\n        menuNameImageSizeSmall: 'Small',\n        menuNameImageSizeMedium: 'Medium',\n        menuNameImageSizeOriginal: 'Original',\n    },\n    onClick: (key, editor, node) => {\n        editor.addUndoSnapshot(() => {\n            let percentage = 0;\n            switch (key) {\n                case 'menuNameImageSizeSmall':\n                    percentage = 0.25;\n                    break;\n                case 'menuNameImageSizeMedium':\n                    percentage = 0.5;\n                    break;\n                case 'menuNameImageSizeOriginal':\n                    percentage = 1;\n                    break;\n            }\n\n            if (percentage > 0) {\n                resizeByPercentage(\n                    editor,\n                    node as HTMLImageElement,\n                    percentage,\n                    10 /*minWidth*/,\n                    10 /*minHeight*/\n                );\n            } else {\n                resetImage(editor, node as HTMLImageElement);\n            }\n        });\n    },\n};\n\nconst ImageRotateMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageRotate',\n    unlocalizedText: 'Rotate image',\n    subItems: {\n        menuNameImageRotateLeft: 'Left',\n        menuNameImageRotateRight: 'Right',\n    },\n    shouldShow: (_, node, imageEdit) => {\n        return (\n            !!imageEdit?.isOperationAllowed(ImageEditOperation.Rotate) &&\n            canRegenerateImage(node as HTMLImageElement)\n        );\n    },\n    onClick: (key, editor, node, strings, uiUtilities, imageEdit) => {\n        editor.addUndoSnapshot(() => {\n            switch (key) {\n                case 'menuNameImageRotateLeft':\n                    imageEdit?.rotateImage(node as HTMLImageElement, -Math.PI / 2);\n                    break;\n                case 'menuNameImageRotateRight':\n                    imageEdit?.rotateImage(node as HTMLImageElement, Math.PI / 2);\n                    break;\n            }\n        });\n    },\n};\n\nconst ImageFlipMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageFlip',\n    unlocalizedText: 'Flip image',\n    subItems: {\n        menuNameImageRotateFlipHorizontally: 'Flip Horizontally',\n        menuNameImageRotateFlipVertically: 'Flip Vertically',\n    },\n    shouldShow: (_, node, imageEdit) => {\n        return (\n            !!imageEdit?.isOperationAllowed(ImageEditOperation.Rotate) &&\n            canRegenerateImage(node as HTMLImageElement)\n        );\n    },\n    onClick: (key, editor, node, strings, uiUtilities, imageEdit) => {\n        editor.addUndoSnapshot(() => {\n            switch (key) {\n                case 'menuNameImageRotateFlipHorizontally':\n                    imageEdit?.flipImage(node as HTMLImageElement, 'horizontal');\n                    break;\n                case 'menuNameImageRotateFlipVertically':\n                    imageEdit?.flipImage(node as HTMLImageElement, 'vertical');\n                    break;\n            }\n        });\n    },\n};\n\nconst ImageCropMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageCrop',\n    unlocalizedText: 'Crop image',\n    shouldShow: (_, node, imageEdit) => {\n        return (\n            !!imageEdit?.isOperationAllowed(ImageEditOperation.Crop) &&\n            canRegenerateImage(node as HTMLImageElement)\n        );\n    },\n    onClick: (_, editor, node, strings, uiUtilities, imageEdit) => {\n        imageEdit?.setEditingImage(node as HTMLImageElement, ImageEditOperation.Crop);\n    },\n};\n\nconst ImageRemoveMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageRemove',\n    unlocalizedText: 'Remove image',\n    onClick: (_, editor, node, strings, uiUtilities, imageEdit) => {\n        if (editor.contains(node)) {\n            editor.addUndoSnapshot(() => {\n                editor.deleteNode(node);\n                imageEdit?.setEditingImage(null /*editingImage*/);\n            }, 'DeleteImage');\n        }\n    },\n};\n\nconst ImageCopyMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageCopy',\n    unlocalizedText: 'Copy image',\n    onClick: (_, editor, node, strings, uiUtilities, imageEdit) => {\n        if (editor.contains(node)) {\n            editor.addUndoSnapshot(() => {\n                editor.getDocument()?.execCommand(DocumentCommand.Copy);\n            }, 'CopyImage');\n        }\n    },\n};\n\nconst ImageCutMenuItem: ContextMenuItem<ImageEditMenuItemStringKey, ImageEdit> = {\n    key: 'menuNameImageCut',\n    unlocalizedText: 'Cut image',\n    onClick: (_, editor, node, strings, uiUtilities, imageEdit) => {\n        if (editor.contains(node)) {\n            editor.addUndoSnapshot(() => {\n                editor.getDocument()?.execCommand(DocumentCommand.Cut);\n            }, 'CutImage');\n        }\n    },\n};\n\nfunction shouldShowImageEditItems(editor: IEditor, node: Node) {\n    return safeInstanceOf(node, 'HTMLImageElement') && node.isContentEditable;\n}\n\n/**\n * Create a new instance of ContextMenuProvider to support image editing functionalities in context menu\n * @returns A new ContextMenuProvider\n */\nexport default function createImageEditMenuProvider(\n    imageEditPlugin: ImageEdit,\n    strings?: LocalizedStrings<ImageEditMenuItemStringKey>\n): EditorPlugin {\n    return createContextMenuProvider<ImageEditMenuItemStringKey, ImageEdit>(\n        'imageEdit',\n        [\n            ImageAltTextMenuItem,\n            ImageResizeMenuItem,\n            ImageCropMenuItem,\n            ImageRemoveMenuItem,\n            ImageRotateMenuItem,\n            ImageFlipMenuItem,\n            ImageCopyMenuItem,\n            ImageCutMenuItem,\n        ],\n        strings,\n        shouldShowImageEditItems,\n        imageEditPlugin\n    );\n}\n","import ContextMenuItem from '../types/ContextMenuItem';\nimport createContextMenuProvider from '../utils/createContextMenuProvider';\nimport showInputDialog from '../../inputDialog/utils/showInputDialog';\nimport { EditorPlugin, IEditor } from 'roosterjs-editor-types';\nimport { ListNumberMenuItemStringKey } from '../types/ContextMenuItemStringKeys';\nimport { LocalizedStrings } from '../../common/type/LocalizedStrings';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\nimport { setOrderedListNumbering } from 'roosterjs-editor-api';\n\nconst ListNumberResetMenuItem: ContextMenuItem<ListNumberMenuItemStringKey> = {\n    key: 'menuNameListNumberReset',\n    unlocalizedText: 'Restart at 1',\n    onClick: (_, editor, node) => {\n        const li = editor.getElementAtCursor('LI', node) as HTMLLIElement;\n        setOrderedListNumbering(editor, li, 1);\n    },\n};\n\nconst ListNumberEditMenuItem: ContextMenuItem<ListNumberMenuItemStringKey> = {\n    key: 'menuNameListNumberEdit',\n    unlocalizedText: 'Set numbering value',\n    onClick: (_, editor, node, strings, uiUtilities) => {\n        const listAndLi = getEditingList(editor, node);\n\n        if (listAndLi) {\n            const { list, li } = listAndLi;\n            let startNumber = list.start;\n\n            for (let child = list.firstChild; child; child = child.nextSibling) {\n                if (child === li) {\n                    break;\n                } else if (safeInstanceOf(child, 'HTMLLIElement')) {\n                    startNumber += 1;\n                }\n            }\n\n            showInputDialog(\n                uiUtilities,\n                'menuNameListNumberEdit',\n                'Set numbering value',\n                {\n                    value: {\n                        labelKey: 'dialogTextSetListNumber',\n                        unlocalizedLabel: 'Set value to',\n                        initValue: startNumber.toString(),\n                    },\n                },\n                strings\n            ).then(values => {\n                editor.focus();\n\n                if (values) {\n                    const result = parseInt(values.value);\n\n                    if (result > 0 && result != startNumber) {\n                        setOrderedListNumbering(editor, li, Math.floor(result));\n                    }\n                }\n            });\n        }\n    },\n};\n\nfunction getEditingList(editor: IEditor, node: Node) {\n    const li = editor.getElementAtCursor('LI', node) as HTMLLIElement;\n    const list = li && (editor.getElementAtCursor('ol', li) as HTMLOListElement);\n\n    return list?.isContentEditable ? { list, li } : null;\n}\n\n/**\n * Create a new instance of ContextMenuProvider to support list number editing functionalities in context menu\n * @returns A new ContextMenuProvider\n */\nexport default function createListEditMenuProvider(\n    strings?: LocalizedStrings<ListNumberMenuItemStringKey>\n): EditorPlugin {\n    return createContextMenuProvider(\n        'listEdit',\n        [ListNumberResetMenuItem, ListNumberEditMenuItem],\n        strings,\n        (editor, node) => !!getEditingList(editor, node)\n    );\n}\n","import ContextMenuItem from '../types/ContextMenuItem';\nimport createContextMenuProvider from '../utils/createContextMenuProvider';\nimport { applyCellShading, editTable } from 'roosterjs-editor-api';\nimport { EditorPlugin, IEditor, TableOperation } from 'roosterjs-editor-types';\nimport { LocalizedStrings } from '../../common/type/LocalizedStrings';\nimport { ModeIndependentColor } from 'roosterjs-editor-types';\nimport { renderColorPicker } from '../../colorPicker/component/renderColorPicker';\nimport {\n    getColorPickerContainerClassName,\n    getColorPickerItemClassName,\n} from '../../colorPicker/utils/getClassNamesForColorPicker';\nimport {\n    TableEditMenuItemStringKey,\n    TableEditInsertMenuItemStringKey,\n    TableEditDeleteMenuItemStringKey,\n    TableEditMergeMenuItemStringKey,\n    TableEditSplitMenuItemStringKey,\n    TableEditAlignMenuItemStringKey,\n    TableEditShadeMenuItemStringKey,\n    TableEditAlignTableMenuItemStringKey,\n} from '../types/ContextMenuItemStringKeys';\nimport {\n    BackgroundColorDropDownItems,\n    BackgroundColors,\n} from '../../colorPicker/utils/backgroundColors';\n\nconst TableEditOperationMap: Partial<Record<TableEditMenuItemStringKey, TableOperation>> = {\n    menuNameTableInsertAbove: TableOperation.InsertAbove,\n    menuNameTableInsertBelow: TableOperation.InsertBelow,\n    menuNameTableInsertLeft: TableOperation.InsertLeft,\n    menuNameTableInsertRight: TableOperation.InsertRight,\n    menuNameTableDeleteTable: TableOperation.DeleteTable,\n    menuNameTableDeleteColumn: TableOperation.DeleteColumn,\n    menuNameTableDeleteRow: TableOperation.DeleteRow,\n    menuNameTableMergeAbove: TableOperation.MergeAbove,\n    menuNameTableMergeBelow: TableOperation.MergeBelow,\n    menuNameTableMergeLeft: TableOperation.MergeLeft,\n    menuNameTableMergeRight: TableOperation.MergeRight,\n    menuNameTableMergeCells: TableOperation.MergeCells,\n    menuNameTableSplitHorizontally: TableOperation.SplitHorizontally,\n    menuNameTableSplitVertically: TableOperation.SplitVertically,\n    menuNameTableAlignLeft: TableOperation.AlignCellLeft,\n    menuNameTableAlignCenter: TableOperation.AlignCellCenter,\n    menuNameTableAlignRight: TableOperation.AlignCellRight,\n    menuNameTableAlignTop: TableOperation.AlignCellTop,\n    menuNameTableAlignMiddle: TableOperation.AlignCellMiddle,\n    menuNameTableAlignBottom: TableOperation.AlignCellBottom,\n    menuNameTableAlignTableLeft: TableOperation.AlignLeft,\n    menuNameTableAlignTableCenter: TableOperation.AlignCenter,\n    menuNameTableAlignTableRight: TableOperation.AlignRight,\n};\n\nconst ColorValues = {\n    ...BackgroundColors,\n    // Add this value to satisfy compiler\n    menuNameTableCellShade: <ModeIndependentColor>(<unknown>null),\n};\n\nfunction onClick(key: TableEditMenuItemStringKey, editor: IEditor) {\n    editor.focus();\n    const operation = TableEditOperationMap[key];\n    if (typeof operation === 'number') {\n        editTable(editor, operation);\n    }\n}\n\nconst TableEditInsertMenuItem: ContextMenuItem<TableEditInsertMenuItemStringKey> = {\n    key: 'menuNameTableInsert',\n    unlocalizedText: 'Insert',\n    subItems: {\n        menuNameTableInsertAbove: 'Insert above',\n        menuNameTableInsertBelow: 'Insert below',\n        menuNameTableInsertLeft: 'Insert left',\n        menuNameTableInsertRight: 'Insert right',\n    },\n    onClick,\n};\n\nconst TableEditDeleteMenuItem: ContextMenuItem<TableEditDeleteMenuItemStringKey> = {\n    key: 'menuNameTableDelete',\n    unlocalizedText: 'Delete',\n    subItems: {\n        menuNameTableDeleteColumn: 'Delete column',\n        menuNameTableDeleteRow: 'Delete row',\n        menuNameTableDeleteTable: 'Delete table',\n    },\n    onClick,\n};\n\nconst TableEditMergeMenuItem: ContextMenuItem<TableEditMergeMenuItemStringKey> = {\n    key: 'menuNameTableMerge',\n    unlocalizedText: 'Merge',\n    subItems: {\n        menuNameTableMergeAbove: 'Merge above',\n        menuNameTableMergeBelow: 'Merge below',\n        menuNameTableMergeLeft: 'Merge left',\n        menuNameTableMergeRight: 'Merge right',\n        '-': '-',\n        menuNameTableMergeCells: 'Merge selected cells',\n    },\n    onClick,\n};\n\nconst TableEditSplitMenuItem: ContextMenuItem<TableEditSplitMenuItemStringKey> = {\n    key: 'menuNameTableSplit',\n    unlocalizedText: 'Split',\n    subItems: {\n        menuNameTableSplitHorizontally: 'Split horizontally',\n        menuNameTableSplitVertically: 'Split vertically',\n    },\n    onClick,\n};\n\nconst TableEditAlignMenuItem: ContextMenuItem<TableEditAlignMenuItemStringKey> = {\n    key: 'menuNameTableAlign',\n    unlocalizedText: 'Align cell',\n    subItems: {\n        menuNameTableAlignLeft: 'Align left',\n        menuNameTableAlignCenter: 'Align center',\n        menuNameTableAlignRight: 'Align right',\n        '-': '-',\n        menuNameTableAlignTop: 'Align top',\n        menuNameTableAlignMiddle: 'Align middle',\n        menuNameTableAlignBottom: 'Align bottom',\n    },\n    onClick,\n};\n\nconst TableEditAlignTableMenuItem: ContextMenuItem<TableEditAlignTableMenuItemStringKey> = {\n    key: 'menuNameTableAlignTable',\n    unlocalizedText: 'Align table',\n    subItems: {\n        menuNameTableAlignTableLeft: 'Align left',\n        menuNameTableAlignTableCenter: 'Align center',\n        menuNameTableAlignTableRight: 'Align right',\n    },\n    onClick,\n};\n\nconst TableEditCellShadeMenuItem: ContextMenuItem<TableEditShadeMenuItemStringKey> = {\n    key: 'menuNameTableCellShade',\n    unlocalizedText: 'Shading',\n    subItems: BackgroundColorDropDownItems,\n    onClick: (key, editor) => {\n        applyCellShading(editor, ColorValues[key]);\n    },\n    itemRender: (item, click) => renderColorPicker(item, ColorValues, click),\n    itemClassName: getColorPickerItemClassName(),\n    commandBarSubMenuProperties: {\n        className: getColorPickerContainerClassName(),\n    },\n};\n\nfunction getEditingTable(editor: IEditor, node: Node) {\n    const td = editor.getElementAtCursor('TD,TH', node) as HTMLTableCellElement;\n    const table = td && (editor.getElementAtCursor('table', td) as HTMLTableElement);\n\n    return table?.isContentEditable ? { table, td } : null;\n}\n\n/**\n * Create a new instance of ContextMenuProvider to support table editing functionalities in context menu\n * @returns A new ContextMenuProvider\n */\nexport default function createTableEditMenuProvider(\n    strings?: LocalizedStrings<TableEditMenuItemStringKey>\n): EditorPlugin {\n    return createContextMenuProvider(\n        'tableEdit',\n        <ContextMenuItem<TableEditMenuItemStringKey>[]>[\n            TableEditInsertMenuItem,\n            TableEditDeleteMenuItem,\n            TableEditMergeMenuItem,\n            TableEditSplitMenuItem,\n            TableEditAlignMenuItem,\n            TableEditAlignTableMenuItem,\n            TableEditCellShadeMenuItem,\n        ],\n        strings,\n        (editor, node) => !!getEditingTable(editor, node)\n    );\n}\n","import * as React from 'react';\nimport { ContextMenu } from 'roosterjs-editor-plugins';\nimport { ContextualMenu, IContextualMenuItem } from '@fluentui/react/lib/ContextualMenu';\nimport { ReactEditorPlugin, UIUtilities } from '../../common/index';\nimport { renderReactComponent } from '../../common/utils/renderReactComponent';\n\nfunction normalizeItems(items: (IContextualMenuItem | null)[]) {\n    let dividerKey = 0;\n    return items.map(\n        item =>\n            item || {\n                name: '-',\n                key: 'divider_' + (dividerKey++).toString(),\n            }\n    );\n}\n\nclass ContextMenuPlugin extends ContextMenu<IContextualMenuItem> implements ReactEditorPlugin {\n    private uiUtilities: UIUtilities | null = null;\n    private disposer: (() => void) | null = null;\n\n    constructor() {\n        super({\n            render: (container, items, onDismiss) => {\n                const normalizedITems = normalizeItems(items);\n\n                if (normalizedITems.length > 0) {\n                    this.disposer = renderReactComponent(\n                        this.uiUtilities,\n                        <ContextualMenu\n                            target={container}\n                            onDismiss={onDismiss}\n                            items={normalizedITems}\n                        />\n                    );\n                }\n            },\n            dismiss: _ => {\n                this.disposer?.();\n                this.disposer = null;\n            },\n        });\n    }\n\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n}\n\n/**\n * Create a new instance of ContextMenu plugin with context menu implementation based on FluentUI.\n */\nexport default function createContextMenuPlugin(): ContextMenu<IContextualMenuItem> {\n    return new ContextMenuPlugin();\n}\n","import ContextMenuItem from '../types/ContextMenuItem';\nimport getLocalizedString from '../../common/utils/getLocalizedString';\nimport { ContextMenuProvider, EditorPlugin, IEditor } from 'roosterjs-editor-types';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { IContextualMenuItem } from '@fluentui/react/lib/ContextualMenu';\nimport { LocalizedStrings, ReactEditorPlugin, UIUtilities } from '../../common/index';\n\n/**\n * A plugin of editor to provide context menu items\n */\nclass ContextMenuProviderImpl<TString extends string, TContext>\n    implements ContextMenuProvider<IContextualMenuItem>, ReactEditorPlugin {\n    private editor: IEditor | null = null;\n    private targetNode: Node | null = null;\n    private uiUtilities: UIUtilities | null = null;\n\n    /**\n     * Create a new instance of ContextMenuProviderImpl class\n     * @param menuName Name of this group of menus\n     * @param items Menu items that will be show\n     * @param strings Localized strings of these menu items\n     * @param shouldAddMenuItems A general checker to decide if we should add this group of menu items\n     */\n    constructor(\n        private menuName: string,\n        private items: ContextMenuItem<TString, TContext>[],\n        private strings?: LocalizedStrings<TString>,\n        private shouldAddMenuItems?: (editor: IEditor, node: Node) => boolean,\n        private context?: TContext\n    ) {}\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return this.menuName;\n    }\n\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor;\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    getContextMenuItems(node: Node) {\n        this.targetNode = node;\n\n        return this.editor && this.shouldAddMenuItems?.(this.editor, node)\n            ? this.items\n                  .filter(\n                      item => !item.shouldShow || item.shouldShow(this.editor!, node, this.context)\n                  )\n                  .map(item => this.convertMenuItems(item))\n            : [];\n    }\n\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n\n    private convertMenuItems(item: ContextMenuItem<TString, TContext>): IContextualMenuItem {\n        return {\n            key: item.key,\n            data: item,\n            text: getLocalizedString(this.strings, item.key, item.unlocalizedText),\n            ariaLabel: getLocalizedString(this.strings, item.key, item.unlocalizedText),\n            onClick: () => this.onClick(item, item.key),\n            subMenuProps: item.subItems\n                ? {\n                      onItemClick: (_, menuItem) => menuItem && this.onClick(item, menuItem.data),\n                      items: getObjectKeys(item.subItems).map(key => ({\n                          key: key,\n                          data: key,\n                          text: getLocalizedString(this.strings, key, item.subItems?.[key]),\n                          className: item.itemClassName,\n                          onRender: item.itemRender\n                              ? subItem => item.itemRender?.(subItem, () => this.onClick(item, key))\n                              : undefined,\n                      })),\n                      ...(item.commandBarSubMenuProperties || {}),\n                  }\n                : undefined,\n        };\n    }\n\n    private onClick(item: ContextMenuItem<TString, TContext>, key: TString) {\n        if (this.editor && this.targetNode && this.uiUtilities) {\n            item.onClick(\n                key,\n                this.editor,\n                this.targetNode,\n                this.strings,\n                this.uiUtilities,\n                this.context\n            );\n        }\n    }\n}\n\n/**\n * Create a new instance of ContextMenuProviderImpl class\n * @param menuName Name of this group of menus\n * @param items Menu items that will be show\n * @param strings Localized strings of these menu items\n * @param shouldAddMenuItems A general checker to decide if we should add this group of menu items\n */\nexport default function createContextMenuProvider<TString extends string, TContext>(\n    menuName: string,\n    items: ContextMenuItem<TString, TContext>[],\n    strings?: LocalizedStrings<TString>,\n    shouldAddMenuItems?: (editor: IEditor, node: Node) => boolean,\n    context?: TContext\n): EditorPlugin {\n    return new ContextMenuProviderImpl<TString, TContext>(\n        menuName,\n        items,\n        strings,\n        shouldAddMenuItems,\n        context\n    );\n}\n","import * as React from 'react';\nimport { css } from '@fluentui/react/lib/Utilities';\nimport { Emoji } from '../type/Emoji';\nimport { EmojiPaneStyle } from '../type/EmojiPaneStyles';\nimport { IProcessedStyleSet, IStyleSet } from '@fluentui/react/lib/Styling';\n/**\n * @internal\n * Emoji icon data\n */\nexport interface EmojiIconProps {\n    id: string;\n    emoji: Emoji;\n    strings: Record<string, string>;\n    classNames: IProcessedStyleSet<IStyleSet<EmojiPaneStyle>>;\n    onClick?: (e: React.MouseEvent<EventTarget>) => void;\n    onMouseOver?: (e: React.MouseEvent<EventTarget>) => void;\n    onFocus?: React.FocusEventHandler<HTMLButtonElement>;\n    isSelected?: boolean;\n}\n\n/**\n * @internal\n * Emoji icon component\n */\nexport default function EmojiIcon(props: EmojiIconProps) {\n    const { emoji, onClick, isSelected, onMouseOver, onFocus, strings, id, classNames } = props;\n    const content = emoji.description && strings[emoji.description];\n\n    return (\n        <button\n            id={id}\n            role=\"option\"\n            className={css(classNames.emoji, {\n                [classNames.emojiSelected]: isSelected,\n            })}\n            onClick={onClick}\n            onMouseOver={onMouseOver}\n            onFocus={onFocus}\n            data-is-focusable={true}\n            aria-label={content}\n            aria-selected={isSelected}\n            {...getDataAndAriaProps(props)}>\n            {emoji.codePoint || '…'}\n        </button>\n    );\n}\n\nfunction reduceObject<T>(object: any, callback: (key: string) => boolean): T {\n    if (!object) {\n        return object;\n    }\n\n    return Object.keys(object).reduce((result: any, key: string) => {\n        if (callback(key)) {\n            result[key] = object[key];\n        }\n        return result;\n    }, {} as T);\n}\n\nfunction getDataAndAriaProps<T>(props: EmojiIconProps): T {\n    return reduceObject(\n        props || {},\n        propName => propName.indexOf('data-') === 0 || propName.indexOf('aria-') === 0\n    );\n}\n","import * as React from 'react';\nimport { css } from '@fluentui/react/lib/Utilities';\nimport { EmojiFabricIconCharacterMap, EmojiFamilyKeys, EmojiList } from '../utils/emojiList';\nimport { EmojiPaneStyle } from '../type/EmojiPaneStyles';\nimport { FocusZone, FocusZoneDirection } from '@fluentui/react/lib/FocusZone';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { Icon } from '@fluentui/react/lib/Icon';\nimport { IProcessedStyleSet, IStyleSet } from '@fluentui/react/lib/Styling';\nimport { TooltipHost } from '@fluentui/react/lib/Tooltip';\n\n/**\n * @internal\n * Emoji Nav Bar data\n */\nexport interface EmojiNavBarProps {\n    onClick?: (selected: string) => void;\n    currentSelected?: string;\n    getTabId?: (selected: EmojiFamilyKeys) => string;\n    strings: Record<string, string>;\n    classNames: IProcessedStyleSet<IStyleSet<EmojiPaneStyle>>;\n}\n\n/**\n * @internal\n */\nexport default function EmojiNavBar(props: EmojiNavBarProps) {\n    const { currentSelected, getTabId, strings = {}, classNames } = props;\n    const keys = getObjectKeys(EmojiList);\n    const onFamilyClick = (key: string) => {\n        if (props.onClick) {\n            props.onClick(key);\n        }\n    };\n\n    return (\n        // for each emoji family key, create a button to use as nav bar\n        <div className={classNames.navBar} role=\"tablist\">\n            <FocusZone direction={FocusZoneDirection.horizontal}>\n                {keys.map((key, index) => {\n                    const selected = key === currentSelected;\n                    const friendlyName = strings[key];\n\n                    return (\n                        <TooltipHost\n                            hostClassName={classNames.navBarTooltip}\n                            content={friendlyName}\n                            key={key}>\n                            <button\n                                className={css(classNames.navBarButton, {\n                                    [classNames.selected]: selected,\n                                })}\n                                key={key}\n                                onClick={onFamilyClick.bind(onclick, key)}\n                                id={getTabId?.(key)}\n                                role=\"tab\"\n                                aria-selected={selected}\n                                aria-label={friendlyName}\n                                data-is-focusable=\"true\"\n                                aria-posinset={index + 1}\n                                tabIndex={0}\n                                aria-setsize={keys.length}>\n                                <Icon iconName={EmojiFabricIconCharacterMap[key]} />\n                            </button>\n                        </TooltipHost>\n                    );\n                })}\n            </FocusZone>\n        </div>\n    );\n}\n","import * as React from 'react';\nimport EmojiIcon, { EmojiIconProps } from './EmojiIcon';\nimport EmojiNavBar, { EmojiNavBarProps } from './EmojiNavBar';\nimport EmojiStatusBar, { EmojiStatusBarProps } from './EmojiStatusBar';\nimport { Callout, DirectionalHint, ICalloutProps } from '@fluentui/react/lib/Callout';\nimport { CommonEmojis, EmojiFamilyKeys, EmojiList, MoreEmoji } from '../utils/emojiList';\nimport { css, KeyCodes } from '@fluentui/react/lib/Utilities';\nimport { Emoji } from '../type/Emoji';\nimport { EmojiStringKeys } from '../type/EmojiStringKeys';\nimport { FocusZone } from '@fluentui/react/lib/FocusZone';\nimport { getLocalizedString, LocalizedStrings } from '../../common/index';\nimport { ITextField, TextField } from '@fluentui/react/lib/TextField';\nimport { memoizeFunction } from '@fluentui/react/lib/Utilities';\nimport { mergeStyleSets } from '@fluentui/react/lib/Styling';\nimport { searchEmojis } from '../utils/searchEmojis';\nimport { Theme, useTheme } from '@fluentui/react/lib/Theme';\n\n// \"When a div contains an element that is bigger (either taller or wider) than the parent and has the property\n// overflow-x or overflow-y set to any value, then it can receive the focus.\"\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\nconst TabIndexForFirefoxBug = -1;\nconst EmojisPerRow = 7;\nconst EmojiVisibleRowCount = 5;\nconst EmojiVisibleWithoutNavBarRowCount = 6;\nconst EmojiHeightPx = 40;\nconst VerticalDirectionKeys: number[] = [KeyCodes.up, KeyCodes.down];\nconst DirectionKeys: number[] = [\n    KeyCodes.left,\n    KeyCodes.right,\n    KeyCodes.up,\n    KeyCodes.down,\n    KeyCodes.home,\n    KeyCodes.end,\n];\n\nconst TooltipCalloutProps: ICalloutProps = {\n    isBeakVisible: true,\n    beakWidth: 16,\n    gapSpace: 0,\n    setInitialFocus: true,\n    doNotLayer: false,\n    directionalHint: DirectionalHint.bottomCenter,\n};\n\n/**\n * @internal\n * Types of emoji pane size\n */\nexport const enum EmojiPaneMode {\n    Quick,\n    Partial,\n    Full,\n}\n\n/**\n * @internal\n * Types of emoji Navigation direction\n */\nexport const enum EmojiPaneNavigateDirection {\n    Horizontal,\n    Vertical,\n}\n\n/**\n * @internal\n * Emoji Pane data\n */\nexport interface EmojiPaneState {\n    index: number;\n    mode: EmojiPaneMode;\n    currentEmojiList: Emoji[];\n    currentFamily: EmojiFamilyKeys;\n    search: string;\n    searchInBox: string;\n}\n\n/**\n * @internal\n * Emoji Pane customizable data\n */\nexport interface EmojiPaneProps {\n    searchDisabled?: boolean;\n    hideStatusBar?: boolean;\n    navBarProps?: Partial<EmojiNavBarProps>;\n    statusBarProps?: Partial<EmojiStatusBarProps>;\n    emojiIconProps?: Partial<EmojiIconProps>;\n    searchBoxString?: LocalizedStrings<EmojiStringKeys>;\n    onSelect: (emoji: Emoji, wordBeforeCursor: string) => void;\n    baseId: number;\n    strings: Record<string, string>;\n}\n\nconst AriaAttributes = {\n    ActiveDescendant: 'aria-activedescendant',\n    AutoComplete: 'aria-autocomplete',\n    Controls: 'aria-controls',\n    Expanded: 'aria-expanded',\n    HasPopup: 'aria-haspopup',\n    Owns: 'aria-owns',\n    Pressed: 'aria-pressed',\n};\n\n/**\n * @internal\n * Emoji pane component functions\n */\nexport interface EmojiPane {\n    navigate: (change: number, direction?: EmojiPaneNavigateDirection) => number;\n    getEmojiElementIdByIndex: (index: number) => string | null;\n    getSelectedEmoji: () => Emoji;\n    showFullPicker: (fullSearchText: string) => void;\n    setSearch: (value: string) => void;\n    normalizeSearchText: (text: string, colonIncluded: boolean) => string;\n    getSearchResult: (searchValue: string, mode: EmojiPaneMode) => Emoji[];\n    getEmojiIconId: (emoji: Emoji) => string;\n}\n\nconst EmojiPane = React.forwardRef(function EmojiPaneFunc(\n    props: EmojiPaneProps,\n    ref: React.Ref<EmojiPane>\n) {\n    let searchBox: ITextField;\n    let emojiBody: HTMLElement;\n    let input: HTMLInputElement;\n\n    const [index, setIndex] = React.useState<number>(0);\n    const [mode, setMode] = React.useState<EmojiPaneMode>(EmojiPaneMode.Quick);\n    const [currentEmojiList, setCurrentEmojiList] = React.useState<Emoji[]>(CommonEmojis);\n    const [currentFamily, setCurrentFamily] = React.useState<EmojiFamilyKeys>(\n        EmojiFamilyKeys.People\n    );\n    const [search, setSearchString] = React.useState<string>(':');\n    const [searchInBox, setSearchInBox] = React.useState<string>('');\n\n    const theme = useTheme();\n    const classNames = getEmojiPaneClassName(theme);\n    const listId = `EmojiPane${props.baseId}`;\n\n    const navigate = React.useCallback(\n        (change: number, direction?: EmojiPaneNavigateDirection): number => {\n            if (!direction) {\n                direction = EmojiPaneNavigateDirection.Horizontal;\n            }\n\n            if (direction === EmojiPaneNavigateDirection.Vertical && index !== -1) {\n                change *= EmojisPerRow;\n            }\n\n            const newIndex = index + change;\n            const length = currentEmojiList.length;\n            if (newIndex >= 0 && newIndex < length) {\n                setIndex(newIndex);\n                return newIndex;\n            }\n\n            return -1;\n        },\n        [index]\n    );\n\n    const normalizeSearchText = React.useCallback(\n        (text: string, colonIncluded: boolean): string => {\n            if (text == null) {\n                return '';\n            }\n\n            if (colonIncluded) {\n                text = text.substr(1);\n            }\n            return text.trim();\n        },\n        []\n    );\n\n    const getEmojiElementIdByIndex = React.useCallback(\n        (index: number): string | null => {\n            const emoji = currentEmojiList[index];\n            if (emoji) {\n                return getEmojiIconId(emoji);\n            }\n\n            return null;\n        },\n        [currentEmojiList]\n    );\n\n    const getSelectedEmoji = React.useCallback((): Emoji => {\n        return currentEmojiList[index];\n    }, [currentEmojiList, index]);\n\n    const showFullPicker = React.useCallback(\n        (fullSearchText: string): void => {\n            const normalizedSearchValue = normalizeSearchText(fullSearchText, true);\n            const newMode =\n                normalizedSearchValue.length === 0 ? EmojiPaneMode.Full : EmojiPaneMode.Partial;\n            setIndex(newMode === EmojiPaneMode.Full ? -1 : 0);\n            setMode(newMode);\n            setCurrentEmojiList(getSearchResult(normalizedSearchValue, newMode));\n            setSearchString(fullSearchText);\n            setSearchInBox(normalizedSearchValue);\n        },\n        [mode]\n    );\n\n    const setSearch = React.useCallback(\n        (value: string): void => {\n            const normalizedSearchValue = normalizeSearchText(value, false);\n            setIndex(0);\n            setCurrentEmojiList(getSearchResult(normalizedSearchValue, mode));\n            setSearchString(value);\n        },\n        [index, search, currentEmojiList]\n    );\n\n    const getSearchResult = React.useCallback(\n        (searchValue: string, mode: EmojiPaneMode): Emoji[] => {\n            const isQuickMode = mode === EmojiPaneMode.Quick;\n            if (!searchValue) {\n                return isQuickMode ? currentEmojiList : EmojiList[currentFamily];\n            }\n\n            const emojiList = searchEmojis(searchValue, props.strings);\n            return isQuickMode ? emojiList.slice(0, 5).concat([MoreEmoji]) : emojiList;\n        },\n        [mode, currentFamily, currentEmojiList]\n    );\n\n    const getEmojiIconId = React.useCallback((emoji: Emoji) => `${listId}-${emoji.key}`, [listId]);\n\n    React.useImperativeHandle(\n        ref,\n        () => ({\n            navigate,\n            getEmojiElementIdByIndex,\n            showFullPicker,\n            getSearchResult,\n            setSearch,\n            getSelectedEmoji,\n            normalizeSearchText,\n            getEmojiIconId,\n        }),\n        [\n            navigate,\n            getEmojiElementIdByIndex,\n            showFullPicker,\n            getSearchResult,\n            setSearch,\n            getEmojiIconId,\n            getSelectedEmoji,\n            normalizeSearchText,\n        ]\n    );\n\n    const renderQuickPicker = (\n        props: EmojiPaneProps,\n        index: number,\n        currentEmojiList: Emoji[]\n    ): JSX.Element => {\n        const { strings } = props;\n        const selectedEmoji = getSelectedEmoji();\n        const target = selectedEmoji ? `#${getEmojiIconId(selectedEmoji)}` : undefined;\n        const content = selectedEmoji?.description ? strings[selectedEmoji.description] : undefined;\n        const emojiList = renderCurrentEmojiIcons(index, currentEmojiList);\n        // note: we're using a callout since TooltipHost does not support manual trigger, and we need to show the tooltip since quick picker is shown\n        // as an autocomplete menu (false focus based on transferring navigation keyboard event)\n        return (\n            <div id={listId} role=\"listbox\">\n                {emojiList}\n                <div\n                    id={listId}\n                    role=\"listbox\"\n                    className={css(classNames.quickPicker, classNames.roosterEmojiPane)}>\n                    <Callout\n                        {...TooltipCalloutProps}\n                        role=\"tooltip\"\n                        target={target}\n                        hidden={!content || !emojiList}\n                        className={classNames.tooltip}>\n                        {content}\n                    </Callout>\n                </div>\n            </div>\n        );\n    };\n\n    const renderFullPicker = (\n        props: EmojiPaneProps,\n        index: number,\n        searchInBox: string,\n        currentFamily: EmojiFamilyKeys,\n        currentEmojiList: Emoji[]\n    ): JSX.Element => {\n        const { searchDisabled, searchBoxString } = props;\n        const emojiId = getEmojiIconId(getSelectedEmoji());\n        const autoCompleteAttributes = {\n            [AriaAttributes.AutoComplete]: 'list',\n            [AriaAttributes.Expanded]: 'true',\n            [AriaAttributes.HasPopup]: 'listbox',\n            [AriaAttributes.Owns]: listId,\n        };\n        if (emojiId) {\n            autoCompleteAttributes[AriaAttributes.ActiveDescendant] = emojiId;\n        }\n\n        return (\n            <div className={classNames.roosterEmojiPane}>\n                {!searchDisabled && (\n                    <TextField\n                        role=\"combobox\"\n                        componentRef={ref => searchRefCallback(ref)}\n                        value={searchInBox}\n                        onChange={onSearchChange}\n                        inputClassName={classNames.emojiTextInput}\n                        onKeyPress={onSearchKeyPress}\n                        onKeyDown={onSearchKeyDown}\n                        onFocus={onSearchFocus}\n                        placeholder={getLocalizedString(\n                            searchBoxString,\n                            'emojiSearchPlaceholder',\n                            'Search...'\n                        )}\n                        ariaLabel={getLocalizedString(\n                            searchBoxString,\n                            'emojiSearchInputAriaLabel',\n                            'Search...'\n                        )}\n                        {...autoCompleteAttributes}\n                    />\n                )}\n                {mode === EmojiPaneMode.Full\n                    ? renderFullList(props, index, currentFamily, currentEmojiList)\n                    : renderPartialList(props, index, currentEmojiList)}\n            </div>\n        );\n    };\n\n    const onSearchFocus = (e: React.FocusEvent<HTMLInputElement>): void => {\n        input = e.target as HTMLInputElement;\n    };\n\n    const onSearchKeyPress = (e: React.KeyboardEvent<HTMLInputElement>): void => {\n        if (!e || e.which !== KeyCodes.enter) {\n            return;\n        }\n\n        if (index >= 0 && currentEmojiList && currentEmojiList.length > 0) {\n            onSelect(e, currentEmojiList[index]);\n        }\n    };\n\n    const onSearchKeyDown = (e: React.KeyboardEvent<HTMLInputElement>): void => {\n        if (!e || DirectionKeys.indexOf(e.which) < 0) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.which === KeyCodes.home) {\n            setIndex(0);\n            emojiBody.scrollTop = 0;\n            return;\n        }\n        if (e.which === KeyCodes.end) {\n            setIndex(currentEmojiList.length - 1);\n            emojiBody.scrollTop = emojiBody.scrollHeight; // scrollHeight will be larger than max\n            return;\n        }\n\n        const direction =\n            VerticalDirectionKeys.indexOf(e.which) < 0\n                ? EmojiPaneNavigateDirection.Horizontal\n                : EmojiPaneNavigateDirection.Vertical;\n        const newIndex = navigate(\n            e.which === KeyCodes.left || e.which === KeyCodes.up ? -1 : 1,\n            direction\n        );\n        if (newIndex > -1) {\n            const visibleRowCount =\n                mode === EmojiPaneMode.Full\n                    ? EmojiVisibleRowCount\n                    : EmojiVisibleWithoutNavBarRowCount;\n            const currentRow = Math.floor(newIndex / EmojisPerRow);\n            const visibleTop = emojiBody.scrollTop;\n            const visibleBottom = visibleTop + visibleRowCount * EmojiHeightPx;\n            const currentRowTop = currentRow * EmojiHeightPx;\n            const currentRowBottom = currentRowTop + EmojiHeightPx;\n            if (visibleTop <= currentRowTop && visibleBottom >= currentRowBottom) {\n                return; // row is visible, so exit\n            }\n\n            emojiBody.scrollTop = currentRow * EmojiHeightPx;\n        }\n    };\n\n    const renderCurrentEmojiIcons = (index: number, currentEmojiList: Emoji[]): JSX.Element[] => {\n        const { strings } = props;\n        return currentEmojiList.map((emoji, emojiIndex) => (\n            <EmojiIcon\n                strings={strings}\n                id={getEmojiIconId(emoji)}\n                key={emoji.key}\n                onMouseOver={() => setIndex(emojiIndex)}\n                onFocus={() => setIndex(emojiIndex)}\n                emoji={emoji}\n                classNames={classNames}\n                isSelected={index === emojiIndex}\n                onClick={e => onSelect(e, emoji)}\n                aria-posinset={index + 1}\n                aria-setsize={currentEmojiList.length}\n            />\n        ));\n    };\n\n    const renderPartialList = (\n        props: EmojiPaneProps,\n        index: number,\n        currentEmojiList: Emoji[]\n    ): JSX.Element => {\n        const { strings, hideStatusBar, statusBarProps } = props;\n        const hasResult = currentEmojiList && currentEmojiList.length > 0;\n\n        return (\n            <div>\n                <div\n                    className={classNames.partialList}\n                    data-is-scrollable={true}\n                    tabIndex={TabIndexForFirefoxBug}\n                    ref={onEmojiBodyRef}>\n                    <FocusZone\n                        id={listId}\n                        role=\"listbox\"\n                        className={classNames.fullListContent}\n                        ref={focusZoneRefCallback}>\n                        {renderCurrentEmojiIcons(index, currentEmojiList)}\n                    </FocusZone>\n                </div>\n                {!hideStatusBar && (\n                    <EmojiStatusBar\n                        classNames={classNames}\n                        strings={strings}\n                        {...statusBarProps}\n                        hasResult={hasResult}\n                        emoji={getSelectedEmoji()}\n                    />\n                )}\n            </div>\n        );\n    };\n\n    const renderFullList = (\n        props: EmojiPaneProps,\n        index: number,\n        currentFamily: EmojiFamilyKeys,\n        currentEmojiList: Emoji[]\n    ): JSX.Element => {\n        const { strings, hideStatusBar, navBarProps, statusBarProps } = props;\n\n        const hasResult = currentEmojiList && currentEmojiList.length > 0;\n\n        return (\n            <div className={classNames.fullList}>\n                <div\n                    className={classNames.fullListBody}\n                    data-is-scrollable={true}\n                    tabIndex={TabIndexForFirefoxBug}\n                    ref={onEmojiBodyRef}>\n                    <EmojiNavBar\n                        strings={strings}\n                        {...navBarProps}\n                        onClick={pivotClick}\n                        currentSelected={currentFamily}\n                        getTabId={getTabId}\n                        classNames={classNames}\n                    />\n                    <div role=\"tabpanel\" aria-labelledby={getTabId(currentFamily)}>\n                        <div>\n                            <FocusZone\n                                id={listId}\n                                role=\"listbox\"\n                                className={classNames.fullListContent}\n                                ref={focusZoneRefCallback}>\n                                {renderCurrentEmojiIcons(index, currentEmojiList)}\n                            </FocusZone>\n                        </div>\n                    </div>\n                </div>\n\n                {!hideStatusBar && (\n                    <EmojiStatusBar\n                        classNames={classNames}\n                        strings={strings}\n                        {...statusBarProps}\n                        hasResult={hasResult}\n                        emoji={getSelectedEmoji()}\n                    />\n                )}\n            </div>\n        );\n    };\n\n    const onEmojiBodyRef = (ref: HTMLDivElement) => {\n        emojiBody = ref;\n    };\n\n    const pivotClick = (selected: string): void => {\n        const currentFamily = selected as EmojiFamilyKeys;\n        setCurrentEmojiList(EmojiList[currentFamily]);\n        setCurrentFamily(currentFamily);\n    };\n\n    const getTabId = (itemKey: EmojiFamilyKeys): string => {\n        return `family_${itemKey}_${props.baseId}`;\n    };\n\n    const searchRefCallback = (ref: ITextField | null): void => {\n        if (ref) {\n            searchBox = ref;\n            if (searchBox?.value) {\n                searchBox.focus();\n                searchBox.setSelectionStart(searchBox.value.length);\n            }\n        }\n    };\n\n    const focusZoneRefCallback = (ref: FocusZone): void => {\n        if (props.searchDisabled && ref) {\n            ref.focus();\n        }\n\n        if (input) {\n            // make sure to announce the active descending after the focus zone containing the emojis is ready\n            input.removeAttribute(AriaAttributes.ActiveDescendant);\n            const emojiId = getEmojiIconId(getSelectedEmoji());\n            // we need to delay so NVDA will announce the first selection\n            if (emojiId) {\n                setTimeout(() => input.setAttribute(AriaAttributes.ActiveDescendant, emojiId), 0);\n            }\n        }\n    };\n\n    const onSearchChange = (_: any, newValue?: string): void => {\n        if (typeof newValue === 'string') {\n            const normalizedSearchValue = normalizeSearchText(newValue, false);\n            const newMode =\n                normalizedSearchValue.length === 0 ? EmojiPaneMode.Full : EmojiPaneMode.Partial;\n            setIndex(newMode === EmojiPaneMode.Full ? -1 : 0);\n            setCurrentEmojiList(getSearchResult(normalizedSearchValue, mode));\n            setSearchInBox(newValue);\n            setMode(newMode);\n        }\n    };\n\n    const onSelect = (\n        e: React.MouseEvent<EventTarget> | React.KeyboardEvent<HTMLInputElement>,\n        emoji: Emoji\n    ): void => {\n        e.stopPropagation();\n        e.preventDefault();\n        if (props.onSelect) {\n            props.onSelect(emoji, search);\n        }\n    };\n\n    const renderPane = (\n        props: EmojiPaneProps,\n        index: number,\n        searchInBox: string,\n        currentFamily: EmojiFamilyKeys,\n        currentEmojiList: Emoji[]\n    ) => {\n        return mode === EmojiPaneMode.Quick\n            ? renderQuickPicker(props, index, currentEmojiList)\n            : renderFullPicker(props, index, searchInBox, currentFamily, currentEmojiList);\n    };\n\n    return <>{renderPane(props, index, searchInBox, currentFamily, currentEmojiList)}</>;\n});\n\n/**\n * @internal\n * Emoji pane component\n */\nexport function showEmojiPane(\n    onSelect: (emoji: Emoji, wordBeforeCursor: string) => void,\n    strings: Record<string, string>,\n    paneRef: React.RefObject<EmojiPane>,\n    baseId: number,\n    searchBoxString?: LocalizedStrings<EmojiStringKeys>\n) {\n    return (\n        <EmojiPane\n            ref={paneRef}\n            baseId={baseId}\n            searchBoxString={searchBoxString}\n            strings={strings}\n            onSelect={onSelect}></EmojiPane>\n    );\n}\n\nconst calcMaxHeight = () => {\n    const buttonHeight = 40;\n    const rowsOfIcons = 6; // including family bar if shown\n    const bottomPaddingForContent = 5;\n    const maxHeightForContent = rowsOfIcons * buttonHeight + bottomPaddingForContent;\n    return maxHeightForContent.toString() + 'px';\n};\n\nconst calcPaneWidth = () => {\n    const buttonWidth = 40;\n    const pivotItemCount = 7;\n    const paneHorizontalPadding = 1;\n    const paneWidth = buttonWidth * pivotItemCount + 2 * paneHorizontalPadding;\n    return paneWidth.toString() + 'px';\n};\n\nconst getEmojiPaneClassName = memoizeFunction((theme: Theme) => {\n    const palette = theme.palette;\n    return mergeStyleSets({\n        quickPicker: {\n            overflowY: 'hidden',\n            ':after': {\n                content: '',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                bottom: '0px',\n                right: '0px',\n                zIndex: 1,\n                borderWidth: '1px',\n                borderStyle: 'solid',\n                borderColor: 'rgb(255, 255, 255)',\n                borderImage: 'initial',\n                outline: 'rgb(102, 102, 102) solid 1px',\n            },\n        },\n\n        tooltip: {\n            padding: '8px',\n        },\n\n        emojiTextInput: {\n            padding: '6px',\n        },\n\n        partialList: {\n            maxHeight: calcMaxHeight(),\n            overflow: 'hidden',\n            overflowY: 'scroll',\n        },\n\n        fullListContent: {\n            width: calcPaneWidth(),\n        },\n\n        fullListBody: {\n            maxHeight: calcMaxHeight(),\n            overflow: 'hidden',\n            overflowY: 'scroll',\n            height: calcMaxHeight(),\n        },\n\n        fullList: {\n            position: 'relative',\n        },\n\n        roosterEmojiPane: {\n            padding: '1px',\n            background: palette.white,\n        },\n\n        emoji: {\n            fontSize: '18px',\n            width: '40px',\n            height: '40px',\n            border: '0',\n            position: 'relative',\n            background: palette.white,\n            transition: 'backgorund 0.5s ease-in-out',\n        },\n\n        emojiSelected: {\n            background: palette.neutralLight,\n        },\n\n        navBar: {\n            top: '-1px',\n            zIndex: 10,\n            position: 'sticky',\n        },\n\n        navBarTooltip: {\n            display: 'inline-block',\n        },\n\n        navBarButton: {\n            height: '40px',\n            width: '40px',\n            border: '0',\n            borderBottom: 'solid 1px',\n            padding: 0,\n            marginBottom: 0,\n            display: 'inline-block',\n            color: palette.themeDark,\n            background: palette.white,\n            '&:hover': {\n                cursor: 'default',\n            },\n        },\n\n        selected: {\n            borderBottom: '2px solid',\n            borderBottomColor: palette.themeDark,\n        },\n\n        statusBar: {\n            borderTop: 'solid 1px',\n            height: '50px',\n            overflow: 'hidden',\n            position: 'relative',\n            background: palette.white,\n        },\n\n        statusBarIcon: {\n            padding: '4px',\n            fontSize: '25px',\n            display: 'inline-block',\n            fontStyle: 'normal',\n            fontWeight: 'normal',\n            lineHeight: '40px',\n        },\n\n        statusBarDetailsContainer: {\n            padding: '0 4px',\n            lineHeight: '50px',\n            position: 'absolute',\n            display: 'inline-block',\n            left: '40px',\n            right: '0',\n            top: '0',\n        },\n\n        statusBarDetails: {\n            fontWeight: 'bold',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n        },\n\n        statusBarNoResultDetailsContainer: {\n            lineHeight: '50px',\n            position: 'absolute',\n            display: 'inline-block',\n            top: '0',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            left: '0',\n            padding: '0 8px',\n        },\n    });\n});\n","import * as React from 'react';\nimport { Emoji } from '../type/Emoji';\nimport { EmojiPaneStyle } from '../type/EmojiPaneStyles';\nimport { IProcessedStyleSet, IStyleSet } from '@fluentui/react/lib/Styling';\nimport { TooltipHost, TooltipOverflowMode } from '@fluentui/react/lib/Tooltip';\n/**\n * @internal\n * Emoji Status Bar data\n */\nexport interface EmojiStatusBarProps {\n    emoji: Emoji;\n    strings: Record<string, string>;\n    hasResult: boolean;\n    classNames: IProcessedStyleSet<IStyleSet<EmojiPaneStyle>>;\n}\n\nconst NO_SUGGESTIONS = 'emjDNoSuggetions';\n\n/**\n * @internal\n * Emoji status bar component\n */\nexport default function EmojiStatusBar(props: EmojiStatusBarProps) {\n    const { emoji, strings, hasResult, classNames } = props;\n\n    if (!hasResult) {\n        const noResultDescription = strings[NO_SUGGESTIONS];\n        return (\n            <div className={classNames.statusBar}>\n                <div style={{ display: 'none' }} aria-live=\"polite\">\n                    {noResultDescription}\n                </div>\n                <div className={classNames.statusBarNoResultDetailsContainer}>\n                    <TooltipHost\n                        content={noResultDescription}\n                        overflowMode={TooltipOverflowMode.Parent}>\n                        <span role=\"alert\">{noResultDescription}</span>\n                    </TooltipHost>\n                </div>\n            </div>\n        );\n    }\n\n    const icon = emoji ? emoji.codePoint : '';\n    const description = emoji?.description ? strings[emoji.description] : '';\n\n    return (\n        <div className={classNames.statusBar}>\n            <i className={classNames.statusBarIcon} role=\"presentation\" aria-hidden=\"true\">\n                {icon}\n            </i>\n\n            <div className={classNames.statusBarDetailsContainer}>\n                <div className={classNames.statusBarDetails}>\n                    <TooltipHost content={description} overflowMode={TooltipOverflowMode.Parent}>\n                        {description}\n                    </TooltipHost>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import * as React from 'react';\nimport { Callout, DirectionalHint } from '@fluentui/react/lib/Callout';\nimport { Emoji } from '../type/Emoji';\nimport { EmojiPane, showEmojiPane } from './EmojiPane';\nimport { EmojiStringKeys } from '../type/EmojiStringKeys';\nimport { LocalizedStrings, UIUtilities } from '../../common/index';\nimport { renderReactComponent } from '../../common/utils/renderReactComponent';\n\n/**\n * @internal\n * Emoji callout data\n */\ninterface EmojiICallOutProps {\n    cursorRect: DOMRect;\n    strings: Record<string, string>;\n    onSelectFromPane: (emoji: Emoji, wordBeforeCursor: string) => void;\n    paneRef: React.RefObject<EmojiPane>;\n    onHideCallout: () => void;\n    searchBoxString?: LocalizedStrings<EmojiStringKeys>;\n    dismiss: () => void;\n    baseId: number;\n}\n\nconst EmojiICallout = React.forwardRef(function EmojiCalloutFunc(\n    props: EmojiICallOutProps,\n    ref: React.Ref<EmojiICallout>\n) {\n    const {\n        cursorRect,\n        strings,\n        onSelectFromPane,\n        onHideCallout,\n        searchBoxString,\n        dismiss,\n        paneRef,\n        baseId,\n    } = props;\n    const [isCalloutVisible, toggleIsCalloutVisible] = React.useState(true);\n\n    React.useImperativeHandle(\n        ref,\n        () => ({\n            dismiss,\n        }),\n        [dismiss]\n    );\n\n    const point = {\n        x: cursorRect.left,\n        y: (cursorRect.top + cursorRect.bottom) / 2,\n    };\n    const gap = (cursorRect.bottom - cursorRect.top) / 2 + 5;\n    if (!isCalloutVisible) {\n        onHideCallout();\n    }\n    const toogleCallout = React.useCallback(() => {\n        toggleIsCalloutVisible(false);\n        dismiss();\n    }, [dismiss]);\n\n    return (\n        <>\n            {isCalloutVisible && (\n                <Callout\n                    target={point}\n                    directionalHint={DirectionalHint.bottomAutoEdge}\n                    isBeakVisible={false}\n                    gapSpace={gap}\n                    onDismiss={toogleCallout}>\n                    {showEmojiPane(onSelectFromPane, strings, paneRef, baseId, searchBoxString)}\n                </Callout>\n            )}\n        </>\n    );\n});\n\n/**\n * @internal\n */\nexport interface EmojiICallout {\n    dismiss: () => void;\n}\n\n/**\n * @internal\n * Enable emoji callout\n */\nexport default function showEmojiCallout(\n    uiUtilities: UIUtilities,\n    cursorRect: DOMRect,\n    strings: Record<string, string>,\n    onSelectFromPane: (emoji: Emoji, wordBeforeCursor: string) => void,\n    paneRef: React.RefObject<EmojiPane>,\n    emojiCalloutRef: React.RefObject<EmojiICallout>,\n    onHideCallout: () => void,\n    baseId: number,\n    searchBoxString?: LocalizedStrings<EmojiStringKeys>\n) {\n    let disposer: (() => void) | null = null;\n    const onDismiss = () => {\n        disposer?.();\n        disposer = null;\n    };\n\n    disposer = renderReactComponent(\n        uiUtilities,\n        <EmojiICallout\n            ref={emojiCalloutRef}\n            cursorRect={cursorRect}\n            strings={strings}\n            onSelectFromPane={onSelectFromPane}\n            paneRef={paneRef}\n            onHideCallout={onHideCallout}\n            searchBoxString={searchBoxString}\n            baseId={baseId}\n            dismiss={onDismiss}\n        />\n    );\n}\n","export { default as createEmojiPlugin } from './plugin/createEmojiPlugin';\nexport { EmojiStringKeys } from './type/EmojiStringKeys';\n","import showEmojiCallout, { EmojiICallout } from '../components/showEmojiCallout';\nimport { Emoji } from '../type/Emoji';\nimport { EmojiPane } from '../components/EmojiPane';\nimport { EmojiStringKeys } from '../type/EmojiStringKeys';\nimport { isModifierKey } from 'roosterjs-editor-dom';\nimport { KeyCodes } from '@fluentui/react/lib/Utilities';\nimport { LocalizedStrings, ReactEditorPlugin, UIUtilities } from '../../common/index';\nimport { MoreEmoji } from '../utils/emojiList';\nimport { replaceWithNode } from 'roosterjs-editor-api';\nimport {\n    IEditor,\n    PluginDomEvent,\n    PluginEvent,\n    PluginEventType,\n    PluginKeyboardEvent,\n    PluginKeyDownEvent,\n    PositionType,\n} from 'roosterjs-editor-types';\nimport {\n    EmojiDescriptionStrings,\n    EmojiFamilyStrings,\n    EmojiKeywordStrings,\n} from '../type/EmojiStrings';\nimport * as React from 'react';\n\nconst KEYCODE_COLON = 186;\nconst KEYCODE_COLON_FIREFOX = 59;\n\n// Regex looks for an emoji right before the : to allow contextual search immediately following an emoji\n// MATCHES: 0: 😃:r\n//          1: 😃\n//          2: :r\n\nconst EMOJI_BEFORE_COLON_REGEX = /([\\u0023-\\u0039][\\u20e3]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u00a9-\\u00ae]|[\\u2122-\\u3299])*([:;][^:]*)/;\n\nclass EmojiPlugin implements ReactEditorPlugin {\n    private editor: IEditor | null = null;\n    private eventHandledOnKeyDown: boolean = false;\n    private canUndoEmoji: boolean = false;\n    private isSuggesting: boolean = false;\n    private paneRef = React.createRef<EmojiPane>();\n    private timer: number | null = null;\n    private uiUtilities: UIUtilities | null = null;\n    private strings: Record<string, string>;\n    private emojiCalloutRef = React.createRef<EmojiICallout>();\n    private baseId = 0;\n\n    constructor(private searchBoxStrings?: LocalizedStrings<EmojiStringKeys>) {\n        this.strings = {\n            ...EmojiDescriptionStrings,\n            ...EmojiKeywordStrings,\n            ...EmojiFamilyStrings,\n        };\n    }\n\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n\n    public getName() {\n        return 'Emoji';\n    }\n\n    public dispose() {\n        this.setIsSuggesting(false);\n        this.emojiCalloutRef.current?.dismiss();\n        this.editor = null;\n        this.baseId = 0;\n    }\n\n    public initialize(editor: IEditor): void {\n        this.editor = editor;\n    }\n\n    public onPluginEvent(event: PluginEvent): void {\n        if (event.eventType === PluginEventType.KeyDown) {\n            this.eventHandledOnKeyDown = false;\n            if (this.isSuggesting) {\n                this.onKeyDownSuggestingDomEvent(event);\n            } else if (event.rawEvent.which === KeyCodes.backspace && this.canUndoEmoji) {\n                //TODO: 1051\n                // If KeyDown is backspace and canUndoEmoji, call editor undo\n                this.editor!.undo();\n                this.handleEventOnKeyDown(event);\n                this.canUndoEmoji = false;\n            }\n        } else if (event.eventType === PluginEventType.KeyUp && !isModifierKey(event.rawEvent)) {\n            if (this.isSuggesting) {\n                this.onKeyUpSuggestingDomEvent(event);\n            } else {\n                this.onKeyUpDomEvent(event);\n            }\n        } else if (event.eventType === PluginEventType.MouseUp) {\n            //TODO: 1052\n            // If MouseUp, the emoji cannot be undone\n            this.canUndoEmoji = false;\n            this.setIsSuggesting(false);\n        }\n    }\n\n    /**\n     * On KeyDown suggesting DOM event\n     * Try to insert emoji is possible\n     * Intercept arrow keys to move selection if popup is shown\n     */\n    private onKeyDownSuggestingDomEvent(event: PluginKeyDownEvent): void {\n        // If key is enter, try insert emoji at selection\n        // If key is space and selection is shortcut, try insert emoji\n\n        const wordBeforeCursor = this.getWordBeforeCursor(event);\n        switch (event.rawEvent.which) {\n            case KeyCodes.enter:\n                const selectedEmoji = this.paneRef.current?.getSelectedEmoji();\n                // check if selection is on the \"...\" and show full picker if so, otherwise try to apply emoji\n                if (\n                    !selectedEmoji ||\n                    !wordBeforeCursor ||\n                    this.tryShowFullPicker(event, selectedEmoji, wordBeforeCursor)\n                ) {\n                    break;\n                } else {\n                    this.insertEmoji(selectedEmoji, wordBeforeCursor);\n                    this.handleEventOnKeyDown(event);\n                }\n\n                break;\n            case KeyCodes.left:\n            case KeyCodes.right:\n                this.paneRef.current?.navigate(event.rawEvent.which === KeyCodes.left ? -1 : 1);\n                this.handleEventOnKeyDown(event);\n                break;\n            case KeyCodes.escape:\n                this.setIsSuggesting(false);\n                this.handleEventOnKeyDown(event);\n        }\n    }\n\n    private tryShowFullPicker(\n        event: PluginDomEvent,\n        selectedEmoji: Emoji,\n        wordBeforeCursor: string\n    ): boolean {\n        if (selectedEmoji !== MoreEmoji) {\n            return false;\n        }\n\n        this.handleEventOnKeyDown(event);\n        this.paneRef.current?.showFullPicker(wordBeforeCursor);\n        return true;\n    }\n\n    /**\n     * On KeyUp suggesting DOM event\n     * If key is character, update search term\n     * Otherwise set isSuggesting to false\n     */\n    private onKeyUpSuggestingDomEvent(event: PluginKeyboardEvent): void {\n        if (this.eventHandledOnKeyDown) {\n            return;\n        }\n        // If this is a character key or backspace\n        // Clear the timer as we will either queue a new timer or stop suggesting\n        if (\n            this.timer &&\n            ((event.rawEvent.key.length === 1 && event.rawEvent.which !== KeyCodes.space) ||\n                event.rawEvent.which === KeyCodes.backspace)\n        ) {\n            this.editor?.getDocument().defaultView?.clearTimeout(this.timer);\n            this.timer = null;\n            this.emojiCalloutRef.current?.dismiss();\n        }\n\n        const wordBeforeCursor = this.getWordBeforeCursor(event);\n        if (wordBeforeCursor) {\n            if (this.paneRef) {\n                this.paneRef.current?.setSearch(wordBeforeCursor);\n            } else {\n                this.setIsSuggesting(false);\n            }\n        } else {\n            this.setIsSuggesting(false);\n        }\n    }\n\n    private onKeyUpDomEvent(event: PluginKeyboardEvent): void {\n        if (this.eventHandledOnKeyDown) {\n            return;\n        }\n        const wordBeforeCursor = this.getWordBeforeCursor(event);\n        if (\n            (event.rawEvent.which === KEYCODE_COLON ||\n                event.rawEvent.which === KEYCODE_COLON_FIREFOX) &&\n            wordBeforeCursor === ':'\n        ) {\n            this.setIsSuggesting(true);\n        }\n    }\n\n    private getCallout() {\n        const rangeNode = this.editor?.getElementAtCursor();\n        const rect = rangeNode?.getBoundingClientRect();\n        if (this.uiUtilities && rect) {\n            this.baseId++;\n\n            showEmojiCallout(\n                this.uiUtilities,\n                rect,\n                this.strings,\n                this.onSelectFromPane,\n                this.paneRef,\n                this.emojiCalloutRef,\n                this.onHideCallout,\n                this.baseId,\n                this.searchBoxStrings\n            );\n        }\n    }\n\n    private onHideCallout = () => this.setIsSuggesting(false);\n\n    private onSelectFromPane = (emoji: Emoji, wordBeforeCursor: string): void => {\n        if (emoji === MoreEmoji) {\n            this.paneRef.current?.showFullPicker(wordBeforeCursor);\n            return;\n        }\n\n        this.insertEmoji(emoji, wordBeforeCursor);\n    };\n\n    private setIsSuggesting(isSuggesting: boolean): void {\n        if (this.isSuggesting === isSuggesting) {\n            return;\n        }\n\n        this.isSuggesting = isSuggesting;\n        if (this.isSuggesting) {\n            this.getCallout();\n        } else if (this.emojiCalloutRef) {\n            this.emojiCalloutRef.current?.dismiss();\n        }\n    }\n\n    private insertEmoji(emoji: Emoji, wordBeforeCursor: string) {\n        if (!wordBeforeCursor || !this.editor || !emoji.codePoint) {\n            return;\n        }\n        const node = this.editor.getDocument().createElement('span');\n        node.innerText = emoji.codePoint;\n\n        this.editor.addUndoSnapshot(\n            () => {\n                if (this.editor) {\n                    replaceWithNode(this.editor, wordBeforeCursor, node, true /*exactMatch*/);\n                    this.editor.select(node, PositionType.After);\n                }\n            },\n            undefined /*changeSource*/,\n            true /*canUndoByBackspace*/\n        );\n\n        this.emojiCalloutRef.current?.dismiss();\n    }\n\n    private getWordBeforeCursor(event: PluginEvent): string | null {\n        const cursorData = this.editor?.getContentSearcherOfCursor(event);\n        const wordBeforeCursor = cursorData ? cursorData.getWordBefore() : null;\n        const matches = wordBeforeCursor ? EMOJI_BEFORE_COLON_REGEX.exec(wordBeforeCursor) : null;\n        return matches && matches.length > 2 && matches[0] === wordBeforeCursor ? matches[2] : null;\n    }\n\n    private handleEventOnKeyDown(event: PluginDomEvent): void {\n        this.eventHandledOnKeyDown = true;\n        event.rawEvent.preventDefault();\n        event.rawEvent.stopImmediatePropagation();\n    }\n}\n\n/**\n * Create a new instance of Emoji plugin with FluentUI components.\n */\nexport default function createEmojiPlugin(\n    searchBoxStrings?: LocalizedStrings<EmojiStringKeys>\n): ReactEditorPlugin {\n    return new EmojiPlugin(searchBoxStrings);\n}\n","/**\n * @internal\n * Emoji Description\n */\nexport const EmojiDescriptionStrings = {\n    emjDMore: 'More',\n    emjDNoSuggetions: 'No suggestions found',\n    emjD0270a: 'Raised fist',\n    emjD0270b: 'Raised hand',\n    emjD0270c: 'Victory hand',\n    emjD02764: 'Red heart',\n    emjD1f440: 'Eyes',\n    emjD1f442: 'Ear',\n    emjD1f443: 'Nose',\n    emjD1f444: 'Mouth',\n    emjD1f445: 'Tongue',\n    emjD1f446: 'Up-pointing backhand index finger',\n    emjD1f447: 'Down-pointing backhand index finger',\n    emjD1f448: 'Left-pointing backhand index finger',\n    emjD1f449: 'Right-pointing backhand index finger',\n    emjD1f44a: 'Fist bump',\n    emjD1f44b: 'Waving hand',\n    emjD1f44c: 'OK hand',\n    emjD1f44d: 'Thumbs up',\n    emjD1f44e: 'Thumbs down',\n    emjD1f44f: 'Clapping hands',\n    emjD1f450: 'Open hands',\n    emjD1f590: 'Raised hand with fingers splayed',\n    emjD1f595: 'Middle finger',\n    emjD1f596: 'Raised hand with part between middle and ring fingers',\n    emjD1f464: 'Bust in silhouette',\n    emjD1f466: 'Boy',\n    emjD1f467: 'Girl',\n    emjD1f468: 'Man',\n    emjD1f469: 'Woman',\n    emjD1f46a: 'Family',\n    emjD1f46b: 'Man and woman holding hands',\n    emjD1f46e: 'Police officer',\n    emjD1f46f: 'Woman with bunny ears',\n    emjD1f470: 'Bride with veil',\n    emjD1f471: 'Person with blond hair',\n    emjD1f472: 'Man with gua pi mao',\n    emjD1f473: 'Man with turban',\n    emjD1f474: 'Older man',\n    emjD1f475: 'Older woman',\n    emjD1f476: 'Baby',\n    emjD1f477: 'Construction worker',\n    emjD1f481: 'Information desk person',\n    emjD1f482: 'Guardsman',\n    emjD1f48b: 'Kiss mark',\n    emjD1f493: 'Beating heart',\n    emjD1f494: 'Broken heart',\n    emjD1f495: 'Two hearts',\n    emjD1f496: 'Sparkling heart',\n    emjD1f497: 'Growing heart',\n    emjD1f498: 'Heart with arrow',\n    emjD1f499: 'Blue heart',\n    emjD1f49a: 'Green heart',\n    emjD1f49b: 'Yellow heart',\n    emjD1f49c: 'Purple heart',\n    emjD1f49d: 'Heart with ribbon',\n    emjD1f49e: 'Revolving hearts',\n    emjD1f49f: 'Heart decoration',\n    emjD1f601: 'Grinning face with smiling eyes',\n    emjD1f602: 'Face with tears of joy',\n    emjD1f603: 'Smiling face with open mouth',\n    emjD1f604: 'Smiling face with open mouth and smiling eyes',\n    emjD1f605: 'Smiling face with open mouth and cold sweat',\n    emjD1f606: 'Smiling face with open mouth and tightly closed eyes',\n    emjD1f607: 'Smiling face with halo',\n    emjD1f608: 'Smiling face with horns',\n    emjD1f609: 'Winking face',\n    emjD1f60a: 'Smiling face with smiling eyes',\n    emjD1f60b: 'Face savoring delicious food',\n    emjD1f60c: 'Relieved face',\n    emjD1f60d: 'Smiling face with heart-shaped eyes',\n    emjD1f60e: 'Smiling face with sunglasses',\n    emjD1f60f: 'Smirking face',\n    emjD1f610: 'Neutral face',\n    emjD1f612: 'Unamused face',\n    emjD1f613: 'Face with cold sweat',\n    emjD1f614: 'Pensive face',\n    emjD1f616: 'Confounded face',\n    emjD1f618: 'Face throwing a kiss',\n    emjD1f61a: 'Kissing face with closed eyes',\n    emjD1f61c: 'Face with stuck-out tongue and winking eye',\n    emjD1f61d: 'Face with stuck-out tongue and tightly closed eyes',\n    emjD1f61e: 'Disappointed face',\n    emjD1f620: 'Angry face',\n    emjD1f621: 'Pouting face',\n    emjD1f622: 'Crying face',\n    emjD1f623: 'Persevering face',\n    emjD1f624: 'Face with look of triumph',\n    emjD1f625: 'Disappointed but relieved face',\n    emjD1f628: 'Fearful face',\n    emjD1f629: 'Weary face',\n    emjD1f62a: 'Sleepy face',\n    emjD1f62b: 'Tired face',\n    emjD1f62d: 'Loudly crying face',\n    emjD1f630: 'Face with open mouth and cold sweat',\n    emjD1f631: 'Face screaming in fear',\n    emjD1f632: 'Astonished face',\n    emjD1f633: 'Flushed face',\n    emjD1f635: 'Dizzy face',\n    emjD1f636: 'Face without mouth',\n    emjD1f637: 'Face with medical mask',\n    emjD1f645: 'Face with No Good gesture',\n    emjD1f646: 'Face with OK gesture',\n    emjD1f647: 'Person bowing deeply',\n    emjD1f648: 'See-no-evil monkey',\n    emjD1f649: 'Hear-no-evil monkey',\n    emjD1f641: 'Slightly frowning face',\n    emjD1f642: 'Slightly smiling face',\n    emjD1f64a: 'Speak-no-evil monkey',\n    emjD1f64b: 'Happy person raising one hand',\n    emjD1f64c: 'Person raising both hands in celebration',\n    emjD1f64d: 'Person frowning',\n    emjD1f64e: 'Person with pouting face',\n    emjD1f64f: 'Person with folded hands',\n    emjD02600: 'Sun with rays',\n    emjD02601: 'Cloud',\n    emjD02614: 'Umbrella with rain drops',\n    emjD0267b: 'Recycling symbol',\n    emjD026c4: 'Snowman without snow',\n    emjD026c5: 'Sun behind cloud',\n    emjD02728: 'Sparkles',\n    emjD02733: 'Eight-spoked asterisk',\n    emjD02734: 'Eight-pointed star',\n    emjD02744: 'Snowflake',\n    emjD02747: 'Sparkle',\n    emjD02b50: 'White medium star',\n    emjD1f300: 'Cyclone',\n    emjD1f301: 'Foggy',\n    emjD1f302: 'Closed umbrella',\n    emjD1f303: 'Night with stars',\n    emjD1f304: 'Sunrise over mountains',\n    emjD1f305: 'Sunrise',\n    emjD1f306: 'Cityscape at dusk',\n    emjD1f307: 'Sunset over buildings',\n    emjD1f308: 'Rainbow',\n    emjD1f309: 'Bridge at night',\n    emjD1f30a: 'Water wave',\n    emjD1f30b: 'Volcano',\n    emjD1f30c: 'Milky Way',\n    emjD1f311: 'New moon',\n    emjD1f313: 'First quarter moon',\n    emjD1f314: 'Waxing gibbous moon',\n    emjD1f315: 'Full moon',\n    emjD1f319: 'Crescent moon',\n    emjD1f31b: 'First quarter moon with face',\n    emjD1f31f: 'Glowing star',\n    emjD1f320: 'Shooting star',\n    emjD1f330: 'Chestnut',\n    emjD1f331: 'Seedling',\n    emjD1f334: 'Palm tree',\n    emjD1f335: 'Cactus',\n    emjD1f337: 'Tulip',\n    emjD1f338: 'Cherry blossom',\n    emjD1f339: 'Rose',\n    emjD1f33a: 'Hibiscus',\n    emjD1f33b: 'Sunflower',\n    emjD1f33c: 'Blossom',\n    emjD1f33d: 'Ear of corn',\n    emjD1f33e: 'Ear of rice',\n    emjD1f33f: 'Herb',\n    emjD1f340: 'Four leaf clover',\n    emjD1f341: 'Maple leaf',\n    emjD1f342: 'Fallen leaf',\n    emjD1f343: 'Leaf fluttering in wind',\n    emjD1f344: 'Mushroom',\n    emjD1f40c: 'Snail',\n    emjD1f40d: 'Snake',\n    emjD1f40e: 'Horse',\n    emjD1f411: 'Sheep',\n    emjD1f412: 'Monkey',\n    emjD1f414: 'Chicken',\n    emjD1f417: 'Boar',\n    emjD1f418: 'Elephant',\n    emjD1f419: 'Octopus',\n    emjD1f41a: 'Spiral shell',\n    emjD1f41b: 'Bug',\n    emjD1f41c: 'Ant',\n    emjD1f41d: 'Honeybee',\n    emjD1f41e: 'Ladybug',\n    emjD1f41f: 'Fish',\n    emjD1f420: 'Tropical fish',\n    emjD1f421: 'Blowfish',\n    emjD1f422: 'Turtle',\n    emjD1f423: 'Hatching chick',\n    emjD1f424: 'Baby chick',\n    emjD1f425: 'Front-facing baby chick',\n    emjD1f426: 'Bird',\n    emjD1f427: 'Penguin',\n    emjD1f428: 'Koala',\n    emjD1f429: 'Poodle',\n    emjD1f42b: 'Bactrian camel',\n    emjD1f42c: 'Dolphin',\n    emjD1f42d: 'Mouse face',\n    emjD1f42e: 'Cow face',\n    emjD1f42f: 'Tiger face',\n    emjD1f430: 'Rabbit face',\n    emjD1f431: 'Cat face',\n    emjD1f432: 'Dragon face',\n    emjD1f433: 'Spouting whale',\n    emjD1f434: 'Horse face',\n    emjD1f435: 'Monkey face',\n    emjD1f436: 'Dog face',\n    emjD1f437: 'Pig face',\n    emjD1f438: 'Frog face',\n    emjD1f439: 'Hamster face',\n    emjD1f43a: 'Wolf face',\n    emjD1f43b: 'Bear face',\n    emjD1f43c: 'Panda face',\n    emjD1f43d: 'Pig nose',\n    emjD1f43e: 'Paw prints',\n    emjD1f638: 'Grinning cat face with smiling eyes',\n    emjD1f639: 'Cat face with tears of joy',\n    emjD1f63a: 'Smiling cat face with open mouth',\n    emjD1f63b: 'Smiling cat face with heart-shaped eyes',\n    emjD1f63c: 'Cat face with wry smile',\n    emjD1f63d: 'Kissing cat face with closed eyes',\n    emjD1f63e: 'Pouting cat face',\n    emjD1f63f: 'Crying cat face',\n    emjD1f640: 'Weary cat face',\n    emjD0260e: 'Telephone',\n    emjD026bd: 'Soccer ball',\n    emjD026be: 'Baseball',\n    emjD1f004: 'Mahjong tile red dragon',\n    emjD1f380: 'Ribbon',\n    emjD1f381: 'Wrapped present',\n    emjD1f382: 'Birthday cake',\n    emjD1f383: 'Jack-o-lantern',\n    emjD1f384: 'Christmas tree',\n    emjD1f385: 'Father Christmas',\n    emjD1f386: 'Fireworks',\n    emjD1f387: 'Firework sparkler',\n    emjD1f388: 'Balloon',\n    emjD1f389: 'Party popper',\n    emjD1f38a: 'Confetti ball',\n    emjD1f38b: 'Tanabata tree',\n    emjD1f38c: 'Crossed flags',\n    emjD1f38d: 'Pine decoration',\n    emjD1f38e: 'Japanese dolls',\n    emjD1f38f: 'Carp streamer',\n    emjD1f390: 'Wind chime',\n    emjD1f391: 'Moon-viewing ceremony',\n    emjD1f392: 'School backpack',\n    emjD1f393: 'Graduation cap',\n    emjD1f3a0: 'Carousel horse',\n    emjD1f3a1: 'Ferris wheel',\n    emjD1f3a2: 'Roller coaster',\n    emjD1f3a3: 'Fishing pole and fish',\n    emjD1f3a4: 'Microphone',\n    emjD1f3a5: 'Movie camera',\n    emjD1f3a6: 'Cinema',\n    emjD1f3a7: 'Headphones',\n    emjD1f3a8: 'Artist palette',\n    emjD1f3a9: 'Top hat',\n    emjD1f3aa: 'Circus tent',\n    emjD1f3ab: 'Ticket',\n    emjD1f3ac: 'Clapper board',\n    emjD1f3ad: 'Performing arts',\n    emjD1f3ae: 'Video game',\n    emjD1f3af: 'Direct hit',\n    emjD1f3b0: 'Slot machine',\n    emjD1f3b1: 'Billiards',\n    emjD1f3b2: 'Game die',\n    emjD1f3b3: 'Bowling',\n    emjD1f3b4: 'Flower playing cards',\n    emjD1f3b5: 'Musical note',\n    emjD1f3b6: 'Multiple musical notes',\n    emjD1f3b7: 'Saxophone',\n    emjD1f3b8: 'Guitar',\n    emjD1f3b9: 'Musical keyboard',\n    emjD1f3ba: 'Trumpet',\n    emjD1f3bb: 'Violin',\n    emjD1f3bc: 'Musical score',\n    emjD1f3bd: 'Running shirt with sash',\n    emjD1f3be: 'Tennis racquet and ball',\n    emjD1f3bf: 'Ski and ski boot',\n    emjD1f3c0: 'Basketball and hoop',\n    emjD1f3c1: 'Checkered flag',\n    emjD1f3c2: 'Snowboarder',\n    emjD1f3c3: 'Runner',\n    emjD1f3c4: 'Surfer',\n    emjD1f3c6: 'Trophy',\n    emjD1f3c8: 'American football',\n    emjD1f3ca: 'Swimmer',\n    emjD1f478: 'Princess',\n    emjD1f479: 'Japanese ogre',\n    emjD1f47a: 'Japanese goblin',\n    emjD1f47b: 'Ghost',\n    emjD1f47c: 'Baby angel',\n    emjD1f47d: 'Extraterrestrial alien',\n    emjD1f47e: 'Alien monster',\n    emjD1f47f: 'Imp',\n    emjD1f480: 'Skull',\n    emjD1f483: 'Dancer',\n    emjD1f484: 'Lipstick',\n    emjD1f485: 'Nail polish',\n    emjD1f486: 'Face massage',\n    emjD1f487: 'Haircut',\n    emjD1f488: 'Barber pole',\n    emjD1f489: 'Syringe',\n    emjD1f48a: 'Pill',\n    emjD1f48c: 'Love letter',\n    emjD1f48d: 'Ring',\n    emjD1f48e: 'Gemstone',\n    emjD1f48f: 'Kiss',\n    emjD1f490: 'Bouquet',\n    emjD1f491: 'Couple with heart',\n    emjD1f492: 'Wedding',\n    emjD1f4f7: 'Camera',\n    emjD1f4f9: 'Video camera',\n    emjD1f4fa: 'Television',\n    emjD1f4fb: 'Radio',\n    emjD1f4fc: 'Videocassette',\n    emjD02615: 'Hot beverage',\n    emjD02702: 'Scissors',\n    emjD02709: 'Envelope',\n    emjD0270f: 'Pencil',\n    emjD02712: 'Nib',\n    emjD1f345: 'Tomato',\n    emjD1f346: 'Eggplant',\n    emjD1f347: 'Grapes',\n    emjD1f348: 'Melon',\n    emjD1f349: 'Watermelon',\n    emjD1f34a: 'Tangerine',\n    emjD1f34c: 'Banana',\n    emjD1f34d: 'Pineapple',\n    emjD1f34e: 'Red apple',\n    emjD1f34f: 'Green apple',\n    emjD1f351: 'Peach',\n    emjD1f352: 'Cherries',\n    emjD1f353: 'Strawberry',\n    emjD1f354: 'Hamburger',\n    emjD1f355: 'Slice of pizza',\n    emjD1f356: 'Meat on bone',\n    emjD1f357: 'Poultry leg',\n    emjD1f358: 'Rice cracker',\n    emjD1f359: 'Rice ball',\n    emjD1f35a: 'Cooked rice',\n    emjD1f35b: 'Curry and rice',\n    emjD1f35c: 'Steaming bowl',\n    emjD1f35d: 'Spaghetti',\n    emjD1f35e: 'Bread',\n    emjD1f35f: 'French fries',\n    emjD1f360: 'Roasted sweet potato',\n    emjD1f361: 'Dango',\n    emjD1f362: 'Oden',\n    emjD1f363: 'Sushi',\n    emjD1f364: 'Fried shrimp',\n    emjD1f365: 'Fish cake with swirl design',\n    emjD1f366: 'Soft ice cream',\n    emjD1f367: 'Shaved ice',\n    emjD1f368: 'Ice cream',\n    emjD1f369: 'Doughnut',\n    emjD1f36a: 'Cookie',\n    emjD1f36b: 'Chocolate bar',\n    emjD1f36c: 'Candy',\n    emjD1f36d: 'Lollipop',\n    emjD1f36e: 'Custard',\n    emjD1f36f: 'Honey pot',\n    emjD1f370: 'Shortcake',\n    emjD1f371: 'Bento box',\n    emjD1f372: 'Pot of food',\n    emjD1f373: 'Cooking',\n    emjD1f374: 'Fork and knife',\n    emjD1f375: 'Teacup without handle',\n    emjD1f376: 'Sake bottle and cup',\n    emjD1f377: 'Wine glass',\n    emjD1f378: 'Cocktail glass',\n    emjD1f379: 'Tropical drink',\n    emjD1f37a: 'Beer mug',\n    emjD1f37b: 'Clinking beer mugs',\n    emjD1f451: 'Crown',\n    emjD1f452: \"Woman's hat\",\n    emjD1f453: 'Eyeglasses',\n    emjD1f454: 'Necktie',\n    emjD1f455: 'T-shirt',\n    emjD1f456: 'Jeans',\n    emjD1f457: 'Dress',\n    emjD1f458: 'Kimono',\n    emjD1f459: 'Bikini',\n    emjD1f45a: \"Woman's clothes\",\n    emjD1f45b: 'Purse',\n    emjD1f45c: 'Handbag',\n    emjD1f45d: 'Pouch',\n    emjD1f45e: \"Man's shoe\",\n    emjD1f45f: 'Athletic shoe',\n    emjD1f460: 'High-heeled shoe',\n    emjD1f461: \"Woman's sandal\",\n    emjD1f462: \"Woman's boots\",\n    emjD1f463: 'Footprints',\n    emjD1f4ba: 'Seat',\n    emjD1f4bb: 'Personal computer',\n    emjD1f4bc: 'Briefcase',\n    emjD1f4bd: 'Minidisc',\n    emjD1f4be: 'Floppy disk',\n    emjD1f4bf: 'Optical disc',\n    emjD1f4c0: 'DVD',\n    emjD1f4c1: 'File folder',\n    emjD1f4c2: 'Open file folder',\n    emjD1f4c3: 'Page with curl',\n    emjD1f4c4: 'Page facing up',\n    emjD1f4c5: 'Calendar',\n    emjD1f4c6: 'Tear-off calendar',\n    emjD1f4c7: 'Card index',\n    emjD1f4c8: 'Chart with upward trend',\n    emjD1f4c9: 'Chart with downward trend',\n    emjD1f4ca: 'Bar chart',\n    emjD1f4cb: 'Clipboard',\n    emjD1f4cc: 'Pushpin',\n    emjD1f4cd: 'Round pushpin',\n    emjD1f4ce: 'Paper clip',\n    emjD1f4cf: 'Straight ruler',\n    emjD1f4d0: 'Triangular ruler',\n    emjD1f4d1: 'Bookmark tabs',\n    emjD1f4d2: 'Ledger',\n    emjD1f4d3: 'Notebook',\n    emjD1f4d4: 'Notebook with decorative cover',\n    emjD1f4d5: 'Closed book',\n    emjD1f4d6: 'Open book',\n    emjD1f4d7: 'Green book',\n    emjD1f4d8: 'Blue book',\n    emjD1f4d9: 'Orange book',\n    emjD1f4da: 'Books',\n    emjD1f4db: 'Name badge',\n    emjD1f4dc: 'Scroll',\n    emjD1f4dd: 'Memo',\n    emjD1f4de: 'Telephone receiver',\n    emjD1f4df: 'Pager',\n    emjD1f4e0: 'Fax machine',\n    emjD1f4e1: 'Satellite antenna',\n    emjD1f4e2: 'Public address loudspeaker',\n    emjD1f4e3: 'Cheering megaphone',\n    emjD1f4e4: 'Outbox tray',\n    emjD1f4e5: 'Inbox tray',\n    emjD1f4e6: 'Package',\n    emjD1f4e7: 'Email',\n    emjD1f4e8: 'Incoming envelope',\n    emjD1f4e9: 'Envelope with downward-facing arrow above',\n    emjD1f4ea: 'Closed mailbox with lowered flag',\n    emjD1f4eb: 'Closed mailbox with raised flag',\n    emjD1f4ee: 'Postbox',\n    emjD1f4f0: 'Newspaper',\n    emjD1f4f1: 'Mobile phone',\n    emjD1f4f2: 'Mobile phone with right-facing arrow at left',\n    emjD1f4f3: 'Vibration mode',\n    emjD1f4f4: 'Mobile phone off',\n    emjD1f4f6: 'Antenna with bars',\n    emjD1f525: 'Fire',\n    emjD1f526: 'Flashlight',\n    emjD1f527: 'Wrench',\n    emjD1f528: 'Hammer',\n    emjD1f529: 'Nut and bolt',\n    emjD1f52a: 'Hocho',\n    emjD1f52b: 'Pistol',\n    emjD1f52e: 'Crystal ball',\n    emjD1f52f: 'Six-pointed star with middle dot',\n    emjD1f531: 'Trident emblem',\n    emjD1f550: \"Clock face one o'clock\",\n    emjD1f551: \"Clock face two o'clock\",\n    emjD1f552: \"Clock face three o'clock\",\n    emjD1f553: \"Clock face four o'clock\",\n    emjD1f554: \"Clock face five o'clock\",\n    emjD1f555: \"Clock face six o'clock\",\n    emjD1f556: \"Clock face seven o'clock\",\n    emjD1f557: \"Clock face eight o'clock\",\n    emjD1f558: \"Clock face nine o'clock\",\n    emjD1f559: \"Clock face ten o'clock\",\n    emjD1f55a: \"Clock face eleven o'clock\",\n    emjD1f55b: \"Clock face twelve o'clock\",\n    emjD02668: 'Hot springs',\n    emjD0267f: 'Wheelchair',\n    emjD02693: 'Anchor',\n    emjD026a0: 'Warning',\n    emjD026a1: 'High Voltage',\n    emjD026d4: 'No Entry',\n    emjD026ea: 'Church',\n    emjD026f2: 'Fountain',\n    emjD026f3: 'Flag in hole',\n    emjD026f5: 'Sailboat',\n    emjD026fa: 'Tent',\n    emjD026fd: 'Fuel pump',\n    emjD02708: 'Airplane',\n    emjD1f17f: 'Squared Latin capital letter P',\n    emjD1f3e0: 'House building',\n    emjD1f3e1: 'House with garden',\n    emjD1f3e2: 'Office building',\n    emjD1f3e3: 'Japanese post office',\n    emjD1f3e5: 'Hospital',\n    emjD1f3e6: 'Bank',\n    emjD1f3e7: 'Automated teller machine',\n    emjD1f3e8: 'Hotel',\n    emjD1f3e9: 'Love hotel',\n    emjD1f3ea: 'Convenience store',\n    emjD1f3eb: 'School',\n    emjD1f3ec: 'Department store',\n    emjD1f3ed: 'Factory',\n    emjD1f3ee: 'Izakaya lantern',\n    emjD1f3ef: 'Japanese castle',\n    emjD1f3f0: 'European castle',\n    emjD1f530: 'Japanese symbol for beginner',\n    emjD1f680: 'Rocket',\n    emjD1f683: 'Railway car',\n    emjD1f684: 'High-speed train',\n    emjD1f685: 'High-speed train with bullet nose',\n    emjD1f687: 'Metro',\n    emjD1f689: 'Station',\n    emjD1f68c: 'Bus',\n    emjD1f68f: 'Bus stop',\n    emjD1f691: 'Ambulance',\n    emjD1f692: 'Fire engine',\n    emjD1f693: 'Police car',\n    emjD1f695: 'Taxi',\n    emjD1f697: 'Automobile',\n    emjD1f699: 'Recreational vehicle',\n    emjD1f69a: 'Delivery truck',\n    emjD1f6a2: 'Ship',\n    emjD1f6a4: 'Speedboat',\n    emjD1f6a5: 'Horizontal traffic light',\n    emjD1f6a7: 'Construction',\n    emjD1f6a8: \"Police car's revolving light\",\n    emjD1f6a9: 'Triangular flag on post',\n    emjD1f6aa: 'Door',\n    emjD1f6ab: 'No entry',\n    emjD1f6ac: 'Smoking symbol',\n    emjD1f6ad: 'No smoking symbol',\n    emjD1f6b2: 'Bicycle',\n    emjD1f6b6: 'Pedestrian',\n    emjD1f6b9: \"Men's symbol\",\n    emjD1f6ba: \"Women's symbol\",\n    emjD1f6bb: 'Restroom',\n    emjD1f6bc: 'Baby symbol',\n    emjD1f6bd: 'Toilet',\n    emjD1f6be: 'Water closet',\n    emjD1f6c0: 'Bath',\n    emjD02049: 'Exclamation question mark',\n    emjD02139: 'Information source',\n    emjD021a9: 'Left-facing arrow with hook',\n    emjD021aa: 'Right-facing arrow with hook',\n    emjD0231a: 'Watch',\n    emjD0231b: 'Hourglass',\n    emjD023e9: 'Right-pointing double triangle',\n    emjD023ea: 'Left-pointing double triangle',\n    emjD023eb: 'Up-pointing double triangle',\n    emjD023ec: 'Down-pointing double triangle',\n    emjD023f0: 'Alarm clock',\n    emjD023f3: 'Hourglass with flowing sand',\n    emjD024c2: 'Circled Latin capital letter M',\n    emjD025b6: 'Black right-pointing triangle',\n    emjD025c0: 'Black left-pointing triangle',\n    emjD025fb: 'White medium square',\n    emjD025fc: 'Black medium square',\n    emjD026ce: 'Ophiuchus',\n    emjD02611: 'Ballot box with check',\n    emjD0261d: 'White up-pointing index',\n    emjD02648: 'Aries',\n    emjD02649: 'Taurus',\n    emjD0264a: 'Gemini',\n    emjD0264b: 'Cancer',\n    emjD0264c: 'Leo',\n    emjD0264d: 'Virgo',\n    emjD0264e: 'Libra',\n    emjD0264f: 'Scorpio',\n    emjD02650: 'Sagittarius',\n    emjD02651: 'Capricorn',\n    emjD02652: 'Aquarius',\n    emjD02653: 'Pisces',\n    emjD026aa: 'Medium white circle',\n    emjD026ab: 'Medium black circle',\n    emjD02705: 'White heavy check mark',\n    emjD02714: 'Heavy check mark',\n    emjD02716: 'Heavy multiplication x',\n    emjD0274c: 'Cross mark',\n    emjD0274e: 'Squared cross mark',\n    emjD02753: 'question mark ornament',\n    emjD02754: 'White question mark ornament',\n    emjD02755: 'White exclamation mark ornament',\n    emjD02757: 'Heavy exclamation mark',\n    emjD02795: 'Heavy plus sign',\n    emjD02796: 'Heavy minus sign',\n    emjD02797: 'Heavy division sign',\n    emjD027a1: 'Black right-facing arrow',\n    emjD027b0: 'Curly loop',\n    emjD027bf: 'Double curly loop',\n    emjD02934: 'Arrow pointing right then curving upward',\n    emjD02935: 'Arrow pointing right then curving downward',\n    emjD02b05: 'Black arrow pointing left',\n    emjD02b06: 'Black arrow pointing right',\n    emjD02b07: 'Downwards black arrow',\n    emjD02b1b: 'Black large square',\n    emjD02b1c: 'White large square',\n    emjD02b55: 'Heavy large circle',\n    emjD03030: 'Wavy dash',\n    emjD0303d: 'Part alternation mark',\n    emjD03297: 'Circled Ideograph congratulation',\n    emjD03299: 'Circled Ideograph secret',\n    emjD1f0cf: 'Playing card Joker',\n    emjD1f170: 'Squared Latin capital letter A',\n    emjD1f171: 'Squared Latin capital letter B',\n    emjD1f17e: 'Squared Latin capital letter O',\n    emjD1f18e: 'Squared AB',\n    emjD1f191: 'Squared CL',\n    emjD1f192: 'Squared COOL',\n    emjD1f193: 'Squared FREE',\n    emjD1f194: 'Squared ID',\n    emjD1f195: 'Squared NEW',\n    emjD1f196: 'Squared NG',\n    emjD1f197: 'Squared OK',\n    emjD1f198: 'Squared SOS',\n    emjD1f199: 'Squared UP!',\n    emjD1f19a: 'Squared VS',\n    emjD1f201: 'Squared Katakana Koko',\n    emjD1f202: 'Squared Katakana Sa',\n    emjD1f21a: 'Squared CJK Unified Ideograph-7121',\n    emjD1f22f: 'Squared CJK Unified Ideograph-6307',\n    emjD1f232: 'Squared CJK Unified Ideograph-7981',\n    emjD1f233: 'Squared CJK Unified Ideograph-7a7a',\n    emjD1f234: 'Squared CJK Unified Ideograph-5408',\n    emjD1f235: 'Squared CJK Unified Ideograph-6e80',\n    emjD1f236: 'Squared CJK Unified Ideograph-6709',\n    emjD1f237: 'Squared CJK Unified Ideograph-6708',\n    emjD1f238: 'Squared CJK Unified Ideograph-7533',\n    emjD1f239: 'Squared CJK Unified Ideograph-5272',\n    emjD1f23a: 'Squared CJK Unified Ideograph-55b6',\n    emjD1f250: 'Circled Ideograph advantage',\n    emjD1f251: 'Circled Ideograph accept',\n    emjD1f30f: 'Earth globe Asia-Australia',\n    emjD1f4a0: 'Diamond shape with a dot inside',\n    emjD1f4a1: 'Electric light bulb',\n    emjD1f4a2: 'Anger',\n    emjD1f4a3: 'Bomb',\n    emjD1f4a4: 'Sleeping',\n    emjD1f4a5: 'Collision',\n    emjD1f4a6: 'Splashing sweat',\n    emjD1f4a7: 'Droplet',\n    emjD1f4a8: 'Dash',\n    emjD1f4a9: 'Pile of poo',\n    emjD1f4aa: 'Flexed biceps',\n    emjD1f4ab: 'Dizzy',\n    emjD1f4ac: 'Speech balloon',\n    emjD1f4ae: 'White flower',\n    emjD1f4af: 'Hundred points',\n    emjD1f4b0: 'Money bag',\n    emjD1f4b1: 'Currency exchange',\n    emjD1f4b2: 'Heavy dollar sign',\n    emjD1f4b3: 'Credit card',\n    emjD1f4b4: 'Banknote with yen sign',\n    emjD1f4b5: 'Banknote with dollar sign',\n    emjD1f4b8: 'Money with wings',\n    emjD1f4b9: 'Chart with upwards trend and yen sign',\n    emjD1f503: 'Clockwise downward and upward open circle arrows',\n    emjD1f50a: 'Speaker with three sound waves',\n    emjD1f50b: 'Battery',\n    emjD1f50c: 'Electric plug',\n    emjD1f50d: 'Left-leaning magnifying glass',\n    emjD1f50e: 'Right-leaning magnifying glass',\n    emjD1f50f: 'Lock with ink pen',\n    emjD1f510: 'Closed lock with key',\n    emjD1f511: 'Key',\n    emjD1f512: 'Lock',\n    emjD1f513: 'Open lock',\n    emjD1f514: 'Bell',\n    emjD1f516: 'Bookmark',\n    emjD1f517: 'Link',\n    emjD1f518: 'Radio button',\n    emjD1f519: 'Back with left-facing arrow above',\n    emjD1f51a: 'End with left-facing arrow above',\n    emjD1f51b: 'On with exclamation mark with left right arrow above',\n    emjD1f51c: 'Soon with right-facing arrow above',\n    emjD1f51d: 'Top with upward arrow above',\n    emjD1f51e: 'No one under eighteen',\n    emjD1f51f: 'Keycap ten',\n    emjD1f520: 'Input Latin uppercase',\n    emjD1f521: 'Input Latin lowercase',\n    emjD1f522: 'Input numbers',\n    emjD1f523: 'Input symbols',\n    emjD1f524: 'Input Latin letters',\n    emjD1f532: 'Black square button',\n    emjD1f533: 'White square button',\n    emjD1f534: 'Large red circle',\n    emjD1f535: 'Large blue circle',\n    emjD1f536: 'Large orange diamond',\n    emjD1f537: 'Large blue diamond',\n    emjD1f538: 'Small orange diamond',\n    emjD1f539: 'Small blue diamond',\n    emjD1f53a: 'Up-pointing red triangle',\n    emjD1f53b: 'Down-pointing red triangle',\n    emjD1f53c: 'Up-pointing small red triangle',\n    emjD1f53d: 'Down-pointing small red triangle',\n    emjD1f5fb: 'Mount Fuji',\n    emjD1f5fc: 'Tokyo Tower',\n    emjD1f5fd: 'Statue of Liberty',\n    emjD1f5fe: 'Silhouette of Japan',\n    emjD1f5ff: 'Moyai',\n};\n\n/**\n * @internal\n * Emoji Keywords\n */\nexport const EmojiKeywordStrings = {\n    emjK1f607: 'saint angel innocent',\n    emjK1f47c: 'cherub angel',\n    emjK1f34e: 'apple',\n    emjK1f34f: 'apple',\n    emjK1f477: 'construction',\n    emjK1f6a7: 'construction detour',\n    emjK1f491: 'couple engaged married marry marriage',\n    emjK1f46b: 'couple engaged',\n    emjK1f622: 'crying sad',\n    emjK1f62d: 'crying sad',\n    emjK1f525: 'fire',\n    emjK1f692: 'fire truck fire engine',\n    emjK1f386: 'fireworks sparkler july 4th',\n    emjK1f387: 'fireworks sparkler july 4th',\n    emjK1f44a: 'punch fist pump chuck norris bam',\n    emjK0270a: 'fist pump punch',\n    emjK1f498: 'heart love cupid',\n    emjK1f496: 'heart love',\n    emjK1f497: 'love heart',\n    emjK1f493: 'heart love heartbeat',\n    emjK1f368: 'ice cream dessert treat sundae sweets',\n    emjK1f366: 'ice cream dessert treat sweets',\n    emjK1f48b: 'kiss xoxo love kisses kissing mwah',\n    emjK1f444: 'kiss mouth',\n    emjK1f618: 'kiss love kisses kissing',\n    emjK1f61a: 'kiss love kisses kissing smooch',\n    emjK1f48f: 'kiss love',\n    emjK1f435: 'monkey',\n    emjK1f64a: 'monkey speak no evil',\n    emjK1f649: 'monkey hear no evil',\n    emjK1f648: 'monkey see no evil',\n    emjK1f3b6: 'music melody song singing tune jingle',\n    emjK1f3b5: 'music musical note melody musical',\n    emjK1f44c: 'ok okay perfect',\n    emjK1f646: 'ok awesome',\n    emjK1f621: 'pouting sad pout',\n    emjK1f64e: 'pouting sad depressed',\n    emjK1f60c: 'relieved phew whew relief',\n    emjK1f630: 'relieved phew whew',\n    emjK1f605: 'relieved phew whew sheesh',\n    emjK1f380: 'ribbon',\n    emjK1f381: 'gift present presents ribbon',\n    emjK1f613: 'scared yikes scary uh oh',\n    emjK1f631: 'scared yikes fear whoa',\n    emjK1f629: 'scared anxious uncertain unsure',\n    emjK1f628: 'scared fearful',\n    emjK1f45e: 'shoe shoes',\n    emjK1f45f: 'shoe shoes',\n    emjK1f60a: 'smile happy smiling yay',\n    emjK1f642: 'smile happy smiling',\n    emjK1f603: 'smiling happy excited woo woohoo woot',\n    emjK1f604: 'smiling happy grin excited',\n    emjK1f6bd: 'toilet bathroom potty restroom washroom',\n    emjK1f6ba: 'toilet bathroom',\n    emjK1f6b9: 'toilet bathroom',\n    emjK1f684: 'train light rail monorail',\n    emjK1f683: 'train caboose',\n    emjK1f446: 'up click',\n    emjK0261d: 'up',\n    emjK1f64b: 'wave hi bye hey aloha',\n    emjK1f44b: 'wave hi bye waving high five',\n    emjK1f601: 'happy grin lol funny grinning hehe',\n    emjK1f602: 'happy lol funny joy lmao rofl',\n    emjK1f606: 'lol haha laughing lmao',\n    emjK1f609: 'haha winking wink winky',\n    emjK1f60f: 'haha winking wink smirking smirk heh',\n    emjK1f645: 'bad',\n    emjK1f44e: 'bad thumbs down wrong boo',\n    emjK1f60d: 'love love you loving love u',\n    emjK1f495: 'love hearts',\n    emjK1f44d: 'ok thumbs up',\n    emjK1f610: 'ok umm',\n    emjK1f620: 'mad angry grrr',\n    emjK1f612: 'mad angry unamused not funny amused bleh blah',\n    emjK1f47b: 'scared halloween ghost boo',\n    emjK1f480: 'scared skull danger die death poison',\n    emjK1f47e: 'scared monster',\n    emjK1f365: 'rice ball fish cake',\n    emjK1f61e: 'disappointed sad',\n    emjK1f64d: 'disappointed sad frown',\n    emjK1f494: 'heartbroken sorrow sad broken heart brokenhearted',\n    emjK1f625: 'relieved phew',\n    emjK1f62b: 'sleepy tired yawn',\n    emjK1f4a4: 'sleepy tired sleep zzz',\n    emjK1f62a: 'sleepy tired',\n    emjK1f632: 'wow astonished',\n    emjK1f633: 'wow flushed',\n    emjK1f3c4: 'wave surf surfer surfers surfs surfing',\n    emjK1f44f: 'yay clapping applause clap',\n    emjK1f64c: 'yay celebrate',\n    emjK1f48d: 'ring marry fiance engaged engage engagement ring engagement diamond ring bling',\n    emjK1f483: 'party dancer dance dancing',\n    emjK1f389: 'party fun congratulations celebrate congrats',\n    emjK1f388: 'party fun balloon',\n    emjK1f38a: 'party confetti surprise',\n    emjK1f383: 'happy halloween trick treat halloween pumpkin',\n    emjK1f385: 'merry christmas santa claus father xmas',\n    emjK1f384: 'merry christmas tree happy holidays',\n    emjK1f3eb: 'school college study teacher learn studying',\n    emjK1f392: 'backpack school bag back pack',\n    emjK1f41f: 'fish goldfish',\n    emjK1f3a3: 'fish fishing fishing pole',\n    emjK1f3a5: 'video camera film movie movie camera',\n    emjK1f4f9: 'video camera',\n    emjK1f3a6: 'theatre theater cinema',\n    emjK1f3ad: 'performing arts drama shakespeare theatre theater play actor actress',\n    emjK1f3bc: 'treble clef sheet music music musical score',\n    emjK1f3b9: 'music piano',\n    emjK1f3a7: 'music headphones headphone',\n    emjK1f3b7: 'music saxophone sax',\n    emjK1f3ba: 'music trumpet',\n    emjK1f3b8: 'music guitar',\n    emjK1f3bb: 'music violin',\n    emjK1f3ac: 'film action movie',\n    emjK1f48e: 'diamond stone gem',\n    emjK1f3be: 'wimbledon tennis raquet tennis sports racquet',\n    emjK1f3c8: 'football superbowl sports nfl',\n    emjK1f3bf: 'sports winter ski skiing skis',\n    emjK1f3c2: 'sports winter snowboard snowboarder snowboarding snowboards',\n    emjK026c4: 'winter snow snowman',\n    emjK02744: 'winter snow snowflake snowing snowed christmas xmas blizzard',\n    emjK1f3c1: 'race finish nascar',\n    emjK1f3c3: 'race run marathon runner sprinting running late',\n    emjK1f375: 'tea coffee',\n    emjK02615: 'coffee tea',\n    emjK1f377: 'alcohol wine',\n    emjK1f378: 'alcohol cocktail drinks martini happy hour',\n    emjK1f379: 'alcohol tropical drink',\n    emjK1f68c: 'bus transit',\n    emjK1f687: 'bus transit metro',\n    emjK1f43b: 'bear teddy',\n    emjK1f43c: 'bear panda',\n    emjK1f340: \"luck lucky st. patrick's day shamrock\",\n    emjK1f320: 'luck shooting star wish comet asteroid meteor meteroid',\n    emjK1f303: 'skyline starry stars night',\n    emjK1f307: 'skyline sunset',\n    emjK1f31f: 'star twinkle',\n    emjK02747: 'star sparkle glitter',\n    emjK1f4b0: 'cash loot',\n    emjK1f4b5: 'cash money dollar',\n    emjK1f4b4: 'yen money',\n    emjK1f4b3: 'money credit debt debit credit card',\n    emjK1f60b: 'dinner hungry lunch food yummy yum delicious tasty mmmmm',\n    emjK1f60e: 'cool',\n    emjK1f614: 'alas thinking sigh',\n    emjK1f616: 'confused confounded huh',\n    emjK1f61c: 'goofy wassup nyah kidding',\n    emjK1f61d: 'gross yuck eww blech',\n    emjK1f623: 'persevering',\n    emjK1f624: 'triumph congratulations grats congrats yahoo ftw woot wahoo',\n    emjK1f635: 'dizzy drunk confused',\n    emjK1f636: 'unsure',\n    emjK1f637: 'sick flu',\n    emjK1f440: 'eyes snoop',\n    emjK1f442: 'ear listen',\n    emjK1f443: 'nose smell',\n    emjK1f445: 'tongue lick taste drool',\n    emjK1f447: 'down',\n    emjK1f448: 'left',\n    emjK1f449: 'right',\n    emjK1f64f: 'pray praying prayer',\n    emjK0270b: 'hand',\n    emjK0270c: 'peace victory',\n    emjK1f466: 'boy',\n    emjK1f467: 'girl',\n    emjK1f468: 'man',\n    emjK1f469: 'woman',\n    emjK1f46a: 'family',\n    emjK1f46e: 'police officer cop',\n    emjK1f46f: 'bunny ears costume',\n    emjK1f470: 'bride marriage bridezilla',\n    emjK1f471: 'blond',\n    emjK1f474: 'grandpa old man gramps grandfather',\n    emjK1f475: 'grandma old lady old woman grandmother',\n    emjK1f476: 'baby kid toddler newborn infant',\n    emjK1f382: 'birthday cake happy cake',\n    emjK1f390: 'chime',\n    emjK1f393: 'graduation college high school graduated graduating graduate grad',\n    emjK1f0cf: 'cards card joker blackjack poker',\n    emjK1f3a0: 'carousel carnival',\n    emjK1f3a1: 'ferris wheel amusement park',\n    emjK1f3a2: 'roller coaster',\n    emjK1f3a4: 'microphone sing karaoke singing',\n    emjK1f3a8: 'paint artist palette artist',\n    emjK1f3a9: 'top hat black tie',\n    emjK1f3aa: 'circus',\n    emjK1f3ab: 'ticket stub ticket stub admission',\n    emjK1f3ae: 'xbox video game video games controller',\n    emjK1f3af: 'bullseye archery darts arrow',\n    emjK1f3b0: 'slot slots machine casino gamble gambling',\n    emjK1f3b1: 'pool billiards',\n    emjK1f3b2: 'die dice game craps gambling casino gamble',\n    emjK1f3b3: 'bowling bowl',\n    emjK1f4f7: 'camera picture photo',\n    emjK1f4fa: 'tv television',\n    emjK1f4fb: 'radio',\n    emjK1f4fc: 'videotape videocassette cassette vcr',\n    emjK1f478: 'princess',\n    emjK1f47d: 'alien ufo',\n    emjK1f47f: 'imp pixie loki leprechaun',\n    emjK1f484: 'lipstick makeup',\n    emjK1f485: 'nail polish manicure',\n    emjK1f486: 'massage',\n    emjK1f487: 'haircut',\n    emjK1f488: 'barber barbershop',\n    emjK1f489: 'syringe shot needle',\n    emjK1f48a: 'pill pills drug drugs',\n    emjK1f48c: 'love letter',\n    emjK1f490: 'flowers bouquet love',\n    emjK1f492: 'wedding marry church',\n    emjK1f3c0: 'basketball bball hoops',\n    emjK1f3c6: 'win trophy champions champion',\n    emjK1f3ca: 'swim swimmer swimming swims',\n    emjK026bd: 'soccer ball',\n    emjK026be: 'baseball',\n    emjK1f451: 'crown king queen',\n    emjK1f453: 'glasses hipster',\n    emjK1f454: 'tie',\n    emjK1f455: 'tshirt tshirts',\n    emjK1f456: 'jeans pants',\n    emjK1f457: 'dress',\n    emjK1f459: 'bikini bathing suit swimsuit swim',\n    emjK1f45b: 'purse',\n    emjK1f45c: 'handbag purse',\n    emjK1f45d: 'pouch clutch',\n    emjK1f461: 'sandal heels heel shoe shoes sandals pumps',\n    emjK1f462: 'boots boot',\n    emjK1f463: 'footprints barefoot',\n    emjK1f4dd: 'memo note',\n    emjK1f4de: 'telephone call phone',\n    emjK1f4df: 'pager',\n    emjK1f4e0: 'fax machine',\n    emjK1f4e1: 'satellite antenna',\n    emjK1f4e3: 'megaphone cheering',\n    emjK1f4e6: 'present package parcel',\n    emjK1f4e7: 'email mail',\n    emjK1f4ee: 'mail post',\n    emjK1f4f0: 'newspaper news',\n    emjK1f4f1: 'phone cell call',\n    emjK1f4f6: 'wifi signal',\n    emjK1f526: 'flashlight',\n    emjK1f527: 'wrench',\n    emjK1f528: 'hammer hammers',\n    emjK1f529: 'nuts bolts',\n    emjK1f52a: 'knife',\n    emjK1f52e: 'crystal ball clairvoyance clairvoyant psychic mystic',\n    emjK1f531: 'trident',\n    emjK1f354: 'hamburger fast burger hamburgers burgers food hungry',\n    emjK1f355: 'pizza fast food hungry dinner lunch',\n    emjK1f356: 'meat dinner lunch hungry food',\n    emjK1f357: 'chicken leg turkey leg meat chicken turkey hungry dinner lunch food drumstick',\n    emjK1f35a: 'rice dinner hungry lunch food',\n    emjK1f35c: 'noodles ramen food dinner lunch',\n    emjK1f35d: 'spaghetti dinner noodles food hungry',\n    emjK1f35e: 'bread food',\n    emjK1f35f: 'fries fast food french fries food',\n    emjK1f360: 'potato potatoes vegetable food',\n    emjK1f363: 'sushi food maki',\n    emjK1f364: 'fried shrimp shrimp seafood food tempura',\n    emjK1f369: 'doughnut doughnuts donut donuts food sweets',\n    emjK1f36a: 'cookie cookies food sweets',\n    emjK1f36b: 'chocolate chocolates candy bar chocolate bar sweets',\n    emjK1f36c: 'candy sweet sweets treat',\n    emjK1f36d: 'lollipop candy treat sucker',\n    emjK1f36e: 'custard',\n    emjK1f36f: 'honey pot',\n    emjK1f370: 'pie food hungry cake dessert cheesecake shortcake sweets',\n    emjK1f371: 'bento box',\n    emjK1f372: 'soup pot of food stew',\n    emjK1f374: 'food dinner fork knife eat hungry meal restaurant',\n    emjK1f376: 'sake alcohol',\n    emjK1f37a: 'beer alcohol',\n    emjK1f37b: 'cheers beers alcohol',\n    emjK1f345: 'food vegetable fruit tomato',\n    emjK1f346: 'eggplant food vegetable',\n    emjK1f347: 'grapes fruit food',\n    emjK1f348: 'melon honeydew food fruit',\n    emjK1f349: 'watermelon melon food fruit',\n    emjK1f34a: 'tangerine fruit food orange mandarin clementine slice slices',\n    emjK1f34c: 'banana fruit food',\n    emjK1f34d: 'pineapple fruit food',\n    emjK1f351: 'peach peaches fruit food',\n    emjK1f352: 'cherry cherries fruit food',\n    emjK1f353: 'strawberries stawberry fruit food berry berries',\n    emjK1f4ba: 'seat',\n    emjK1f4bb: 'pc computer laptop tablet',\n    emjK1f4bc: 'briefcase brief case',\n    emjK1f4be: 'floppy disk diskette',\n    emjK1f4bf: 'cd compact disc',\n    emjK1f4c0: 'dvd',\n    emjK1f4c1: 'file folder',\n    emjK1f4c5: 'calendar',\n    emjK1f4cb: 'clipboard',\n    emjK1f4cc: 'pushpin',\n    emjK1f4cd: 'drawing pin',\n    emjK1f4ce: 'paperclip clippy',\n    emjK1f4cf: 'ruler measure',\n    emjK1f4d2: 'ledger',\n    emjK1f4d3: 'notebook',\n    emjK1f4da: 'book books',\n    emjK1f4db: 'name badge',\n    emjK02702: 'scissors cut',\n    emjK02709: 'envelope mail',\n    emjK0270f: 'pencil',\n    emjK1f3e0: 'house home',\n    emjK1f3e1: 'garden greenhouse',\n    emjK1f3e2: 'office work',\n    emjK1f3e6: 'bank',\n    emjK1f3e7: 'atm',\n    emjK1f3e8: 'hotel motel bed sleep',\n    emjK1f3ea: 'convenience store',\n    emjK1f3ec: 'department store shopping',\n    emjK1f3ed: 'factory',\n    emjK1f3f0: 'castle',\n    emjK02668: 'hot springs',\n    emjK02693: 'anchor',\n    emjK026ea: 'church temple',\n    emjK026f2: 'fountain',\n    emjK026f3: 'golf',\n    emjK026f5: 'sailboat sailing sail',\n    emjK026fd: 'gas fuel gasoline pump',\n    emjK1f6aa: 'door',\n    emjK1f6ac: 'smoke smoking',\n    emjK1f6ad: 'no smoking',\n    emjK1f6b2: 'bike bicycle biking',\n    emjK1f6b6: 'walking pedestrian',\n    emjK1f6c0: 'bath bathing bathtub tub',\n    emjK0267f: 'accessible accessibility wheelchair',\n    emjK026a0: 'warning attention caution hazzard',\n    emjK026a1: 'high voltage zap lightning',\n    emjK1f680: 'rocket spaceship space',\n    emjK1f68f: 'bus stop',\n    emjK1f693: 'cop police',\n    emjK1f695: 'taxi cab',\n    emjK1f697: 'car vehicle automobile',\n    emjK1f6a2: 'ship cruise ferry yacht cruise travel vacation',\n    emjK02708: 'airplane flight airline plane travel vacation',\n    emjK1f42d: 'mouse eek mice squeak',\n    emjK1f42e: 'cow moo',\n    emjK1f42f: 'tiger roar rawr',\n    emjK1f430: 'rabbit bunny easter',\n    emjK1f431: 'cat kitty kitten meow',\n    emjK1f432: 'dragon roar smaug',\n    emjK1f433: 'whale moby dick',\n    emjK1f434: 'horse',\n    emjK1f436: 'dog woof puppy bark doggy',\n    emjK1f437: 'pig oink piggy piglet',\n    emjK1f438: 'frog croak ribbit',\n    emjK1f439: 'hamster guinea pig',\n    emjK1f43a: 'wolf howl',\n    emjK1f341: 'maple leaf',\n    emjK1f344: 'mushroom shroom',\n    emjK1f308: 'rainbow love',\n    emjK02601: 'cloud gloomy cloudy',\n    emjK02614: 'drops raining rain rainy raindrops umbrella',\n    emjK02728: 'sparkles twinkle twinkling glitter shiny sparkly glittery',\n    emjK1f4a9: 'poop turd shit',\n    emjK1f4aa: 'strong work out muscles biceps',\n    emjK02648: 'aries zodiac',\n    emjK02649: 'taurus zodiac',\n    emjK0264a: 'gemini zodiac',\n    emjK0264b: 'cancer zodiac',\n    emjK0264c: 'leo zodiac',\n    emjK0264d: 'virgo zodiac',\n    emjK0264e: 'libra zodiac',\n    emjK0264f: 'scorpio zodiac',\n    emjK02650: 'sagittarius zodiac',\n    emjK02651: 'capricorn zodiac',\n    emjK02652: 'aquarius zodiac',\n    emjK02653: 'pisces zodiac',\n    emjK1f411: 'bah sheep',\n    emjK1f300: 'cyclone typhoon hurricane',\n    emjK1f301: 'foggy',\n    emjK1f302: 'umbrella',\n    emjK1f304: 'sunrise',\n    emjK1f305: 'sunrise',\n    emjK1f306: 'dusk',\n    emjK1f309: 'bridge night',\n    emjK1f30a: 'wave tsunami',\n    emjK1f30c: 'milky way night sky galaxy universe',\n    emjK1f311: 'moon',\n    emjK1f313: 'moon',\n    emjK1f314: 'moon',\n    emjK1f315: 'moon full',\n    emjK1f319: 'moon crescent',\n    emjK1f31b: 'moon',\n    emjK1f330: 'chestnut',\n    emjK1f331: 'seed seedling planting',\n    emjK1f334: 'palm tree vacation',\n    emjK1f335: 'cactus hot desert',\n    emjK1f337: 'tulip flower',\n    emjK1f338: 'cherry blossom sakura flower',\n    emjK1f339: 'rose love romance flower',\n    emjK1f33a: 'hibiscus flower',\n    emjK1f33b: 'sunflower',\n    emjK1f33c: 'blossom daisy flower',\n    emjK1f33d: 'maize corn',\n    emjK1f33e: 'rice',\n    emjK1f33f: 'herb herbs',\n    emjK1f342: 'leaf autumn',\n    emjK1f343: 'leaf windy',\n    emjK1f358: 'onigiri',\n    emjK1f359: 'onigiri',\n    emjK1f35b: 'curry katsu',\n    emjK1f361: 'dango',\n    emjK1f362: 'oden',\n    emjK1f373: 'frying cooking',\n    emjK1f3bd: 'exercise exercising',\n    emjK1f417: 'boar',\n    emjK1f418: 'elephant',\n    emjK1f419: 'octopus',\n    emjK1f41a: 'seashell shell',\n    emjK1f41b: 'bug insect centipede millipede',\n    emjK1f41c: 'ant ants insect bug',\n    emjK1f41d: 'bee bees honeybee honeybees',\n    emjK1f41e: 'ladybug ladybugs',\n    emjK1f420: 'fish',\n    emjK1f421: 'blowfish fish',\n    emjK1f422: 'turtle',\n    emjK1f423: 'chick easter',\n    emjK1f425: 'chick easter',\n    emjK1f40c: 'snail slow',\n    emjK1f40d: 'snake',\n    emjK1f40e: 'horse horsey pony',\n    emjK1f412: 'monkey',\n    emjK1f414: 'chicken bawk rooster',\n    emjK1f429: 'poodle dog',\n    emjK1f42b: 'camel desert',\n    emjK1f426: 'bird',\n    emjK1f427: 'penguin',\n    emjK1f42c: 'dolphin',\n    emjK1f43d: 'pig pig noise smelly',\n    emjK1f43e: 'paw prints paws',\n    emjK1f452: 'hat sunday best',\n    emjK1f458: 'kimono',\n    emjK1f45a: 'clothes',\n    emjK1f481: 'information desk support desk',\n    emjK1f482: 'guardsman',\n    emjK1f499: 'heart',\n    emjK1f49a: 'heart',\n    emjK1f49b: 'heart',\n    emjK1f49c: 'heart',\n    emjK1f49d: 'heart love',\n    emjK1f49e: 'heart',\n    emjK1f49f: 'heart',\n    emjK1f4a5: 'collision bang traffic accident crash',\n    emjK1f4a3: 'bomb',\n    emjK1f4a1: 'light bulb idea',\n    emjK1f4a8: 'dash gotta go gotta run',\n    emjK1f503: 'reload refresh loading',\n    emjK1f50c: 'plug plugged in',\n    emjK1f50b: 'battery charged',\n    emjK1f50d: 'search searching',\n    emjK1f510: 'secure secret',\n    emjK1f50f: 'privacy',\n    emjK1f511: 'key',\n    emjK1f512: 'lock locked',\n    emjK1f513: 'unlock unlocked',\n    emjK1f516: 'bookmark',\n    emjK1f514: 'bell alarm',\n    emjK1f550: '1pm 1am early afternoon',\n    emjK1f551: '2pm 2am afternoon',\n    emjK1f552: '3pm 3am',\n    emjK1f553: '4pm 4am',\n    emjK1f554: '5pm 5am late afternoon',\n    emjK1f555: '6pm 6am',\n    emjK1f556: '7pm 7am dinnertime',\n    emjK1f557: '8pm 8am morning',\n    emjK1f558: '9pm 9am',\n    emjK1f559: '10pm 10am bedtime',\n    emjK1f55a: '11pm 11am nighttime',\n    emjK1f55b: '12pm 12am midnight noon lunchtime',\n    emjK1f5fd: 'statue liberty nyc new york city',\n    emjK1f638: 'cat grin happy',\n    emjK1f639: 'cat rofl lol tears laughter tears joy funny',\n    emjK1f63a: 'cat smile',\n    emjK1f63b: 'cat love',\n    emjK1f63c: 'cat heh',\n    emjK1f63d: 'cat kiss kisses',\n    emjK1f63e: 'cat pout pouting sad',\n    emjK1f63f: 'cat cry cries sad',\n    emjK1f4e8: 'incoming message mail email letter',\n    emjK1f4e9: 'mail email letter sending send',\n    emjK1f4eb: 'mail',\n    emjK1f4ea: 'empty mailbox',\n    emjK1f6bb: 'restroom toilet washroom bathroom',\n    emjK1f6a5: 'traffic traffic light',\n    emjK1f6ab: 'no entry no admittance',\n    emjK1f689: 'station',\n    emjK1f69a: 'delivery truck',\n    emjK026fa: 'tent camp camping',\n    emjK1f6a8: 'police siren emergency',\n    emjK1f17f: 'parking parking spot',\n    emjK02733: 'star asterisk',\n    emjK02734: 'star',\n    emjK02b50: 'star',\n    emjK1f4c8: 'chart graph record profits trending up upwards skyrocketed',\n    emjK1f4c9: 'chart graph record losses trending down downwards',\n    emjK1f4ca: 'chart graph',\n    emjK02764: 'love heart',\n};\n\n/**\n * @internal\n * Emoji Family\n */\nexport const EmojiFamilyStrings = {\n    People: 'People',\n    Nature: 'Nature',\n    Activities: 'Activities',\n    Food: 'Food',\n    Travel: 'Travel',\n    Symbols: 'Symbols',\n    Objects: 'Objects',\n};\n\n/**\n * @internal\n * Emoji Description Key\n */\nexport type EmojiDescriptionStringKey = keyof typeof EmojiDescriptionStrings;\n\n/**\n * @internal\n * Emoji Keyword Key\n */\nexport type EmojiKeywordStringKey = keyof typeof EmojiKeywordStrings;\n","import { Emoji } from '../type/Emoji';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\nconst Common1 = createEmoji('1f60a', ':) :-)');\nconst common2 = createEmoji('1f609', ';) ;-)');\nconst common3 = createEmoji('02764', '<3');\nconst common4 = createEmoji('1f61e', ':( :-(');\nconst common5 = createEmoji('1f603', ':D :-D');\n\n/**\n * @internal\n */\nexport const MoreEmoji: Emoji = {\n    key: 'more',\n    description: 'emjDMore',\n    codePoint: '',\n};\n\n/**\n * @internal\n */\nexport const CommonEmojis = [Common1, common2, common3, common4, common5, MoreEmoji];\n\n/**\n * @internal\n */\nexport const enum EmojiFamilyKeys {\n    People = 'People',\n    Nature = 'Nature',\n    Activities = 'Activities',\n    Food = 'Food',\n    Travel = 'Travel',\n    Symbols = 'Symbols',\n    Objects = 'Objects',\n}\n\n/**\n * @internal\n * NOTE: name for an emoji should be in lower case\n */\nexport const EmojiList = {\n    [EmojiFamilyKeys.People]: [\n        createEmoji('1f601'),\n        createEmoji('1f602'),\n        common5,\n        createEmoji('1f604'),\n        createEmoji('1f605'),\n        createEmoji('1f606'),\n        createEmoji('1f607'),\n        common2,\n        Common1,\n        createEmoji('1f642'),\n        createEmoji('1f60b'),\n        createEmoji('1f60c'),\n        createEmoji('1f60d'),\n        createEmoji('1f618'),\n        createEmoji('1f61a'),\n        createEmoji('1f61c'),\n        createEmoji('1f61d', ':p :P :-p :-P'),\n        createEmoji('1f60e', 'B) B-)'),\n        createEmoji('1f60f'),\n        createEmoji('1f636'),\n        createEmoji('1f610', ':| :-|'),\n        createEmoji('1f612'),\n        createEmoji('1f633'),\n        common4,\n        createEmoji('1f620'),\n        createEmoji('1f621'),\n        createEmoji('1f614'),\n        createEmoji('1f623'),\n        createEmoji('1f616'),\n        createEmoji('1f62b'),\n        createEmoji('1f629'),\n        createEmoji('1f624'),\n        createEmoji('1f631'),\n        createEmoji('1f628'),\n        createEmoji('1f630'),\n        createEmoji('1f625'),\n        createEmoji('1f622'),\n        createEmoji('1f62a'),\n        createEmoji('1f613'),\n        createEmoji('1f62d'),\n        createEmoji('1f635'),\n        createEmoji('1f632', ':o :O :-o :-O'),\n        createEmoji('1f637'),\n        createEmoji('1f4a4'),\n        createEmojiWithNoKeyword('1f608'),\n        createEmoji('1f47f'),\n        createEmojiWithNoKeyword('1f479'),\n        createEmojiWithNoKeyword('1f47a'),\n        createEmoji('1f480'),\n        createEmoji('1f47b'),\n        createEmoji('1f47d'),\n        createEmoji('1f63a'),\n        createEmoji('1f638'),\n        createEmoji('1f639'),\n        createEmoji('1f63b'),\n        createEmoji('1f63c'),\n        createEmoji('1f63d'),\n        createEmojiWithNoKeyword('1f640'),\n        createEmoji('1f63f'),\n        createEmoji('1f63e'),\n        createEmoji('1f64c'),\n        createEmoji('1f44f'),\n        createEmoji('1f44b'),\n        createEmoji('1f44d'),\n        createEmoji('1f44e'),\n        createEmoji('1f44a'),\n        createEmoji('0270a'),\n        createEmoji('0270b'),\n        createEmoji('0270c'),\n        createEmoji('1f44c'),\n        createEmojiWithNoKeyword('1f450'),\n        createEmojiWithNoKeyword('1f596'),\n        createEmoji('1f4aa'),\n        createEmoji('1f64f'),\n        createEmoji('1f446'),\n        createEmoji('1f447'),\n        createEmoji('1f448'),\n        createEmoji('1f449'),\n        createEmoji('1f485'),\n        createEmoji('1f444'),\n        createEmoji('1f445'),\n        createEmoji('1f442'),\n        createEmoji('1f443'),\n        createEmoji('1f440'),\n        createEmojiWithNoKeyword('1f464'),\n        createEmoji('1f476'),\n        createEmoji('1f466'),\n        createEmoji('1f467'),\n        createEmoji('1f468'),\n        createEmoji('1f469'),\n        createEmoji('1f471'),\n        createEmoji('1f474'),\n        createEmoji('1f475'),\n        createEmojiWithNoKeyword('1f472'),\n        createEmojiWithNoKeyword('1f473'),\n        createEmoji('1f46e'),\n        createEmoji('1f477'),\n        createEmoji('1f482'),\n        createEmoji('1f385'),\n        createEmoji('1f47c'),\n        createEmoji('1f478'),\n        createEmoji('1f470'),\n        createEmoji('1f6b6'),\n        createEmoji('1f3c3'),\n        createEmoji('1f483'),\n        createEmoji('1f46f'),\n        createEmoji('1f46b'),\n        createEmojiWithNoKeyword('1f647'),\n        createEmoji('1f481'),\n        createEmoji('1f645'),\n        createEmoji('1f646'),\n        createEmoji('1f64b'),\n        createEmoji('1f64e'),\n        createEmoji('1f64d'),\n        createEmoji('1f487'),\n        createEmoji('1f486'),\n        createEmoji('1f491'),\n        createEmoji('1f48f'),\n        createEmoji('1f46a'),\n        createEmoji('1f45a'),\n        createEmoji('1f455'),\n        createEmoji('1f456'),\n        createEmoji('1f454'),\n        createEmoji('1f457'),\n        createEmoji('1f459'),\n        createEmoji('1f458'),\n        createEmoji('1f484'),\n        createEmoji('1f48b'),\n        createEmoji('1f463'),\n        createEmojiWithNoKeyword('1f460'),\n        createEmoji('1f461'),\n        createEmoji('1f462'),\n        createEmoji('1f45e'),\n        createEmoji('1f45f'),\n        createEmoji('1f452'),\n        createEmoji('1f3a9'),\n        createEmoji('1f393'),\n        createEmoji('1f451'),\n        createEmoji('1f392'),\n        createEmoji('1f45d'),\n        createEmoji('1f45b'),\n        createEmoji('1f45c'),\n        createEmoji('1f4bc'),\n        createEmoji('1f453'),\n        createEmoji('1f48d'),\n        createEmoji('1f302'),\n    ],\n    [EmojiFamilyKeys.Nature]: [\n        createEmoji('1f436'),\n        createEmoji('1f431'),\n        createEmoji('1f42d'),\n        createEmoji('1f439'),\n        createEmoji('1f430'),\n        createEmoji('1f43b'),\n        createEmoji('1f43c'),\n        createEmojiWithNoKeyword('1f428'),\n        createEmoji('1f42f'),\n        createEmoji('1f42e'),\n        createEmoji('1f437'),\n        createEmoji('1f43d'),\n        createEmoji('1f438'),\n        createEmoji('1f419'),\n        createEmoji('1f435'),\n        createEmoji('1f648'),\n        createEmoji('1f649'),\n        createEmoji('1f64a'),\n        createEmoji('1f412'),\n        createEmoji('1f427'),\n        createEmoji('1f426'),\n        createEmojiWithNoKeyword('1f424'),\n        createEmoji('1f423'),\n        createEmoji('1f425'),\n        createEmoji('1f43a'),\n        createEmoji('1f417'),\n        createEmoji('1f434'),\n        createEmoji('1f41d'),\n        createEmoji('1f41b'),\n        createEmoji('1f40c'),\n        createEmoji('1f41e'),\n        createEmoji('1f41c'),\n        createEmoji('1f40d'),\n        createEmoji('1f422'),\n        createEmoji('1f420'),\n        createEmoji('1f41f'),\n        createEmoji('1f421'),\n        createEmoji('1f42c'),\n        createEmoji('1f433'),\n        createEmoji('1f414'),\n        createEmoji('1f42b'),\n        createEmoji('1f418'),\n        createEmoji('1f411'),\n        createEmoji('1f40e'),\n        createEmoji('1f429'),\n        createEmoji('1f43e'),\n        createEmoji('1f432'),\n        createEmoji('1f335'),\n        createEmoji('1f384'),\n        createEmoji('1f334'),\n        createEmoji('1f331'),\n        createEmoji('1f33f'),\n        createEmoji('1f340'),\n        createEmojiWithNoKeyword('1f38d'),\n        createEmojiWithNoKeyword('1f38b'),\n        createEmoji('1f343'),\n        createEmoji('1f342'),\n        createEmoji('1f341'),\n        createEmoji('1f33e'),\n        createEmoji('1f33a'),\n        createEmoji('1f33b'),\n        createEmoji('1f339'),\n        createEmoji('1f33c'),\n        createEmoji('1f337'),\n        createEmoji('1f338'),\n        createEmoji('1f344'),\n        createEmoji('1f490'),\n        createEmoji('1f330'),\n        createEmoji('1f383'),\n        createEmoji('1f41a'),\n        createEmojiWithNoKeyword('1f30f'),\n        createEmoji('1f315'),\n        createEmoji('1f311'),\n        createEmoji('1f313'),\n        createEmoji('1f314'),\n        createEmoji('1f31b'),\n        createEmoji('1f319'),\n        createEmoji('02b50'),\n        createEmoji('1f31f'),\n        createEmojiWithNoKeyword('1f4ab'),\n        createEmoji('02728'),\n        createEmojiWithNoKeyword('02600'),\n        createEmojiWithNoKeyword('026c5'),\n        createEmoji('02601'),\n        createEmoji('026a1'),\n        createEmoji('1f525'),\n        createEmoji('1f4a5'),\n        createEmoji('02744'),\n        createEmoji('026c4'),\n        createEmoji('1f4a8'),\n        createEmoji('02614'),\n        createEmojiWithNoKeyword('1f4a7'),\n        createEmojiWithNoKeyword('1f4a6'),\n        createEmoji('1f30a'),\n    ],\n    [EmojiFamilyKeys.Activities]: [\n        createEmoji('026bd'),\n        createEmoji('1f3c0'),\n        createEmoji('1f3c8'),\n        createEmoji('026be'),\n        createEmoji('1f3be'),\n        createEmoji('1f3b1'),\n        createEmoji('026f3'),\n        createEmoji('1f3bf'),\n        createEmoji('1f3c2'),\n        createEmoji('1f3a3'),\n        createEmoji('1f3ca'),\n        createEmoji('1f3c4'),\n        createEmoji('1f3c6'),\n        createEmoji('1f3bd'),\n        createEmoji('1f3ab'),\n        createEmoji('1f3ad'),\n        createEmoji('1f3a8'),\n        createEmoji('1f3aa'),\n        createEmoji('1f3a4'),\n        createEmoji('1f3a7'),\n        createEmoji('1f3bc'),\n        createEmoji('1f3b9'),\n        createEmoji('1f3b7'),\n        createEmoji('1f3ba'),\n        createEmoji('1f3b8'),\n        createEmoji('1f3bb'),\n        createEmoji('1f3ac'),\n        createEmoji('1f3ae'),\n        createEmoji('1f47e'),\n        createEmoji('1f3af'),\n        createEmoji('1f3b2'),\n        createEmoji('1f3b0'),\n        createEmoji('1f3b3'),\n    ],\n    [EmojiFamilyKeys.Food]: [\n        createEmoji('1f34f'),\n        createEmoji('1f34e'),\n        createEmoji('1f34a'),\n        createEmoji('1f34c'),\n        createEmoji('1f349'),\n        createEmoji('1f347'),\n        createEmoji('1f353'),\n        createEmoji('1f348'),\n        createEmoji('1f352'),\n        createEmoji('1f351'),\n        createEmoji('1f34d'),\n        createEmoji('1f345'),\n        createEmoji('1f346'),\n        createEmoji('1f33d'),\n        createEmoji('1f360'),\n        createEmoji('1f35e'),\n        createEmoji('1f357'),\n        createEmoji('1f356'),\n        createEmoji('1f364'),\n        createEmoji('1f373'),\n        createEmoji('1f354'),\n        createEmoji('1f35f'),\n        createEmoji('1f355'),\n        createEmoji('1f35d'),\n        createEmoji('1f35c'),\n        createEmoji('1f372'),\n        createEmoji('1f365'),\n        createEmoji('1f363'),\n        createEmoji('1f371'),\n        createEmoji('1f35b'),\n        createEmoji('1f359'),\n        createEmoji('1f35a'),\n        createEmoji('1f358'),\n        createEmoji('1f362'),\n        createEmoji('1f361'),\n        createEmojiWithNoKeyword('1f367'),\n        createEmoji('1f368'),\n        createEmoji('1f366'),\n        createEmoji('1f370'),\n        createEmoji('1f36f'),\n        createEmoji('1f382'),\n        createEmoji('1f36e'),\n        createEmoji('1f36c'),\n        createEmoji('1f36d'),\n        createEmoji('1f36b'),\n        createEmoji('1f369'),\n        createEmoji('1f36a'),\n        createEmoji('1f37a'),\n        createEmoji('1f37b'),\n        createEmoji('1f377'),\n        createEmoji('1f378'),\n        createEmoji('1f379'),\n        createEmoji('1f376'),\n        createEmoji('1f375'),\n        createEmoji('02615'),\n        createEmoji('1f374'),\n    ],\n    [EmojiFamilyKeys.Travel]: [\n        createEmoji('1f697'),\n        createEmoji('1f695'),\n        createEmoji('1f687'),\n        createEmojiWithNoKeyword('1f699'),\n        createEmoji('1f68c'),\n        createEmoji('1f693'),\n        createEmoji('1f69a'),\n        createEmojiWithNoKeyword('1f691'),\n        createEmoji('1f692'),\n        createEmoji('1f6b2'),\n        createEmoji('1f6a8'),\n        createEmoji('1f683'),\n        createEmoji('1f684'),\n        createEmojiWithNoKeyword('1f685'),\n        createEmoji('1f689'),\n        createEmoji('02708'),\n        createEmoji('026f5'),\n        createEmojiWithNoKeyword('1f6a4'),\n        createEmoji('1f680'),\n        createEmoji('1f4ba'),\n        createEmoji('02693'),\n        createEmoji('1f6a7'),\n        createEmoji('026fd'),\n        createEmoji('1f68f'),\n        createEmoji('1f6a5'),\n        createEmoji('1f3c1'),\n        createEmoji('1f6a2'),\n        createEmoji('1f3a1'),\n        createEmoji('1f3a2'),\n        createEmoji('1f3a0'),\n        createEmoji('1f301'),\n        createEmojiWithNoKeyword('1f5fc'),\n        createEmoji('1f3ed'),\n        createEmoji('026f2'),\n        createEmojiWithNoKeyword('1f391'),\n        createEmojiWithNoKeyword('1f5fb'),\n        createEmojiWithNoKeyword('1f30b'),\n        createEmojiWithNoKeyword('1f5fe'),\n        createEmoji('1f305'),\n        createEmoji('1f304'),\n        createEmoji('1f307'),\n        createEmoji('1f306'),\n        createEmoji('1f303'),\n        createEmoji('1f309'),\n        createEmoji('1f30c'),\n        createEmoji('1f387'),\n        createEmoji('1f386'),\n        createEmoji('1f308'),\n        createEmoji('1f3f0'),\n        createEmojiWithNoKeyword('1f3ef'),\n        createEmoji('1f5fd'),\n        createEmoji('1f3e0'),\n        createEmoji('1f3e1'),\n        createEmoji('1f3e2'),\n        createEmoji('1f3ec'),\n        createEmoji('026fa'),\n        createEmojiWithNoKeyword('1f3e3'),\n        createEmojiWithNoKeyword('1f3e5'),\n        createEmoji('1f3e6'),\n        createEmoji('1f3e8'),\n        createEmoji('1f3ea'),\n        createEmoji('1f3eb'),\n        createEmojiWithNoKeyword('1f3e9'),\n        createEmoji('1f492'),\n        createEmoji('026ea'),\n        createEmoji('1f320'),\n    ],\n    [EmojiFamilyKeys.Symbols]: [\n        common3,\n        createEmoji('1f49b'),\n        createEmoji('1f49a'),\n        createEmoji('1f499'),\n        createEmoji('1f494'),\n        createEmoji('1f49c'),\n        createEmoji('1f495'),\n        createEmoji('1f493'),\n        createEmoji('1f49e'),\n        createEmoji('1f497'),\n        createEmoji('1f498'),\n        createEmoji('1f496'),\n        createEmoji('1f49d'),\n        createEmoji('1f49f'),\n        createEmojiWithNoKeyword('1f52f'),\n        createEmojiWithNoKeyword('026ce'),\n        createEmoji('02648'),\n        createEmoji('02649'),\n        createEmoji('0264a'),\n        createEmoji('0264b'),\n        createEmoji('0264c'),\n        createEmoji('0264d'),\n        createEmoji('0264e'),\n        createEmoji('0264f'),\n        createEmoji('02650'),\n        createEmoji('02651'),\n        createEmoji('02652'),\n        createEmoji('02653'),\n        createEmojiWithNoKeyword('1f194'),\n        createEmojiWithNoKeyword('1f4f4'),\n        createEmojiWithNoKeyword('1f4f3'),\n        createEmojiWithNoKeyword('1f19a'),\n        createEmojiWithNoKeyword('1f4ae'),\n        createEmojiWithNoKeyword('1f18e'),\n        createEmojiWithNoKeyword('1f191'),\n        createEmojiWithNoKeyword('1f198'),\n        createEmojiWithNoKeyword('026d4'),\n        createEmoji('1f4db'),\n        createEmoji('1f6ab'),\n        createEmojiWithNoKeyword('0274c'),\n        createEmojiWithNoKeyword('02b55'),\n        createEmojiWithNoKeyword('1f4a2'),\n        createEmoji('02668'),\n        createEmojiWithNoKeyword('1f51e'),\n        createEmojiWithNoKeyword('02757'),\n        createEmojiWithNoKeyword('02755'),\n        createEmojiWithNoKeyword('02753'),\n        createEmojiWithNoKeyword('02754'),\n        createEmojiWithNoKeyword('02049'),\n        createEmojiWithNoKeyword('1f4af'),\n        createEmoji('1f531'),\n        createEmojiWithNoKeyword('0303d'),\n        createEmoji('026a0'),\n        createEmojiWithNoKeyword('1f530'),\n        createEmojiWithNoKeyword('1f22f'),\n        createEmojiWithNoKeyword('1f4b9'),\n        createEmoji('02733'),\n        createEmojiWithNoKeyword('0274e'),\n        createEmojiWithNoKeyword('02705'),\n        createEmojiWithNoKeyword('1f4a0'),\n        createEmoji('1f300'),\n        createEmoji('1f3e7'),\n        createEmoji('0267f'),\n        createEmoji('1f6ad'),\n        createEmojiWithNoKeyword('1f6be'),\n        createEmoji('02734'),\n        createEmoji('1f17f'),\n        createEmoji('1f6b9'),\n        createEmoji('1f6ba'),\n        createEmojiWithNoKeyword('1f6bc'),\n        createEmoji('1f6bb'),\n        createEmoji('1f3a6'),\n        createEmoji('1f4f6'),\n        createEmojiWithNoKeyword('1f201'),\n        createEmojiWithNoKeyword('1f196'),\n        createEmojiWithNoKeyword('0267b'),\n        createEmojiWithNoKeyword('1f197'),\n        createEmojiWithNoKeyword('1f192'),\n        createEmoji('02747'),\n        createEmojiWithNoKeyword('1f195'),\n        createEmojiWithNoKeyword('1f193'),\n        createEmojiWithNoKeyword('1f51f'),\n        createEmojiWithNoKeyword('1f522'),\n        createEmojiWithNoKeyword('023ea'),\n        createEmojiWithNoKeyword('023e9'),\n        createEmojiWithNoKeyword('1f53c'),\n        createEmojiWithNoKeyword('1f53d'),\n        createEmojiWithNoKeyword('023eb'),\n        createEmojiWithNoKeyword('023ec'),\n        createEmojiWithNoKeyword('1f199'),\n        createEmojiWithNoKeyword('02139'),\n        createEmojiWithNoKeyword('1f524'),\n        createEmojiWithNoKeyword('1f521'),\n        createEmojiWithNoKeyword('1f520'),\n        createEmojiWithNoKeyword('1f523'),\n        createEmoji('1f3b5'),\n        createEmoji('1f3b6'),\n        createEmojiWithNoKeyword('03030'),\n        createEmojiWithNoKeyword('027bf'),\n        createEmojiWithNoKeyword('02714'),\n        createEmoji('1f503'),\n        createEmojiWithNoKeyword('02795'),\n        createEmojiWithNoKeyword('02796'),\n        createEmojiWithNoKeyword('02797'),\n        createEmojiWithNoKeyword('02716'),\n        createEmojiWithNoKeyword('027b0'),\n        createEmojiWithNoKeyword('1f4b2'),\n        createEmojiWithNoKeyword('1f4b1'),\n        createEmojiWithNoKeyword('1f51a'),\n        createEmojiWithNoKeyword('1f519'),\n        createEmojiWithNoKeyword('1f51b'),\n        createEmojiWithNoKeyword('1f51d'),\n        createEmojiWithNoKeyword('1f51c'),\n        createEmojiWithNoKeyword('02611'),\n        createEmojiWithNoKeyword('1f518'),\n        createEmojiWithNoKeyword('026ab'),\n        createEmojiWithNoKeyword('1f534'),\n        createEmojiWithNoKeyword('1f535'),\n        createEmojiWithNoKeyword('1f539'),\n        createEmojiWithNoKeyword('1f538'),\n        createEmojiWithNoKeyword('1f536'),\n        createEmojiWithNoKeyword('1f537'),\n        createEmojiWithNoKeyword('1f53a'),\n        createEmojiWithNoKeyword('1f53b'),\n        createEmojiWithNoKeyword('02b1b'),\n        createEmojiWithNoKeyword('02b1c'),\n        createEmojiWithNoKeyword('1f532'),\n        createEmojiWithNoKeyword('1f533'),\n        createEmojiWithNoKeyword('1f50a'),\n        createEmoji('1f4e3'),\n        createEmojiWithNoKeyword('1f4e2'),\n        createEmoji('1f514'),\n        createEmojiWithNoKeyword('1f004'),\n        createEmoji('1f0cf'),\n        createEmojiWithNoKeyword('1f3b4'),\n        createEmojiWithNoKeyword('1f4ac'),\n        createEmoji('1f550'),\n        createEmoji('1f551'),\n        createEmoji('1f552'),\n        createEmoji('1f553'),\n        createEmoji('1f554'),\n        createEmoji('1f555'),\n        createEmoji('1f556'),\n        createEmoji('1f557'),\n        createEmoji('1f558'),\n        createEmoji('1f559'),\n        createEmoji('1f55a'),\n        createEmoji('1f55b'),\n        createEmojiWithNoKeyword('1f236'),\n        createEmojiWithNoKeyword('1f250'),\n        createEmojiWithNoKeyword('1f239'),\n        createEmojiWithNoKeyword('1f21a'),\n        createEmojiWithNoKeyword('1f232'),\n        createEmojiWithNoKeyword('1f251'),\n        createEmojiWithNoKeyword('1f234'),\n        createEmojiWithNoKeyword('1f233'),\n        createEmojiWithNoKeyword('1f23a'),\n        createEmojiWithNoKeyword('1f235'),\n    ],\n    [EmojiFamilyKeys.Objects]: [\n        createEmojiWithNoKeyword('0231a'),\n        createEmoji('1f4f1'),\n        createEmojiWithNoKeyword('1f4f2'),\n        createEmoji('1f4bb'),\n        createEmojiWithNoKeyword('1f4bd'),\n        createEmoji('1f4be'),\n        createEmoji('1f4bf'),\n        createEmoji('1f4c0'),\n        createEmoji('1f4fc'),\n        createEmoji('1f4f7'),\n        createEmoji('1f4f9'),\n        createEmoji('1f3a5'),\n        createEmoji('1f4de'),\n        createEmojiWithNoKeyword('0260e'),\n        createEmoji('1f4df'),\n        createEmoji('1f4e0'),\n        createEmoji('1f4fa'),\n        createEmoji('1f4fb'),\n        createEmojiWithNoKeyword('023f0'),\n        createEmojiWithNoKeyword('0231b'),\n        createEmojiWithNoKeyword('023f3'),\n        createEmoji('1f4e1'),\n        createEmoji('1f50b'),\n        createEmoji('1f50c'),\n        createEmoji('1f4a1'),\n        createEmoji('1f526'),\n        createEmojiWithNoKeyword('1f4b8'),\n        createEmoji('1f4b5'),\n        createEmoji('1f4b4'),\n        createEmoji('1f4b0'),\n        createEmoji('1f4b3'),\n        createEmoji('1f48e'),\n        createEmoji('1f527'),\n        createEmoji('1f528'),\n        createEmoji('1f529'),\n        createEmojiWithNoKeyword('1f52b'),\n        createEmoji('1f4a3'),\n        createEmoji('1f52a'),\n        createEmoji('1f6ac'),\n        createEmoji('1f52e'),\n        createEmoji('1f488'),\n        createEmoji('1f48a'),\n        createEmoji('1f489'),\n        createEmoji('1f516'),\n        createEmoji('1f6bd'),\n        createEmoji('1f6c0'),\n        createEmoji('1f511'),\n        createEmoji('1f6aa'),\n        createEmojiWithNoKeyword('1f5ff'),\n        createEmoji('1f388'),\n        createEmojiWithNoKeyword('1f38f'),\n        createEmoji('1f380'),\n        createEmoji('1f381'),\n        createEmoji('1f38a'),\n        createEmoji('1f389'),\n        createEmojiWithNoKeyword('1f38e'),\n        createEmoji('1f390'),\n        createEmojiWithNoKeyword('1f38c'),\n        createEmojiWithNoKeyword('1f3ee'),\n        createEmoji('02709'),\n        createEmoji('1f4e9'),\n        createEmoji('1f4e8'),\n        createEmoji('1f48c'),\n        createEmoji('1f4e7'),\n        createEmoji('1f4ee'),\n        createEmoji('1f4ea'),\n        createEmoji('1f4eb'),\n        createEmoji('1f4e6'),\n        createEmojiWithNoKeyword('1f4e5'),\n        createEmojiWithNoKeyword('1f4e4'),\n        createEmojiWithNoKeyword('1f4dc'),\n        createEmojiWithNoKeyword('1f4c3'),\n        createEmojiWithNoKeyword('1f4d1'),\n        createEmoji('1f4ca'),\n        createEmoji('1f4c8'),\n        createEmoji('1f4c9'),\n        createEmojiWithNoKeyword('1f4c4'),\n        createEmoji('1f4c5'),\n        createEmojiWithNoKeyword('1f4c6'),\n        createEmojiWithNoKeyword('1f4c7'),\n        createEmoji('1f4cb'),\n        createEmoji('1f4c1'),\n        createEmojiWithNoKeyword('1f4c2'),\n        createEmoji('1f4f0'),\n        createEmoji('1f4d3'),\n        createEmojiWithNoKeyword('1f4d5'),\n        createEmojiWithNoKeyword('1f4d7'),\n        createEmojiWithNoKeyword('1f4d8'),\n        createEmojiWithNoKeyword('1f4d9'),\n        createEmojiWithNoKeyword('1f4d4'),\n        createEmoji('1f4d2'),\n        createEmoji('1f4da'),\n        createEmojiWithNoKeyword('1f4d6'),\n        createEmojiWithNoKeyword('1f517'),\n        createEmoji('1f4ce'),\n        createEmoji('02702'),\n        createEmojiWithNoKeyword('1f4d0'),\n        createEmoji('1f4cf'),\n        createEmoji('1f4cc'),\n        createEmoji('1f4cd'),\n        createEmojiWithNoKeyword('1f6a9'),\n        createEmoji('1f510'),\n        createEmoji('1f512'),\n        createEmoji('1f513'),\n        createEmoji('1f50f'),\n        createEmojiWithNoKeyword('02712'),\n        createEmoji('1f4dd'),\n        createEmoji('0270f'),\n        createEmoji('1f50d'),\n        createEmojiWithNoKeyword('1f50e'),\n    ],\n};\n\n/**\n * @internal\n */\nexport const EmojiFabricIconCharacterMap = {\n    [EmojiFamilyKeys.Activities]: 'Soccer',\n    [EmojiFamilyKeys.Food]: 'EatDrink',\n    [EmojiFamilyKeys.Nature]: 'FangBody',\n    [EmojiFamilyKeys.Objects]: 'Lightbulb',\n    [EmojiFamilyKeys.People]: 'Emoji2',\n    [EmojiFamilyKeys.Symbols]: 'Heart',\n    [EmojiFamilyKeys.Travel]: 'Car',\n};\n\n/**\n * @internal\n */\nexport function forEachEmojiFamily(\n    callback: (emojis: Emoji[], family: EmojiFamilyKeys) => boolean\n): void {\n    const families = getObjectKeys(EmojiList);\n    for (const family of families) {\n        if (!callback(EmojiList[family], family)) {\n            break;\n        }\n    }\n}\n\n/**\n * @internal\n */\nexport function forEachEmoji(callback: (emoji: Emoji) => boolean): void {\n    forEachEmojiFamily(emojis => {\n        for (const emoji of emojis) {\n            if (!callback(emoji)) {\n                return false;\n            }\n        }\n        return true;\n    });\n}\n\n// get emoji code point from an emoji key\nfunction getEmojiCodePoint(key: string): string | null {\n    let unicode = parseInt(key, 16);\n    if (isNaN(unicode)) {\n        return null;\n    }\n\n    // All emojis have codepoints between the following ranges:\n    // 0x1F7000 - 0x1F700 -> has surrogate pairs\n    // 0x00023 - 0x04000 -> does not have surrogate pairs\n    let surrogatePairs: number[];\n    if (unicode >= 0x1f000 && unicode <= 0x1f700) {\n        let hi = Math.floor((unicode - 0x10000) / 0x400) + 0xd800;\n        let lo = ((unicode - 0x10000) % 0x400) + 0xdc00;\n        surrogatePairs = [hi, lo];\n    } else if (unicode >= 0x00023 && unicode <= 0x04000) {\n        surrogatePairs = [unicode];\n    }\n\n    return String.fromCharCode(...surrogatePairs!);\n}\n\nfunction createEmoji(key: string, shortcut?: string): Emoji {\n    return {\n        key,\n        description: `emjD${key}`,\n        keywords: `emjK${key}`,\n        shortcut,\n        codePoint: getEmojiCodePoint(key) ?? undefined,\n    };\n}\n\nfunction createEmojiWithNoKeyword(key: string): Emoji {\n    return { key, description: `emjD${key}`, codePoint: getEmojiCodePoint(key) ?? undefined };\n}\n","import { Emoji } from '../type/Emoji';\nimport { forEachEmoji } from './emojiList';\n\n/**\n * @internal\n */\nexport function searchEmojis(search: string, strings: Record<string, string>): Emoji[] {\n    const shortcutMatch = matchShortcut(search);\n    search = search.toLowerCase();\n    const fullMatch: Emoji[] = shortcutMatch ? [shortcutMatch] : [];\n    const partialMatch: Emoji[] = [];\n    const partialSearch = ' ' + (search[0] == ':' ? search.substr(1) : search);\n    forEachEmoji(emoji => {\n        const keywords = (emoji.keywords && strings[emoji.keywords]) || '';\n        const searchableKeywords = emoji.keywords ? ' ' + keywords.toLowerCase() + ' ' : '';\n        const index = searchableKeywords.indexOf(partialSearch);\n        if (index >= 0) {\n            (searchableKeywords[index + partialSearch.length] == ' '\n                ? fullMatch\n                : partialMatch\n            ).push(emoji);\n        }\n        return true;\n    });\n\n    return fullMatch.concat(partialMatch);\n}\n\nfunction matchShortcut(search: string): Emoji | null {\n    let result: Emoji | null = null;\n    search = ' ' + search + ' ';\n    forEachEmoji((emoji: Emoji) => {\n        if (emoji.shortcut && (' ' + emoji.shortcut + ' ').indexOf(search) >= 0) {\n            result = emoji;\n            return false;\n        }\n        return true;\n    });\n    return result;\n}\n","export * from './common/index';\nexport * from './rooster/index';\nexport * from './ribbon/index';\nexport * from './contextMenu/index';\nexport * from './pasteOptions/index';\nexport * from './colorPicker/index';\nexport * from './emoji/index';\n","import * as React from 'react';\nimport DialogItem from '../type/DialogItem';\nimport InputDialogItem from './InputDialogItem';\nimport {\n    CancelButtonStringKey,\n    getLocalizedString,\n    LocalizedStrings,\n    OkButtonStringKey,\n} from '../../common/index';\nimport { DefaultButton, PrimaryButton } from '@fluentui/react/lib/Button';\nimport { Dialog, DialogFooter, DialogType } from '@fluentui/react/lib/Dialog';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport interface InputDialogProps<Strings extends string, ItemNames extends string> {\n    dialogTitleKey: Strings;\n    unlocalizedTitle: string;\n    items: Record<ItemNames, DialogItem<Strings>>;\n    strings?: LocalizedStrings<Strings | OkButtonStringKey | CancelButtonStringKey>;\n    onChange?: (\n        changedItemName: ItemNames,\n        newValue: string,\n        currentValues: Record<ItemNames, string>\n    ) => Record<ItemNames, string> | null;\n    onOk: (values: Record<ItemNames, string>) => void;\n    onCancel: () => void;\n}\n\n/**\n * @internal\n */\nexport default function InputDialog<Strings extends string, ItemNames extends string>(\n    props: InputDialogProps<Strings, ItemNames>\n) {\n    const { items, strings, dialogTitleKey, unlocalizedTitle, onOk, onCancel, onChange } = props;\n    const dialogContentProps = React.useMemo(\n        () => ({\n            type: DialogType.normal,\n            title: getLocalizedString(strings, dialogTitleKey, unlocalizedTitle),\n        }),\n        [strings, dialogTitleKey, unlocalizedTitle]\n    );\n    const [currentValues, setCurrentValues] = React.useState<Record<ItemNames, string>>(\n        getObjectKeys(items).reduce((result: Record<ItemNames, string>, key) => {\n            result[key] = items[key].initValue;\n            return result;\n        }, {} as Record<ItemNames, string>)\n    );\n\n    const onSubmit = React.useCallback(() => {\n        onOk?.(currentValues);\n    }, [onOk, currentValues]);\n    const onItemChanged = React.useCallback(\n        (itemName: ItemNames, newValue: string) => {\n            if (itemName in items) {\n                const newValues = onChange?.(itemName, newValue, {\n                    ...currentValues,\n                }) || {\n                    ...currentValues,\n                    [itemName]: newValue,\n                };\n\n                setCurrentValues(newValues);\n            }\n        },\n        [setCurrentValues, currentValues, items]\n    );\n\n    return (\n        <Dialog dialogContentProps={dialogContentProps} hidden={false} onDismiss={onCancel}>\n            <div>\n                {getObjectKeys(items).map(key => (\n                    <InputDialogItem\n                        key={key}\n                        itemName={key}\n                        items={items}\n                        strings={strings}\n                        currentValues={currentValues}\n                        onEnterKey={onSubmit}\n                        onChanged={onItemChanged}\n                    />\n                ))}\n            </div>\n            <DialogFooter>\n                <PrimaryButton\n                    text={getLocalizedString(strings, 'buttonNameOK', 'OK')}\n                    onClick={onSubmit}\n                />\n                <DefaultButton\n                    text={getLocalizedString(strings, 'buttonNameCancel', 'Cancel')}\n                    onClick={onCancel}\n                />\n            </DialogFooter>\n        </Dialog>\n    );\n}\n","import * as React from 'react';\nimport DialogItem from '../type/DialogItem';\nimport { getLocalizedString, LocalizedStrings } from '../../common/index';\nimport { Keys } from 'roosterjs-editor-types';\nimport { mergeStyleSets } from '@fluentui/react/lib/Styling';\nimport { TextField } from '@fluentui/react/lib/TextField';\n\n/**\n * @internal\n */\nexport interface InputDialogItemProps<Strings extends string, ItemNames extends string> {\n    itemName: ItemNames;\n    strings: LocalizedStrings<Strings> | undefined;\n    items: Record<ItemNames, DialogItem<Strings>>;\n    currentValues: Record<ItemNames, string>;\n    onEnterKey: () => void;\n    onChanged: (itemName: ItemNames, newValue: string) => void;\n}\n\nconst classNames = mergeStyleSets({\n    inputBox: {\n        width: '100%',\n        minWidth: '250px',\n        height: '32px',\n        margin: '5px 0 16px',\n        borderRadius: '2px',\n    },\n});\n\n/**\n * @internal\n */\nexport default function InputDialogItem<Strings extends string, ItemNames extends string>(\n    props: InputDialogItemProps<Strings, ItemNames>\n) {\n    const { itemName, strings, items, currentValues, onChanged, onEnterKey } = props;\n    const { labelKey, unlocalizedLabel, autoFocus } = items[itemName];\n    const value = currentValues[itemName];\n    const onValueChange = React.useCallback(\n        (_, newValue) => {\n            onChanged(itemName, newValue);\n        },\n        [itemName, onChanged]\n    );\n\n    const onKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            if (e.which == Keys.ENTER) {\n                onEnterKey();\n            }\n        },\n        [onEnterKey]\n    );\n\n    return (\n        <div>\n            {labelKey ? <div>{getLocalizedString(strings, labelKey, unlocalizedLabel)}</div> : null}\n            <div>\n                <TextField\n                    role=\"textbox\"\n                    type=\"text\"\n                    className={classNames.inputBox}\n                    value={value}\n                    onChange={onValueChange}\n                    onKeyPress={onKeyPress}\n                    autoFocus={autoFocus}\n                />\n            </div>\n        </div>\n    );\n}\n","import * as React from 'react';\nimport DialogItem from '../type/DialogItem';\nimport InputDialog from '../component/InputDialog';\nimport { renderReactComponent } from '../../common/utils/renderReactComponent';\nimport {\n    CancelButtonStringKey,\n    LocalizedStrings,\n    OkButtonStringKey,\n    UIUtilities,\n} from '../../common/index';\n\n/**\n * @internal\n */\nexport default function showInputDialog<Strings extends string, ItemNames extends string>(\n    uiUtilities: UIUtilities,\n    dialogTitleKey: Strings,\n    unlocalizedTitle: string,\n    items: Record<ItemNames, DialogItem<Strings>>,\n    strings?: LocalizedStrings<Strings | OkButtonStringKey | CancelButtonStringKey>,\n    onChange?: (\n        changedItemName: ItemNames,\n        newValue: string,\n        currentValues: Record<ItemNames, string>\n    ) => Record<ItemNames, string> | null\n): Promise<Record<ItemNames, string> | null> {\n    return new Promise<Record<ItemNames, string> | null>(resolve => {\n        let disposer: null | (() => void) = null;\n        const onOk = (result: Record<ItemNames, string>) => {\n            disposer?.();\n            resolve(result);\n        };\n        const onCancel = () => {\n            disposer?.();\n            resolve(null);\n        };\n        const component = (\n            <InputDialog\n                dialogTitleKey={dialogTitleKey}\n                unlocalizedTitle={unlocalizedTitle}\n                items={items}\n                strings={strings}\n                onOk={onOk}\n                onCancel={onCancel}\n                onChange={onChange}\n            />\n        );\n\n        disposer = renderReactComponent(uiUtilities, component);\n    });\n}\n","import * as React from 'react';\nimport { ButtonKeys, Buttons } from '../utils/buttons';\nimport { Callout, DirectionalHint } from '@fluentui/react/lib/Callout';\nimport { getLocalizedString, LocalizedStrings, UIUtilities } from '../../common/index';\nimport { getObjectKeys, getPositionRect } from 'roosterjs-editor-dom';\nimport { Icon } from '@fluentui/react/lib/Icon';\nimport { IconButton } from '@fluentui/react/lib/Button';\nimport { memoizeFunction } from '@fluentui/react/lib/Utilities';\nimport { mergeStyleSets } from '@fluentui/react/lib/Styling';\nimport { renderReactComponent } from '../../common/utils/renderReactComponent';\nimport { Theme, useTheme } from '@fluentui/react/lib/Theme';\nimport type { PasteOptionButtonKeys, PasteOptionStringKeys } from '../type/PasteOptionStringKeys';\nimport type { NodePosition } from 'roosterjs-editor-types';\n\nconst getPasteOptionClassNames = memoizeFunction((theme: Theme) => {\n    const palette = theme.palette;\n\n    return mergeStyleSets({\n        pastePane: {\n            paddingLeft: '4px',\n            minWidth: '72px',\n        },\n        optionPane: {\n            textAlign: 'center',\n            padding: '4px',\n        },\n        icon: {\n            fontSize: '14px',\n        },\n        buttonsContainer: {\n            justifyContent: 'center',\n            display: 'flex',\n        },\n        button: {\n            width: '32px',\n            height: '32px',\n            margin: '0 4px 4px 0',\n            borderRadius: '2px',\n            flex: '0 0 auto',\n            '&:hover': {\n                backgroundColor: palette.themeLighter,\n            },\n        },\n        isChecked: {\n            backgroundColor: palette.themeLight,\n            '&:hover': {\n                backgroundColor: palette.themeLighter,\n            },\n        },\n    });\n});\n\ninterface PasteOptionButtonProps {\n    buttonName: PasteOptionButtonKeys;\n    className: string;\n    paste: (key: PasteOptionButtonKeys) => void;\n    strings?: LocalizedStrings<PasteOptionStringKeys>;\n}\n\nfunction PasteOptionButton(props: PasteOptionButtonProps) {\n    const { buttonName, paste, strings, className } = props;\n    const button = Buttons[buttonName];\n    const onClick = React.useCallback(() => {\n        paste(buttonName);\n    }, [paste, buttonName]);\n\n    return (\n        <IconButton\n            className={className}\n            onClick={onClick}\n            title={\n                getLocalizedString(strings, buttonName, button.unlocalizedText) +\n                (button.shortcut ? ` (${button.shortcut})` : '')\n            }\n            iconProps={{ iconName: button.icon }}\n        />\n    );\n}\n\ninterface PasteOptionProps {\n    strings?: LocalizedStrings<PasteOptionStringKeys>;\n    position: NodePosition;\n    isRtl: boolean;\n    paste: (key: PasteOptionButtonKeys) => void;\n    dismiss: () => void;\n}\n\n/**\n * @internal\n */\nexport interface PasteOptionPane {\n    getSelectedKey: () => PasteOptionButtonKeys | null;\n    setSelectedKey: (index: PasteOptionButtonKeys) => void;\n    dismiss: () => void;\n}\n\nconst PasteOptionComponent = React.forwardRef(function PasteOptionFunc(\n    props: PasteOptionProps,\n    ref: React.Ref<PasteOptionPane>\n) {\n    const { strings, position, paste, dismiss, isRtl } = props;\n    const theme = useTheme();\n    const classNames = getPasteOptionClassNames(theme);\n    const [selectedKey, setSelectedKey] = React.useState<PasteOptionButtonKeys | null>(null);\n\n    const rect = position && getPositionRect(position);\n    const target = rect && { x: props.isRtl ? rect.left : rect.right, y: rect.bottom };\n\n    React.useImperativeHandle(\n        ref,\n        () => ({\n            dismiss,\n            setSelectedKey,\n            getSelectedKey: () => selectedKey,\n        }),\n        [dismiss, paste, isRtl, selectedKey, setSelectedKey]\n    );\n\n    const buttonPane = React.useRef<HTMLDivElement>(null);\n    const onDismiss = React.useCallback(\n        (evt?: Event | React.MouseEvent | React.KeyboardEvent) => {\n            const target =\n                evt instanceof FocusEvent && evt.relatedTarget instanceof Node\n                    ? evt.relatedTarget\n                    : null;\n            const clickOnButtonPane =\n                target &&\n                buttonPane.current &&\n                (buttonPane.current == target || buttonPane.current.contains(target));\n            if (!clickOnButtonPane) {\n                dismiss();\n            }\n        },\n        [dismiss]\n    );\n\n    const onClickShowSubMenu = React.useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            setSelectedKey(ButtonKeys[0]);\n            event.preventDefault();\n            event.stopPropagation();\n        },\n        [setSelectedKey]\n    );\n\n    return (\n        <Callout\n            gapSpace={10}\n            isBeakVisible={false}\n            target={target}\n            directionalHint={\n                isRtl ? DirectionalHint.bottomRightEdge : DirectionalHint.bottomLeftEdge\n            }\n            directionalHintForRTL={DirectionalHint.bottomRightEdge}\n            preventDismissOnScroll={true}\n            onDismiss={onDismiss}>\n            <div ref={buttonPane} className={classNames.pastePane}>\n                <div onClick={onClickShowSubMenu} className={classNames.optionPane}>\n                    <Icon iconName={'Paste'} className={classNames.icon} />\n                    {getLocalizedString(strings, 'pasteOptionPaneText', '(Ctrl)')}\n                </div>\n                {selectedKey && (\n                    <div className={classNames.buttonsContainer}>\n                        {getObjectKeys(Buttons).map(key => (\n                            <PasteOptionButton\n                                key={key}\n                                strings={strings}\n                                paste={paste}\n                                buttonName={key}\n                                className={\n                                    classNames.button +\n                                    ' ' +\n                                    (selectedKey == key ? classNames.isChecked : '')\n                                }\n                            />\n                        ))}\n                    </div>\n                )}\n            </div>\n        </Callout>\n    );\n});\n\n/**\n * @internal Show paste open pane component\n * @param uiUtilities The UI utilities object to help render component\n * @param position Target position\n * @param strings Localize string for this component\n * @param onPaste A callback to be called when user click on a paste button\n * @param ref Reference object for this component\n */\nexport default function showPasteOptionPane(\n    uiUtilities: UIUtilities,\n    position: NodePosition,\n    onPaste: (key: PasteOptionButtonKeys) => void,\n    ref: React.RefObject<PasteOptionPane>,\n    strings?: LocalizedStrings<PasteOptionStringKeys>\n) {\n    let disposer: (() => void) | null = null;\n    const onDismiss = () => {\n        disposer?.();\n        disposer = null;\n    };\n\n    disposer = renderReactComponent(\n        uiUtilities,\n        <PasteOptionComponent\n            ref={ref}\n            position={position}\n            strings={strings}\n            isRtl={uiUtilities.isRightToLeft()}\n            dismiss={onDismiss}\n            paste={onPaste}\n        />\n    );\n}\n","export { PasteOptionButtonKeys, PasteOptionStringKeys } from './type/PasteOptionStringKeys';\nexport { default as createPasteOptionPlugin } from './plugin/createPasteOptionPlugin';\n","import * as React from 'react';\nimport showPasteOptionPane, { PasteOptionPane } from '../component/showPasteOptionPane';\nimport { ButtonKeys, Buttons } from '../utils/buttons';\nimport { ClipboardData, IEditor, Keys, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { LocalizedStrings, ReactEditorPlugin, UIUtilities } from '../../common/index';\nimport { PasteOptionButtonKeys, PasteOptionStringKeys } from '../type/PasteOptionStringKeys';\n\nclass PasteOptionPlugin implements ReactEditorPlugin {\n    private clipboardData: ClipboardData | null = null;\n    private editor: IEditor | null = null;\n    private uiUtilities: UIUtilities | null = null;\n    private pasteOptionRef = React.createRef<PasteOptionPane>();\n\n    constructor(private strings?: LocalizedStrings<PasteOptionStringKeys>) {}\n\n    getName() {\n        return 'PasteOption';\n    }\n\n    initialize(editor: IEditor) {\n        this.editor = editor;\n    }\n\n    dispose() {\n        this.pasteOptionRef.current?.dismiss();\n        this.editor = null;\n    }\n\n    onPluginEvent(event: PluginEvent) {\n        if (event.eventType == PluginEventType.Scroll) {\n            if (this.pasteOptionRef.current) {\n                this.showPasteOptionPane();\n            }\n        } else if (this.pasteOptionRef.current) {\n            this.handlePasteOptionPaneEvent(event);\n        } else if (event.eventType == PluginEventType.ContentChanged) {\n            if (event.source == 'Paste') {\n                const clipboardData = event.data as ClipboardData;\n\n                // Only show paste option when we pasted HTML with some format\n                if (clipboardData?.text && clipboardData.types?.indexOf('text/html') >= 0) {\n                    this.clipboardData = clipboardData;\n                    this.showPasteOptionPane();\n                }\n            }\n        }\n    }\n\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n\n    private handlePasteOptionPaneEvent(event: PluginEvent) {\n        if (event.eventType == PluginEventType.KeyDown && this.pasteOptionRef.current) {\n            const selectedKey = this.pasteOptionRef.current.getSelectedKey();\n\n            if (!selectedKey) {\n                switch (event.rawEvent.which) {\n                    case Keys.CTRL_LEFT:\n                        this.pasteOptionRef.current.setSelectedKey(ButtonKeys[0]);\n                        cancelEvent(event.rawEvent);\n                        break;\n\n                    case Keys.ESCAPE:\n                        this.pasteOptionRef.current.dismiss();\n                        cancelEvent(event.rawEvent);\n                        break;\n\n                    default:\n                        this.pasteOptionRef.current.dismiss();\n                        break;\n                }\n            } else {\n                const keyboardEvent = event.rawEvent;\n\n                if (keyboardEvent.which != Keys.CTRL_LEFT && keyboardEvent.ctrlKey) {\n                    // Dismiss the paste option when pressing hotkey CTRL+<any key>\n                    this.pasteOptionRef.current.dismiss();\n                    return;\n                }\n\n                for (let i = 0; i < ButtonKeys.length; i++) {\n                    const key = ButtonKeys[i];\n                    const button = Buttons[key];\n                    if (button.shortcut == String.fromCharCode(keyboardEvent.which)) {\n                        this.onPaste(key);\n                        cancelEvent(keyboardEvent);\n                        return;\n                    }\n                }\n\n                switch (keyboardEvent.which) {\n                    case Keys.ESCAPE:\n                        this.pasteOptionRef.current.dismiss();\n                        break;\n                    case Keys.LEFT:\n                    case Keys.RIGHT:\n                        const buttonCount = ButtonKeys.length;\n                        const diff =\n                            (keyboardEvent.which == Keys.RIGHT) == this.uiUtilities?.isRightToLeft()\n                                ? -1\n                                : 1;\n                        this.pasteOptionRef.current.setSelectedKey(\n                            ButtonKeys[\n                                (ButtonKeys.indexOf(selectedKey) + diff + buttonCount) % buttonCount\n                            ]\n                        );\n                        break;\n                    case Keys.ENTER:\n                        this.onPaste(selectedKey);\n                        break;\n                    case Keys.CTRL_LEFT:\n                        // Noop\n                        break;\n                    default:\n                        this.pasteOptionRef.current.dismiss();\n                        return;\n                }\n\n                cancelEvent(keyboardEvent);\n            }\n        }\n    }\n\n    private onPaste = (key: PasteOptionButtonKeys) => {\n        if (this.clipboardData && this.editor) {\n            this.editor.focus();\n\n            switch (key) {\n                case 'pasteOptionPasteAsIs':\n                    this.editor.paste(this.clipboardData);\n                    break;\n\n                case 'pasteOptionPasteText':\n                    this.editor.paste(this.clipboardData, true /*pasteAsText*/);\n                    break;\n\n                case 'pasteOptionMergeFormat':\n                    this.editor.paste(\n                        this.clipboardData,\n                        false /*pasteAsText*/,\n                        true /*applyCurrentFormat*/\n                    );\n                    break;\n                case 'pasteOptionPasteAsImage':\n                    this.editor.paste(\n                        this.clipboardData,\n                        false /*pasteAsText*/,\n                        false /*applyCurrentFormat*/,\n                        true /** pasteAsImage **/\n                    );\n            }\n\n            this.pasteOptionRef.current?.setSelectedKey(key);\n        }\n    };\n\n    private showPasteOptionPane() {\n        this.pasteOptionRef.current?.dismiss();\n\n        const focusedPosition = this.editor?.getFocusedPosition();\n\n        if (focusedPosition && this.uiUtilities) {\n            showPasteOptionPane(\n                this.uiUtilities,\n                focusedPosition,\n                this.onPaste,\n                this.pasteOptionRef,\n                this.strings\n            );\n        }\n    }\n}\n\nfunction cancelEvent(event: UIEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n}\n\n/**\n * Create a new instance of PasteOption plugin to show an option pane when paste, so that user can choose\n * an option to change the paste result, including:\n * - Paste as is\n * - Paste as text\n * - Paste and merge format\n * @param strings Localized string for this plugin\n * @returns A paste option plugin\n */\nexport default function createPasteOptionPlugin(\n    strings?: LocalizedStrings<PasteOptionStringKeys>\n): ReactEditorPlugin {\n    return new PasteOptionPlugin(strings);\n}\n","import { PasteOptionButtonKeys } from '../type/PasteOptionStringKeys';\n\n/**\n * @internal\n */\nexport interface PasteOptionButtonType {\n    unlocalizedText: string;\n    shortcut: string;\n    icon: string;\n}\n\n/**\n * @internal\n */\nexport const Buttons: Record<PasteOptionButtonKeys, PasteOptionButtonType> = {\n    pasteOptionPasteAsIs: {\n        unlocalizedText: 'Paste as is',\n        shortcut: 'P',\n        icon: 'Paste',\n    },\n    pasteOptionPasteText: {\n        unlocalizedText: 'Paste text',\n        shortcut: 'T',\n        icon: 'PasteAsText',\n    },\n    pasteOptionMergeFormat: {\n        unlocalizedText: 'Paste text and merge format',\n        shortcut: 'M',\n        icon: 'ClipboardList',\n    },\n    pasteOptionPasteAsImage: {\n        unlocalizedText: 'Paste as image',\n        shortcut: 'I',\n        icon: 'PictureFill',\n    },\n};\n\n/**\n * @internal\n */\nexport const ButtonKeys: PasteOptionButtonKeys[] = Object.keys(Buttons) as PasteOptionButtonKeys[];\n","import * as React from 'react';\nimport getLocalizedString from '../../common/utils/getLocalizedString';\nimport RibbonButton from '../type/RibbonButton';\nimport RibbonProps from '../type/RibbonProps';\nimport { CommandBar, ICommandBarItemProps } from '@fluentui/react/lib/CommandBar';\nimport { FocusZoneDirection } from '@fluentui/react/lib/FocusZone';\nimport { FormatState } from 'roosterjs-editor-types';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { IContextualMenuItem, IContextualMenuItemProps } from '@fluentui/react/lib/ContextualMenu';\nimport { mergeStyles } from '@fluentui/react/lib/Styling';\nimport { moreCommands } from './buttons/moreCommands';\nimport type { IRenderFunction } from '@fluentui/react/lib/Utilities';\n\nconst ribbonClassName = mergeStyles({\n    '& .ms-CommandBar': {\n        padding: '0px',\n    },\n});\n\nconst rtlIcon = mergeStyles({\n    transform: 'scaleX(-1)',\n});\n\n/**\n * The format ribbon component of roosterjs-react\n * @param props Properties of format ribbon component\n * @returns The format ribbon component\n */\nexport default function Ribbon<T extends string>(props: RibbonProps<T>) {\n    const { plugin, buttons, strings, dir } = props;\n    const [formatState, setFormatState] = React.useState<FormatState | null>(null);\n    const isRtl = dir == 'rtl';\n\n    const onClick = React.useCallback(\n        (_, item?: IContextualMenuItem) => {\n            if (item) {\n                plugin?.onButtonClick<string>(item.data, item.key, strings);\n            }\n        },\n        [plugin, strings]\n    );\n\n    const onHover = React.useCallback(\n        (button: RibbonButton<T>, key: string) => {\n            plugin.startLivePreview<T>(button, key as T, strings);\n        },\n        [plugin, strings]\n    );\n\n    const onDismiss = React.useCallback(() => {\n        plugin.stopLivePreview();\n    }, [plugin]);\n\n    const flipIcon = React.useCallback(\n        (\n            props?: IContextualMenuItemProps,\n            defaultRender?: (props?: IContextualMenuItemProps) => JSX.Element | null\n        ): JSX.Element | null => {\n            if (!defaultRender) {\n                return null;\n            }\n            return <span className={rtlIcon}>{defaultRender(props)}</span>;\n        },\n        []\n    );\n\n    const commandBarItems = React.useMemo((): ICommandBarItemProps[] => {\n        return buttons.map(\n            (button): ICommandBarItemProps => {\n                const selectedItem =\n                    formatState && button.dropDownMenu?.getSelectedItemKey?.(formatState);\n                const dropDownMenu = button.dropDownMenu;\n\n                const result: ICommandBarItemProps = {\n                    key: button.key,\n                    data: button,\n                    iconProps: {\n                        iconName: button.iconName,\n                    },\n                    onRenderIcon: isRtl && button.flipWhenRtl ? flipIcon : undefined,\n                    iconOnly: true,\n                    text: getLocalizedString(strings, button.key, button.unlocalizedText),\n                    ariaLabel: getLocalizedString(strings, button.key, button.unlocalizedText),\n                    canCheck: true,\n                    checked: (formatState && button.isChecked?.(formatState)) || false,\n                    disabled: (formatState && button.isDisabled?.(formatState)) || false,\n                    ...(button.commandBarProperties || {}),\n                };\n\n                const contextMenuItemRenderer: IRenderFunction<IContextualMenuItem> = (\n                    props,\n                    defaultRenderer\n                ) =>\n                    props && defaultRenderer ? (\n                        <div onMouseOver={e => onHover(button, props.key)}>\n                            {defaultRenderer(props)}\n                        </div>\n                    ) : null;\n\n                if (dropDownMenu) {\n                    result.subMenuProps = {\n                        shouldFocusOnMount: true,\n                        focusZoneProps: { direction: FocusZoneDirection.bidirectional },\n                        onMenuDismissed: onDismiss,\n                        onItemClick: onClick,\n                        onRenderContextualMenuItem: dropDownMenu.allowLivePreview\n                            ? contextMenuItemRenderer\n                            : undefined,\n                        items: getObjectKeys(dropDownMenu.items).map(key => ({\n                            key: key,\n                            text: getLocalizedString<string, string>(\n                                strings,\n                                key,\n                                dropDownMenu.items[key]\n                            ),\n                            data: button,\n                            canCheck: !!dropDownMenu.getSelectedItemKey,\n                            checked: selectedItem == key || false,\n                            className: dropDownMenu.itemClassName,\n                            onRender: dropDownMenu.itemRender\n                                ? item => dropDownMenu.itemRender!(item, onClick)\n                                : undefined,\n                        })),\n                        ...(dropDownMenu.commandBarSubMenuProperties || {}),\n                    };\n                } else {\n                    result.onClick = onClick;\n                }\n\n                return result;\n            }\n        );\n    }, [buttons, formatState, isRtl, strings, onClick, onDismiss, onHover]);\n\n    React.useEffect(() => {\n        const disposer = plugin?.registerFormatChangedCallback(setFormatState);\n\n        return () => {\n            disposer?.();\n        };\n    }, [plugin]);\n\n    const moreCommandsBtn = moreCommands as RibbonButton<string>;\n\n    return (\n        <CommandBar\n            items={commandBarItems}\n            {...props}\n            className={ribbonClassName + ' ' + (props?.className || '')}\n            overflowButtonProps={{\n                ariaLabel: getLocalizedString<string, string>(\n                    strings,\n                    moreCommandsBtn.key,\n                    moreCommandsBtn.unlocalizedText\n                ),\n                ...props?.overflowButtonProps,\n            }}\n        />\n    );\n}\n","import RibbonButton from '../../type/RibbonButton';\nimport { AlignCenterButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { Alignment } from 'roosterjs-editor-types';\nimport { setAlignment } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Align center\" button on the format ribbon\n */\nexport const alignCenter: RibbonButton<AlignCenterButtonStringKey> = {\n    key: 'buttonNameAlignCenter',\n    unlocalizedText: 'Align center',\n    iconName: 'AlignCenter',\n    onClick: editor => {\n        setAlignment(editor, Alignment.Center);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { AlignLeftButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { Alignment } from 'roosterjs-editor-types';\nimport { setAlignment } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Align left\" button on the format ribbon\n */\nexport const alignLeft: RibbonButton<AlignLeftButtonStringKey> = {\n    key: 'buttonNameAlignLeft',\n    unlocalizedText: 'Align left',\n    iconName: 'AlignLeft',\n    onClick: editor => {\n        setAlignment(editor, Alignment.Left);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { Alignment } from 'roosterjs-editor-types';\nimport { AlignRightButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { setAlignment } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Align right\" button on the format ribbon\n */\nexport const alignRight: RibbonButton<AlignRightButtonStringKey> = {\n    key: 'buttonNameAlignRight',\n    unlocalizedText: 'Align right',\n    iconName: 'AlignRight',\n    onClick: editor => {\n        setAlignment(editor, Alignment.Right);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { BackgroundColorButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { renderColorPicker } from '../../../colorPicker/component/renderColorPicker';\nimport { setBackgroundColor } from 'roosterjs-editor-api';\nimport {\n    getColorPickerContainerClassName,\n    getColorPickerItemClassName,\n} from '../../../colorPicker/utils/getClassNamesForColorPicker';\nimport {\n    BackgroundColorDropDownItems,\n    BackgroundColors,\n    getBackgroundColorValue,\n} from '../../../colorPicker/utils/backgroundColors';\n\nconst Key: 'buttonNameBackgroundColor' = 'buttonNameBackgroundColor';\n\n/**\n * @internal\n * \"Background color\" button on the format ribbon\n */\nexport const backgroundColor: RibbonButton<BackgroundColorButtonStringKey> = {\n    dropDownMenu: {\n        items: BackgroundColorDropDownItems,\n        itemClassName: getColorPickerItemClassName(),\n        allowLivePreview: true,\n        itemRender: (item, onClick) => renderColorPicker(item, BackgroundColors, onClick),\n        commandBarSubMenuProperties: {\n            className: getColorPickerContainerClassName(),\n        },\n    },\n    key: Key,\n    unlocalizedText: 'Background color',\n    iconName: 'FabricTextHighlight',\n    onClick: (editor, key) => {\n        // This check will always be true, add it here just to satisfy compiler\n        if (key != Key) {\n            setBackgroundColor(editor, getBackgroundColorValue(key));\n        }\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { BoldButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleBold } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Bold\" button on the format ribbon\n */\nexport const bold: RibbonButton<BoldButtonStringKey> = {\n    key: 'buttonNameBold',\n    unlocalizedText: 'Bold',\n    iconName: 'Bold',\n    isChecked: formatState => !!formatState.isBold,\n    onClick: editor => {\n        toggleBold(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { BulletedListButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleBullet } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Bulleted list\" button on the format ribbon\n */\nexport const bulletedList: RibbonButton<BulletedListButtonStringKey> = {\n    key: 'buttonNameBulletedList',\n    unlocalizedText: 'Bulleted list',\n    iconName: 'BulletedList',\n    isChecked: formatState => !!formatState.isBullet,\n    onClick: editor => {\n        toggleBullet(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { clearFormat as clearFormatApi } from 'roosterjs-editor-api';\nimport { ClearFormatButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { ClearFormatMode } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * \"Clear format\" button on the format ribbon\n */\nexport const clearFormat: RibbonButton<ClearFormatButtonStringKey> = {\n    key: 'buttonNameClearFormat',\n    unlocalizedText: 'Clear format',\n    iconName: 'ClearFormatting',\n    onClick: editor => {\n        clearFormatApi(editor, ClearFormatMode.AutoDetect);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { CodeButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleCodeBlock } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Code\" button on the format ribbon\n */\nexport const code: RibbonButton<CodeButtonStringKey> = {\n    key: 'buttonNameCode',\n    unlocalizedText: 'Code',\n    iconName: 'Code',\n    isChecked: formatState => !!formatState.isCodeBlock,\n    onClick: editor => {\n        toggleCodeBlock(editor);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { changeFontSize } from 'roosterjs-editor-api';\nimport { DecreaseFontSizeButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { FontSizeChange } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * \"Decrease font size\" button on the format ribbon\n */\nexport const decreaseFontSize: RibbonButton<DecreaseFontSizeButtonStringKey> = {\n    key: 'buttonNameDecreaseFontSize',\n    unlocalizedText: 'Decrease font size',\n    iconName: 'FontDecrease',\n    onClick: editor => {\n        changeFontSize(editor, FontSizeChange.Decrease);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { DecreaseIndentButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { Indentation } from 'roosterjs-editor-types';\nimport { setIndentation } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Decrease indent\" button on the format ribbon\n */\nexport const decreaseIndent: RibbonButton<DecreaseIndentButtonStringKey> = {\n    key: 'buttonNameDecreaseIndent',\n    unlocalizedText: 'Decrease indent',\n    iconName: 'DecreaseIndentLegacy',\n    flipWhenRtl: true,\n    onClick: editor => {\n        setIndentation(editor, Indentation.Decrease);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { FontButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { setFontName } from 'roosterjs-editor-api';\n\ninterface FontName {\n    name: string;\n    family: string;\n    localizedName?: string;\n}\nconst FontNames: FontName[] = [\n    { name: 'Arial', family: 'Arial,Helvetica,sans-serif' },\n    { name: 'Arial Black', family: \"'Arial Black',Arial,sans-serif\" },\n    { name: 'Calibri', family: 'Calibri,Helvetica,sans-serif' },\n    { name: 'Calibri Light', family: \"'Calibri Light','Helvetica Light',sans-serif\" },\n    { name: 'Cambria', family: 'Cambria,Georgia,serif' },\n    { name: 'Candara', family: 'Candara,Optima,sans-serif' },\n    { name: 'Century Gothic', family: \"'Century Gothic',sans-serif\" },\n    { name: 'Comic Sans MS', family: \"'Comic Sans MS',Chalkboard,cursive\" },\n    { name: 'Consolas', family: 'Consolas,Courier,monospace' },\n    { name: 'Constantia', family: \"Constantia,'Hoefler Text',serif\" },\n    { name: 'Corbel', family: 'Corbel,Skia,sans-serif' },\n    { name: 'Courier New', family: \"'Courier New',monospace\" },\n    {\n        name: 'Franklin Gothic Book',\n        family: \"'Franklin Gothic Book','Avenir Next Condensed',sans-serif\",\n    },\n    {\n        name: 'Franklin Gothic Demi',\n        family: \"'Franklin Gothic Demi','Avenir Next Condensed Demi Bold',sans-serif\",\n    },\n    {\n        name: 'Franklin Gothic Medium',\n        family: \"'Franklin Gothic Medium','Avenir Next Condensed Medium',sans-serif\",\n    },\n    { name: 'Garamond', family: 'Garamond,Georgia,serif' },\n    { name: 'Georgia', family: 'Georgia,serif' },\n    { name: 'Impact', family: 'Impact,Charcoal,sans-serif' },\n    { name: 'Lucida Console', family: \"'Lucida Console',Monaco,monospace\" },\n    { name: 'Lucida Handwriting', family: \"'Lucida Handwriting','Apple Chancery',cursive\" },\n    { name: 'Lucida Sans Unicode', family: \"'Lucida Sans Unicode','Lucida Grande',sans-serif\" },\n    { name: 'Palatino Linotype', family: \"'Palatino Linotype','Book Antiqua',Palatino,serif\" },\n    {\n        name: 'Segoe UI',\n        family: \"'Segoe UI', 'Segoe UI Web (West European)', 'Helvetica Neue', sans-serif\",\n    },\n    { name: 'Sitka Heading', family: \"'Sitka Heading',Cochin,serif\" },\n    { name: 'Sitka Text', family: \"'Sitka Text',Cochin,serif\" },\n    { name: 'Tahoma', family: 'Tahoma,Geneva,sans-serif' },\n    { name: 'Times', family: \"Times,'Times New Roman',serif\" },\n    { name: 'Times New Roman', family: \"'Times New Roman',Times,serif\" },\n    { name: 'Trebuchet MS', family: \"'Trebuchet MS',Trebuchet,sans-serif\" },\n    { name: 'TW Cen MT', family: \"'TW Cen MT','Century Gothic',sans-serif\" },\n    { name: 'Verdana', family: 'Verdana,Geneva,sans-serif' },\n    { name: '-', family: 'FontDivider0' }, //divider between fonts for different scripts (order is by style)\n    {\n        name: 'Microsoft YaHei',\n        family: \"'Microsoft YaHei','微软雅黑',STHeiti,sans-serif\",\n        localizedName: '微软雅黑',\n    }, //chineseS Microsoft recommended font\n    { name: 'SimHei', family: \"SimHei,'黑体',STHeiti,sans-serif\", localizedName: '黑体' }, //chineseS\n    {\n        name: 'NSimSun',\n        family: \"NSimSun,'新宋体',SimSun,'宋体',SimSun-ExtB,'宋体-ExtB',STSong,serif\",\n        localizedName: '新宋体',\n    }, //chineseS\n    { name: 'FangSong', family: \"FangSong,'仿宋',STFangsong,serif\", localizedName: '仿宋' }, //chineseS\n    { name: 'SimLi', family: \"SimLi,'隶书','Baoli SC',serif\", localizedName: '隶书' }, //chineseS\n    { name: 'KaiTi', family: \"KaiTi,'楷体',STKaiti,serif\", localizedName: '楷体' }, //chineseS\n    { name: '-', family: 'FontDivider1' }, //divider between fonts for different scripts (order is by style)\n    {\n        name: 'Microsoft JhengHei',\n        family: \"'Microsoft JhengHei','微軟正黑體','Apple LiGothic',sans-serif\",\n        localizedName: '微軟正黑體',\n    }, //chineseT Microsoft recommended font\n    {\n        name: 'PMingLiU',\n        family: \"PMingLiU,'新細明體',PMingLiU-ExtB,'新細明體-ExtB','Apple LiSung',serif\",\n        localizedName: '新細明體',\n    }, //chineseT\n    { name: 'DFKai-SB', family: \"DFKai-SB,'標楷體','BiauKai',serif\", localizedName: '標楷體' }, //chineseT\n    { name: '-', family: 'FontDivider2' }, //divider between fonts for different scripts (order is alphabetical by foundry)\n    {\n        name: 'Meiryo',\n        family: \"Meiryo,'メイリオ','Hiragino Sans',sans-serif\",\n        localizedName: 'メイリオ',\n    }, //japanese\n    {\n        name: 'MS PGothic',\n        family:\n            \"'MS PGothic','ＭＳ Ｐゴシック','MS Gothic','ＭＳ ゴシック','Hiragino Kaku Gothic ProN',sans-serif\",\n        localizedName: 'ＭＳ Ｐゴシック',\n    }, //japanese\n    {\n        name: 'MS PMincho',\n        family: \"'MS PMincho','ＭＳ Ｐ明朝','MS Mincho','ＭＳ 明朝','Hiragino Mincho ProN',serif\",\n        localizedName: 'ＭＳ Ｐ明朝',\n    }, //japanese\n    {\n        name: 'Yu Gothic',\n        family: \"'Yu Gothic','游ゴシック','YuGothic',sans-serif\",\n        localizedName: '游ゴシック',\n    }, //japanese\n    { name: 'Yu Mincho', family: \"'Yu Mincho','游明朝','YuMincho',serif\", localizedName: '游明朝' }, //japanese\n    { name: '-', family: 'FontDivider3' }, //divider between fonts for different scripts (order is for legacy reasons)\n    {\n        name: 'Malgun Gothic',\n        family: \"'Malgun Gothic','맑은 고딕',AppleGothic,sans-serif\",\n        localizedName: '맑은 고딕',\n    }, //korean Microsoft recommended font\n    { name: 'Gulim', family: \"Gulim,'굴림','Nanum Gothic',sans-serif\", localizedName: '굴림' }, //korean\n    { name: 'Dotum', family: \"Dotum,'돋움',AppleGothic,sans-serif\", localizedName: '돋움' }, //korean\n    { name: 'Batang', family: \"Batang,'바탕',AppleMyungjo,serif\", localizedName: '바탕' }, //korean\n    { name: 'BatangChe', family: \"BatangChe,'바탕체',AppleMyungjo,serif\", localizedName: '바탕체' }, //korean\n    { name: 'Gungsuh', family: \"Gungsuh,'궁서',GungSeo,serif\", localizedName: '궁서' }, //korean\n    { name: '-', family: 'FontDivider4' }, //divider between fonts for different scripts (order is alphabetical)\n    { name: 'Leelawadee UI', family: \"'Leelawadee UI',Thonburi,sans-serif\" }, //thai Microsoft recommended font\n    { name: 'Angsana New', family: \"'Angsana New','Leelawadee UI',Sathu,serif\" }, //thai\n    { name: 'Cordia New', family: \"'Cordia New','Leelawadee UI',Silom,sans-serif\" }, //thai\n    { name: 'DaunPenh', family: \"DaunPenh,'Leelawadee UI','Khmer MN',sans-serif\" }, //khmer\n    { name: '-', family: 'FontDivider5' }, //divider between fonts for different scripts (order is alphabetical)\n    { name: 'Nirmala UI', family: \"'Nirmala UI',sans-serif\" }, //indic Microsoft recommended font\n    { name: 'Gautami', family: \"Gautami,'Nirmala UI','Telugu MN',sans-serif\" }, //indic\n    { name: 'Iskoola Pota', family: \"'Iskoola Pota','Nirmala UI','Sinhala MN',sans-serif\" }, //indic\n    { name: 'Kalinga', family: \"Kalinga,'Nirmala UI','Oriya MN',sans-serif\" }, //indic\n    { name: 'Kartika', family: \"Kartika,'Nirmala UI','Malayalam MN',sans-serif\" }, //indic\n    { name: 'Latha', family: \"Latha,'Nirmala UI','Tamil MN',sans-serif\" }, //indic\n    { name: 'Mangal', family: \"Mangal,'Nirmala UI','Devanagari Sangam MN',sans-serif\" }, //indic\n    { name: 'Raavi', family: \"Raavi,'Nirmala UI','Gurmukhi MN',sans-serif\" }, //indic\n    { name: 'Shruti', family: \"Shruti,'Nirmala UI','Gujarati Sangam MN',sans-serif\" }, //indic\n    { name: 'Tunga', family: \"Tunga,'Nirmala UI','Kannada MN',sans-serif\" }, //indic\n    { name: 'Vrinda', family: \"Vrinda,'Nirmala UI','Bangla MN',sans-serif\" }, //indic\n    { name: '-', family: 'FontDivider6' }, //divider between fonts for different scripts\n    { name: 'Nyala', family: 'Nyala,Kefa,sans-serif' }, //other-ethiopic\n    { name: 'Sylfaen', family: 'Sylfaen,Mshtakan,Menlo,serif' }, //other-armenian-georgian\n];\n\nconst DropDownItems = FontNames.reduce((items, font) => {\n    items[font.family] = font.localizedName || font.name;\n    return items;\n}, <Record<string, string>>{});\n\nconst LowerCaseFontMap = FontNames.reduce((items, font) => {\n    items[font.name.toLowerCase()] = font.family;\n    return items;\n}, <Record<string, string>>{});\n\nconst FirstFontRegex = /^['\"]?([^'\",]+)/i;\n\n/**\n * @internal\n * \"Font\" button on the format ribbon\n */\nexport const font: RibbonButton<FontButtonStringKey> = {\n    key: 'buttonNameFont',\n    unlocalizedText: 'Font',\n    iconName: 'Font',\n    dropDownMenu: {\n        items: DropDownItems,\n        getSelectedItemKey: formatState => {\n            const matches = formatState.fontName?.match(FirstFontRegex);\n            const firstName = matches?.[1]?.toLowerCase();\n            const selectedKey = (firstName && LowerCaseFontMap[firstName]) || '';\n\n            return selectedKey;\n        },\n        allowLivePreview: true,\n    },\n    onClick: (editor, font) => {\n        setFontName(editor, font);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { FONT_SIZES, setFontSize } from 'roosterjs-editor-api';\nimport { FontSizeButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Font Size\" button on the format ribbon\n */\nexport const fontSize: RibbonButton<FontSizeButtonStringKey> = {\n    key: 'buttonNameFontSize',\n    unlocalizedText: 'Font size',\n    iconName: 'FontSize',\n    dropDownMenu: {\n        items: FONT_SIZES.reduce((map, size) => {\n            map[size + 'pt'] = size.toString();\n            return map;\n        }, <Record<string, string>>{}),\n        getSelectedItemKey: formatState => formatState.fontSize ?? null,\n        allowLivePreview: true,\n    },\n    onClick: (editor, size) => {\n        setFontSize(editor, size);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { HeaderButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleHeader } from 'roosterjs-editor-api';\n\nconst headers: Partial<Record<HeaderButtonStringKey, string>> = {\n    buttonNameHeader1: 'Header 1',\n    buttonNameHeader2: 'Header 2',\n    buttonNameHeader3: 'Header 3',\n    buttonNameHeader4: 'Header 4',\n    buttonNameHeader5: 'Header 5',\n    buttonNameHeader6: 'Header 6',\n    '-': '-',\n    buttonNameNoHeader: 'No header',\n};\n\n/**\n * @internal\n * \"Header\" button on the format ribbon\n */\nexport const header: RibbonButton<HeaderButtonStringKey> = {\n    key: 'buttonNameHeader',\n    unlocalizedText: 'Header',\n    iconName: 'Header1',\n    dropDownMenu: {\n        items: headers,\n        getSelectedItemKey: formatState => {\n            return (formatState.headerLevel ?? 0) > 0\n                ? 'header' + formatState.headerLevel\n                : 'noHeader';\n        },\n    },\n    onClick: (editor, key) => {\n        const index = getObjectKeys(headers).indexOf(key) + 1;\n\n        if (index > 6) {\n            toggleHeader(editor, 0);\n        } else if (index > 0) {\n            toggleHeader(editor, index);\n        }\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { changeFontSize } from 'roosterjs-editor-api';\nimport { FontSizeChange } from 'roosterjs-editor-types';\nimport { IncreaseFontSizeButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Increase font size\" button on the format ribbon\n */\nexport const increaseFontSize: RibbonButton<IncreaseFontSizeButtonStringKey> = {\n    key: 'buttonNameIncreaseFontSize',\n    unlocalizedText: 'Increase font size',\n    iconName: 'FontIncrease',\n    onClick: editor => {\n        changeFontSize(editor, FontSizeChange.Increase);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { IncreaseIndentButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { Indentation } from 'roosterjs-editor-types';\nimport { setIndentation } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Increase indent\" button on the format ribbon\n */\nexport const increaseIndent: RibbonButton<IncreaseIndentButtonStringKey> = {\n    key: 'buttonNameIncreaseIndent',\n    unlocalizedText: 'Increase indent',\n    iconName: 'IncreaseIndentLegacy',\n    flipWhenRtl: true,\n    onClick: editor => {\n        setIndentation(editor, Indentation.Increase);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { createElement } from 'roosterjs-editor-dom';\nimport { CreateElementData } from 'roosterjs-editor-types';\nimport { insertImage as insertImageApi } from 'roosterjs-editor-api';\nimport { InsertImageButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\nconst FileInput: CreateElementData = {\n    tag: 'input',\n    attributes: {\n        type: 'file',\n        accept: 'image/*',\n        display: 'none',\n    },\n};\n\n/**\n * @internal\n * \"Insert image\" button on the format ribbon\n */\nexport const insertImage: RibbonButton<InsertImageButtonStringKey> = {\n    key: 'buttonNameInsertImage',\n    unlocalizedText: 'Insert image',\n    iconName: 'Photo2',\n    onClick: editor => {\n        const document = editor.getDocument();\n        const fileInput = createElement(FileInput, document) as HTMLInputElement;\n        document.body.appendChild(fileInput);\n\n        fileInput.addEventListener('change', () => {\n            if (fileInput.files) {\n                for (let i = 0; i < fileInput.files.length; i++) {\n                    insertImageApi(editor, fileInput.files[i]);\n                }\n            }\n        });\n\n        try {\n            fileInput.click();\n        } finally {\n            document.body.removeChild(fileInput);\n        }\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport showInputDialog from '../../../inputDialog/utils/showInputDialog';\nimport { createLink } from 'roosterjs-editor-api';\nimport { InsertLinkButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { QueryScope } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * \"Insert link\" button on the format ribbon\n */\nexport const insertLink: RibbonButton<InsertLinkButtonStringKey> = {\n    key: 'buttonNameInsertLink',\n    unlocalizedText: 'Insert link',\n    iconName: 'Link',\n    isDisabled: formatState => !!formatState.isMultilineSelection,\n    onClick: (editor, _, strings, uiUtilities) => {\n        const existingLink = editor.queryElements<HTMLAnchorElement>(\n            'a[href]',\n            QueryScope.OnSelection\n        )[0];\n        const url = existingLink?.href || '';\n        const displayText =\n            existingLink?.textContent || editor.getSelectionRange()?.toString() || '';\n        const items = {\n            url: {\n                autoFocus: true,\n                labelKey: 'insertLinkDialogUrl' as const,\n                unlocalizedLabel: 'Web address (URL)',\n                initValue: url,\n            },\n            displayText: {\n                labelKey: 'insertLinkDialogDisplayAs' as const,\n                unlocalizedLabel: 'Display as',\n                initValue: displayText,\n            },\n        };\n\n        showInputDialog(\n            uiUtilities,\n            'insertLinkTitle',\n            'Insert link',\n            items,\n            strings,\n            (itemName, newValue, values) => {\n                if (itemName == 'url' && values.displayText == values.url) {\n                    values.displayText = newValue;\n                    values.url = newValue;\n                    return values;\n                } else {\n                    return null;\n                }\n            }\n        ).then(result => {\n            editor.focus();\n\n            if (\n                result &&\n                result.displayText &&\n                result.url &&\n                (result.displayText != displayText || result.url != url)\n            ) {\n                createLink(editor, result.url, result.url, result.displayText);\n            }\n        });\n    },\n};\n","import * as React from 'react';\nimport RibbonButton from '../../type/RibbonButton';\nimport { FocusZone, FocusZoneDirection } from '@fluentui/react/lib/FocusZone';\nimport { IContextualMenuItem } from '@fluentui/react/lib/ContextualMenu';\nimport { insertTable as insertTableApi } from 'roosterjs-editor-api';\nimport { InsertTableButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { mergeStyleSets } from '@fluentui/react/lib/Styling';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\nconst MaxRows = 10;\nconst MaxCols = 10;\nconst classNames = mergeStyleSets({\n    tableButton: {\n        width: '15px',\n        height: '15px',\n        margin: '1px 1px 0 0',\n        border: 'solid 1px #a19f9d',\n        display: 'inline-block',\n        cursor: 'pointer',\n        backgroundColor: 'transparent',\n    },\n    hovered: {\n        border: 'solid 1px #DB626C',\n    },\n    tablePane: {\n        width: '160px',\n        minWidth: 'auto',\n        padding: '4px',\n        boxSizing: 'content-box',\n    },\n    tablePaneInner: {\n        lineHeight: '12px',\n    },\n    title: {\n        margin: '5px 0',\n    },\n});\n\n/**\n * @internal\n * \"Insert table\" button on the format ribbon\n */\nexport const insertTable: RibbonButton<InsertTableButtonStringKey> = {\n    key: 'buttonNameInsertTable',\n    unlocalizedText: 'Insert table',\n    iconName: 'Table',\n    onClick: (editor, key) => {\n        const { row, col } = parseKey(key);\n        insertTableApi(editor, col, row);\n    },\n    dropDownMenu: {\n        items: {\n            insertTablePane: '{0} x {1} table',\n        },\n        itemRender: (item, onClick) => {\n            return <InsertTablePane item={item} onClick={onClick} />;\n        },\n        commandBarSubMenuProperties: {\n            className: classNames.tablePane,\n        },\n    },\n};\n\nfunction InsertTablePane(props: {\n    item: IContextualMenuItem;\n    onClick: (\n        e: React.MouseEvent<Element> | React.KeyboardEvent<Element>,\n        item: IContextualMenuItem\n    ) => void;\n}) {\n    const { item, onClick } = props;\n    const [col, setCol] = React.useState(1);\n    const [row, setRow] = React.useState(1);\n\n    const updateSize = React.useCallback(\n        (t?: HTMLElement | EventTarget) => {\n            if (safeInstanceOf(t, 'HTMLElement')) {\n                const col = parseInt(t.dataset.col ?? '-1');\n                const row = parseInt(t.dataset.row ?? '-1');\n\n                if (col > 0 && col <= MaxCols && row > 0 && row <= MaxRows) {\n                    setCol(col);\n                    setRow(row);\n                }\n            }\n        },\n        [setCol, setRow]\n    );\n\n    const onMouseEnter = React.useCallback(\n        (e: React.MouseEvent<HTMLButtonElement>) => {\n            updateSize(e.target);\n        },\n        [updateSize]\n    );\n\n    const onClickButton = React.useCallback(\n        (e: React.MouseEvent<HTMLButtonElement>) => {\n            onClick(e, {\n                ...item,\n                key: createKey(row, col),\n            });\n        },\n        [row, col, onClick]\n    );\n\n    const ariaLabels = React.useMemo<string[][]>(() => {\n        const result: string[][] = [];\n        for (let i = 1; i <= MaxCols; i++) {\n            let col: string[] = [];\n            for (let j = 1; j <= MaxRows; j++) {\n                col[j] = formatText(item.text ?? '', i, j);\n            }\n            result[i] = col;\n        }\n        return result;\n    }, [item.text]);\n\n    const items = React.useMemo(() => {\n        const items: JSX.Element[] = [];\n\n        for (let i = 1; i <= MaxRows; i++) {\n            for (let j = 1; j <= MaxCols; j++) {\n                const key = `cell_${i}_${j}`;\n                const isSelected = j <= col && i <= row;\n                items.push(\n                    <button\n                        className={\n                            classNames.tableButton + ' ' + (isSelected ? classNames.hovered : '')\n                        }\n                        onClick={onClickButton}\n                        key={key}\n                        id={key}\n                        data-col={j}\n                        data-row={i}\n                        data-is-focusable={true}\n                        onMouseEnter={onMouseEnter}\n                        aria-label={ariaLabels[i][j]}\n                    />\n                );\n            }\n        }\n\n        return items;\n    }, [col, row]);\n\n    const text = formatText(item.text ?? '', row, col);\n\n    return (\n        <div className={classNames.tablePaneInner}>\n            <div className={classNames.title}>{text}</div>\n            <FocusZone\n                defaultActiveElement=\"cell_1_1\"\n                direction={FocusZoneDirection.bidirectional}\n                onActiveElementChanged={updateSize}>\n                {items}\n            </FocusZone>\n        </div>\n    );\n}\n\nfunction formatText(text: string, row: number, col: number) {\n    return text.replace('{0}', col.toString()).replace('{1}', row.toString());\n}\n\nfunction createKey(row: number, col: number) {\n    return `${row},${col}`;\n}\n\nfunction parseKey(key: string): { row: number; col: number } {\n    const [row, col] = key.split(',');\n    return {\n        row: parseInt(row),\n        col: parseInt(col),\n    };\n}\n","import RibbonButton from '../../type/RibbonButton';\nimport { ItalicButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleItalic } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Italic\" button on the format ribbon\n */\nexport const italic: RibbonButton<ItalicButtonStringKey> = {\n    key: 'buttonNameItalic',\n    unlocalizedText: 'Italic',\n    iconName: 'Italic',\n    isChecked: formatState => !!formatState.isItalic,\n    onClick: editor => {\n        toggleItalic(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { Direction } from 'roosterjs-editor-types';\nimport { LtrButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { setDirection } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Left to right\" button on the format ribbon\n */\nexport const ltr: RibbonButton<LtrButtonStringKey> = {\n    key: 'buttonNameLtr',\n    unlocalizedText: 'Left to right',\n    iconName: 'BidiLtr',\n    onClick: editor => {\n        setDirection(editor, Direction.LeftToRight);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { MoreCommandsButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"More commands\" (overflow) button on the format ribbon\n */\nexport const moreCommands: RibbonButton<MoreCommandsButtonStringKey> = {\n    key: 'buttonNameMoreCommands',\n    unlocalizedText: 'More commands',\n    iconName: 'MoreCommands',\n    onClick: editor => {\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { NumberedListButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleNumbering } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Numbered list\" button on the format ribbon\n */\nexport const numberedList: RibbonButton<NumberedListButtonStringKey> = {\n    key: 'buttonNameNumberedList',\n    unlocalizedText: 'Numbered list',\n    iconName: 'NumberedList',\n    isChecked: formatState => !!formatState.isNumbering,\n    onClick: editor => {\n        toggleNumbering(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { QuoteButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleBlockQuote } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Quote\" button on the format ribbon\n */\nexport const quote: RibbonButton<QuoteButtonStringKey> = {\n    key: 'buttonNameQuote',\n    unlocalizedText: 'Quote',\n    iconName: 'RightDoubleQuote',\n    isChecked: formatState => !!formatState.isBlockQuote,\n    onClick: editor => {\n        toggleBlockQuote(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { RedoButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Redo\" button on the format ribbon\n */\nexport const redo: RibbonButton<RedoButtonStringKey> = {\n    key: 'buttonNameRedo',\n    unlocalizedText: 'Redo',\n    iconName: 'Redo',\n    isDisabled: formatState => !formatState.canRedo,\n    onClick: editor => {\n        editor.redo();\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { removeLink as removeLinkApi } from 'roosterjs-editor-api';\nimport { RemoveLinkButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Remove link\" button on the format ribbon\n */\nexport const removeLink: RibbonButton<RemoveLinkButtonStringKey> = {\n    key: 'buttonNameRemoveLink',\n    unlocalizedText: 'Remove link',\n    iconName: 'RemoveLink',\n    isDisabled: formatState => !formatState.canUnlink,\n    onClick: editor => {\n        removeLinkApi(editor);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { Direction } from 'roosterjs-editor-types';\nimport { RtlButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { setDirection } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Right to left\" button on the format ribbon\n */\nexport const rtl: RibbonButton<RtlButtonStringKey> = {\n    key: 'buttonNameRtl',\n    unlocalizedText: 'Right to left',\n    iconName: 'BidiRtl',\n    onClick: editor => {\n        setDirection(editor, Direction.RightToLeft);\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { StrikethroughButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleStrikethrough } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Strikethrough\" button on the format ribbon\n */\nexport const strikethrough: RibbonButton<StrikethroughButtonStringKey> = {\n    key: 'buttonNameStrikethrough',\n    unlocalizedText: 'Strikethrough',\n    iconName: 'Strikethrough',\n    isChecked: formatState => !!formatState.isStrikeThrough,\n    onClick: editor => {\n        toggleStrikethrough(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { SubscriptButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleSubscript } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Subscript\" button on the format ribbon\n */\nexport const subscript: RibbonButton<SubscriptButtonStringKey> = {\n    key: 'buttonNameSubscript',\n    unlocalizedText: 'Subscript',\n    iconName: 'Subscript',\n    isChecked: formatState => !!formatState.isSubscript,\n    onClick: editor => {\n        toggleSubscript(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { SuperscriptButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport { toggleSuperscript } from 'roosterjs-editor-api';\n\n/**\n * @internal\n * \"Superscript\" button on the format ribbon\n */\nexport const superscript: RibbonButton<SuperscriptButtonStringKey> = {\n    key: 'buttonNameSuperscript',\n    unlocalizedText: 'Superscript',\n    iconName: 'Superscript',\n    isChecked: formatState => !!formatState.isSuperscript,\n    onClick: editor => {\n        toggleSuperscript(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { renderColorPicker } from '../../../colorPicker/component/renderColorPicker';\nimport { setTextColor } from 'roosterjs-editor-api';\nimport { TextColorButtonStringKey } from '../../type/RibbonButtonStringKeys';\nimport {\n    getTextColorValue,\n    TextColorDropDownItems,\n    TextColors,\n} from '../../../colorPicker/utils/textColors';\nimport {\n    getColorPickerContainerClassName,\n    getColorPickerItemClassName,\n} from '../../../colorPicker/utils/getClassNamesForColorPicker';\n\nconst Key: 'buttonNameTextColor' = 'buttonNameTextColor';\n\n/**\n * @internal\n * \"Text color\" button on the format ribbon\n */\nexport const textColor: RibbonButton<TextColorButtonStringKey> = {\n    dropDownMenu: {\n        items: TextColorDropDownItems,\n        itemClassName: getColorPickerItemClassName(),\n        allowLivePreview: true,\n        itemRender: (item, onClick) => renderColorPicker(item, TextColors, onClick),\n        commandBarSubMenuProperties: {\n            className: getColorPickerContainerClassName(),\n        },\n    },\n    key: Key,\n    unlocalizedText: 'Text color',\n    iconName: 'FontColor',\n    onClick: (editor, key) => {\n        // This check will always be true, add it here just to satisfy compiler\n        if (key != Key) {\n            setTextColor(editor, getTextColorValue(key));\n        }\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { toggleUnderline } from 'roosterjs-editor-api';\nimport { UnderlineButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Underline\" button on the format ribbon\n */\nexport const underline: RibbonButton<UnderlineButtonStringKey> = {\n    key: 'buttonNameUnderline',\n    unlocalizedText: 'Underline',\n    iconName: 'Underline',\n    isChecked: formatState => !!formatState.isUnderline,\n    onClick: editor => {\n        toggleUnderline(editor);\n        return true;\n    },\n};\n","import RibbonButton from '../../type/RibbonButton';\nimport { UndoButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\n/**\n * @internal\n * \"Undo\" button on the format ribbon\n */\nexport const undo: RibbonButton<UndoButtonStringKey> = {\n    key: 'buttonNameUndo',\n    unlocalizedText: 'Undo',\n    iconName: 'undo',\n    isDisabled: formatState => !formatState.canUndo,\n    onClick: editor => {\n        editor.undo();\n        return true;\n    },\n};\n","import RibbonButton from '../type/RibbonButton';\nimport { alignCenter } from './buttons/alignCenter';\nimport { alignLeft } from './buttons/alignLeft';\nimport { alignRight } from './buttons/alignRight';\nimport { AllButtonStringKeys } from '../type/RibbonButtonStringKeys';\nimport { backgroundColor } from './buttons/backgroundColor';\nimport { bold } from './buttons/bold';\nimport { bulletedList } from './buttons/bulletedList';\nimport { clearFormat } from './buttons/clearFormat';\nimport { code } from './buttons/code';\nimport { decreaseFontSize } from './buttons/decreaseFontSize';\nimport { decreaseIndent } from './buttons/decreaseIndent';\nimport { font } from './buttons/font';\nimport { fontSize } from './buttons/fontSize';\nimport { header } from './buttons/header';\nimport { increaseFontSize } from './buttons/increaseFontSize';\nimport { increaseIndent } from './buttons/increaseIndent';\nimport { insertImage } from './buttons/insertImage';\nimport { insertLink } from './buttons/insertLink';\nimport { insertTable } from './buttons/insertTable';\nimport { italic } from './buttons/italic';\nimport { KnownRibbonButtonKey } from '../type/KnownRibbonButton';\nimport { ltr } from './buttons/ltr';\nimport { numberedList } from './buttons/numberedList';\nimport { quote } from './buttons/quote';\nimport { redo } from './buttons/redo';\nimport { removeLink } from './buttons/removeLink';\nimport { rtl } from './buttons/rtl';\nimport { strikethrough } from './buttons/strikethrough';\nimport { subscript } from './buttons/subscript';\nimport { superscript } from './buttons/superscript';\nimport { textColor } from './buttons/textColor';\nimport { underline } from './buttons/underline';\nimport { undo } from './buttons/undo';\n\nconst KnownRibbonButtons = <Record<KnownRibbonButtonKey, RibbonButton<AllButtonStringKeys>>>{\n    [KnownRibbonButtonKey.Bold]: bold,\n    [KnownRibbonButtonKey.Italic]: italic,\n    [KnownRibbonButtonKey.Underline]: underline,\n    [KnownRibbonButtonKey.Font]: font,\n    [KnownRibbonButtonKey.FontSize]: fontSize,\n    [KnownRibbonButtonKey.IncreaseFontSize]: increaseFontSize,\n    [KnownRibbonButtonKey.DecreaseFontSize]: decreaseFontSize,\n    [KnownRibbonButtonKey.TextColor]: textColor,\n    [KnownRibbonButtonKey.BackgroundColor]: backgroundColor,\n    [KnownRibbonButtonKey.BulletedList]: bulletedList,\n    [KnownRibbonButtonKey.NumberedList]: numberedList,\n    [KnownRibbonButtonKey.DecreaseIndent]: decreaseIndent,\n    [KnownRibbonButtonKey.IncreaseIndent]: increaseIndent,\n    [KnownRibbonButtonKey.Quote]: quote,\n    [KnownRibbonButtonKey.AlignLeft]: alignLeft,\n    [KnownRibbonButtonKey.AlignCenter]: alignCenter,\n    [KnownRibbonButtonKey.AlignRight]: alignRight,\n    [KnownRibbonButtonKey.InsertLink]: insertLink,\n    [KnownRibbonButtonKey.RemoveLink]: removeLink,\n    [KnownRibbonButtonKey.InsertTable]: insertTable,\n    [KnownRibbonButtonKey.InsertImage]: insertImage,\n    [KnownRibbonButtonKey.Superscript]: superscript,\n    [KnownRibbonButtonKey.Subscript]: subscript,\n    [KnownRibbonButtonKey.Strikethrough]: strikethrough,\n    [KnownRibbonButtonKey.Header]: header,\n    [KnownRibbonButtonKey.Code]: code,\n    [KnownRibbonButtonKey.Ltr]: ltr,\n    [KnownRibbonButtonKey.Rtl]: rtl,\n    [KnownRibbonButtonKey.Undo]: undo,\n    [KnownRibbonButtonKey.Redo]: redo,\n    [KnownRibbonButtonKey.ClearFormat]: clearFormat,\n};\n\n/**\n * An array of keys of all known ribbon buttons\n */\nexport const AllButtonKeys = [\n    KnownRibbonButtonKey.Bold,\n    KnownRibbonButtonKey.Italic,\n    KnownRibbonButtonKey.Underline,\n    KnownRibbonButtonKey.Font,\n    KnownRibbonButtonKey.FontSize,\n    KnownRibbonButtonKey.IncreaseFontSize,\n    KnownRibbonButtonKey.DecreaseFontSize,\n    KnownRibbonButtonKey.TextColor,\n    KnownRibbonButtonKey.BackgroundColor,\n    KnownRibbonButtonKey.BulletedList,\n    KnownRibbonButtonKey.NumberedList,\n    KnownRibbonButtonKey.DecreaseIndent,\n    KnownRibbonButtonKey.IncreaseIndent,\n    KnownRibbonButtonKey.Quote,\n    KnownRibbonButtonKey.AlignLeft,\n    KnownRibbonButtonKey.AlignCenter,\n    KnownRibbonButtonKey.AlignRight,\n    KnownRibbonButtonKey.InsertLink,\n    KnownRibbonButtonKey.RemoveLink,\n    KnownRibbonButtonKey.InsertTable,\n    KnownRibbonButtonKey.InsertImage,\n    KnownRibbonButtonKey.Superscript,\n    KnownRibbonButtonKey.Subscript,\n    KnownRibbonButtonKey.Strikethrough,\n    KnownRibbonButtonKey.Header,\n    KnownRibbonButtonKey.Code,\n    KnownRibbonButtonKey.Ltr,\n    KnownRibbonButtonKey.Rtl,\n    KnownRibbonButtonKey.Undo,\n    KnownRibbonButtonKey.Redo,\n    KnownRibbonButtonKey.ClearFormat,\n];\n\n/**\n * A shortcut to get all format buttons provided by roosterjs-react\n * @param keyOrButtons An array of buttons or known button key. Default value is all known buttons provided by roosterjs-react\n * @returns An array of all buttons\n */\nexport default function getButtons<StringKey extends string = string>(\n    keyOrButtons: (KnownRibbonButtonKey | RibbonButton<StringKey>)[] = AllButtonKeys\n): (RibbonButton<AllButtonStringKeys> | RibbonButton<StringKey>)[] {\n    return keyOrButtons.map(keyOrButton =>\n        typeof keyOrButton == 'number' ? KnownRibbonButtons[keyOrButton] : keyOrButton\n    );\n}\n","export { default as RibbonPlugin } from './type/RibbonPlugin';\nexport { default as RibbonButton } from './type/RibbonButton';\nexport { default as RibbonButtonDropDown } from './type/RibbonButtonDropDown';\nexport { default as RibbonProps } from './type/RibbonProps';\nexport { KnownRibbonButtonKey } from './type/KnownRibbonButton';\nexport {\n    BoldButtonStringKey,\n    ItalicButtonStringKey,\n    UnderlineButtonStringKey,\n    FontButtonStringKey,\n    FontSizeButtonStringKey,\n    IncreaseFontSizeButtonStringKey,\n    DecreaseFontSizeButtonStringKey,\n    TextColorButtonStringKey,\n    BackgroundColorButtonStringKey,\n    BulletedListButtonStringKey,\n    NumberedListButtonStringKey,\n    MoreCommandsButtonStringKey,\n    DecreaseIndentButtonStringKey,\n    IncreaseIndentButtonStringKey,\n    QuoteButtonStringKey,\n    AlignLeftButtonStringKey,\n    AlignCenterButtonStringKey,\n    AlignRightButtonStringKey,\n    InsertLinkButtonStringKey,\n    RemoveLinkButtonStringKey,\n    InsertTableButtonStringKey,\n    InsertImageButtonStringKey,\n    SuperscriptButtonStringKey,\n    SubscriptButtonStringKey,\n    StrikethroughButtonStringKey,\n    HeaderButtonStringKey,\n    CodeButtonStringKey,\n    LtrButtonStringKey,\n    RtlButtonStringKey,\n    UndoButtonStringKey,\n    RedoButtonStringKey,\n    ClearFormatButtonStringKey,\n    AllButtonStringKeys,\n    CellShadeButtonStringKey,\n} from './type/RibbonButtonStringKeys';\n\nexport { default as Ribbon } from './component/Ribbon';\nexport { default as getButtons, AllButtonKeys } from './component/getButtons';\n\nexport { default as createRibbonPlugin } from './plugin/createRibbonPlugin';\n","import RibbonButton from '../type/RibbonButton';\nimport RibbonPlugin from '../type/RibbonPlugin';\nimport { FormatState, IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { getFormatState } from 'roosterjs-editor-api';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { LocalizedStrings, UIUtilities } from '../../common/index';\n\n/**\n * A plugin to connect format ribbon component and the editor\n */\nclass RibbonPluginImpl implements RibbonPlugin {\n    private editor: IEditor | null = null;\n    private onFormatChanged: ((formatState: FormatState) => void) | null = null;\n    private timer = 0;\n    private formatState: FormatState | null = null;\n    private uiUtilities: UIUtilities | null = null;\n\n    /**\n     * Construct a new instance of RibbonPlugin object\n     * @param delayUpdateTime The time to wait before refresh the button when user do some editing operation in editor\n     */\n    constructor(private delayUpdateTime: number = 200) {}\n\n    /**\n     * Get a friendly name of this plugin\n     */\n    getName() {\n        return 'Ribbon';\n    }\n\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor;\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    onPluginEvent(event: PluginEvent) {\n        switch (event.eventType) {\n            case PluginEventType.EditorReady:\n            case PluginEventType.ContentChanged:\n            case PluginEventType.ZoomChanged:\n                this.updateFormat();\n                break;\n\n            case PluginEventType.KeyDown:\n            case PluginEventType.MouseUp:\n                this.delayUpdate();\n                break;\n        }\n    }\n\n    /**\n     * Set the UI utilities objects to this plugin to help render additional UI elements\n     * @param uiUtilities The UI utilities object to set\n     */\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n\n    /**\n     * Register a callback to be invoked when format state of editor is changed, returns a disposer function.\n     */\n    registerFormatChangedCallback(callback: (formatState: FormatState) => void) {\n        this.onFormatChanged = callback;\n\n        return () => {\n            this.onFormatChanged = null;\n        };\n    }\n\n    /**\n     * When user clicks on a button, call this method to let the plugin to handle this click event\n     * @param button The button that is clicked\n     * @param key Key of child menu item that is clicked if any\n     * @param strings The localized string map for this button\n     */\n    onButtonClick<T extends string>(\n        button: RibbonButton<T>,\n        key: T,\n        strings?: LocalizedStrings<T>\n    ) {\n        if (this.editor && this.uiUtilities) {\n            this.editor.stopShadowEdit();\n\n            button.onClick(this.editor, key, strings, this.uiUtilities);\n\n            if (button.isChecked || button.isDisabled || button.dropDownMenu?.getSelectedItemKey) {\n                this.updateFormat();\n            }\n        }\n    }\n\n    /**\n     * Enter live preview state (shadow edit) of editor if there is a non-collapsed selection\n     * @param button The button that triggered this action\n     * @param key Key of the hovered button sub item\n     * @param strings The localized string map for this button\n     */\n    startLivePreview<T extends string>(\n        button: RibbonButton<T>,\n        key: T,\n        strings?: LocalizedStrings<T>\n    ) {\n        if (this.editor && this.uiUtilities) {\n            const isInShadowEdit = this.editor.isInShadowEdit();\n\n            // If editor is already in shadow edit, no need to check again.\n            // And the check result may be incorrect because the content is changed from last shadow edit and the cached selection path won't apply\n            const range = !isInShadowEdit && this.editor.getSelectionRangeEx();\n\n            if (isInShadowEdit || (range && !range.areAllCollapsed)) {\n                this.editor.startShadowEdit();\n                button.onClick(this.editor, key, strings, this.uiUtilities);\n            }\n        }\n    }\n\n    /**\n     * Leave live preview state (shadow edit) of editor\n     */\n    stopLivePreview() {\n        this.editor?.stopShadowEdit();\n    }\n\n    private delayUpdate() {\n        const window = this.editor?.getDocument().defaultView;\n\n        if (!window) {\n            return;\n        }\n\n        if (this.timer) {\n            window.clearTimeout(this.timer);\n        }\n\n        this.timer = window.setTimeout(() => {\n            this.timer = 0;\n            this.updateFormat?.();\n        }, this.delayUpdateTime);\n    }\n\n    private updateFormat() {\n        if (this.editor && this.onFormatChanged) {\n            const newFormatState = getFormatState(this.editor);\n\n            if (\n                !this.formatState ||\n                getObjectKeys(newFormatState).some(\n                    key => newFormatState[key] != this.formatState?.[key]\n                )\n            ) {\n                this.formatState = newFormatState;\n                this.onFormatChanged(newFormatState);\n            }\n        }\n    }\n}\n\n/**\n * Create a new instance of RibbonPlugin object\n * @param delayUpdateTime The time to wait before refresh the button when user do some editing operation in editor\n */\nexport default function createRibbonPlugin(delayUpdateTime?: number): RibbonPlugin {\n    return new RibbonPluginImpl(delayUpdateTime);\n}\n","/**\n * Keys of known ribbon buttons (buttons included in roosterjs-react)\n */\nexport enum KnownRibbonButtonKey {\n    /**\n     * \"Bold\" button on the format ribbon\n     */\n    Bold,\n\n    /**\n     * \"Italic\" button on the format ribbon\n     */\n    Italic,\n\n    /**\n     * \"Underline\" button on the format ribbon\n     */\n    Underline,\n\n    /**\n     * \"Font\" button on the format ribbon\n     */\n    Font,\n\n    /**\n     * \"FontSize\" button on the format ribbon\n     */\n    FontSize,\n\n    /**\n     * \"IncreaseFontSize\" button on the format ribbon\n     */\n    IncreaseFontSize,\n\n    /**\n     * \"DecreaseFontSize\" button on the format ribbon\n     */\n    DecreaseFontSize,\n\n    /**\n     * \"TextColor\" button on the format ribbon\n     */\n    TextColor,\n\n    /**\n     * \"BackgroundColor\" button on the format ribbon\n     */\n    BackgroundColor,\n\n    /**\n     * \"BulletedList\" button on the format ribbon\n     */\n    BulletedList,\n\n    /**\n     * \"NumberedList\" button on the format ribbon\n     */\n    NumberedList,\n\n    /**\n     * \"DecreaseIndent\" button on the format ribbon\n     */\n    DecreaseIndent,\n\n    /**\n     * \"IncreaseIndent\" button on the format ribbon\n     */\n    IncreaseIndent,\n\n    /**\n     * \"Quote\" button on the format ribbon\n     */\n    Quote,\n\n    /**\n     * \"AlignLeft\" button on the format ribbon\n     */\n    AlignLeft,\n\n    /**\n     * \"AlignCenter\" button on the format ribbon\n     */\n    AlignCenter,\n\n    /**\n     * \"AlignRight\" button on the format ribbon\n     */\n    AlignRight,\n\n    /**\n     * \"InsertLink\" button on the format ribbon\n     */\n    InsertLink,\n\n    /**\n     * \"RemoveLink\" button on the format ribbon\n     */\n    RemoveLink,\n\n    /**\n     * \"InsertTable\" button on the format ribbon\n     */\n    InsertTable,\n\n    /**\n     * \"InsertImage\" button on the format ribbon\n     */\n    InsertImage,\n\n    /**\n     * \"Superscript\" button on the format ribbon\n     */\n    Superscript,\n\n    /**\n     * \"Subscript\" button on the format ribbon\n     */\n    Subscript,\n\n    /**\n     * \"Strikethrough\" button on the format ribbon\n     */\n    Strikethrough,\n\n    /**\n     * \"Header\" button on the format ribbon\n     */\n    Header,\n\n    /**\n     * \"Code\" button on the format ribbon\n     */\n    Code,\n\n    /**\n     * \"Ltr\" button on the format ribbon\n     */\n    Ltr,\n\n    /**\n     * \"Rtl\" button on the format ribbon\n     */\n    Rtl,\n\n    /**\n     * \"Undo\" button on the format ribbon\n     */\n    Undo,\n\n    /**\n     * \"Redo\" button on the format ribbon\n     */\n    Redo,\n\n    /**\n     * \"ClearFormat\" button on the format ribbon\n     */\n    ClearFormat,\n}\n","import * as React from 'react';\nimport RoosterProps from '../type/RoosterProps';\nimport { createUIUtilities, ReactEditorPlugin } from '../../common/index';\nimport { divProperties, getNativeProps } from '@fluentui/react/lib/Utilities';\nimport { Editor } from 'roosterjs-editor-core';\nimport { EditorOptions, EditorPlugin, IEditor } from 'roosterjs-editor-types';\nimport { useTheme } from '@fluentui/react/lib/Theme';\n\n/**\n * Main component of react wrapper for roosterjs\n * @param props Properties of this component\n * @returns The react component\n */\nexport default function Rooster(props: RoosterProps) {\n    const editorDiv = React.useRef<HTMLDivElement>(null);\n    const editor = React.useRef<IEditor | null>(null);\n    const theme = useTheme();\n\n    const { focusOnInit, editorCreator, zoomScale, inDarkMode, plugins } = props;\n\n    React.useEffect(() => {\n        if (plugins && editorDiv.current) {\n            const uiUtilities = createUIUtilities(editorDiv.current, theme);\n\n            plugins.forEach(plugin => {\n                if (isReactEditorPlugin(plugin)) {\n                    plugin.setUIUtilities(uiUtilities);\n                }\n            });\n        }\n    }, [theme, editorCreator]);\n\n    React.useEffect(() => {\n        if (editorDiv.current) {\n            editor.current = (editorCreator || defaultEditorCreator)(editorDiv.current, props);\n        }\n\n        if (focusOnInit) {\n            editor.current?.focus();\n        }\n\n        return () => {\n            if (editor.current) {\n                editor.current.dispose();\n                editor.current = null;\n            }\n        };\n    }, [editorCreator]);\n\n    React.useEffect(() => {\n        editor.current?.setDarkModeState(!!inDarkMode);\n    }, [inDarkMode]);\n\n    React.useEffect(() => {\n        if (zoomScale) {\n            editor.current?.setZoomScale(zoomScale);\n        }\n    }, [zoomScale]);\n\n    const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n    return <div ref={editorDiv} tabIndex={0} {...(divProps || {})}></div>;\n}\n\nfunction defaultEditorCreator(div: HTMLDivElement, options: EditorOptions) {\n    return new Editor(div, options);\n}\n\nfunction isReactEditorPlugin(plugin: EditorPlugin): plugin is ReactEditorPlugin {\n    return !!(plugin as ReactEditorPlugin)?.setUIUtilities;\n}\n","export { default as RoosterProps } from './type/RoosterProps';\nexport { UpdateMode } from './type/UpdateMode';\nexport { default as UpdateContentPlugin } from './type/UpdateContentPlugin';\n\nexport { default as Rooster } from './component/Rooster';\n\nexport { default as createUpdateContentPlugin } from './plugin/createUpdateContentPlugin';\n","import UpdateContentPlugin from '../type/UpdateContentPlugin';\nimport { IEditor, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { UpdateMode } from '../type/UpdateMode';\n\n/**\n * A plugin to help get HTML content from editor\n */\nclass UpdateContentPluginImpl implements UpdateContentPlugin {\n    private editor: IEditor | null = null;\n    private disposer: (() => void) | null = null;\n\n    /**\n     * Create a new instance of UpdateContentPlugin class\n     * @param updateMode Mode of automatic update. It can be a combination of multiple UpdateMode values\n     * @param onUpdate A callback to be invoked when update happens\n     */\n    constructor(\n        private updateMode: UpdateMode,\n        private onUpdate: (html: string, mode: UpdateMode) => void\n    ) {}\n\n    /**\n     * Get a friendly name of this plugin\n     */\n    getName() {\n        return 'UpdateContent';\n    }\n\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor;\n        this.disposer = this.editor.addDomEventHandler('blur', this.onBlur);\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        this.disposer?.();\n        this.disposer = null;\n        this.editor = null;\n    }\n\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    onPluginEvent(event: PluginEvent) {\n        switch (event.eventType) {\n            case PluginEventType.EditorReady:\n                this.update(UpdateMode.OnInitialize);\n                break;\n\n            case PluginEventType.BeforeDispose:\n                this.update(UpdateMode.OnDispose);\n                break;\n\n            case PluginEventType.ContentChanged:\n                this.update(UpdateMode.OnContentChangedEvent);\n                break;\n\n            case PluginEventType.Input:\n                this.update(UpdateMode.OnUserInput);\n                break;\n        }\n    }\n\n    /**\n     * Trigger a force update. onUpdate callback will be invoked with HTML content of editor\n     */\n    forceUpdate() {\n        this.update(UpdateMode.Force);\n    }\n\n    private onBlur = () => {\n        this.update(UpdateMode.OnBlur);\n    };\n\n    private update(mode: UpdateMode) {\n        if (\n            this.editor &&\n            (mode == UpdateMode.Force || ((this.updateMode || 0) & mode) == mode) &&\n            this.onUpdate\n        ) {\n            const content = this.editor.getContent();\n            this.onUpdate(content, mode);\n        }\n    }\n}\n\n/**\n * Create a new instance of UpdateContentPlugin class\n * @param updateMode Mode of automatic update. It can be a combination of multiple UpdateMode values\n * @param onUpdate A callback to be invoked when update happens\n */\nexport default function createUpdateContentPlugin(\n    updateMode: UpdateMode,\n    onUpdate: (html: string, mode: UpdateMode) => void\n): UpdateContentPlugin {\n    return new UpdateContentPluginImpl(updateMode, onUpdate);\n}\n","/**\n * Update mode for UpdateContentPlugins\n */\nexport enum UpdateMode {\n    /**\n     * Force update, triggered from UpdateContentPlugin.forceUpdate()\n     */\n    Force = 0,\n\n    /**\n     * Update when editor is initialized\n     */\n    OnInitialize = 1,\n\n    /**\n     * Update when editor is about to be disposed\n     */\n    OnDispose = 2,\n\n    /**\n     * Update when user input in editor\n     */\n    OnUserInput = 4,\n\n    /**\n     * Update when ContentChangedEvent is triggered from a plugin\n     */\n    OnContentChangedEvent = 8,\n\n    /**\n     * Update when editor loses focus\n     */\n    OnBlur = 16,\n}\n","import { defaultFormatParsers, getFormatParsers } from '../../formatHandlers/defaultFormatHandlers';\nimport { defaultProcessorMap } from './defaultProcessors';\nimport { defaultStyleMap } from '../../formatHandlers/utils/defaultStyles';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { DomToModelOption } from '../../publicTypes/IContentModelEditor';\nimport { EditorContext } from '../../publicTypes/context/EditorContext';\nimport { SelectionRangeTypes } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nexport function createDomToModelContext(\n    editorContext?: EditorContext,\n    options?: DomToModelOption\n): DomToModelContext {\n    const context: DomToModelContext = {\n        ...(editorContext || {\n            isDarkMode: false,\n        }),\n\n        blockFormat: {},\n        segmentFormat: {},\n        zoomScaleFormat: {},\n        isInSelection: false,\n\n        listFormat: {\n            levels: [],\n            threadItemCounts: [],\n        },\n        link: {\n            format: {},\n            dataset: {},\n        },\n        code: {\n            format: {},\n        },\n        blockDecorator: {\n            format: {},\n            tagName: '',\n        },\n\n        elementProcessors: {\n            ...defaultProcessorMap,\n            ...(options?.processorOverride || {}),\n        },\n\n        defaultStyles: {\n            ...defaultStyleMap,\n            ...(options?.defaultStyleOverride || {}),\n        },\n\n        formatParsers: getFormatParsers(\n            options?.formatParserOverride,\n            options?.additionalFormatParsers\n        ),\n\n        defaultElementProcessors: defaultProcessorMap,\n        defaultFormatParsers: defaultFormatParsers,\n        allowCacheElement: !options?.disableCacheElement,\n    };\n\n    const range = options?.selectionRange;\n    let selectionRoot: Node | undefined;\n\n    switch (range?.type) {\n        case SelectionRangeTypes.Normal:\n            const regularRange = range.ranges[0];\n            if (regularRange) {\n                selectionRoot = regularRange.commonAncestorContainer;\n                context.regularSelection = {\n                    startContainer: regularRange.startContainer,\n                    startOffset: regularRange.startOffset,\n                    endContainer: regularRange.endContainer,\n                    endOffset: regularRange.endOffset,\n                    isSelectionCollapsed: regularRange.collapsed,\n                };\n            }\n            break;\n\n        case SelectionRangeTypes.TableSelection:\n            if (range.coordinates && range.table) {\n                selectionRoot = range.table;\n                context.tableSelection = {\n                    table: range.table,\n                    firstCell: { ...range.coordinates.firstCell },\n                    lastCell: { ...range.coordinates.lastCell },\n                };\n            }\n\n            break;\n\n        case SelectionRangeTypes.ImageSelection:\n            selectionRoot = range.image;\n            context.imageSelection = {\n                image: range.image,\n            };\n            break;\n    }\n\n    if (selectionRoot) {\n        context.selectionRootNode = selectionRoot;\n    }\n\n    return context;\n}\n","import { brProcessor } from '../processors/brProcessor';\nimport { childProcessor } from '../processors/childProcessor';\nimport { codeProcessor } from '../processors/codeProcessor';\nimport { delimiterProcessor } from '../processors/delimiterProcessor';\nimport { elementProcessor } from '../processors/elementProcessor';\nimport { ElementProcessorMap } from '../../publicTypes/context/DomToModelSettings';\nimport { entityProcessor } from '../processors/entityProcessor';\nimport { fontProcessor } from '../processors/fontProcessor';\nimport { formatContainerProcessor } from '../processors/formatContainerProcessor';\nimport { generalProcessor } from '../processors/generalProcessor';\nimport { headingProcessor } from '../processors/headingProcessor';\nimport { hrProcessor } from '../processors/hrProcessor';\nimport { imageProcessor } from '../processors/imageProcessor';\nimport { knownElementProcessor } from '../processors/knownElementProcessor';\nimport { linkProcessor } from '../processors/linkProcessor';\nimport { listItemProcessor } from '../processors/listItemProcessor';\nimport { listProcessor } from '../processors/listProcessor';\nimport { pProcessor } from '../processors/pProcessor';\nimport { tableProcessor } from '../processors/tableProcessor';\nimport { textProcessor } from '../processors/textProcessor';\n\n/**\n * @internal\n */\nexport const defaultProcessorMap: ElementProcessorMap = {\n    a: linkProcessor,\n    b: knownElementProcessor,\n    blockquote: knownElementProcessor,\n    br: brProcessor,\n    code: codeProcessor,\n    div: knownElementProcessor,\n    em: knownElementProcessor,\n    font: fontProcessor,\n    i: knownElementProcessor,\n    img: imageProcessor,\n    h1: headingProcessor,\n    h2: headingProcessor,\n    h3: headingProcessor,\n    h4: headingProcessor,\n    h5: headingProcessor,\n    h6: headingProcessor,\n    hr: hrProcessor,\n    li: listItemProcessor,\n    ol: listProcessor,\n    p: pProcessor,\n    pre: formatContainerProcessor,\n    s: knownElementProcessor,\n    span: knownElementProcessor,\n    strike: knownElementProcessor,\n    strong: knownElementProcessor,\n    sub: knownElementProcessor,\n    sup: knownElementProcessor,\n    table: tableProcessor,\n    u: knownElementProcessor,\n    ul: listProcessor,\n\n    '*': generalProcessor,\n    '#text': textProcessor,\n    element: elementProcessor,\n    entity: entityProcessor,\n    child: childProcessor,\n    delimiter: delimiterProcessor,\n};\n","import { ContentModelDocument } from '../publicTypes/group/ContentModelDocument';\nimport { createContentModelDocument } from '../modelApi/creators/createContentModelDocument';\nimport { createDomToModelContext } from './context/createDomToModelContext';\nimport { DomToModelOption } from '../publicTypes/IContentModelEditor';\nimport { EditorContext } from '../publicTypes/context/EditorContext';\nimport { normalizeContentModel } from '../modelApi/common/normalizeContentModel';\nimport { parseFormat } from './utils/parseFormat';\nimport { rootDirectionFormatHandler } from '../formatHandlers/root/rootDirectionFormatHandler';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\nimport { zoomScaleFormatHandler } from '../formatHandlers/root/zoomScaleFormatHandler';\n\n/**\n * Create Content Model from DOM tree in this editor\n * @param root Root element of DOM tree to create Content Model from\n * @param editorContext Context of content model editor\n * @param option The option to customize the behavior of DOM to Content Model conversion\n * @returns A ContentModelDocument object that contains all the models created from the give root element\n */\nexport default function domToContentModel(\n    root: HTMLElement | DocumentFragment,\n    editorContext: EditorContext,\n    option: DomToModelOption\n): ContentModelDocument {\n    const model = createContentModelDocument(editorContext.defaultFormat);\n    const context = createDomToModelContext(editorContext, option);\n\n    if (safeInstanceOf(root, 'DocumentFragment')) {\n        context.elementProcessors.child(model, root, context);\n    } else {\n        // Need to calculate direction (ltr or rtl), use it as initial value\n        parseFormat(root, [rootDirectionFormatHandler.parse], context.blockFormat, context);\n\n        // Need to calculate zoom scale value from root element, use this value to calculate sizes for elements\n        parseFormat(root, [zoomScaleFormatHandler.parse], context.zoomScaleFormat, context);\n\n        const processor = option.includeRoot\n            ? context.elementProcessors.element\n            : context.elementProcessors.child;\n\n        processor(model, root, context);\n    }\n\n    normalizeContentModel(model);\n\n    return model;\n}\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { ContextStyles } from './formatContainerProcessor';\nimport { createParagraph } from '../../modelApi/creators/createParagraph';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\n\nconst SegmentDecoratorTags = ['A', 'CODE'];\n\n/**\n * @internal\n */\nexport const blockProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const decorator = context.blockDecorator.tagName ? context.blockDecorator : undefined;\n    const isSegmentDecorator = SegmentDecoratorTags.indexOf(element.tagName) >= 0;\n\n    parseFormat(element, context.formatParsers.block, context.blockFormat, context);\n\n    const format = { ...context.blockFormat };\n\n    parseFormat(element, context.formatParsers.container, format, context);\n\n    ContextStyles.forEach(style => {\n        if (format[style]) {\n            context.blockFormat[style] = format[style];\n        }\n    });\n\n    if (!isSegmentDecorator) {\n        const paragraph = createParagraph(false /*isImplicit*/, format, decorator);\n\n        if (element.style.fontSize && parseInt(element.style.fontSize) == 0) {\n            paragraph.zeroFontSize = true;\n        }\n\n        addBlock(group, paragraph);\n    }\n\n    context.elementProcessors.child(group, element, context);\n};\n","import { addSegment } from '../../modelApi/common/addSegment';\nimport { createBr } from '../../modelApi/creators/createBr';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\n\n/**\n * @internal\n */\nexport const brProcessor: ElementProcessor<HTMLBRElement> = (group, element, context) => {\n    const br = createBr(context.segmentFormat);\n\n    if (context.isInSelection) {\n        br.isSelected = true;\n    }\n\n    addSegment(group, br, context.blockFormat);\n};\n","import { addSelectionMarker } from '../utils/addSelectionMarker';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getRegularSelectionOffsets } from '../utils/getRegularSelectionOffsets';\nimport { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { NodeType } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nexport const childProcessor: ElementProcessor<ParentNode> = (\n    group: ContentModelBlockGroup,\n    parent: ParentNode,\n    context: DomToModelContext\n) => {\n    const [nodeStartOffset, nodeEndOffset] = getRegularSelectionOffsets(context, parent);\n    let index = 0;\n\n    for (let child = parent.firstChild; child; child = child.nextSibling) {\n        handleRegularSelection(index, context, group, nodeStartOffset, nodeEndOffset);\n\n        processChildNode(group, child, context);\n\n        index++;\n    }\n\n    handleRegularSelection(index, context, group, nodeStartOffset, nodeEndOffset);\n};\n\n/**\n * @internal\n */\nexport function processChildNode(\n    group: ContentModelBlockGroup,\n    child: Node,\n    context: DomToModelContext\n) {\n    if (isNodeOfType(child, NodeType.Element) && child.style.display != 'none') {\n        context.elementProcessors.element(group, child, context);\n    } else if (isNodeOfType(child, NodeType.Text)) {\n        context.elementProcessors['#text'](group, child, context);\n    }\n}\n\n/**\n * @internal\n */\nexport function handleRegularSelection(\n    index: number,\n    context: DomToModelContext,\n    group: ContentModelBlockGroup,\n    nodeStartOffset: number,\n    nodeEndOffset: number\n) {\n    if (index == nodeStartOffset) {\n        context.isInSelection = true;\n\n        addSelectionMarker(group, context);\n    }\n\n    if (index == nodeEndOffset) {\n        if (!context.regularSelection!.isSelectionCollapsed) {\n            addSelectionMarker(group, context);\n        }\n        context.isInSelection = false;\n    }\n}\n","import { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { knownElementProcessor } from './knownElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const codeProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    stackFormat(context, { code: 'codeDefault' }, () => {\n        parseFormat(element, context.formatParsers.code, context.code.format, context);\n\n        knownElementProcessor(group, element, context);\n    });\n};\n","import { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getRegularSelectionOffsets } from '../utils/getRegularSelectionOffsets';\nimport { handleRegularSelection } from './childProcessor';\n\n/**\n * @internal\n * @param group\n * @param element\n * @param context\n */\nexport const delimiterProcessor: ElementProcessor<HTMLSpanElement> = (group, element, context) => {\n    let index = 0;\n    const [nodeStartOffset, nodeEndOffset] = getRegularSelectionOffsets(context, element);\n\n    for (let child = element.firstChild; child; child = child.nextSibling) {\n        handleRegularSelection(index, context, group, nodeStartOffset, nodeEndOffset);\n        index++;\n    }\n\n    handleRegularSelection(index, context, group, nodeStartOffset, nodeEndOffset);\n};\n","import { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { ElementProcessorMap } from '../../publicTypes/context/DomToModelSettings';\nimport { getDelimiterFromElement, getEntityFromElement } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n * @param group\n * @param element\n * @param context\n */\nexport const elementProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const tagName = element.tagName.toLowerCase() as keyof ElementProcessorMap;\n    const processor = (tryGetProcessorForEntity(element, context) ||\n        tryGetProcessorForDelimiter(element, context) ||\n        context.elementProcessors[tagName] ||\n        (tagName.indexOf(':') >= 0 && context.elementProcessors.child) ||\n        context.elementProcessors['*']) as ElementProcessor<Node>;\n    processor(group, element, context);\n};\n\nfunction tryGetProcessorForEntity(element: HTMLElement, context: DomToModelContext) {\n    return (element.className && getEntityFromElement(element)) ||\n        element.contentEditable == 'false' // For readonly element, treat as an entity\n        ? context.elementProcessors.entity\n        : null;\n}\n\nfunction tryGetProcessorForDelimiter(element: Node, context: DomToModelContext) {\n    return getDelimiterFromElement(element) ? context.elementProcessors.delimiter : null;\n}\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { createEntity } from '../../modelApi/creators/createEntity';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getEntityFromElement } from 'roosterjs-editor-dom';\nimport { isBlockElement } from '../utils/isBlockElement';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const entityProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const entity = getEntityFromElement(element);\n\n    // In Content Model we also treat read only element as an entity since we cannot edit it\n    const { id, type, isReadonly } = entity || { isReadonly: true };\n    const isBlockEntity = isBlockElement(element, context);\n\n    stackFormat(\n        context,\n        { segment: isBlockEntity ? 'empty' : undefined, paragraph: 'empty' },\n        () => {\n            const wrapperToUse = context.allowCacheElement\n                ? element\n                : (element.cloneNode(true /* deep */) as HTMLElement);\n\n            if (!context.allowCacheElement) {\n                wrapperToUse.style.backgroundColor = element.style.backgroundColor || 'inherit';\n                wrapperToUse.style.color = element.style.color || 'inherit';\n            }\n\n            const entityModel = createEntity(\n                wrapperToUse,\n                isReadonly,\n                context.segmentFormat,\n                id,\n                type\n            );\n\n            // TODO: Need to handle selection for editable entity\n            if (context.isInSelection) {\n                entityModel.isSelected = true;\n            }\n\n            if (isBlockEntity) {\n                addBlock(group, entityModel);\n            } else {\n                addSegment(group, entityModel);\n            }\n        }\n    );\n};\n","import { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { isBlockElement } from '../utils/isBlockElement';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\nconst FontSizes = ['10px', '13px', '16px', '18px', '24px', '32px', '48px'];\n\nfunction getFontSize(size: string | null) {\n    const intSize = parseInt(size || '');\n\n    if (Number.isNaN(intSize)) {\n        return undefined;\n    } else if (intSize < 1) {\n        return FontSizes[0];\n    } else if (intSize > FontSizes.length) {\n        return FontSizes[FontSizes.length - 1];\n    } else {\n        return FontSizes[intSize - 1];\n    }\n}\n\n/**\n * @internal\n */\nexport const fontProcessor: ElementProcessor<HTMLFontElement> = (group, element, context) => {\n    stackFormat(\n        context,\n        {\n            segment: isBlockElement(element, context) ? 'shallowCloneForBlock' : 'shallowClone',\n        },\n        () => {\n            const fontFamily = element.getAttribute('face');\n            const fontSize = getFontSize(element.getAttribute('size'));\n            const textColor = element.getAttribute('color');\n            const format = context.segmentFormat;\n\n            if (fontFamily) {\n                format.fontFamily = fontFamily;\n            }\n\n            if (fontSize) {\n                format.fontSize = fontSize;\n            }\n\n            if (textColor) {\n                format.textColor = textColor;\n            }\n\n            parseFormat(element, context.formatParsers.segment, context.segmentFormat, context);\n\n            context.elementProcessors.child(group, element, context);\n        }\n    );\n};\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelFormatContainerFormat } from '../../publicTypes/format/ContentModelFormatContainerFormat';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { createFormatContainer } from '../../modelApi/creators/createFormatContainer';\nimport { createParagraph } from '../../modelApi/creators/createParagraph';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getDefaultStyle } from '../utils/getDefaultStyle';\nimport { MarginFormat } from '../../publicTypes/format/formatParts/MarginFormat';\nimport { PaddingFormat } from '../../publicTypes/format/formatParts/PaddingFormat';\nimport { parseFormat } from '../utils/parseFormat';\nimport { setParagraphNotImplicit } from '../../modelApi/block/setParagraphNotImplicit';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const ContextStyles: (keyof (MarginFormat & PaddingFormat))[] = [\n    'marginLeft',\n    'marginRight',\n    'paddingLeft',\n    'paddingRight',\n];\n\n/**\n * @internal\n */\nexport const formatContainerProcessor: ElementProcessor<HTMLElement> = (\n    group,\n    element,\n    context\n) => {\n    stackFormat(context, { segment: 'shallowCloneForBlock', paragraph: 'shallowClone' }, () => {\n        parseFormat(element, context.formatParsers.block, context.blockFormat, context);\n        parseFormat(element, context.formatParsers.segmentOnBlock, context.segmentFormat, context);\n\n        const format: ContentModelFormatContainerFormat = {\n            ...context.blockFormat,\n        };\n\n        parseFormat(element, context.formatParsers.container, format, context);\n\n        const tagName =\n            getDefaultStyle(element, context).display == 'block'\n                ? element.tagName.toLowerCase()\n                : 'div';\n        const formatContainer = createFormatContainer(tagName, format);\n\n        // It is possible to inherit margin left/right styles from parent DIV or other containers,\n        // since we are going into a deeper level of format container now,\n        // the container will render these styles so no need to keep them in context format\n        ContextStyles.forEach(style => {\n            delete context.blockFormat[style];\n        });\n\n        context.elementProcessors.child(formatContainer, element, context);\n\n        if (element.style.fontSize && parseInt(element.style.fontSize) == 0) {\n            formatContainer.zeroFontSize = true;\n        }\n\n        if (shouldFallbackToParagraph(formatContainer)) {\n            // For DIV container that only has one paragraph child, container style can be merged into paragraph\n            // and no need to have this container\n            const paragraph = formatContainer.blocks[0] as ContentModelParagraph;\n\n            if (formatContainer.zeroFontSize) {\n                paragraph.zeroFontSize = true;\n            }\n\n            Object.assign(paragraph.format, formatContainer.format);\n            setParagraphNotImplicit(paragraph);\n            addBlock(group, paragraph);\n        } else {\n            addBlock(group, formatContainer);\n        }\n    });\n\n    addBlock(group, createParagraph(true /*isImplicit*/, context.blockFormat));\n};\n\nfunction shouldFallbackToParagraph(formatContainer: ContentModelFormatContainer) {\n    const firstChild = formatContainer.blocks[0];\n\n    return (\n        formatContainer.tagName == 'div' &&\n        formatContainer.blocks.length == 1 &&\n        firstChild.blockType == 'Paragraph' &&\n        firstChild.isImplicit\n    );\n}\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { addDecorators } from '../../modelApi/common/addDecorators';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { createGeneralBlock } from '../../modelApi/creators/createGeneralBlock';\nimport { createGeneralSegment } from '../../modelApi/creators/createGeneralSegment';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { isBlockElement } from '../utils/isBlockElement';\nimport { stackFormat } from '../utils/stackFormat';\n\nconst generalBlockProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const block = createGeneralBlock(element);\n    const isSelectedBefore = context.isInSelection;\n\n    stackFormat(\n        context,\n        {\n            segment: 'empty',\n            paragraph: 'empty',\n            link: 'empty',\n        },\n        () => {\n            addBlock(group, block);\n\n            context.elementProcessors.child(block, element, context);\n        }\n    );\n\n    if (isSelectedBefore && context.isInSelection) {\n        block.isSelected = true;\n    }\n};\n\nconst generalSegmentProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const segment = createGeneralSegment(element, context.segmentFormat);\n    const isSelectedBefore = context.isInSelection;\n\n    addDecorators(segment, context);\n    addSegment(group, segment);\n\n    stackFormat(\n        context,\n        {\n            segment:\n                'empty' /*clearFormat, General segment will include all properties and styles when generate back to HTML, so no need to carry over existing segment format*/,\n        },\n        () => {\n            context.elementProcessors.child(segment, element, context);\n        }\n    );\n\n    if (isSelectedBefore && context.isInSelection) {\n        segment.isSelected = true;\n    }\n};\n\n/**\n * @internal\n */\nexport const generalProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const processor = isBlockElement(element, context)\n        ? generalBlockProcessor\n        : generalSegmentProcessor;\n\n    processor(group, element, context);\n};\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { blockProcessor } from './blockProcessor';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { createParagraph } from '../../modelApi/creators/createParagraph';\nimport { createParagraphDecorator } from '../../modelApi/creators/createParagraphDecorator';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const headingProcessor: ElementProcessor<HTMLHeadingElement> = (group, element, context) => {\n    stackFormat(\n        context,\n        { segment: 'shallowCloneForBlock', paragraph: 'shallowClone', blockDecorator: 'empty' },\n        () => {\n            const segmentFormat: ContentModelSegmentFormat = {};\n\n            parseFormat(element, context.formatParsers.segmentOnBlock, segmentFormat, context);\n\n            context.blockDecorator = createParagraphDecorator(element.tagName, segmentFormat);\n\n            blockProcessor(group, element, context);\n        }\n    );\n\n    addBlock(group, createParagraph(true /*isImplicit*/, context.blockFormat));\n};\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { createDivider } from '../../modelApi/creators/createDivider';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const hrProcessor: ElementProcessor<HTMLHRElement> = (group, element, context) => {\n    stackFormat(\n        context,\n        {\n            paragraph: 'shallowClone',\n        },\n        () => {\n            parseFormat(element, context.formatParsers.divider, context.blockFormat, context);\n\n            const hr = createDivider('hr', context.blockFormat);\n\n            if (element.size) {\n                hr.size = element.size;\n            }\n\n            if (context.isInSelection) {\n                hr.isSelected = true;\n            }\n\n            addBlock(group, hr);\n        }\n    );\n};\n","import { addDecorators } from '../../modelApi/common/addDecorators';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { ContentModelImageFormat } from '../../publicTypes/format/ContentModelImageFormat';\nimport { createImage } from '../../modelApi/creators/createImage';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const imageProcessor: ElementProcessor<HTMLImageElement> = (group, element, context) => {\n    stackFormat(context, { segment: 'shallowClone' }, () => {\n        const imageFormat: ContentModelImageFormat = context.segmentFormat;\n\n        parseFormat(element, context.formatParsers.segment, imageFormat, context);\n        parseFormat(element, context.formatParsers.image, imageFormat, context);\n        parseFormat(element, context.formatParsers.block, context.blockFormat, context);\n\n        const image = createImage(element.src, imageFormat);\n        const alt = element.alt;\n        const title = element.title;\n\n        parseFormat(element, context.formatParsers.dataset, image.dataset, context);\n        addDecorators(image, context);\n\n        if (alt) {\n            image.alt = alt;\n        }\n        if (title) {\n            image.title = title;\n        }\n        if (context.isInSelection) {\n            image.isSelected = true;\n        }\n        if (context.imageSelection?.image == element) {\n            image.isSelectedAsImageSelection = true;\n            image.isSelected = true;\n        }\n\n        addSegment(group, image);\n    });\n};\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { blockProcessor } from './blockProcessor';\nimport { createParagraph } from '../../modelApi/creators/createParagraph';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { formatContainerProcessor } from './formatContainerProcessor';\nimport { getDefaultStyle } from '../utils/getDefaultStyle';\nimport { isBlockElement } from '../utils/isBlockElement';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\nconst FormatContainerTriggerStyles: (keyof CSSStyleDeclaration)[] = [\n    'marginBottom',\n    'marginTop',\n    'paddingBottom',\n    'paddingTop',\n    'paddingLeft',\n    'paddingRight',\n    'borderTopWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'borderRightWidth',\n    'width',\n    'height',\n    'maxWidth',\n    'maxHeight',\n    'minWidth',\n    'minHeight',\n];\nconst ByPassFormatContainerTags = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'A'];\nconst SegmentDecoratorTags = ['A', 'CODE'];\n\n/**\n * @internal\n */\nexport const knownElementProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    const isBlock = isBlockElement(element, context);\n\n    if (\n        (isBlock || element.style.display == 'inline-block') && // For inline-block here, we will also check if it should be represented as Format Container\n        shouldUseFormatContainer(element, context)\n    ) {\n        formatContainerProcessor(group, element, context);\n    } else if (isBlock) {\n        const decorator = context.blockDecorator.tagName ? context.blockDecorator : undefined;\n        const isSegmentDecorator = SegmentDecoratorTags.indexOf(element.tagName) >= 0;\n\n        stackFormat(context, { segment: 'shallowCloneForBlock', paragraph: 'shallowClone' }, () => {\n            parseFormat(\n                element,\n                context.formatParsers.segmentOnBlock,\n                context.segmentFormat,\n                context\n            );\n\n            blockProcessor(group, element, context);\n        });\n\n        if (isBlock && !isSegmentDecorator) {\n            addBlock(group, createParagraph(true /*isImplicit*/, context.blockFormat, decorator));\n        }\n    } else {\n        stackFormat(context, { segment: 'shallowClone', paragraph: 'shallowClone' }, () => {\n            parseFormat(element, context.formatParsers.segment, context.segmentFormat, context);\n\n            context.elementProcessors.child(group, element, context);\n        });\n    }\n};\n\nfunction shouldUseFormatContainer(element: HTMLElement, context: DomToModelContext) {\n    // For those tags that we know we should not use format container, just return false\n    if (ByPassFormatContainerTags.indexOf(element.tagName) >= 0) {\n        return false;\n    }\n\n    const style = element.style;\n    const defaultStyle = getDefaultStyle(element, context);\n\n    const bgcolor = style.getPropertyValue('background-color');\n\n    // For block element with background, we need to use format container\n    if (bgcolor && bgcolor != 'transparent') {\n        return true;\n    }\n\n    // For block element with positive value of border width or top/bottom margin/padding,\n    // we need to use format container\n    if (\n        FormatContainerTriggerStyles.some(\n            key => parseInt((style[key] as string) || (defaultStyle[key] as string) || '') > 0\n        )\n    ) {\n        return true;\n    }\n\n    // For margin left/right with value \"auto\", we need to use format container\n    if (style.marginLeft == 'auto' || style.marginRight == 'auto') {\n        return true;\n    }\n\n    // For element with \"align\" attribute, we need to use format container\n    if (element.getAttribute('align')) {\n        return true;\n    }\n\n    return false;\n}\n","import { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { knownElementProcessor } from './knownElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const linkProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    if (element.hasAttribute('href')) {\n        stackFormat(context, { link: 'linkDefault' }, () => {\n            parseFormat(element, context.formatParsers.link, context.link.format, context);\n            parseFormat(element, context.formatParsers.dataset, context.link.dataset, context);\n\n            knownElementProcessor(group, element, context);\n        });\n    } else {\n        // A tag without href, can be treated as normal SPAN tag\n        knownElementProcessor(group, element, context);\n    }\n};\n","import { createListItem } from '../../modelApi/creators/createListItem';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const listItemProcessor: ElementProcessor<HTMLLIElement> = (group, element, context) => {\n    const { listFormat } = context;\n\n    if (listFormat.listParent && listFormat.levels.length > 0) {\n        stackFormat(\n            context,\n            {\n                segment: 'shallowCloneForBlock',\n            },\n            () => {\n                parseFormat(\n                    element,\n                    context.formatParsers.segmentOnBlock,\n                    context.segmentFormat,\n                    context\n                );\n\n                const listItem = createListItem(listFormat.levels, context.segmentFormat);\n                parseFormat(\n                    element,\n                    context.formatParsers.listItemElement,\n                    listItem.format,\n                    context\n                );\n\n                listFormat.listParent!.blocks.push(listItem);\n\n                parseFormat(\n                    element,\n                    context.formatParsers.listItem,\n                    listItem.levels[listItem.levels.length - 1],\n                    context\n                );\n\n                context.elementProcessors.child(listItem, element, context);\n\n                const firstChild = listItem.blocks[0];\n\n                if (\n                    listItem.blocks.length == 1 &&\n                    firstChild.blockType == 'Paragraph' &&\n                    firstChild.isImplicit\n                ) {\n                    Object.assign(listItem.format, firstChild.format);\n                    firstChild.format = {};\n                }\n            }\n        );\n    } else {\n        const currentBlocks = listFormat.listParent?.blocks;\n        const lastItem = currentBlocks?.[currentBlocks?.length - 1];\n\n        context.elementProcessors['*'](\n            lastItem?.blockType == 'BlockGroup' ? lastItem : group,\n            element,\n            context\n        );\n    }\n};\n","import { ContentModelListItemLevelFormat } from '../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { DatasetFormat } from '../../publicTypes/format/formatParts/DatasetFormat';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\nimport { updateListMetadata } from '../../domUtils/metadata/updateListMetadata';\n\n/**\n * @internal\n */\nexport const listProcessor: ElementProcessor<HTMLOListElement | HTMLUListElement> = (\n    group,\n    element,\n    context\n) => {\n    stackFormat(\n        context,\n        {\n            segment: 'shallowCloneForBlock',\n            paragraph: 'shallowCloneForGroup',\n        },\n        () => {\n            const level: ContentModelListItemLevelFormat = { ...context.blockFormat };\n            const { listFormat } = context;\n\n            processMetadata(element, context, level);\n            parseFormat(element, context.formatParsers.listLevel, level, context);\n            parseFormat(element, context.formatParsers.segment, context.segmentFormat, context);\n\n            const originalListParent = listFormat.listParent;\n\n            listFormat.listParent = listFormat.listParent || group;\n            listFormat.levels.push(level);\n\n            try {\n                context.elementProcessors.child(group, element, context);\n            } finally {\n                listFormat.levels.pop();\n                listFormat.listParent = originalListParent;\n            }\n        }\n    );\n};\n\nfunction processMetadata(\n    element: HTMLOListElement | HTMLUListElement,\n    context: DomToModelContext,\n    level: ContentModelListItemLevelFormat\n) {\n    const dataset: DatasetFormat = {};\n    parseFormat(element, context.formatParsers.dataset, dataset, context);\n    updateListMetadata({ dataset }, metadata => {\n        Object.assign(level, metadata || {});\n        return null;\n    });\n}\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { blockProcessor } from './blockProcessor';\nimport { createParagraph } from '../../modelApi/creators/createParagraph';\nimport { createParagraphDecorator } from '../../modelApi/creators/createParagraphDecorator';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const pProcessor: ElementProcessor<HTMLElement> = (group, element, context) => {\n    stackFormat(context, { blockDecorator: 'empty' }, () => {\n        context.blockDecorator = createParagraphDecorator(element.tagName);\n\n        parseFormat(element, context.formatParsers.segmentOnBlock, context.segmentFormat, context);\n\n        blockProcessor(group, element, context);\n    });\n\n    addBlock(group, createParagraph(true /*isImplicit*/, context.blockFormat));\n};\n","import { contains, getTagOfNode } from 'roosterjs-editor-dom';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { getRegularSelectionOffsets } from '../utils/getRegularSelectionOffsets';\nimport { handleRegularSelection, processChildNode } from './childProcessor';\n\ninterface FormatStateContext extends DomToModelContext {\n    /**\n     * An optional stack of parent elements to process. When provided, the child nodes of current parent element will be ignored,\n     * but use the top element in this stack instead in childProcessor.\n     */\n    nodeStack?: Node[];\n}\n\n/**\n * @internal\n * In order to get format, we can still use the regular child processor. However, to improve performance, we don't need to create\n * content model for the whole doc, instead we only need to traverse the tree path that can arrive current selected node.\n * This \"reduced\" child processor will first create a node stack that stores DOM node from root to current common ancestor node of selection,\n * then use this stack as a faked DOM tree to create a reduced content model which we can use to retrieve format state\n */\nexport function reducedModelChildProcessor(\n    group: ContentModelBlockGroup,\n    parent: ParentNode,\n    context: FormatStateContext\n) {\n    if (context.selectionRootNode) {\n        if (!context.nodeStack) {\n            context.nodeStack = createNodeStack(parent, context.selectionRootNode);\n        }\n\n        const stackChild = context.nodeStack.pop();\n\n        if (stackChild) {\n            const [nodeStartOffset, nodeEndOffset] = getRegularSelectionOffsets(context, parent);\n\n            // If selection is not on this node, skip getting node index to save some time since we don't need it here\n            const index =\n                nodeStartOffset >= 0 || nodeEndOffset >= 0 ? getChildIndex(parent, stackChild) : -1;\n\n            if (index >= 0) {\n                handleRegularSelection(index, context, group, nodeStartOffset, nodeEndOffset);\n            }\n\n            processChildNode(group, stackChild, context);\n\n            if (index >= 0) {\n                handleRegularSelection(index + 1, context, group, nodeStartOffset, nodeEndOffset);\n            }\n        } else {\n            // No child node from node stack, that means we have reached the deepest node of selection.\n            // Now we can use default child processor to perform full sub tree scanning for content model,\n            // So that all selected node will be included.\n            context.defaultElementProcessors.child(group, parent, context);\n        }\n    }\n}\n\nfunction createNodeStack(root: Node, startNode: Node): Node[] {\n    const result: Node[] = [];\n    let node: Node | null = startNode;\n\n    while (node && contains(root, node)) {\n        if (getTagOfNode(node) == 'TABLE') {\n            // For table, we can't do a reduced model creation since we need to handle their cells and indexes,\n            // so clean up whatever we already have, and just put table into the stack\n            result.splice(0, result.length, node);\n        } else {\n            result.push(node);\n        }\n\n        node = node.parentNode;\n    }\n\n    return result;\n}\n\nfunction getChildIndex(parent: ParentNode, stackChild: Node) {\n    let index = 0;\n    let child = parent.firstChild;\n\n    while (child && child != stackChild) {\n        index++;\n        child = child.nextSibling;\n    }\n    return index;\n}\n","import { contains } from 'roosterjs-editor-dom';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { entityProcessor } from './entityProcessor';\nimport { hasMetadata } from '../../domUtils/metadata/updateMetadata';\nimport { tableProcessor } from './tableProcessor';\n\n/**\n * @internal\n */\nexport const tablePreProcessor: ElementProcessor<HTMLTableElement> = (group, element, context) => {\n    const processor = shouldUseTableProcessor(element, context) ? tableProcessor : entityProcessor;\n\n    processor(group, element, context);\n};\n\nfunction shouldUseTableProcessor(element: HTMLTableElement, context: DomToModelContext) {\n    // Treat table as a real table when:\n    // 1. It is a roosterjs table (has metadata)\n    // 2. Table is in selection\n    // 3. There is selection inside table (or whole table is selected)\n    // Otherwise, we treat the table as entity so we will not change it when write back\n    return hasMetadata(element) || context.isInSelection || hasSelectionInTable(element, context);\n}\n\nfunction hasSelectionInTable(element: HTMLTableElement, context: DomToModelContext) {\n    const selectedNodes = [\n        context.imageSelection?.image,\n        context.tableSelection?.table,\n        context.regularSelection?.startContainer,\n        context.regularSelection?.endContainer,\n    ];\n\n    return selectedNodes.some(n => contains(element, n, true /*treatSameNodeAsContain*/));\n}\n","import { addBlock } from '../../modelApi/common/addBlock';\nimport { ContentModelTableCellFormat } from '../../publicTypes/format/ContentModelTableCellFormat';\nimport { createTable } from '../../modelApi/creators/createTable';\nimport { createTableCell } from '../../modelApi/creators/createTableCell';\nimport { DatasetFormat } from '../../publicTypes/format/formatParts/DatasetFormat';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getBoundingClientRect } from '../utils/getBoundingClientRect';\nimport { parseFormat } from '../utils/parseFormat';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n *\n * For Table with merged/splitted cells, HTML uses colSpan and rowSpan attributes to specify how it should be rendered.\n * To make it easier to edit a table, we will use a different way to describe table.\n *\n * 1. For a m * n table (m rows, n columns), we always create a m * n array for the cells.\n * 2. For a regular table cell, it is mapped to one item of this array\n * 3. For a merged/splitted table cell, it will has colSpan/rowSpan value. We also created TableCell model for those spanned\n * cells, and use \"spanLeft\" and \"spanAbove\" to mark its state\n * 4. When edit table, we always edit on this mapped m * n array because it always has an item for each cell\n * 5. When write back to DOM, we create TD/TH elements for those non-spanned cells, and mark its colSpan/rowSpan value according\n * its neighbour cell's spanLeft/spanAbove attribute\n */\nexport const tableProcessor: ElementProcessor<HTMLTableElement> = (\n    group,\n    tableElement,\n    context\n) => {\n    stackFormat(\n        context,\n        { segment: 'shallowCloneForBlock', paragraph: 'shallowCloneForGroup' },\n        () => {\n            parseFormat(tableElement, context.formatParsers.block, context.blockFormat, context);\n\n            const table = createTable(tableElement.rows.length, context.blockFormat);\n            const { table: selectedTable, firstCell, lastCell } = context.tableSelection || {};\n            const hasTableSelection = selectedTable == tableElement && !!firstCell && !!lastCell;\n\n            if (context.allowCacheElement) {\n                table.cachedElement = tableElement;\n            }\n\n            parseFormat(tableElement, context.formatParsers.table, table.format, context);\n            parseFormat(tableElement, context.formatParsers.tableBorder, table.format, context);\n            parseFormat(\n                tableElement,\n                context.formatParsers.segmentOnBlock,\n                context.segmentFormat,\n                context\n            );\n            parseFormat(tableElement, context.formatParsers.dataset, table.dataset, context);\n            addBlock(group, table);\n\n            const columnPositions: number[] = [0];\n            const rowPositions: number[] = [0];\n            const zoomScale = context.zoomScaleFormat.zoomScale || 1;\n\n            for (let row = 0; row < tableElement.rows.length; row++) {\n                const tr = tableElement.rows[row];\n                const tableRow = table.rows[row];\n\n                if (context.allowCacheElement) {\n                    tableRow.cachedElement = tr;\n                }\n\n                parseFormat(tr, context.formatParsers.tableRow, tableRow.format, context);\n\n                stackFormat(context, { paragraph: 'shallowClone', segment: 'shallowClone' }, () => {\n                    const parent = tr.parentElement;\n                    const parentTag = parent?.tagName;\n\n                    if (\n                        parent &&\n                        (parentTag == 'TBODY' || parentTag == 'THEAD' || parentTag == 'TFOOT')\n                    ) {\n                        // If there is TBODY around TR, retrieve format from TBODY first, in case some format are declared there\n                        parseFormat(\n                            parent,\n                            context.formatParsers.block,\n                            context.blockFormat,\n                            context\n                        );\n                        parseFormat(\n                            parent,\n                            context.formatParsers.segmentOnBlock,\n                            context.segmentFormat,\n                            context\n                        );\n                    }\n\n                    parseFormat(tr, context.formatParsers.block, context.blockFormat, context);\n                    parseFormat(\n                        tr,\n                        context.formatParsers.segmentOnBlock,\n                        context.segmentFormat,\n                        context\n                    );\n\n                    for (\n                        let sourceCol = 0, targetCol = 0;\n                        sourceCol < tr.cells.length;\n                        sourceCol++\n                    ) {\n                        for (; tableRow.cells[targetCol]; targetCol++) {}\n\n                        const td = tr.cells[sourceCol];\n                        const hasSelectionBeforeCell = context.isInSelection;\n                        const colEnd = targetCol + td.colSpan;\n                        const rowEnd = row + td.rowSpan;\n                        const needCalcWidth = columnPositions[colEnd] === undefined;\n                        const needCalcHeight = rowPositions[rowEnd] === undefined;\n\n                        if (needCalcWidth || needCalcHeight) {\n                            const rect = getBoundingClientRect(td);\n\n                            if (rect.width > 0 || rect.height > 0) {\n                                if (needCalcWidth) {\n                                    columnPositions[colEnd] =\n                                        columnPositions[targetCol] + rect.width / zoomScale;\n                                }\n\n                                if (needCalcHeight) {\n                                    rowPositions[rowEnd] =\n                                        rowPositions[row] + rect.height / zoomScale;\n                                }\n                            }\n                        }\n\n                        stackFormat(\n                            context,\n                            { paragraph: 'shallowClone', segment: 'shallowClone' },\n                            () => {\n                                parseFormat(\n                                    td,\n                                    context.formatParsers.block,\n                                    context.blockFormat,\n                                    context\n                                );\n                                parseFormat(\n                                    td,\n                                    context.formatParsers.segmentOnTableCell,\n                                    context.segmentFormat,\n                                    context\n                                );\n\n                                const cellFormat: ContentModelTableCellFormat = {\n                                    ...context.blockFormat,\n                                };\n                                const dataset: DatasetFormat = {};\n\n                                parseFormat(\n                                    td,\n                                    context.formatParsers.tableCell,\n                                    cellFormat,\n                                    context\n                                );\n                                parseFormat(\n                                    td,\n                                    context.formatParsers.tableBorder,\n                                    cellFormat,\n                                    context\n                                );\n                                parseFormat(td, context.formatParsers.dataset, dataset, context);\n\n                                for (\n                                    let colSpan = 1;\n                                    colSpan <= td.colSpan;\n                                    colSpan++, targetCol++\n                                ) {\n                                    for (let rowSpan = 1; rowSpan <= td.rowSpan; rowSpan++) {\n                                        const hasTd = colSpan == 1 && rowSpan == 1;\n                                        const cell = createTableCell(\n                                            colSpan > 1,\n                                            rowSpan > 1,\n                                            td.tagName == 'TH',\n                                            cellFormat\n                                        );\n\n                                        cell.dataset = { ...dataset };\n\n                                        const spannedRow = table.rows[row + rowSpan - 1];\n\n                                        if (spannedRow) {\n                                            spannedRow.cells[targetCol] = cell;\n                                        }\n\n                                        if (hasTd) {\n                                            if (context.allowCacheElement) {\n                                                cell.cachedElement = td;\n                                            }\n\n                                            const { listParent, levels } = context.listFormat;\n\n                                            context.listFormat.listParent = undefined;\n                                            context.listFormat.levels = [];\n\n                                            try {\n                                                context.elementProcessors.child(cell, td, context);\n                                            } finally {\n                                                context.listFormat.listParent = listParent;\n                                                context.listFormat.levels = levels;\n                                            }\n                                        }\n\n                                        const hasSelectionAfterCell = context.isInSelection;\n\n                                        if (\n                                            (hasSelectionBeforeCell && hasSelectionAfterCell) ||\n                                            (hasTableSelection &&\n                                                row >= firstCell.y &&\n                                                row <= lastCell.y &&\n                                                targetCol >= firstCell.x &&\n                                                targetCol <= lastCell.x)\n                                        ) {\n                                            cell.isSelected = true;\n                                        }\n                                    }\n                                }\n                            }\n                        );\n                    }\n                });\n            }\n\n            table.widths = calcSizes(columnPositions);\n\n            const heights = calcSizes(rowPositions);\n\n            table.rows.forEach((row, i) => {\n                if (heights[i] > 0) {\n                    row.height = heights[i];\n                }\n            });\n        }\n    );\n};\n\nfunction calcSizes(positions: number[]): number[] {\n    let result: number[] = [];\n    let lastPos = positions[positions.length - 1];\n\n    for (let i = positions.length - 2; i >= 0; i--) {\n        if (positions[i] === undefined) {\n            result[i] = 0;\n        } else {\n            result[i] = lastPos - positions[i];\n            lastPos = positions[i];\n        }\n    }\n\n    return result;\n}\n","import { addDecorators } from '../../modelApi/common/addDecorators';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { addSelectionMarker } from '../utils/addSelectionMarker';\nimport { areSameFormats } from '../utils/areSameFormats';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { createText } from '../../modelApi/creators/createText';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../publicTypes/context/ElementProcessor';\nimport { getRegularSelectionOffsets } from '../utils/getRegularSelectionOffsets';\nimport { hasSpacesOnly } from '../../domUtils/stringUtil';\n\n/**\n * @internal\n */\nexport const textProcessor: ElementProcessor<Text> = (\n    group: ContentModelBlockGroup,\n    textNode: Text,\n    context: DomToModelContext\n) => {\n    let txt = textNode.nodeValue || '';\n    let [txtStartOffset, txtEndOffset] = getRegularSelectionOffsets(context, textNode);\n\n    if (txtStartOffset >= 0) {\n        addTextSegment(group, txt.substring(0, txtStartOffset), context);\n        context.isInSelection = true;\n\n        addSelectionMarker(group, context);\n\n        txt = txt.substring(txtStartOffset);\n        txtEndOffset -= txtStartOffset;\n    }\n\n    if (txtEndOffset >= 0) {\n        addTextSegment(group, txt.substring(0, txtEndOffset), context);\n\n        if (!context.regularSelection!.isSelectionCollapsed) {\n            addSelectionMarker(group, context);\n        }\n\n        context.isInSelection = false;\n        txt = txt.substring(txtEndOffset);\n    }\n\n    addTextSegment(group, txt, context);\n};\n\n// When we see these values of white-space style, need to preserve spaces and line-breaks and let browser handle it for us.\nconst WhiteSpaceValuesNeedToHandle = ['pre', 'pre-wrap', 'pre-line', 'break-spaces'];\n\nfunction addTextSegment(group: ContentModelBlockGroup, text: string, context: DomToModelContext) {\n    if (text) {\n        const lastBlock = group.blocks[group.blocks.length - 1];\n        const paragraph = lastBlock?.blockType == 'Paragraph' ? lastBlock : null;\n        const lastSegment = paragraph?.segments[paragraph.segments.length - 1];\n\n        if (\n            lastSegment?.segmentType == 'Text' &&\n            !!lastSegment.isSelected == !!context.isInSelection &&\n            areSameFormats(lastSegment.format, context.segmentFormat) &&\n            areSameFormats(lastSegment.link || {}, context.link.format || {}) &&\n            areSameFormats(lastSegment.code || {}, context.code.format || {})\n        ) {\n            lastSegment.text += text;\n        } else if (\n            !hasSpacesOnly(text) ||\n            paragraph?.segments.length! > 0 ||\n            WhiteSpaceValuesNeedToHandle.indexOf(paragraph?.format.whiteSpace || '') >= 0\n        ) {\n            const textModel = createText(text, context.segmentFormat);\n\n            if (context.isInSelection) {\n                textModel.isSelected = true;\n            }\n\n            addDecorators(textModel, context);\n\n            addSegment(group, textModel, context.blockFormat);\n        }\n    }\n}\n","import { addDecorators } from '../../modelApi/common/addDecorators';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { createSelectionMarker } from '../../modelApi/creators/createSelectionMarker';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\n\n/**\n * @internal\n */\nexport function addSelectionMarker(group: ContentModelBlockGroup, context: DomToModelContext) {\n    const marker = createSelectionMarker(context.segmentFormat);\n\n    addDecorators(marker, context);\n\n    addSegment(group, marker, context.blockFormat);\n}\n","import { ContentModelFormatBase } from '../../publicTypes/format/ContentModelFormatBase';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport function areSameFormats<T extends ContentModelFormatBase>(f1: T, f2: T) {\n    if (f1 == f2) {\n        return true;\n    } else {\n        const keys1 = getObjectKeys(f1);\n        const keys2 = getObjectKeys(f2);\n\n        return keys1.length == keys2.length && keys1.every(key => f1[key] == f2[key]);\n    }\n}\n","/**\n * @internal\n */\nexport function getBoundingClientRect(element: Element): DOMRect {\n    return element.getBoundingClientRect();\n}\n","import { DefaultStyleMap } from '../../publicTypes/context/DomToModelSettings';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\n\n/**\n * @internal\n * Get default CSS style of given element\n * @param element The element to get default style from\n * @param context The context of DOM to Content Model conversion\n * @returns A valid CSS style object\n */\nexport function getDefaultStyle(\n    element: HTMLElement,\n    context: DomToModelContext\n): Partial<CSSStyleDeclaration> {\n    let tag = element.tagName.toLowerCase() as keyof DefaultStyleMap;\n\n    return context.defaultStyles[tag] || {};\n}\n","import { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\n\n/**\n * @internal\n */\nexport function getRegularSelectionOffsets(\n    context: DomToModelContext,\n    currentContainer: Node\n): [number, number] {\n    let startOffset =\n        context.regularSelection?.startContainer == currentContainer\n            ? context.regularSelection.startOffset!\n            : -1;\n    let endOffset =\n        context.regularSelection?.endContainer == currentContainer\n            ? context.regularSelection.endOffset!\n            : -1;\n\n    return [startOffset, endOffset];\n}\n","import { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { getDefaultStyle } from './getDefaultStyle';\n\nconst BLOCK_DISPLAY_STYLES = ['block', 'list-item', 'table', 'table-cell', 'flex'];\n\n/**\n * @internal\n * Check if the given element will be layout as a block\n * @param element The element to check\n * @param context The context of DOM to Content Model conversion\n */\nexport function isBlockElement(element: HTMLElement, context: DomToModelContext): boolean {\n    const display = element.style.display || getDefaultStyle(element, context).display || '';\n\n    return BLOCK_DISPLAY_STYLES.indexOf(display) >= 0;\n}\n","import { ContentModelFormatBase } from '../../publicTypes/format/ContentModelFormatBase';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { FormatParser } from '../../publicTypes/context/DomToModelSettings';\nimport { getDefaultStyle } from './getDefaultStyle';\n\n/**\n * @internal\n */\nexport function parseFormat<T extends ContentModelFormatBase>(\n    element: HTMLElement,\n    parsers: (FormatParser<T> | null)[],\n    format: T,\n    context: DomToModelContext\n) {\n    const defaultStyle = getDefaultStyle(element, context);\n\n    parsers.forEach(parser => {\n        parser?.(format, element, context, defaultStyle);\n    });\n}\n","import { ContentModelBlockFormat } from '../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelCode } from '../../publicTypes/decorator/ContentModelCode';\nimport { ContentModelFormatBase } from '../../publicTypes/format/ContentModelFormatBase';\nimport { ContentModelLink } from '../../publicTypes/decorator/ContentModelLink';\nimport { ContentModelParagraphDecorator } from '../../publicTypes/decorator/ContentModelParagraphDecorator';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { DomToModelContext } from '../../publicTypes/context/DomToModelContext';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport interface StackFormatOptions {\n    segment?: 'shallowClone' | 'shallowCloneForBlock' | 'empty';\n    paragraph?: 'shallowClone' | 'shallowCloneForGroup' | 'empty';\n    blockDecorator?: 'empty';\n    link?: 'linkDefault' | 'empty';\n    code?: 'codeDefault' | 'empty';\n}\n\n// Some styles, such as background color, won't be inherited by block element if it was originally\n// declared from an inline element. So we need to skip them.\n// e.g.\n// <span style=\"background-color: red\">\n//   line 1       <---------------------------- in red here\n//   <div>line 2</div>  <---------------------- not in red here\n// </span>\nconst SkippedStylesForBlock: (keyof ContentModelSegmentFormat)[] = ['backgroundColor'];\nconst SkippedStylesForTable: (keyof ContentModelBlockFormat)[] = [\n    'marginLeft',\n    'marginRight',\n    'paddingLeft',\n    'paddingRight',\n];\n\n/**\n * @internal\n */\nexport function stackFormat(\n    context: DomToModelContext,\n    options: StackFormatOptions,\n    callback: () => void\n) {\n    const {\n        segmentFormat,\n        blockFormat,\n        link: linkFormat,\n        code: codeFormat,\n        blockDecorator: decoratorFormat,\n    } = context;\n    const { segment, paragraph, link, code, blockDecorator } = options;\n\n    try {\n        context.segmentFormat = stackFormatInternal(segmentFormat, segment);\n        context.blockFormat = stackFormatInternal(blockFormat, paragraph);\n        context.link = stackLinkInternal(linkFormat, link);\n        context.code = stackCodeInternal(codeFormat, code);\n        context.blockDecorator = stackDecoratorInternal(decoratorFormat, blockDecorator);\n\n        callback();\n    } finally {\n        context.segmentFormat = segmentFormat;\n        context.blockFormat = blockFormat;\n        context.link = linkFormat;\n        context.code = codeFormat;\n        context.blockDecorator = decoratorFormat;\n    }\n}\n\nfunction stackLinkInternal(linkFormat: ContentModelLink, link?: 'linkDefault' | 'empty') {\n    switch (link) {\n        case 'linkDefault':\n            return {\n                format: {\n                    underline: true,\n                },\n                dataset: {},\n            };\n\n        case 'empty':\n            return {\n                format: {},\n                dataset: {},\n            };\n\n        default:\n            return linkFormat;\n    }\n}\n\nfunction stackCodeInternal(codeFormat: ContentModelCode, code?: 'codeDefault' | 'empty') {\n    switch (code) {\n        case 'codeDefault':\n            return {\n                format: {\n                    fontFamily: 'monospace',\n                },\n            };\n        case 'empty':\n            return {\n                format: {},\n            };\n        default:\n            return codeFormat;\n    }\n}\n\nfunction stackDecoratorInternal(\n    format: ContentModelParagraphDecorator,\n    decorator?: 'decoratorDefault' | 'empty'\n) {\n    switch (decorator) {\n        case 'empty':\n            return {\n                format: {},\n                tagName: '',\n            };\n        default:\n            return format;\n    }\n}\n\nfunction stackFormatInternal<T extends ContentModelFormatBase>(\n    format: T,\n    processType?: 'shallowClone' | 'shallowCloneForBlock' | 'shallowCloneForGroup' | 'empty'\n): T | {} {\n    switch (processType) {\n        case 'empty':\n            return {};\n\n        case undefined:\n            return format;\n\n        default:\n            const result = { ...format };\n\n            getObjectKeys(format).forEach(key => {\n                if (\n                    (processType == 'shallowCloneForBlock' &&\n                        SkippedStylesForBlock.indexOf(key as keyof ContentModelSegmentFormat) >=\n                            0) ||\n                    (processType == 'shallowCloneForGroup' &&\n                        SkippedStylesForTable.indexOf(key as keyof ContentModelBlockFormat) >= 0)\n                ) {\n                    delete result[key];\n                }\n            });\n\n            return result;\n    }\n}\n","import { Border } from '../publicTypes/interface/Border';\n\nconst BorderStyles = [\n    'none',\n    'hidden',\n    'dotted',\n    'dashed',\n    'solid',\n    'double',\n    'groove',\n    'ridge',\n    'inset',\n    'outset',\n];\nconst BorderSizeRegex = /^(thin|medium|thick|[\\d\\.]+\\w*)$/;\n\n/**\n * Extract an integrated border string with border width, style, color to value tuple\n * @param combinedBorder The integrated border style string\n * @returns An array with the splitted values\n */\nexport function extractBorderValues(combinedBorder?: string): Border {\n    const result: Border = {};\n    const values = (combinedBorder || '').replace(/, /g, ',').split(' ');\n\n    values.forEach(v => {\n        if (BorderStyles.indexOf(v) >= 0 && !result.style) {\n            result.style = v;\n        } else if (BorderSizeRegex.test(v) && !result.width) {\n            result.width = v;\n        } else if (v && !result.color) {\n            result.color = v; // TODO: Do we need to use a regex to match all possible colors?\n        }\n    });\n\n    return result;\n}\n\n/**\n * Combine border value array back to string\n * @param values Input string values\n * @param initialValue Initial value for those items without valid value\n */\nexport function combineBorderValue(value: Border): string {\n    return [value.width || '', value.style || '', value.color || ''].join(' ').trim() || 'none';\n}\n","export { combineBorderValue, extractBorderValues } from './borderValues';\nexport { updateImageMetadata } from './metadata/updateImageMetadata';\nexport { updateListMetadata } from './metadata/updateListMetadata';\nexport { updateMetadata } from './metadata/updateMetadata';\nexport { updateTableCellMetadata } from './metadata/updateTableCellMetadata';\nexport { updateTableMetadata } from './metadata/updateTableMetadata';\n","import { NodeType } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nexport interface NodeTypeMap {\n    [NodeType.Attribute]: Attr;\n    [NodeType.Comment]: Comment;\n    [NodeType.DocumentFragment]: DocumentFragment;\n    [NodeType.Document]: Document;\n    [NodeType.DocumentType]: DocumentType;\n    [NodeType.Element]: HTMLElement;\n    [NodeType.ProcessingInstruction]: ProcessingInstruction;\n    [NodeType.Text]: Text;\n}\n\n/**\n * @internal\n */\nexport function isNodeOfType<T extends NodeType>(\n    node: Node | null | undefined,\n    expectedType: T\n): node is NodeTypeMap[T] {\n    return !!node && node.nodeType == expectedType;\n}\n","import { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { ImageMetadataFormat } from '../../publicTypes/format/formatParts/ImageMetadataFormat';\nimport { updateMetadata } from './updateMetadata';\n\nimport {\n    createNumberDefinition,\n    createObjectDefinition,\n    createStringDefinition,\n} from 'roosterjs-editor-dom';\n\nconst NumberDefinition = createNumberDefinition();\n\nconst ImageMetadataFormatDefinition = createObjectDefinition<Required<ImageMetadataFormat>>({\n    widthPx: NumberDefinition,\n    heightPx: NumberDefinition,\n    leftPercent: NumberDefinition,\n    rightPercent: NumberDefinition,\n    topPercent: NumberDefinition,\n    bottomPercent: NumberDefinition,\n    angleRad: NumberDefinition,\n    src: createStringDefinition(),\n    naturalHeight: NumberDefinition,\n    naturalWidth: NumberDefinition,\n});\n\n/**\n * @internal\n * Update image metadata with a callback\n * @param image The image Content Model\n * @param callback The callback function used for updating metadata\n */\nexport function updateImageMetadata(\n    image: ContentModelImage,\n    callback?: (format: ImageMetadataFormat | null) => ImageMetadataFormat | null\n): ImageMetadataFormat | null {\n    return updateMetadata(image, callback, ImageMetadataFormatDefinition);\n}\n","import { BulletListType, NumberingListType } from 'roosterjs-editor-types';\nimport { ContentModelWithDataset } from '../../publicTypes/format/ContentModelWithDataset';\nimport { createNumberDefinition, createObjectDefinition } from 'roosterjs-editor-dom';\nimport { ListMetadataFormat } from '../../publicTypes/format/formatParts/ListMetadataFormat';\nimport { updateMetadata } from './updateMetadata';\n\nconst ListStyleDefinitionMetadata = createObjectDefinition<ListMetadataFormat>(\n    {\n        orderedStyleType: createNumberDefinition(\n            true /** isOptional */,\n            undefined /** value **/,\n            NumberingListType.Min,\n            NumberingListType.Max\n        ),\n        unorderedStyleType: createNumberDefinition(\n            true /** isOptional */,\n            undefined /** value **/,\n            BulletListType.Min,\n            BulletListType.Max\n        ),\n    },\n    true /** isOptional */,\n    true /** allowNull */\n);\n\n/**\n * @internal\n * Update list metadata with a callback\n * @param list The list Content Model (metadata holder)\n * @param callback The callback function used for updating metadata\n */\nexport function updateListMetadata(\n    list: ContentModelWithDataset<ListMetadataFormat>,\n    callback?: (format: ListMetadataFormat | null) => ListMetadataFormat | null\n): ListMetadataFormat | null {\n    return updateMetadata(list, callback, ListStyleDefinitionMetadata);\n}\n","import { ContentModelWithDataset } from '../../publicTypes/format/ContentModelWithDataset';\nimport { Definition } from 'roosterjs-editor-types';\nimport { validate } from 'roosterjs-editor-dom';\n\nconst EditingInfoDatasetName = 'editingInfo';\n\n/**\n * @internal\n */\nexport function updateMetadata<T>(\n    model: ContentModelWithDataset<T>,\n    callback?: (metadata: T | null) => T | null,\n    definition?: Definition<T>\n): T | null {\n    const metadataString = model.dataset[EditingInfoDatasetName];\n    let obj: T | null = null;\n\n    try {\n        obj = JSON.parse(metadataString) as T;\n    } catch {}\n\n    if (definition && !validate(obj, definition)) {\n        obj = null;\n    }\n\n    if (callback) {\n        obj = callback(obj);\n\n        if (!obj) {\n            delete model.dataset[EditingInfoDatasetName];\n        } else if (!definition || validate(obj, definition)) {\n            model.dataset[EditingInfoDatasetName] = JSON.stringify(obj);\n        }\n    }\n\n    return obj;\n}\n\n/**\n * @internal Check if the given model has metadata\n */\nexport function hasMetadata<T>(model: ContentModelWithDataset<T> | HTMLElement): boolean {\n    return !!model.dataset[EditingInfoDatasetName];\n}\n","import { ContentModelTableCell } from '../../publicTypes/group/ContentModelTableCell';\nimport { createBooleanDefinition, createObjectDefinition } from 'roosterjs-editor-dom';\nimport { TableCellMetadataFormat } from 'roosterjs-editor-types';\nimport { updateMetadata } from './updateMetadata';\n\nconst TableCellMetadataFormatDefinition = createObjectDefinition<Required<TableCellMetadataFormat>>(\n    {\n        bgColorOverride: createBooleanDefinition(true /** isOptional */),\n    },\n    false /* isOptional */,\n    true /** allowNull */\n);\n\n/**\n * @internal\n * Update table cell metadata with a callback\n * @param cell The table cell Content Model\n * @param callback The callback function used for updating metadata\n */\nexport function updateTableCellMetadata(\n    cell: ContentModelTableCell,\n    callback?: (format: TableCellMetadataFormat | null) => TableCellMetadataFormat | null\n): TableCellMetadataFormat | null {\n    return updateMetadata(cell, callback, TableCellMetadataFormatDefinition);\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { TableBorderFormat } from 'roosterjs-editor-types';\nimport { TableMetadataFormat } from '../../publicTypes/format/formatParts/TableMetadataFormat';\nimport { updateMetadata } from './updateMetadata';\nimport {\n    createBooleanDefinition,\n    createNumberDefinition,\n    createObjectDefinition,\n    createStringDefinition,\n} from 'roosterjs-editor-dom';\n\nconst NullStringDefinition = createStringDefinition(\n    false /** isOptional */,\n    undefined /** value */,\n    true /** allowNull */\n);\n\nconst BooleanDefinition = createBooleanDefinition(false /** isOptional */);\n\nconst TableFormatDefinition = createObjectDefinition<Required<TableMetadataFormat>>(\n    {\n        topBorderColor: NullStringDefinition,\n        bottomBorderColor: NullStringDefinition,\n        verticalBorderColor: NullStringDefinition,\n        hasHeaderRow: BooleanDefinition,\n        headerRowColor: NullStringDefinition,\n        hasFirstColumn: BooleanDefinition,\n        hasBandedColumns: BooleanDefinition,\n        hasBandedRows: BooleanDefinition,\n        bgColorEven: NullStringDefinition,\n        bgColorOdd: NullStringDefinition,\n        tableBorderFormat: createNumberDefinition(\n            false /** isOptional */,\n            undefined /* value */,\n            TableBorderFormat.DEFAULT /* first table border format, TODO: Use Min/Max to specify valid values */,\n            TableBorderFormat.CLEAR /* last table border format, , TODO: Use Min/Max to specify valid values */\n        ),\n    },\n    false /* isOptional */,\n    true /** allowNull */\n);\n\n/**\n * @internal\n * Update table metadata with a callback\n * @param table The table Content Model\n * @param callback The callback function used for updating metadata\n */\nexport function updateTableMetadata(\n    table: ContentModelTable,\n    callback?: (format: TableMetadataFormat | null) => TableMetadataFormat | null\n): TableMetadataFormat | null {\n    return updateMetadata(table, callback, TableFormatDefinition);\n}\n","// A regex to match text that only has space and CR\n// We use real space char \" \" (\\u0020) here but not \"\\s\" since \"\\s\" will also match \"&nbsp;\" (\\u00A0) which is something we need to keep\nconst SPACE_TEXT_REGEX = /^[\\r\\n\\t ]*$/;\n\nconst SPACES_REGEX = /[\\u2000\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000\\s\\t\\r\\n]/gm;\nconst PUNCTUATIONS = '.,?!:\"()[]\\\\/';\n\n/**\n * @internal\n */\nexport function isPunctuation(char: string) {\n    return PUNCTUATIONS.indexOf(char) >= 0;\n}\n\n/**\n * @internal\n */\nexport function isSpace(char: string) {\n    const code = char?.charCodeAt(0) ?? 0;\n    return code == 160 || code == 32 || SPACES_REGEX.test(char);\n}\n\n/**\n * @internal\n */\nexport function hasSpacesOnly(txt: string): boolean {\n    return SPACE_TEXT_REGEX.test(txt);\n}\n\n/**\n * @internal\n */\nexport function normalizeText(txt: string, isForward: boolean): string {\n    return txt.replace(isForward ? /^\\u0020+/ : /\\u0020+$/, '\\u00A0');\n}\n","import { ContentModelDocument } from '../publicTypes/group/ContentModelDocument';\nimport { ContentModelEditorCore } from '../publicTypes/ContentModelEditorCore';\nimport { ContentModelSegmentFormat } from '../publicTypes/format/ContentModelSegmentFormat';\nimport { createContentModelEditorCore } from './createContentModelEditorCore';\nimport { EditorBase } from 'roosterjs-editor-core';\nimport { formatWithContentModel } from '../publicApi/utils/formatWithContentModel';\nimport { getOnDeleteEntityCallback } from './utils/handleKeyboardEventCommon';\nimport { mergeModel } from '../modelApi/common/mergeModel';\nimport { Position } from 'roosterjs-editor-dom';\nimport {\n    ChangeSource,\n    ClipboardData,\n    ExperimentalFeatures,\n    GetContentMode,\n} from 'roosterjs-editor-types';\nimport {\n    ContentModelEditorOptions,\n    DomToModelOption,\n    IContentModelEditor,\n    ModelToDomOption,\n} from '../publicTypes/IContentModelEditor';\n\n/**\n * Editor for Content Model.\n * (This class is still under development, and may still be changed in the future with some breaking changes)\n */\nexport default class ContentModelEditor\n    extends EditorBase<ContentModelEditorCore, ContentModelEditorOptions>\n    implements IContentModelEditor {\n    /**\n     * Creates an instance of Editor\n     * @param contentDiv The DIV HTML element which will be the container element of editor\n     * @param options An optional options object to customize the editor\n     */\n    constructor(contentDiv: HTMLDivElement, options: ContentModelEditorOptions = {}) {\n        super(contentDiv, options, createContentModelEditorCore);\n    }\n\n    /**\n     * Create Content Model from DOM tree in this editor\n     * @param option The option to customize the behavior of DOM to Content Model conversion\n     */\n    createContentModel(option?: DomToModelOption): ContentModelDocument {\n        const core = this.getCore();\n\n        return core.api.createContentModel(core, option);\n    }\n\n    /**\n     * Set content with content model\n     * @param model The content model to set\n     * @param option Additional options to customize the behavior of Content Model to DOM conversion\n     */\n    setContentModel(model: ContentModelDocument, option?: ModelToDomOption) {\n        const core = this.getCore();\n\n        core.api.setContentModel(core, model, option);\n    }\n\n    /**\n     * Cache a content model object. Next time when format with content model, we can reuse it.\n     * @param model\n     */\n    cacheContentModel(model: ContentModelDocument | null) {\n        const core = this.getCore();\n\n        if (core.reuseModel && !core.lifecycle.shadowEditFragment) {\n            core.cachedModel = model || undefined;\n        }\n    }\n\n    /**\n     * Get default format as ContentModelSegmentFormat.\n     * This is a replacement of IEditor.getDefaultFormat for Content Model.\n     * @returns The default format\n     */\n    getContentModelDefaultFormat(): ContentModelSegmentFormat {\n        const core = this.getCore();\n\n        return core.defaultFormat;\n    }\n\n    /**\n     * Paste into editor using a clipboardData object\n     * @param clipboardData Clipboard data retrieved from clipboard\n     * @param pasteAsText Force pasting as plain text. Default value is false\n     * @param applyCurrentStyle True if apply format of current selection to the pasted content,\n     * false to keep original format.  Default value is false. When pasteAsText is true, this parameter is ignored\n     */\n    public paste(\n        clipboardData: ClipboardData,\n        pasteAsText: boolean = false,\n        applyCurrentFormat: boolean = false,\n        pasteAsImage: boolean = false\n    ) {\n        if (!this.isFeatureEnabled(ExperimentalFeatures.ContentModelPaste)) {\n            super.paste(clipboardData, pasteAsText, applyCurrentFormat, pasteAsImage);\n            return;\n        }\n\n        const core = this.getCore();\n        if (!clipboardData) {\n            return;\n        }\n\n        if (clipboardData.snapshotBeforePaste) {\n            // Restore original content before paste a new one\n            this.setContent(clipboardData.snapshotBeforePaste);\n        } else {\n            clipboardData.snapshotBeforePaste = this.getContent(\n                GetContentMode.RawHTMLWithSelection\n            );\n        }\n\n        const range = this.getSelectionRange();\n        const pos = range && Position.getStart(range);\n        const pasteModel = core.api.createPasteModel(\n            core,\n            clipboardData,\n            pos,\n            pasteAsText,\n            applyCurrentFormat,\n            pasteAsImage\n        );\n\n        if (pasteModel) {\n            formatWithContentModel(\n                this,\n                'Paste',\n                model => {\n                    mergeModel(model, pasteModel, getOnDeleteEntityCallback(this));\n                    return true;\n                },\n                {\n                    changeSource: ChangeSource.Paste,\n                }\n            );\n        }\n    }\n}\n","import domToContentModel from '../../domToModel/domToContentModel';\nimport { cloneModel } from '../../modelApi/common/cloneModel';\nimport { DomToModelOption } from '../../publicTypes/IContentModelEditor';\nimport { tablePreProcessor } from '../../domToModel/processors/tablePreProcessor';\nimport {\n    ContentModelEditorCore,\n    CreateContentModel,\n} from '../../publicTypes/ContentModelEditorCore';\n\n/**\n * @internal\n * Create Content Model from DOM tree in this editor\n * @param option The option to customize the behavior of DOM to Content Model conversion\n */\nexport const createContentModel: CreateContentModel = (core, option) => {\n    let cachedModel = core.reuseModel ? core.cachedModel : null;\n\n    if (cachedModel && core.lifecycle.shadowEditFragment) {\n        // When in shadow edit, use a cloned model so we won't pollute the cached one\n        cachedModel = cloneModel(cachedModel);\n    }\n\n    return cachedModel || internalCreateContentModel(core, option);\n};\n\nfunction internalCreateContentModel(\n    core: ContentModelEditorCore,\n    option: DomToModelOption | undefined\n) {\n    const context: DomToModelOption = {\n        selectionRange: core.api.getSelectionRangeEx(core),\n        ...core.defaultDomToModelOptions,\n        ...(option || {}),\n        processorOverride: {\n            table: tablePreProcessor,\n            ...(option?.processorOverride || {}),\n        },\n    };\n\n    if (!core.reuseModel) {\n        context.disableCacheElement = true;\n    }\n\n    return domToContentModel(core.contentDiv, core.api.createEditorContext(core), context);\n}\n","import { CreateEditorContext } from '../../publicTypes/ContentModelEditorCore';\n\n/**\n * @internal\n * Create a EditorContext object used by ContentModel API\n */\nexport const createEditorContext: CreateEditorContext = core => {\n    return {\n        isDarkMode: core.lifecycle.isDarkMode,\n        defaultFormat: core.defaultFormat,\n        darkColorHandler: core.darkColorHandler,\n        addDelimiterForEntity: core.addDelimiterForEntity,\n    };\n};\n","import ContentModelBeforePasteEvent from '../../publicTypes/event/ContentModelBeforePasteEvent';\nimport domToContentModel from '../../domToModel/domToContentModel';\nimport { ContentModelEditorCore, CreatePasteModel } from '../../publicTypes/ContentModelEditorCore';\nimport {\n    ClipboardData,\n    EditorCore,\n    NodePosition,\n    PasteType,\n    PluginEventType,\n} from 'roosterjs-editor-types';\nimport {\n    createDefaultHtmlSanitizerOptions,\n    createFragmentFromClipboardData,\n} from 'roosterjs-editor-dom';\n\n/**\n * @internal\n * Create content model from clipboard data\n * @param core The EditorCore object.\n * @param clipboardData Clipboard data retrieved from clipboard\n * @param position The position to paste to\n * @param pasteAsText True to force use plain text as the content to paste, false to choose HTML or Image if any\n * @param applyCurrentStyle True if apply format of current selection to the pasted content,\n * false to keep original format\n */\nexport const createPasteModel: CreatePasteModel = (\n    core: ContentModelEditorCore,\n    clipboardData: ClipboardData,\n    position: NodePosition | null,\n    pasteAsText: boolean,\n    applyCurrentStyle: boolean,\n    pasteAsImage: boolean = false\n) => {\n    const pasteType = getPasteType(pasteAsText, applyCurrentStyle, pasteAsImage);\n    const event = createBeforePasteEvent(core, clipboardData, pasteType);\n\n    const fragment = createFragmentFromClipboardData(\n        core,\n        clipboardData,\n        position,\n        pasteAsText,\n        applyCurrentStyle,\n        pasteAsImage,\n        event\n    );\n\n    return domToContentModel(fragment, core.api.createEditorContext(core), {\n        ...event.domToModelOption,\n        disableCacheElement: true,\n    });\n};\n\n/**\n * @internal\n * Exported only for unit test\n * @param core The EditorCore object.\n * @param clipboardData Clipboard data retrieved from clipboard\n * @returns\n */\nexport function createBeforePasteEvent(\n    core: EditorCore,\n    clipboardData: ClipboardData,\n    pasteType: PasteType\n): ContentModelBeforePasteEvent {\n    const options = createDefaultHtmlSanitizerOptions();\n\n    // Remove \"caret-color\" style generated by Safari to make sure caret shows in right color after paste\n    options.cssStyleCallbacks['caret-color'] = () => false;\n\n    return {\n        eventType: PluginEventType.BeforePaste,\n        clipboardData,\n        fragment: core.contentDiv.ownerDocument.createDocumentFragment(),\n        sanitizingOption: options,\n        htmlBefore: '',\n        htmlAfter: '',\n        htmlAttributes: {},\n        domToModelOption: {},\n        pasteType: pasteType,\n    };\n}\n\nfunction getPasteType(pasteAsText: boolean, applyCurrentStyle: boolean, pasteAsImage: boolean) {\n    if (pasteAsText) {\n        return PasteType.AsPlainText;\n    } else if (applyCurrentStyle) {\n        return PasteType.MergeFormat;\n    } else if (pasteAsImage) {\n        return PasteType.AsImage;\n    } else {\n        return PasteType.Normal;\n    }\n}\n","import contentModelToDom from '../../modelToDom/contentModelToDom';\nimport { SetContentModel } from '../../publicTypes/ContentModelEditorCore';\n\n/**\n * @internal\n * Set content with content model\n * @param model The content model to set\n * @param option Additional options to customize the behavior of Content Model to DOM conversion\n */\nexport const setContentModel: SetContentModel = (core, model, option) => {\n    const range = contentModelToDom(\n        core.contentDiv.ownerDocument,\n        core.contentDiv,\n        model,\n        core.api.createEditorContext(core),\n        {\n            ...core.defaultModelToDomOptions,\n            ...(option || {}),\n        }\n    );\n\n    if (!core.lifecycle.shadowEditFragment) {\n        core.api.select(core, range);\n    }\n};\n","import { ContentModelEditorCore } from '../../publicTypes/ContentModelEditorCore';\nimport { SwitchShadowEdit } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * Switch the Shadow Edit mode of editor On/Off\n * @param editorCore The EditorCore object\n * @param isOn True to switch On, False to switch Off\n */\nexport const switchShadowEdit: SwitchShadowEdit = (editorCore, isOn): void => {\n    // TODO: Use strong-typed editor core object\n    const core = editorCore as ContentModelEditorCore;\n\n    if (isOn && !core.cachedModel) {\n        core.cachedModel = core.api.createContentModel(core);\n    }\n\n    core.originalApi.switchShadowEdit(editorCore, isOn);\n\n    if (!isOn && core.cachedModel) {\n        core.api.setContentModel(core, core.cachedModel);\n    }\n};\n","import contentModelToDom from '../../modelToDom/contentModelToDom';\nimport { cloneModel } from '../../modelApi/common/cloneModel';\nimport { deleteSelection } from '../../modelApi/edit/deleteSelection';\nimport { getOnDeleteEntityCallback } from '../utils/handleKeyboardEventCommon';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { iterateSelections } from '../../modelApi/selection/iterateSelections';\nimport {\n    addRangeToSelection,\n    createElement,\n    moveChildNodes,\n    createRange,\n    extractClipboardItems,\n    toArray,\n    Browser,\n} from 'roosterjs-editor-dom';\nimport {\n    ChangeSource,\n    CopyPastePluginState,\n    EditorOptions,\n    IEditor,\n    PluginEventType,\n    PluginWithState,\n    KnownCreateElementDataIndex,\n    ClipboardData,\n    SelectionRangeTypes,\n    SelectionRangeEx,\n} from 'roosterjs-editor-types';\n\n/**\n * @internal\n * Copy and paste plugin for handling onCopy and onPaste event\n */\nexport default class ContentModelCopyPastePlugin implements PluginWithState<CopyPastePluginState> {\n    private editor: IContentModelEditor | null = null;\n    private disposer: (() => void) | null = null;\n    private state: CopyPastePluginState;\n\n    /**\n     * Construct a new instance of CopyPastePlugin\n     * @param options The editor options\n     */\n    constructor(options: EditorOptions) {\n        this.state = {\n            allowedCustomPasteType: options.allowedCustomPasteType || [],\n        };\n    }\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return 'ContentModelCopyPaste';\n    }\n\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor as IContentModelEditor;\n        this.disposer = this.editor.addDomEventHandler({\n            paste: e => this.onPaste(e),\n            copy: e => this.onCutCopy(e, false /*isCut*/),\n            cut: e => this.onCutCopy(e, true /*isCut*/),\n        });\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        if (this.disposer) {\n            this.disposer();\n        }\n        this.disposer = null;\n        this.editor = null;\n    }\n\n    /**\n     * Get plugin state object\n     */\n    getState() {\n        return this.state;\n    }\n\n    private onCutCopy(event: Event, isCut: boolean) {\n        if (!this.editor) {\n            return;\n        }\n        const selection = this.editor.getSelectionRangeEx();\n        if (selection && !selection.areAllCollapsed) {\n            const model = this.editor.createContentModel({\n                disableCacheElement: true,\n            });\n\n            const pasteModel = cloneModel(model);\n            if (selection.type === SelectionRangeTypes.TableSelection) {\n                iterateSelections([pasteModel], (path, tableContext) => {\n                    if (tableContext?.table) {\n                        const table = tableContext?.table;\n                        table.rows = table.rows\n                            .map(row => {\n                                return {\n                                    ...row,\n                                    cells: row.cells.filter(cell => cell.isSelected),\n                                };\n                            })\n                            .filter(row => row.cells.length > 0);\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            const tempDiv = this.getTempDiv(this.editor);\n            const selectionAfterPaste = contentModelToDom(\n                tempDiv.ownerDocument,\n                tempDiv,\n                pasteModel,\n                {\n                    isDarkMode: false /* To force light mode on paste */,\n                    darkColorHandler: this.editor.getDarkColorHandler(),\n                }\n            );\n\n            let newRange: Range | null = selectionExToRange(selectionAfterPaste, tempDiv);\n            if (newRange) {\n                const cutCopyEvent = this.editor.triggerPluginEvent(PluginEventType.BeforeCutCopy, {\n                    clonedRoot: tempDiv,\n                    range: newRange,\n                    rawEvent: event as ClipboardEvent,\n                    isCut,\n                });\n\n                if (cutCopyEvent.range) {\n                    addRangeToSelection(newRange);\n                }\n\n                this.editor.runAsync(editor => {\n                    cleanUpAndRestoreSelection(tempDiv);\n                    editor.focus();\n                    if (selectionAfterPaste) {\n                        this.editor?.select(selectionAfterPaste);\n                    }\n                    if (isCut) {\n                        editor.addUndoSnapshot(() => {\n                            deleteSelection(\n                                model,\n                                getOnDeleteEntityCallback(editor as IContentModelEditor)\n                            );\n                            this.editor?.setContentModel(model);\n                        }, ChangeSource.Cut);\n                    }\n                });\n            }\n        }\n    }\n\n    private onPaste = (event: Event) => {\n        if (this.editor && isClipboardEvent(event)) {\n            const editor = this.editor;\n\n            const dataTransfer = event.clipboardData;\n\n            if (dataTransfer?.items) {\n                event.preventDefault();\n                extractClipboardItems(toArray(dataTransfer.items), {\n                    allowedCustomPasteType: this.state.allowedCustomPasteType,\n                }).then((clipboardData: ClipboardData) => {\n                    if (!editor.isDisposed()) {\n                        removeContentForAndroid(editor);\n                        editor.paste(clipboardData);\n                    }\n                });\n            }\n        }\n    };\n\n    private getTempDiv(editor: IEditor) {\n        const div = editor.getCustomData(\n            'CopyPasteTempDiv',\n            () => {\n                const tempDiv = createElement(\n                    KnownCreateElementDataIndex.CopyPasteTempDiv,\n                    editor.getDocument()\n                ) as HTMLDivElement;\n\n                editor.getDocument().body.appendChild(tempDiv);\n\n                return tempDiv;\n            },\n            tempDiv => tempDiv.parentNode?.removeChild(tempDiv)\n        );\n\n        div.style.backgroundColor = 'white';\n        div.style.color = 'black';\n        div.childNodes.forEach(node => div.removeChild(node));\n\n        div.style.display = '';\n        div.focus();\n\n        return div;\n    }\n}\n\nfunction cleanUpAndRestoreSelection(tempDiv: HTMLDivElement) {\n    tempDiv.style.backgroundColor = '';\n    tempDiv.style.color = '';\n    tempDiv.style.display = 'none';\n    moveChildNodes(tempDiv);\n}\nfunction isClipboardEvent(event: Event): event is ClipboardEvent {\n    return !!(event as ClipboardEvent).clipboardData;\n}\nfunction removeContentForAndroid(editor: IContentModelEditor) {\n    if (Browser.isAndroid) {\n        const model = editor.createContentModel();\n        deleteSelection(model, getOnDeleteEntityCallback(editor));\n        editor.setContentModel(model);\n    }\n}\nfunction selectionExToRange(\n    selection: SelectionRangeEx | null,\n    tempDiv: HTMLDivElement\n): Range | null {\n    if (!selection) {\n        return null;\n    }\n    let newRange: Range | null = null;\n    if (selection.type === SelectionRangeTypes.TableSelection && selection.coordinates) {\n        const table = tempDiv.querySelector(`#${selection.table.id}`) as HTMLTableElement;\n        newRange = createRange(table);\n    } else if (selection.type === SelectionRangeTypes.ImageSelection) {\n        const image = tempDiv.querySelector('#' + selection.image.id);\n\n        if (image) {\n            newRange = createRange(image);\n        }\n    } else {\n        newRange = selection.ranges[0];\n    }\n\n    return newRange;\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { isCharacterValue, Position } from 'roosterjs-editor-dom';\nimport { setPendingFormat } from '../../modelApi/format/pendingFormat';\nimport {\n    EditorPlugin,\n    IEditor,\n    PluginEvent,\n    PluginEventType,\n    SelectionRangeTypes,\n} from 'roosterjs-editor-types';\n\n// During IME input, KeyDown event will have \"Process\" as key\nconst ProcessKey = 'Process';\n\n/**\n * ContentModelTypeInContainer plugin helps editor handle keyDown event and make sure typing happens\n * under a valid container with default format applied. This is a replacement of original ContentModelTypeInContainer plugin\n */\nexport default class ContentModelTypeInContainerPlugin implements EditorPlugin {\n    private editor: IContentModelEditor | null = null;\n\n    /**\n     * Get name of this plugin\n     */\n    getName() {\n        return 'ContentModelTypeInContainer';\n    }\n\n    /**\n     * The first method that editor will call to a plugin when editor is initializing.\n     * It will pass in the editor instance, plugin should take this chance to save the\n     * editor reference so that it can call to any editor method or format API later.\n     * @param editor The editor object\n     */\n    initialize(editor: IEditor) {\n        // TODO: Later we may need a different interface for Content Model editor plugin\n        this.editor = editor as IContentModelEditor;\n    }\n\n    /**\n     * The last method that editor will call to a plugin before it is disposed.\n     * Plugin can take this chance to clear the reference to editor. After this method is\n     * called, plugin should not call to any editor method since it will result in error.\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Core method for a plugin. Once an event happens in editor, editor will call this\n     * method of each plugin to handle the event as long as the event is not handled\n     * exclusively by another plugin.\n     * @param event The event to handle:\n     */\n    onPluginEvent(event: PluginEvent) {\n        const editor = this.editor;\n\n        if (\n            editor &&\n            event.eventType == PluginEventType.KeyDown &&\n            (isCharacterValue(event.rawEvent) || event.rawEvent.key == ProcessKey)\n        ) {\n            const range = editor.getSelectionRangeEx();\n\n            if (\n                range.type == SelectionRangeTypes.Normal &&\n                range.ranges[0]?.collapsed &&\n                !editor.contains(range.ranges[0].startContainer)\n            ) {\n                const pendingFormat = getPendingFormat(editor) || {};\n                const defaultFormat = editor.getContentModelDefaultFormat();\n                const newFormat: ContentModelSegmentFormat = {\n                    ...defaultFormat,\n                    ...pendingFormat,\n                };\n\n                setPendingFormat(editor, newFormat, Position.getStart(range.ranges[0]));\n            }\n        }\n    }\n}\n","import ContentModelCopyPastePlugin from './corePlugins/ContentModelCopyPastePlugin';\nimport ContentModelEditPlugin from './plugins/ContentModelEditPlugin';\nimport ContentModelFormatPlugin from './plugins/ContentModelFormatPlugin';\nimport ContentModelTypeInContainerPlugin from './corePlugins/ContentModelTypeInContainerPlugin';\nimport { ContentModelEditorCore } from '../publicTypes/ContentModelEditorCore';\nimport { ContentModelEditorOptions } from '../publicTypes/IContentModelEditor';\nimport { ContentModelSegmentFormat } from '../publicTypes/format/ContentModelSegmentFormat';\nimport { CoreCreator, EditorCore, ExperimentalFeatures } from 'roosterjs-editor-types';\nimport { createContentModel } from './coreApi/createContentModel';\nimport { createEditorContext } from './coreApi/createEditorContext';\nimport { createEditorCore, isFeatureEnabled } from 'roosterjs-editor-core';\nimport { createPasteModel } from './coreApi/createPasteModel';\nimport { setContentModel } from './coreApi/setContentModel';\nimport { switchShadowEdit } from './coreApi/switchShadowEdit';\n\n/**\n * Editor Core creator for Content Model editor\n */\nexport const createContentModelEditorCore: CoreCreator<\n    ContentModelEditorCore,\n    ContentModelEditorOptions\n> = (contentDiv, options) => {\n    const modifiedOptions: ContentModelEditorOptions = {\n        ...options,\n        plugins: [\n            ...(options.plugins || []),\n            new ContentModelFormatPlugin(),\n            new ContentModelEditPlugin(),\n        ],\n        corePluginOverride: {\n            typeInContainer: new ContentModelTypeInContainerPlugin(),\n            copyPaste: new ContentModelCopyPastePlugin(options),\n            ...(options.corePluginOverride || {}),\n        },\n    };\n\n    const core = createEditorCore(contentDiv, modifiedOptions) as ContentModelEditorCore;\n\n    promoteToContentModelEditorCore(core, modifiedOptions);\n\n    return core;\n};\n\n/**\n * Creator Content Model Editor Core from Editor Core\n * @param core The original EditorCore object\n * @param options Options of this editor\n */\nexport function promoteToContentModelEditorCore(\n    core: EditorCore,\n    options: ContentModelEditorOptions\n) {\n    const cmCore = core as ContentModelEditorCore;\n\n    promoteDefaultFormat(cmCore);\n    promoteContentModelInfo(cmCore, options);\n    promoteCoreApi(cmCore);\n}\n\nfunction promoteDefaultFormat(cmCore: ContentModelEditorCore) {\n    cmCore.lifecycle.defaultFormat = cmCore.lifecycle.defaultFormat || {};\n    cmCore.defaultFormat = getDefaultSegmentFormat(cmCore);\n}\n\nfunction promoteContentModelInfo(\n    cmCore: ContentModelEditorCore,\n    options: ContentModelEditorOptions\n) {\n    const experimentalFeatures = cmCore.lifecycle.experimentalFeatures;\n\n    cmCore.defaultDomToModelOptions = options.defaultDomToModelOptions || {};\n    cmCore.defaultModelToDomOptions = options.defaultModelToDomOptions || {};\n    cmCore.reuseModel = isFeatureEnabled(\n        experimentalFeatures,\n        ExperimentalFeatures.ReusableContentModel\n    );\n    cmCore.addDelimiterForEntity = isFeatureEnabled(\n        experimentalFeatures,\n        ExperimentalFeatures.InlineEntityReadOnlyDelimiters\n    );\n}\n\nfunction promoteCoreApi(cmCore: ContentModelEditorCore) {\n    cmCore.api.createEditorContext = createEditorContext;\n    cmCore.api.createContentModel = createContentModel;\n    cmCore.api.setContentModel = setContentModel;\n    cmCore.api.createPasteModel = createPasteModel;\n\n    if (\n        isFeatureEnabled(\n            cmCore.lifecycle.experimentalFeatures,\n            ExperimentalFeatures.ReusableContentModel\n        )\n    ) {\n        // Only use Content Model shadow edit when reuse model is enabled because it relies on cached model for the original model\n        cmCore.api.switchShadowEdit = switchShadowEdit;\n    }\n    cmCore.originalApi.createEditorContext = createEditorContext;\n    cmCore.originalApi.createContentModel = createContentModel;\n    cmCore.originalApi.setContentModel = setContentModel;\n    cmCore.originalApi.createPasteModel = createPasteModel;\n}\n\nfunction getDefaultSegmentFormat(core: EditorCore): ContentModelSegmentFormat {\n    const format = core.lifecycle.defaultFormat ?? {};\n\n    return {\n        fontWeight: format.bold ? 'bold' : undefined,\n        italic: format.italic || undefined,\n        underline: format.underline || undefined,\n        fontFamily: format.fontFamily || undefined,\n        fontSize: format.fontSize || undefined,\n        textColor: format.textColors?.lightModeColor || format.textColor || undefined,\n        backgroundColor:\n            format.backgroundColors?.lightModeColor || format.backgroundColor || undefined,\n    };\n}\n","export { default as ContentModelEditor } from './ContentModelEditor';\nexport { default as isContentModelEditor } from './isContentModelEditor';\nexport { default as ContentModelFormatPlugin } from './plugins/ContentModelFormatPlugin';\nexport { default as ContentModelEditPlugin } from './plugins/ContentModelEditPlugin';\nexport { default as ContentModelPastePlugin } from './plugins/PastePlugin/ContentModelPastePlugin';\nexport { default as ContentModelTypeInContainerPlugin } from './corePlugins/ContentModelTypeInContainerPlugin';\nexport {\n    createContentModelEditorCore,\n    promoteToContentModelEditorCore,\n} from './createContentModelEditorCore';\n","import { IContentModelEditor } from '../publicTypes/IContentModelEditor';\nimport { IEditor } from 'roosterjs-editor-types';\n\nexport default function isContentModelEditor(editor: IEditor): editor is IContentModelEditor {\n    const contentModelEditor = editor as IContentModelEditor;\n\n    return !!contentModelEditor.createContentModel;\n}\n","import handleKeyDownEvent from '../../publicApi/editing/handleKeyDownEvent';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport {\n    EditorPlugin,\n    EntityOperationEvent,\n    ExperimentalFeatures,\n    IEditor,\n    Keys,\n    PluginEvent,\n    PluginEventType,\n} from 'roosterjs-editor-types';\n\n/**\n * ContentModel plugins helps editor to do editing operation on top of content model.\n * This includes:\n * 1. Delete Key\n * 2. Backspace Key\n */\nexport default class ContentModelEditPlugin implements EditorPlugin {\n    private editor: IContentModelEditor | null = null;\n    private triggeredEntityEvents: EntityOperationEvent[] = [];\n    private editWithContentModel = false;\n\n    /**\n     * Get name of this plugin\n     */\n    getName() {\n        return 'ContentModelEdit';\n    }\n\n    /**\n     * The first method that editor will call to a plugin when editor is initializing.\n     * It will pass in the editor instance, plugin should take this chance to save the\n     * editor reference so that it can call to any editor method or format API later.\n     * @param editor The editor object\n     */\n    initialize(editor: IEditor) {\n        // TODO: Later we may need a different interface for Content Model editor plugin\n        this.editor = editor as IContentModelEditor;\n        this.editWithContentModel = this.editor.isFeatureEnabled(\n            ExperimentalFeatures.EditWithContentModel\n        );\n    }\n\n    /**\n     * The last method that editor will call to a plugin before it is disposed.\n     * Plugin can take this chance to clear the reference to editor. After this method is\n     * called, plugin should not call to any editor method since it will result in error.\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Core method for a plugin. Once an event happens in editor, editor will call this\n     * method of each plugin to handle the event as long as the event is not handled\n     * exclusively by another plugin.\n     * @param event The event to handle:\n     */\n    onPluginEvent(event: PluginEvent) {\n        if (this.editor) {\n            if (\n                event.eventType == PluginEventType.EntityOperation &&\n                event.rawEvent?.type == 'keydown'\n            ) {\n                // If we see an entity operation event triggered from keydown event, it means the event can be triggered from original\n                // EntityFeatures or EntityPlugin, so we don't need to trigger the same event again from ContentModel.\n                // TODO: This is a temporary solution. Once Content Model can fully replace Entity Features, we can remove this.\n                this.triggeredEntityEvents.push(event);\n            } else if (event.eventType == PluginEventType.KeyDown) {\n                if (!this.editWithContentModel || event.rawEvent.defaultPrevented) {\n                    // Other plugins already handled this event, so it is most likely content is already changed, we need to clear cached content model\n                    this.editor.cacheContentModel(null /*model*/);\n                } else if (!event.rawEvent.defaultPrevented) {\n                    // TODO: Consider use ContentEditFeature and need to hide other conflict features that are not based on Content Model\n                    switch (event.rawEvent.which) {\n                        case Keys.BACKSPACE:\n                        case Keys.DELETE:\n                            handleKeyDownEvent(\n                                this.editor,\n                                event.rawEvent,\n                                this.triggeredEntityEvents\n                            );\n                            break;\n\n                        default:\n                            this.editor.cacheContentModel(null);\n                            break;\n                    }\n                }\n\n                if (this.triggeredEntityEvents.length > 0) {\n                    this.triggeredEntityEvents = [];\n                }\n            } else if (\n                event.eventType == PluginEventType.ContentChanged ||\n                event.eventType == PluginEventType.MouseUp\n            ) {\n                this.editor.cacheContentModel(null);\n            }\n        }\n    }\n}\n","import applyPendingFormat from '../../publicApi/format/applyPendingFormat';\nimport { canApplyPendingFormat, clearPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { EditorPlugin, IEditor, Keys, PluginEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * ContentModelFormat plugins helps editor to do formatting on top of content model.\n * This includes:\n * 1. Handle pending format changes when selection is collapsed\n */\nexport default class ContentModelFormatPlugin implements EditorPlugin {\n    private editor: IContentModelEditor | null = null;\n\n    /**\n     * Get name of this plugin\n     */\n    getName() {\n        return 'ContentModelFormat';\n    }\n\n    /**\n     * The first method that editor will call to a plugin when editor is initializing.\n     * It will pass in the editor instance, plugin should take this chance to save the\n     * editor reference so that it can call to any editor method or format API later.\n     * @param editor The editor object\n     */\n    initialize(editor: IEditor) {\n        // TODO: Later we may need a different interface for Content Model editor plugin\n        this.editor = editor as IContentModelEditor;\n    }\n\n    /**\n     * The last method that editor will call to a plugin before it is disposed.\n     * Plugin can take this chance to clear the reference to editor. After this method is\n     * called, plugin should not call to any editor method since it will result in error.\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Core method for a plugin. Once an event happens in editor, editor will call this\n     * method of each plugin to handle the event as long as the event is not handled\n     * exclusively by another plugin.\n     * @param event The event to handle:\n     */\n    onPluginEvent(event: PluginEvent) {\n        if (!this.editor) {\n            return;\n        }\n\n        switch (event.eventType) {\n            case PluginEventType.Input:\n                // In Safari, isComposing will be undefined but isInIME() works\n                if (!event.rawEvent.isComposing && !this.editor.isInIME()) {\n                    this.checkAndApplyPendingFormat(event.rawEvent.data);\n                }\n\n                break;\n\n            case PluginEventType.CompositionEnd:\n                this.checkAndApplyPendingFormat(event.rawEvent.data);\n                break;\n\n            case PluginEventType.KeyDown:\n                if (event.rawEvent.which >= Keys.PAGEUP && event.rawEvent.which <= Keys.DOWN) {\n                    clearPendingFormat(this.editor);\n                }\n\n                break;\n\n            case PluginEventType.MouseUp:\n            case PluginEventType.ContentChanged:\n                if (!canApplyPendingFormat(this.editor)) {\n                    clearPendingFormat(this.editor);\n                }\n                break;\n        }\n    }\n\n    private checkAndApplyPendingFormat(data: string | null) {\n        if (this.editor && data) {\n            applyPendingFormat(this.editor, data);\n            clearPendingFormat(this.editor);\n        }\n    }\n}\n","import addParser from './utils/addParser';\nimport ContentModelBeforePasteEvent from '../../../publicTypes/event/ContentModelBeforePasteEvent';\nimport deprecatedColorParser from './utils/deprecatedColorParser';\nimport sanitizeLinks from './utils/linkParser';\nimport { convertPastedContentFromExcel } from './Excel/convertPastedContentFromExcel';\nimport { convertPastedContentFromPowerPoint } from './PowerPoint/convertPastedContentFromPowerPoint';\nimport { getPasteSource } from 'roosterjs-editor-dom';\nimport { handleWacComponentsPaste } from './WacComponents/handleWacComponentsPaste';\nimport { handleWordDesktop } from './WordDesktop/handleWordDesktopPaste';\nimport { IContentModelEditor } from '../../../publicTypes/IContentModelEditor';\nimport {\n    EditorPlugin,\n    IEditor,\n    KnownPasteSourceType,\n    PasteType,\n    PluginEvent,\n    PluginEventType,\n} from 'roosterjs-editor-types';\n\nconst GOOGLE_SHEET_NODE_NAME = 'google-sheets-html-origin';\n\n/**\n * Paste plugin, handles BeforePaste event and reformat some special content, including:\n * 1. Content copied from Word\n * (This class is still under development, and may still be changed in the future with some breaking changes)\n */\nexport default class ContentModelFormatPlugin implements EditorPlugin {\n    private editor: IContentModelEditor | null = null;\n\n    /**\n     * Construct a new instance of Paste class\n     * @param unknownTagReplacement Replace solution of unknown tags, default behavior is to replace with SPAN\n     */\n    constructor(private unknownTagReplacement: string = 'SPAN') {}\n\n    /**\n     * Get name of this plugin\n     */\n    getName() {\n        return 'ContentModelPaste';\n    }\n\n    /**\n     * The first method that editor will call to a plugin when editor is initializing.\n     * It will pass in the editor instance, plugin should take this chance to save the\n     * editor reference so that it can call to any editor method or format API later.\n     * @param editor The editor object\n     */\n    initialize(editor: IEditor) {\n        // TODO: Later we may need a different interface for Content Model editor plugin\n        this.editor = editor as IContentModelEditor;\n    }\n\n    /**\n     * The last method that editor will call to a plugin before it is disposed.\n     * Plugin can take this chance to clear the reference to editor. After this method is\n     * called, plugin should not call to any editor method since it will result in error.\n     */\n    dispose() {\n        this.editor = null;\n    }\n\n    /**\n     * Core method for a plugin. Once an event happens in editor, editor will call this\n     * method of each plugin to handle the event as long as the event is not handled\n     * exclusively by another plugin.\n     * @param event The event to handle:\n     */\n    onPluginEvent(event: PluginEvent) {\n        if (!this.editor || event.eventType != PluginEventType.BeforePaste) {\n            return;\n        }\n\n        const ev = event as ContentModelBeforePasteEvent;\n        if (!ev.domToModelOption) {\n            return;\n        }\n        const pasteSource = getPasteSource(event, false);\n        switch (pasteSource) {\n            case KnownPasteSourceType.WordDesktop:\n                handleWordDesktop(ev);\n                break;\n            case KnownPasteSourceType.WacComponents:\n                handleWacComponentsPaste(ev);\n                break;\n            case KnownPasteSourceType.ExcelOnline:\n                if (\n                    event.pasteType === PasteType.Normal ||\n                    event.pasteType === PasteType.MergeFormat\n                ) {\n                    // Handle HTML copied from Excel\n                    convertPastedContentFromExcel(ev, this.editor.getTrustedHTMLHandler());\n                }\n                break;\n            case KnownPasteSourceType.GoogleSheets:\n                event.sanitizingOption.additionalTagReplacements[GOOGLE_SHEET_NODE_NAME] = '*';\n                break;\n            case KnownPasteSourceType.PowerPointDesktop:\n                convertPastedContentFromPowerPoint(ev, this.editor.getTrustedHTMLHandler());\n                break;\n        }\n\n        addParser(ev.domToModelOption, 'segment', deprecatedColorParser);\n        addParser(ev.domToModelOption, 'segmentOnBlock', deprecatedColorParser);\n        addParser(ev.domToModelOption, 'link', sanitizeLinks);\n\n        event.sanitizingOption.unknownTagReplacement = this.unknownTagReplacement;\n    }\n}\n","import addParser from '../utils/addParser';\nimport ContentModelBeforePasteEvent from '../../../../publicTypes/event/ContentModelBeforePasteEvent';\nimport { getTagOfNode, moveChildNodes } from 'roosterjs-editor-dom';\nimport { TrustedHTMLHandler } from 'roosterjs-editor-types';\n\nconst LAST_TD_END_REGEX = /<\\/\\s*td\\s*>((?!<\\/\\s*tr\\s*>)[\\s\\S])*$/i;\nconst LAST_TR_END_REGEX = /<\\/\\s*tr\\s*>((?!<\\/\\s*table\\s*>)[\\s\\S])*$/i;\nconst LAST_TR_REGEX = /<tr[^>]*>[^<]*/i;\nconst LAST_TABLE_REGEX = /<table[^>]*>[^<]*/i;\nconst DEFAULT_BORDER_STYLE = 'solid 1px #d4d4d4';\n/**\n * @internal\n * Convert pasted content from Excel, add borders when source doc doesn't have a border\n * @param event The BeforePaste event\n */\n\nexport function convertPastedContentFromExcel(\n    event: ContentModelBeforePasteEvent,\n    trustedHTMLHandler: TrustedHTMLHandler\n) {\n    const { fragment, htmlBefore, clipboardData } = event;\n    const html = clipboardData.html ? excelHandler(clipboardData.html, htmlBefore) : undefined;\n\n    if (html && clipboardData.html != html) {\n        const doc = new DOMParser().parseFromString(trustedHTMLHandler(html), 'text/html');\n        moveChildNodes(fragment, doc?.body);\n    }\n\n    // For Excel Online\n    const firstChild = fragment.firstChild;\n    if (firstChild && firstChild.childNodes.length > 0 && getTagOfNode(firstChild) == 'DIV') {\n        const tableFound = Array.from(firstChild.childNodes).every((child: Node) => {\n            // Tables pasted from Excel Online should be of the format: 0 to N META tags and 1 TABLE tag\n            return getTagOfNode(child) == 'META'\n                ? true\n                : getTagOfNode(child) == 'TABLE' && child == firstChild.lastChild;\n        });\n\n        // Extract Table from Div\n        if (tableFound && firstChild.lastChild) {\n            event.fragment.replaceChildren(firstChild.lastChild);\n        }\n    }\n\n    addParser(event.domToModelOption, 'tableCell', (format, element) => {\n        if (element.style.borderStyle === 'none') {\n            format.borderBottom = DEFAULT_BORDER_STYLE;\n            format.borderLeft = DEFAULT_BORDER_STYLE;\n            format.borderRight = DEFAULT_BORDER_STYLE;\n            format.borderTop = DEFAULT_BORDER_STYLE;\n        }\n    });\n}\n\n/**\n * @internal Export for test only\n * @param html Source html\n */\n\nexport function excelHandler(html: string, htmlBefore: string): string {\n    if (html.match(LAST_TD_END_REGEX)) {\n        const trMatch = htmlBefore.match(LAST_TR_REGEX);\n        const tr = trMatch ? trMatch[0] : '<TR>';\n        html = tr + html + '</TR>';\n    }\n    if (html.match(LAST_TR_END_REGEX)) {\n        let tableMatch = htmlBefore.match(LAST_TABLE_REGEX);\n        let table = tableMatch ? tableMatch[0] : '<TABLE>';\n        html = table + html + '</TABLE>';\n    }\n\n    return html;\n}\n","import { BeforePasteEvent, TrustedHTMLHandler } from 'roosterjs-editor-types';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n * Convert pasted content from PowerPoint\n * @param event The BeforePaste event\n */\n\nexport function convertPastedContentFromPowerPoint(\n    event: BeforePasteEvent,\n    trustedHTMLHandler: TrustedHTMLHandler\n) {\n    const { fragment, clipboardData } = event;\n\n    if (clipboardData.html && !clipboardData.text && clipboardData.image) {\n        // It is possible that PowerPoint copied both image and HTML but not plain text.\n        // We always prefer HTML if any.\n        const doc = new DOMParser().parseFromString(\n            trustedHTMLHandler(clipboardData.html),\n            'text/html'\n        );\n\n        moveChildNodes(fragment, doc?.body);\n    }\n}\n","import addParser from '../utils/addParser';\nimport ContentModelBeforePasteEvent from '../../../../publicTypes/event/ContentModelBeforePasteEvent';\nimport { ContentModelBlockGroup } from '../../../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelListItemLevelFormat } from '../../../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { ContentModelSegmentFormat } from '../../../../publicTypes/format/ContentModelSegmentFormat';\nimport { DomToModelContext } from '../../../../publicTypes/context/DomToModelContext';\nimport { ElementProcessor } from '../../../../publicTypes/context/ElementProcessor';\nimport { findClosestElementAncestor, matchesSelector } from 'roosterjs-editor-dom';\nimport { FormatParser } from '../../../../publicTypes/context/DomToModelSettings';\nimport { setProcessor } from '../utils/setProcessor';\n\nconst WAC_IDENTIFY_SELECTOR =\n    'ul[class^=\"BulletListStyle\"]>.OutlineElement,ol[class^=\"NumberListStyle\"]>.OutlineElement,span.WACImageContainer,span.WACImageBorder';\nexport const LIST_CONTAINER_ELEMENT_CLASS_NAME = 'ListContainerWrapper';\n\nconst EMPTY_TEXT_RUN = 'EmptyTextRun';\nconst END_OF_PARAGRAPH = 'EOP';\nconst PARAGRAPH = 'Paragraph';\n\nconst TABLE_TEMP_ELEMENTS = [\n    'TableInsertRowGapBlank',\n    'TableColumnResizeHandle',\n    'TableCellTopBorderHandle',\n    'TableCellLeftBorderHandle',\n    'TableHoverColumnHandle',\n    'TableHoverRowHandle',\n];\n\nconst CLASSES_TO_KEEP = [\n    'OutlineElement',\n    'NumberListStyle',\n    'WACImageContainer',\n    'ListContainerWrapper',\n    'BulletListStyle',\n    END_OF_PARAGRAPH,\n    EMPTY_TEXT_RUN,\n    ...TABLE_TEMP_ELEMENTS,\n    'TableCellContent',\n    PARAGRAPH,\n    'WACImageContainer',\n    'WACImageBorder',\n];\n\n/**\n * Wac components do not use sub and super tags, instead only add vertical align to a span.\n * This parser normalize the content for content model\n */\nconst wacSubSuperParser: FormatParser<ContentModelSegmentFormat> = (\n    format: ContentModelSegmentFormat,\n    element: HTMLElement\n): void => {\n    const verticalAlign = element.style.verticalAlign;\n    if (verticalAlign === 'super') {\n        format.superOrSubScriptSequence = 'super';\n    }\n    if (verticalAlign === 'sub') {\n        format.superOrSubScriptSequence = 'sub';\n    }\n};\n\n/**\n * This processor does:\n * 1) Remove the display and margin of the element.\n * 2) When an element should be ignored but should handle the child elements call the default child processor.\n * 3) Removes the End of Paragraph element to avoid empty lines, we should only remove this if the previous element of the EOP is an EmptyTextRun\n * 4) Finally call the default processor.\n * @returns\n */\nconst wacElementProcessor: ElementProcessor<HTMLElement> = (\n    group: ContentModelBlockGroup,\n    element: HTMLElement,\n    context: DomToModelContext\n): void => {\n    if (matchesSelector(element, WAC_IDENTIFY_SELECTOR)) {\n        element.style.removeProperty('display');\n        element.style.removeProperty('margin');\n    }\n\n    if (element.classList.contains(LIST_CONTAINER_ELEMENT_CLASS_NAME)) {\n        context.elementProcessors.child(group, element, context);\n        return;\n    }\n\n    if (\n        (element.classList.contains(END_OF_PARAGRAPH) &&\n            element.previousElementSibling?.classList.contains(EMPTY_TEXT_RUN)) ||\n        TABLE_TEMP_ELEMENTS.some(className => element.classList.contains(className))\n    ) {\n        return;\n    }\n\n    context.defaultElementProcessors.element(group, element, context);\n};\n\n/**\n * This processor calls the default list processor and then sets the correct list level and list bullet.\n */\nconst wacLiElementProcessor: ElementProcessor<HTMLLIElement> = (\n    group: ContentModelBlockGroup,\n    element: HTMLLIElement,\n    context: DomToModelContext\n): void => {\n    context.defaultElementProcessors.li?.(group, element, context);\n    const { listFormat } = context;\n    const listParent = listFormat.listParent;\n    if (listParent) {\n        const lastblock = listParent.blocks[listParent.blocks.length - 1];\n        if (\n            lastblock.blockType == 'BlockGroup' &&\n            lastblock.blockGroupType == 'ListItem' &&\n            context.listFormat.listParent !== lastblock\n        ) {\n            const currentLevel = lastblock.levels[lastblock.levels.length - 1];\n\n            // Get item level from 'data-aria-level' attribute\n            let level = parseInt(element.getAttribute('data-aria-level') ?? '');\n            if (level > 0) {\n                if (level > lastblock.levels.length) {\n                    while (level != lastblock.levels.length) {\n                        lastblock.levels.push(currentLevel);\n                    }\n                } else {\n                    lastblock.levels.splice(level, lastblock.levels.length - 1);\n                    lastblock.levels[level - 1] = currentLevel;\n                }\n            }\n        }\n    }\n};\n\n/**\n * This parsers does:\n * 1) Sets the display for dummy item to undefined when the current style is block.\n * 2) Removes the Margin Left\n */\nconst wacListItemParser: FormatParser<ContentModelListItemLevelFormat> = (\n    format: ContentModelListItemLevelFormat,\n    element: HTMLElement\n): void => {\n    if (element.style.display === 'block') {\n        format.displayForDummyItem = undefined;\n    }\n\n    format.marginLeft = undefined;\n};\n\n/**\n * Wac usually adds padding to lists which is unwanted so remove it.\n */\nconst wacListLevelParser: FormatParser<ContentModelListItemLevelFormat> = (\n    format: ContentModelListItemLevelFormat\n): void => {\n    format.marginLeft = undefined;\n    format.paddingLeft = undefined;\n};\n/**\n * @internal\n * Convert pasted content from Office Online\n * Once it is known that the document is from WAC\n * We need to remove the display property and margin from all the list item\n * @param ev ContentModelBeforePasteEvent\n */\nexport function handleWacComponentsPaste(ev: ContentModelBeforePasteEvent) {\n    addParser(ev.domToModelOption, 'segment', wacSubSuperParser);\n    addParser(ev.domToModelOption, 'listItem', wacListItemParser);\n    addParser(ev.domToModelOption, 'listLevel', wacListLevelParser);\n\n    setProcessor(ev.domToModelOption, 'element', wacElementProcessor);\n    setProcessor(ev.domToModelOption, 'li', wacLiElementProcessor);\n    setProcessor(ev.domToModelOption, 'ol', wacListProcessor);\n    setProcessor(ev.domToModelOption, 'ul', wacListProcessor);\n    ev.sanitizingOption.additionalAllowedCssClasses.push(...CLASSES_TO_KEEP);\n}\n\n/**\n * List items from word have this format when using List items:\n * @example\n        <div>\n           <ol></ol>\n        </div>\n        <div>\n           <ol></ol>\n        </div>\n        <div>\n           <ol></ol>\n        </div>\n *  Due to this the div between each of the lists we need to restore the list context to use the previous list,\n *  otherwise it could create a new list instead under the same list element\n */\nconst wacListProcessor: ElementProcessor<HTMLOListElement | HTMLUListElement> = (\n    group: ContentModelBlockGroup,\n    element: HTMLOListElement | HTMLUListElement,\n    context: DomToModelContext\n): void => {\n    const lastBlock = group.blocks[group.blocks.length - 1];\n    const isWrappedInContainer = findClosestElementAncestor(\n        element,\n        undefined,\n        `.${LIST_CONTAINER_ELEMENT_CLASS_NAME}`\n    );\n    if (\n        isWrappedInContainer?.previousElementSibling?.classList.contains(\n            LIST_CONTAINER_ELEMENT_CLASS_NAME\n        )\n    ) {\n        if (lastBlock?.blockType === 'BlockGroup' && lastBlock.blockGroupType == 'ListItem') {\n            context.listFormat = {\n                threadItemCounts: [],\n                levels: lastBlock.levels,\n                listParent: group,\n            };\n        }\n    }\n    if (element.tagName.toUpperCase() === 'OL') {\n        context.defaultElementProcessors.ol?.(group, element as HTMLOListElement, context);\n    } else {\n        context.defaultElementProcessors.ul?.(group, element as HTMLUListElement, context);\n    }\n};\n","import addParser from '../utils/addParser';\nimport ContentModelBeforePasteEvent from '../../../../publicTypes/event/ContentModelBeforePasteEvent';\nimport { chainSanitizerCallback, getStyles, moveChildNodes } from 'roosterjs-editor-dom';\nimport { ContentModelBlockFormat } from '../../../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelListItemLevelFormat } from '../../../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { DomToModelContext } from '../../../../publicTypes/context/DomToModelContext';\nimport { DomToModelOption } from '../../../../publicTypes/IContentModelEditor';\nimport { ElementProcessor } from '../../../../publicTypes/context/ElementProcessor';\nimport { ElementProcessorMap } from '../../../../publicTypes/context/DomToModelSettings';\nimport { processWordCommand } from './processWordCommand';\nimport { processWordList } from './processWordLists';\n\nconst PERCENTAGE_REGEX = /%/;\nconst DEFAULT_BROWSER_LINE_HEIGHT_PERCENTAGE = 120;\n\n/**\n * @internal\n * Handles Pasted content when source is Word Desktop\n * @param ev ContentModelBeforePasteEvent\n */\nexport function handleWordDesktop(ev: ContentModelBeforePasteEvent) {\n    setProcessor(ev.domToModelOption, 'element', wordDesktopElementProcessor);\n    addParser(ev.domToModelOption, 'block', removeNonValidLineHeight);\n    addParser(ev.domToModelOption, 'listLevel', listLevelParser);\n\n    // Remove \"border:none\" for image to fix image resize behavior\n    // We found a problem that when paste an image with \"border:none\" then the resize border will be\n    // displayed incorrectly when resize it. So we need to drop this style\n    chainSanitizerCallback(\n        ev.sanitizingOption.cssStyleCallbacks,\n        'border',\n        (value, element) => element.tagName != 'IMG' || value != 'none'\n    );\n\n    // Preserve <o:p> when its innerHTML is \"&nbsp;\" to avoid dropping an empty line\n    chainSanitizerCallback(ev.sanitizingOption.elementCallbacks, 'O:P', element => {\n        moveChildNodes(element);\n        element.appendChild(element.ownerDocument.createTextNode('\\u00A0')); // &nbsp;\n        return true;\n    });\n}\n\nfunction setProcessor<TKey extends keyof ElementProcessorMap>(\n    domToModelOption: DomToModelOption,\n    entry: TKey,\n    processorOverride: Partial<ElementProcessorMap>[TKey]\n) {\n    if (!domToModelOption.processorOverride) {\n        domToModelOption.processorOverride = {};\n    }\n\n    domToModelOption.processorOverride[entry] = processorOverride;\n}\n\n/**\n * @internal\n * Exported only for unit test\n */\nexport const wordDesktopElementProcessor: ElementProcessor<HTMLElement> = (\n    group,\n    element,\n    context\n) => {\n    const styles = getStyles(element);\n    // Process Word Lists or Word Commands, otherwise use the default processor on this element.\n    if (\n        !(processWordList(styles, group, element, context) || processWordCommand(styles, element))\n    ) {\n        context.defaultElementProcessors.element(group, element, context);\n    }\n};\n\nfunction removeNonValidLineHeight(\n    format: ContentModelBlockFormat,\n    element: HTMLElement,\n    context: DomToModelContext,\n    defaultStyle: Readonly<Partial<CSSStyleDeclaration>>\n): void {\n    //If the line height is less than the browser default line height, line between the text is going to be too narrow\n    let parsedLineHeight: number;\n    if (\n        PERCENTAGE_REGEX.test(element.style.lineHeight) &&\n        !isNaN((parsedLineHeight = parseInt(element.style.lineHeight))) &&\n        parsedLineHeight < DEFAULT_BROWSER_LINE_HEIGHT_PERCENTAGE\n    ) {\n        format.lineHeight = defaultStyle.lineHeight;\n    }\n}\n\nfunction listLevelParser(\n    format: ContentModelListItemLevelFormat,\n    element: HTMLElement,\n    context: DomToModelContext,\n    defaultStyle: Readonly<Partial<CSSStyleDeclaration>>\n): void {\n    if (element.style.marginLeft != '') {\n        format.marginLeft = defaultStyle.marginLeft;\n    }\n\n    format.marginBottom = undefined;\n}\n","import { safeInstanceOf } from 'roosterjs-editor-dom';\n\nconst MSO_COMMENT_ANCHOR_HREF_REGEX = /#_msocom_/;\nconst MSO_SPECIAL_CHARACTER = 'mso-special-character';\nconst MSO_SPECIAL_CHARACTER_COMMENT = 'comment';\nconst MSO_ELEMENT = 'mso-element';\nconst MSO_ELEMENT_COMMENT_LIST = 'comment-list';\n\n/**\n * @internal\n * Check whether the element contain Word attributes related to comments and if it does we should no process\n * this element.\n * @returns\n */\nexport function processWordCommand(styles: Record<string, string>, element: HTMLElement) {\n    return (\n        styles[MSO_SPECIAL_CHARACTER] == MSO_SPECIAL_CHARACTER_COMMENT ||\n        (safeInstanceOf(element, 'HTMLAnchorElement') &&\n            MSO_COMMENT_ANCHOR_HREF_REGEX.test(element.href)) ||\n        styles[MSO_ELEMENT] == MSO_ELEMENT_COMMENT_LIST\n    );\n}\n","import { addBlock } from '../../../../modelApi/common/addBlock';\nimport { ContentModelBlockGroup } from '../../../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelListItemLevelFormat } from '../../../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { createListItem } from '../../../../modelApi/creators/createListItem';\nimport { DomToModelContext } from '../../../../publicTypes/context/DomToModelContext';\nimport { getStyles } from 'roosterjs-editor-dom';\nimport { NodeType } from 'roosterjs-editor-types';\nimport { parseFormat } from '../../../../domToModel/utils/parseFormat';\n\n/** Word list metadata style name */\nconst MSO_LIST = 'mso-list';\nconst MSO_LIST_IGNORE = 'ignore';\nconst LOOKUP_DEPTH = 5;\n\n/**\n * @internal\n * @param styles\n * @param group\n * @param element\n * @param context\n * @returns\n */\nexport function processWordList(\n    styles: Record<string, string>,\n    group: ContentModelBlockGroup,\n    element: HTMLElement,\n    context: DomToModelContext\n) {\n    const wordListStyle = styles[MSO_LIST] || '';\n    const { listFormat } = context;\n\n    // If the element contains Ignore style, do not process it,\n    // Usually this element contains the fake bullet used in Word Desktop.\n    if (wordListStyle.toLowerCase() === MSO_LIST_IGNORE) {\n        return true;\n    }\n\n    const listProps = wordListStyle.split(' ');\n    // Try get the list metadata from word, which follows this format: l1 level1 lfo2\n    // If we are able to get the level property means we can process this element to be a list\n    let level = listProps[1] && parseInt(listProps[1].substr('level'.length));\n    if (wordListStyle && group && typeof level === 'number') {\n        // Retrieve the Fake bullet on the element and also the list type\n        const fakeBullet = getFakeBulletText(element);\n        const listType = getFakeBulletTagName(fakeBullet);\n\n        // Create the new level of the list item and parse the format\n        const newLevel: ContentModelListItemLevelFormat = {\n            listType,\n            startNumberOverride: listType == 'OL' ? parseInt(fakeBullet) || 1 : undefined,\n        };\n        parseFormat(element, context.formatParsers.listLevel, newLevel, context);\n\n        // If the list format is in a different level, update the arraw so we get the new item\n        // To be in the same level as the provided level metadata.\n        if (level > listFormat.levels.length) {\n            while (level != listFormat.levels.length) {\n                listFormat.levels.push(newLevel);\n            }\n        } else {\n            listFormat.levels.splice(level, listFormat.levels.length - 1);\n            listFormat.levels[level - 1] = newLevel;\n        }\n\n        listFormat.listParent = group;\n\n        const listItem = createListItem(listFormat.levels, context.segmentFormat);\n\n        parseFormat(element, context.formatParsers.segmentOnBlock, context.segmentFormat, context);\n        parseFormat(element, context.formatParsers.listItemElement, listItem.format, context);\n\n        context.elementProcessors.child(listItem, element, context);\n        addBlock(group, listItem);\n        return true;\n    }\n    return false;\n}\n\n/**\n * Check whether the string is a fake bullet from word Desktop\n */\nfunction isFakeBullet(fakeBullet: string): boolean {\n    return ['o', '·', '§', '-'].indexOf(fakeBullet) >= 0;\n}\n\n/** Given a fake bullet text, returns the type of list that should be used for it */\nfunction getFakeBulletTagName(fakeBullet: string): 'UL' | 'OL' {\n    return isFakeBullet(fakeBullet) ? 'UL' : 'OL';\n}\n\n/**\n * Finds the fake bullet text out of the specified node and returns it. For images, it will return\n * a bullet string. If not found, it returns null...\n */\nfunction getFakeBulletText(node: Node, levels?: number): string {\n    // Word uses the following format for their bullets:\n    // &lt;p style=\"mso-list:l1 level1 lfo2\"&gt;\n    // &lt;span style=\"...\"&gt;\n    // &lt;span style=\"mso-list:Ignore\"&gt;1.&lt;span style=\"...\"&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/span&gt;\n    // &lt;/span&gt;\n    // Content here...\n    // &lt;/p&gt;\n    //\n    // Basically, we need to locate the mso-list:Ignore SPAN, which holds either one text or image node. That\n    // text or image node will be the fake bullet we are looking for\n    let result: string = '';\n    levels = levels || LOOKUP_DEPTH;\n    let child: Node | null = node.firstChild;\n    while (!result && child) {\n        // Check if this is the node that holds the fake bullets (mso-list: Ignore)\n        if (isIgnoreNode(child)) {\n            // Yes... this is the node that holds either the text or image data\n            result = child.textContent?.trim() ?? '';\n\n            // This is the case for image case\n            if (result.length == 0) {\n                result = 'o';\n            }\n        } else if (child.nodeType == NodeType.Element && levels > 1) {\n            // If this is an element and we are not in the last level, try to get the fake bullet\n            // out of the child\n            result = getFakeBulletText(child, levels - 1);\n        }\n\n        child = child.nextSibling;\n    }\n\n    return result;\n}\n/**\n * Checks if the specified node is marked as a mso-list: Ignore. These\n * nodes need to be ignored when a list item is converted into standard\n * HTML lists\n */\nfunction isIgnoreNode(node: Node): boolean {\n    if (node.nodeType == NodeType.Element) {\n        let listAttribute = getStyles(node as HTMLElement)[MSO_LIST];\n        if (\n            listAttribute &&\n            listAttribute.length > 0 &&\n            listAttribute.trim().toLowerCase() == MSO_LIST_IGNORE\n        ) {\n            return true;\n        }\n    }\n\n    return false;\n}\n","import { ContentModelFormatMap } from '../../../../publicTypes/format/ContentModelFormatMap';\nimport { DomToModelOption } from '../../../../publicTypes/IContentModelEditor';\nimport {\n    FormatParser,\n    FormatParsersPerCategory,\n} from '../../../../publicTypes/context/DomToModelSettings';\n\n/**\n * @internal\n */\nexport default function addParser<TKey extends keyof FormatParsersPerCategory>(\n    domToModelOption: DomToModelOption,\n    entry: TKey,\n    additionalFormatParsers: FormatParser<ContentModelFormatMap[TKey]>\n) {\n    if (!domToModelOption.additionalFormatParsers) {\n        domToModelOption.additionalFormatParsers = {};\n    }\n    if (!domToModelOption.additionalFormatParsers[entry]) {\n        domToModelOption.additionalFormatParsers[entry] = [];\n    }\n\n    domToModelOption.additionalFormatParsers[entry]?.push(additionalFormatParsers);\n}\n","import { ContentModelHyperLinkFormat } from '../../../../publicTypes/format/ContentModelHyperLinkFormat';\nimport { ContentModelSegmentFormat } from '../../../../publicTypes/format/ContentModelSegmentFormat';\nimport { DomToModelContext } from '../../../../publicTypes/context/DomToModelContext';\nimport { FormatParser } from '../../../../publicTypes/context/DomToModelSettings';\n\nconst DeprecatedColorList: string[] = [\n    'activeborder',\n    'activecaption',\n    'appworkspace',\n    'background',\n    'buttonhighlight',\n    'buttonshadow',\n    'captiontext',\n    'inactiveborder',\n    'inactivecaption',\n    'inactivecaptiontext',\n    'infobackground',\n    'infotext',\n    'menu',\n    'menutext',\n    'scrollbar',\n    'threeddarkshadow',\n    'threedface',\n    'threedhighlight',\n    'threedlightshadow',\n    'threedfhadow',\n    'window',\n    'windowframe',\n    'windowtext',\n];\n\nconst deprecatedColorParser: FormatParser<ContentModelHyperLinkFormat> = (\n    format: ContentModelSegmentFormat,\n    element: HTMLElement,\n    context: DomToModelContext,\n    defaultStyles: Readonly<Partial<CSSStyleDeclaration>>\n): void => {\n    if (DeprecatedColorList.indexOf(element.style.backgroundColor) > -1) {\n        format.backgroundColor = defaultStyles.backgroundColor;\n        element.style.backgroundColor = defaultStyles.backgroundColor ?? '';\n    }\n    if (DeprecatedColorList.indexOf(element.style.color) > -1) {\n        format.textColor = defaultStyles.color;\n        element.style.color = defaultStyles.color ?? '';\n    }\n};\n\nexport default deprecatedColorParser;\n","import { ContentModelHyperLinkFormat } from '../../../../publicTypes/format/ContentModelHyperLinkFormat';\nimport { FormatParser } from '../../../../publicTypes/context/DomToModelSettings';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\nconst SUPPORTED_PROTOCOLS = ['http:', 'https:', 'notes:', 'mailto:', 'onenote:'];\nconst INVALID_LINKS_REGEX = /^file:\\/\\/\\/[a-zA-Z\\/]/i;\n\nconst sanitizeLinks: FormatParser<ContentModelHyperLinkFormat> = (format, element) => {\n    if (!safeInstanceOf(element, 'HTMLAnchorElement')) {\n        return;\n    }\n\n    let url: URL | undefined;\n    try {\n        url = new URL(element.href);\n    } catch {\n        url = undefined;\n    }\n\n    if (\n        (url && SUPPORTED_PROTOCOLS.indexOf(url.protocol) === -1) ||\n        INVALID_LINKS_REGEX.test(element.href)\n    ) {\n        element.removeAttribute('href');\n        format.href = '';\n    }\n};\n\nexport default sanitizeLinks;\n","import { DomToModelOption } from '../../../../publicTypes/IContentModelEditor';\nimport { ElementProcessorMap } from '../../../../publicTypes/context/DomToModelSettings';\n\nexport function setProcessor<TKey extends keyof ElementProcessorMap>(\n    domToModelOption: DomToModelOption,\n    entry: TKey,\n    processorOverride: Partial<ElementProcessorMap>[TKey]\n) {\n    if (!domToModelOption.processorOverride) {\n        domToModelOption.processorOverride = {};\n    }\n\n    domToModelOption.processorOverride[entry] = processorOverride;\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { DeleteResult, OnDeleteEntity } from '../../modelApi/edit/utils/DeleteSelectionStep';\nimport { EntityOperationEvent, PluginEventType } from 'roosterjs-editor-types';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { normalizeContentModel } from '../../modelApi/common/normalizeContentModel';\n\n/**\n * @internal\n */\nexport function getOnDeleteEntityCallback(\n    editor: IContentModelEditor,\n    rawEvent?: KeyboardEvent,\n    triggeredEntityEvents: EntityOperationEvent[] = []\n): OnDeleteEntity {\n    return (entity, operation) => {\n        if (entity.id && entity.type) {\n            // Only trigger entity operation event when the same event was not triggered before.\n            // TODO: This is a temporary solution as the event deletion is handled by both original EntityPlugin/EntityFeatures and ContentModel.\n            // Later when Content Model can fully replace Content Edit Features, we can remove this check.\n            if (!triggeredEntityEvents.some(x => x.entity.wrapper == entity.wrapper)) {\n                editor.triggerPluginEvent(PluginEventType.EntityOperation, {\n                    entity: {\n                        id: entity.id,\n                        isReadonly: entity.isReadonly,\n                        type: entity.type,\n                        wrapper: entity.wrapper,\n                    },\n                    operation,\n                    rawEvent: rawEvent,\n                });\n            }\n        }\n\n        // If entity is still in editor and default behavior of event is prevented, that means plugin wants to keep this entity\n        // Return true to tell caller we should keep it.\n        return !!rawEvent?.defaultPrevented && editor.contains(entity.wrapper);\n    };\n}\n\n/**\n * @internal\n * @return True means content is changed, so need to rewrite content model to editor. Otherwise false\n */\nexport function handleKeyboardEventResult(\n    editor: IContentModelEditor,\n    model: ContentModelDocument,\n    rawEvent: KeyboardEvent,\n    result: DeleteResult\n): boolean {\n    switch (result) {\n        case DeleteResult.NotDeleted:\n            // We have not delete anything, we will let browser handle this event, so clear cached model if any since the content will be changed by browser\n            editor.cacheContentModel(null);\n            return false;\n\n        case DeleteResult.NothingToDelete:\n            // We known there is nothing to delete, no need to let browser keep handling the event\n            rawEvent.preventDefault();\n            return false;\n\n        case DeleteResult.Range:\n        case DeleteResult.SingleChar:\n            // We have deleted what we need from content model, no need to let browser keep handling the event\n            rawEvent.preventDefault();\n            normalizeContentModel(model);\n\n            if (result == DeleteResult.Range) {\n                // A range is about to be deleted, so add an undo snapshot immediately\n                editor.addUndoSnapshot();\n            }\n\n            // Trigger an event to let plugins know the content is about to be changed by Content Model keyboard editing.\n            // So plugins can do proper handling. e.g. UndoPlugin can decide whether take a snapshot before this change happens.\n            editor.triggerPluginEvent(PluginEventType.BeforeKeyboardEditing, {\n                rawEvent,\n            });\n\n            return true;\n    }\n}\n\n/**\n * @internal\n */\nexport function shouldDeleteWord(rawEvent: KeyboardEvent, isMac: boolean) {\n    return (\n        (isMac && rawEvent.altKey && !rawEvent.metaKey) ||\n        (!isMac && rawEvent.ctrlKey && !rawEvent.altKey)\n    );\n}\n\n/**\n * @internal\n */\nexport function shouldDeleteAllSegmentsBefore(rawEvent: KeyboardEvent) {\n    return rawEvent.metaKey && !rawEvent.altKey;\n}\n","import { DirectionFormat } from '../../publicTypes/format/formatParts/DirectionFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const directionFormatHandler: FormatHandler<DirectionFormat> = {\n    parse: (format, element, _, defaultStyle) => {\n        const dir = element.style.direction || element.dir || defaultStyle.direction;\n\n        if (dir) {\n            format.direction = dir == 'rtl' ? 'rtl' : 'ltr';\n        }\n    },\n    apply: (format, element) => {\n        if (format.direction) {\n            element.style.direction = format.direction;\n        }\n    },\n};\n","import { DisplayFormat } from '../../publicTypes/format/formatParts/DisplayFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const displayFormatHandler: FormatHandler<DisplayFormat> = {\n    parse: (format, element) => {\n        const display = element.style.display;\n\n        if (display) {\n            format.display = display;\n        }\n    },\n    apply: (format, element) => {\n        if (format.display) {\n            element.style.display = format.display;\n        }\n    },\n};\n","import { calcAlign, ResultMap } from '../utils/dir';\nimport { DirectionFormat } from '../../publicTypes/format/formatParts/DirectionFormat';\nimport { directionFormatHandler } from './directionFormatHandler';\nimport { FormatHandler } from '../FormatHandler';\nimport { HtmlAlignFormat } from '../../publicTypes/format/formatParts/HtmlAlignFormat';\nimport { TextAlignFormat } from '../../publicTypes/format/formatParts/TextAlignFormat';\n\n/**\n * @internal\n */\nexport const htmlAlignFormatHandler: FormatHandler<\n    DirectionFormat & HtmlAlignFormat & TextAlignFormat\n> = {\n    parse: (format, element, context, defaultStyle) => {\n        directionFormatHandler.parse(format, element, context, defaultStyle);\n\n        const htmlAlign = element.getAttribute('align');\n\n        if (htmlAlign) {\n            format.htmlAlign = calcAlign(htmlAlign, format.direction);\n            delete format.textAlign;\n            delete context.blockFormat.textAlign;\n        }\n    },\n    apply: (format, element) => {\n        const dir: 'ltr' | 'rtl' = format.direction == 'rtl' ? 'rtl' : 'ltr';\n\n        if (format.htmlAlign) {\n            element.setAttribute('align', ResultMap[format.htmlAlign][dir]);\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { LineHeightFormat } from '../../publicTypes/format/formatParts/LineHeightFormat';\n\n/**\n * @internal\n */\nexport const lineHeightFormatHandler: FormatHandler<LineHeightFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const lineHeight = element.style.lineHeight || defaultStyle.lineHeight;\n\n        if (lineHeight && lineHeight != 'inherit') {\n            format.lineHeight = lineHeight;\n        }\n    },\n    apply: (format, element) => {\n        if (format.lineHeight) {\n            element.style.lineHeight = format.lineHeight;\n        }\n    },\n};\n","import { calcAlign, ResultMap } from '../utils/dir';\nimport { DirectionFormat } from '../../publicTypes/format/formatParts/DirectionFormat';\nimport { directionFormatHandler } from './directionFormatHandler';\nimport { FormatHandler } from '../FormatHandler';\nimport { TextAlignFormat } from '../../publicTypes/format/formatParts/TextAlignFormat';\n\n/**\n * @internal\n */\nexport const textAlignFormatHandler: FormatHandler<DirectionFormat & TextAlignFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        directionFormatHandler.parse(format, element, context, defaultStyle);\n\n        let textAlign = element.style.textAlign || defaultStyle.textAlign;\n\n        if (\n            element.tagName == 'LI' &&\n            element.parentElement?.style.display === 'flex' &&\n            element.parentElement.style.flexDirection === 'column' &&\n            element.style.alignSelf\n        ) {\n            // For LI element with flex style applied, we use its \"align-self\" style value instead since LI has a different implementation for align\n            textAlign = element.style.alignSelf;\n        }\n\n        if (textAlign) {\n            format.textAlign = calcAlign(textAlign, format.direction);\n        }\n    },\n    apply: (format, element) => {\n        const dir: 'ltr' | 'rtl' = format.direction == 'rtl' ? 'rtl' : 'ltr';\n\n        if (format.textAlign) {\n            const parent = element.parentElement;\n            const parentTag = parent?.tagName;\n\n            if (element.tagName == 'LI' && parent && (parentTag == 'OL' || parentTag == 'UL')) {\n                element.style.alignSelf = format.textAlign;\n                element.parentElement.style.flexDirection = 'column';\n                element.parentElement.style.display = 'flex';\n            } else {\n                element.style.textAlign = ResultMap[format.textAlign][dir];\n            }\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { WhiteSpaceFormat } from '../../publicTypes/format/formatParts/WhiteSpaceFormat';\n\n/**\n * @internal\n */\nexport const whiteSpaceFormatHandler: FormatHandler<WhiteSpaceFormat> = {\n    parse: (format, element, _, defaultStyle) => {\n        const whiteSpace = element.style.whiteSpace || defaultStyle.whiteSpace;\n\n        if (whiteSpace) {\n            format.whiteSpace = whiteSpace;\n        }\n    },\n    apply: (format, element, context) => {\n        const whiteSpace = context.implicitFormat.whiteSpace;\n        if (format.whiteSpace != whiteSpace) {\n            element.style.whiteSpace = format.whiteSpace || 'normal';\n        }\n    },\n};\n","import { BackgroundColorFormat } from '../../publicTypes/format/formatParts/BackgroundColorFormat';\nimport { FormatHandler } from '../FormatHandler';\nimport { getColor, setColor } from '../utils/color';\n\n/**\n * @internal\n */\nexport const backgroundColorFormatHandler: FormatHandler<BackgroundColorFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const backgroundColor =\n            getColor(\n                element,\n                true /*isBackground*/,\n                context.darkColorHandler,\n                context.isDarkMode\n            ) || defaultStyle.backgroundColor;\n\n        if (backgroundColor) {\n            format.backgroundColor = backgroundColor;\n        }\n    },\n    apply: (format, element, context) => {\n        if (format.backgroundColor) {\n            setColor(\n                element,\n                format.backgroundColor,\n                true /*isBackground*/,\n                context.darkColorHandler,\n                context.isDarkMode\n            );\n        }\n    },\n};\n","import { BorderBoxFormat } from '../../publicTypes/format/formatParts/BorderBoxFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const borderBoxFormatHandler: FormatHandler<BorderBoxFormat> = {\n    parse: (format, element) => {\n        if (element.style?.boxSizing == 'border-box') {\n            format.useBorderBox = true;\n        }\n    },\n    apply: (format, element) => {\n        if (format.useBorderBox) {\n            element.style.boxSizing = 'border-box';\n        }\n    },\n};\n","import { BorderFormat } from '../../publicTypes/format/formatParts/BorderFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const BorderKeys: (keyof BorderFormat & keyof CSSStyleDeclaration)[] = [\n    'borderTop',\n    'borderRight',\n    'borderBottom',\n    'borderLeft',\n    'borderRadius',\n];\n\n/**\n * @internal\n */\nexport const borderFormatHandler: FormatHandler<BorderFormat> = {\n    parse: (format, element) => {\n        BorderKeys.forEach(key => {\n            const value = element.style[key];\n\n            if (value) {\n                format[key] = value == 'none' ? '' : value;\n            }\n        });\n    },\n    apply: (format, element) => {\n        BorderKeys.forEach(key => {\n            const value = format[key];\n\n            if (value) {\n                element.style[key] = value;\n            }\n        });\n    },\n};\n","import { BoxShadowFormat } from '../../publicTypes/format/formatParts/BoxShadowFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const boxShadowFormatHandler: FormatHandler<BoxShadowFormat> = {\n    parse: (format, element) => {\n        if (element.style?.boxShadow) {\n            format.boxShadow = element.style.boxShadow;\n        }\n    },\n    apply: (format, element) => {\n        if (format.boxShadow) {\n            element.style.boxShadow = format.boxShadow;\n        }\n    },\n};\n","import { DatasetFormat } from '../../publicTypes/format/formatParts/DatasetFormat';\nimport { FormatHandler } from '../FormatHandler';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const datasetFormatHandler: FormatHandler<DatasetFormat> = {\n    parse: (format, element) => {\n        const dataset = element.dataset;\n\n        getObjectKeys(dataset).forEach(key => {\n            format[key] = dataset[key] || '';\n        });\n    },\n\n    apply: (format, element) => {\n        getObjectKeys(format).forEach(key => {\n            element.dataset[key] = format[key];\n        });\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { IdFormat } from '../../publicTypes/format/formatParts/IdFormat';\n\n/**\n * @internal\n */\nexport const idFormatHandler: FormatHandler<IdFormat> = {\n    parse: (format, element) => {\n        if (element.id) {\n            format.id = element.id;\n        }\n    },\n    apply: (format, element) => {\n        if (format.id) {\n            element.id = format.id;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { SizeFormat } from '../../publicTypes/format/formatParts/SizeFormat';\n\nconst PercentageRegex = /[\\d\\.]+%/;\n\n/**\n * @internal\n */\nexport const sizeFormatHandler: FormatHandler<SizeFormat> = {\n    parse: (format, element, context) => {\n        const width = element.style.width || tryParseSize(element, 'width');\n        const height = element.style.height || tryParseSize(element, 'height');\n        const maxWidth = element.style.maxWidth;\n        const maxHeight = element.style.maxHeight;\n        const minWidth = element.style.minWidth;\n        const minHeight = element.style.minHeight;\n\n        if (width) {\n            format.width = width;\n        }\n        if (height) {\n            format.height = height;\n        }\n        if (maxWidth) {\n            format.maxWidth = maxWidth;\n        }\n        if (maxHeight) {\n            format.maxHeight = maxHeight;\n        }\n        if (minWidth) {\n            format.minWidth = minWidth;\n        }\n        if (minHeight) {\n            format.minHeight = minHeight;\n        }\n    },\n    apply: (format, element) => {\n        if (format.width) {\n            element.style.width = format.width;\n        }\n        if (format.height) {\n            element.style.height = format.height;\n        }\n        if (format.maxWidth) {\n            element.style.maxWidth = format.maxWidth;\n        }\n        if (format.maxHeight) {\n            element.style.maxHeight = format.maxHeight;\n        }\n        if (format.minWidth) {\n            element.style.minWidth = format.minWidth;\n        }\n        if (format.minHeight) {\n            element.style.minHeight = format.minHeight;\n        }\n    },\n};\n\nfunction tryParseSize(element: HTMLElement, attrName: 'width' | 'height'): string | undefined {\n    const attrValue = element.getAttribute(attrName);\n    const value = parseInt(attrValue || '');\n\n    return attrValue && PercentageRegex.test(attrValue)\n        ? attrValue\n        : Number.isNaN(value)\n        ? undefined\n        : value + 'px';\n}\n","import { FormatHandler } from '../FormatHandler';\nimport { VerticalAlignFormat } from '../../publicTypes/format/formatParts/VerticalAlignFormat';\n\n/**\n * @internal\n */\nexport const verticalAlignFormatHandler: FormatHandler<VerticalAlignFormat> = {\n    parse: (format, element) => {\n        const align = element.style.verticalAlign || element.getAttribute('valign');\n\n        switch (align) {\n            case 'baseline':\n            case 'initial':\n            case 'super':\n            case 'sub':\n            case 'text-top':\n            case 'text-bottom':\n            case 'top':\n                format.verticalAlign = 'top';\n                break;\n\n            case 'bottom':\n                format.verticalAlign = 'bottom';\n                break;\n        }\n    },\n    apply: (format, element) => {\n        if (format.verticalAlign) {\n            element.style.verticalAlign = format.verticalAlign;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\r\nimport { WordBreakFormat } from '../../publicTypes/format/formatParts/WordBreakFormat';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const wordBreakFormatHandler: FormatHandler<WordBreakFormat> = {\r\n    parse: (format, element, _, defaultStyle) => {\r\n        const wordBreak = element.style.wordBreak || defaultStyle.wordBreak;\r\n\r\n        if (wordBreak) {\r\n            format.wordBreak = wordBreak;\r\n        }\r\n    },\r\n    apply: (format, element) => {\r\n        if (format.wordBreak) {\r\n            element.style.wordBreak = format.wordBreak;\r\n        }\r\n    },\r\n};\r\n","import { backgroundColorFormatHandler } from './common/backgroundColorFormatHandler';\nimport { boldFormatHandler } from './segment/boldFormatHandler';\nimport { borderBoxFormatHandler } from './common/borderBoxFormatHandler';\nimport { borderFormatHandler } from './common/borderFormatHandler';\nimport { boxShadowFormatHandler } from './common/boxShadowFormatHandler';\nimport { ContentModelFormatMap } from '../publicTypes/format/ContentModelFormatMap';\nimport { datasetFormatHandler } from './common/datasetFormatHandler';\nimport { directionFormatHandler } from './block/directionFormatHandler';\nimport { displayFormatHandler } from './block/displayFormatHandler';\nimport { fontFamilyFormatHandler } from './segment/fontFamilyFormatHandler';\nimport { fontSizeFormatHandler } from './segment/fontSizeFormatHandler';\nimport { FormatHandler } from './FormatHandler';\nimport { FormatHandlerTypeMap, FormatKey } from '../publicTypes/format/FormatHandlerTypeMap';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport { htmlAlignFormatHandler } from './block/htmlAlignFormatHandler';\nimport { idFormatHandler } from './common/idFormatHandler';\nimport { italicFormatHandler } from './segment/italicFormatHandler';\nimport { letterSpacingFormatHandler } from './segment/letterSpacingFormatHandler';\nimport { lineHeightFormatHandler } from './block/lineHeightFormatHandler';\nimport { linkFormatHandler } from './segment/linkFormatHandler';\nimport { listItemMetadataFormatHandler } from './list/listItemMetadataFormatHandler';\nimport { listItemThreadFormatHandler } from './list/listItemThreadFormatHandler';\nimport { listLevelMetadataFormatHandler } from './list/listLevelMetadataFormatHandler';\nimport { listLevelThreadFormatHandler } from './list/listLevelThreadFormatHandler';\nimport { listStylePositionFormatHandler } from './list/listStylePositionFormatHandler';\nimport { listTypeFormatHandler } from './list/listTypeFormatHandler';\nimport { marginFormatHandler } from './paragraph/marginFormatHandler';\nimport { paddingFormatHandler } from './paragraph/paddingFormatHandler';\nimport { sizeFormatHandler } from './common/sizeFormatHandler';\nimport { strikeFormatHandler } from './segment/strikeFormatHandler';\nimport { superOrSubScriptFormatHandler } from './segment/superOrSubScriptFormatHandler';\nimport { tableSpacingFormatHandler } from './table/tableSpacingFormatHandler';\nimport { textAlignFormatHandler } from './block/textAlignFormatHandler';\nimport { textColorFormatHandler } from './segment/textColorFormatHandler';\nimport { textColorOnTableCellFormatHandler } from './table/textColorOnTableCellFormatHandler';\nimport { underlineFormatHandler } from './segment/underlineFormatHandler';\nimport { verticalAlignFormatHandler } from './common/verticalAlignFormatHandler';\nimport { whiteSpaceFormatHandler } from './block/whiteSpaceFormatHandler';\nimport { wordBreakFormatHandler } from './common/wordBreakFormatHandler';\nimport {\n    FormatApplier,\n    FormatAppliers,\n    FormatAppliersPerCategory,\n} from '../publicTypes/context/ModelToDomSettings';\nimport {\n    FormatParser,\n    FormatParsers,\n    FormatParsersPerCategory,\n} from '../publicTypes/context/DomToModelSettings';\n\ntype FormatHandlers = {\n    [Key in FormatKey]: FormatHandler<FormatHandlerTypeMap[Key]>;\n};\n\nconst defaultFormatHandlerMap: FormatHandlers = {\n    backgroundColor: backgroundColorFormatHandler,\n    bold: boldFormatHandler,\n    border: borderFormatHandler,\n    borderBox: borderBoxFormatHandler,\n    boxShadow: boxShadowFormatHandler,\n    dataset: datasetFormatHandler,\n    direction: directionFormatHandler,\n    display: displayFormatHandler,\n    fontFamily: fontFamilyFormatHandler,\n    fontSize: fontSizeFormatHandler,\n    htmlAlign: htmlAlignFormatHandler,\n    id: idFormatHandler,\n    italic: italicFormatHandler,\n    letterSpacing: letterSpacingFormatHandler,\n    lineHeight: lineHeightFormatHandler,\n    link: linkFormatHandler,\n    listItemMetadata: listItemMetadataFormatHandler,\n    listItemThread: listItemThreadFormatHandler,\n    listLevelMetadata: listLevelMetadataFormatHandler,\n    listLevelThread: listLevelThreadFormatHandler,\n    listStylePosition: listStylePositionFormatHandler,\n    listType: listTypeFormatHandler,\n    margin: marginFormatHandler,\n    padding: paddingFormatHandler,\n    size: sizeFormatHandler,\n    strike: strikeFormatHandler,\n    superOrSubScript: superOrSubScriptFormatHandler,\n    tableSpacing: tableSpacingFormatHandler,\n    textAlign: textAlignFormatHandler,\n    textColor: textColorFormatHandler,\n    textColorOnTableCell: textColorOnTableCellFormatHandler,\n    underline: underlineFormatHandler,\n    verticalAlign: verticalAlignFormatHandler,\n    whiteSpace: whiteSpaceFormatHandler,\n    wordBreak: wordBreakFormatHandler,\n};\n\nconst sharedSegmentFormats: (keyof FormatHandlerTypeMap)[] = [\n    'letterSpacing',\n    'strike',\n    'fontFamily',\n    'fontSize',\n    'underline',\n    'superOrSubScript',\n    'italic',\n    'bold',\n];\nconst sharedBlockFormats: (keyof FormatHandlerTypeMap)[] = [\n    'direction',\n    'textAlign',\n    'lineHeight',\n    'whiteSpace',\n];\nconst sharedContainerFormats: (keyof FormatHandlerTypeMap)[] = [\n    'backgroundColor',\n    'margin',\n    'padding',\n    'border',\n];\n\nconst defaultFormatKeysPerCategory: {\n    [key in keyof ContentModelFormatMap]: (keyof FormatHandlerTypeMap)[];\n} = {\n    block: sharedBlockFormats,\n    listItem: ['listItemThread', 'listItemMetadata'],\n    listItemElement: [...sharedBlockFormats, 'direction', 'textAlign', 'lineHeight', 'margin'],\n    listLevel: [\n        'listType',\n        'listLevelThread',\n        'listLevelMetadata',\n        'direction',\n        'textAlign',\n        'margin',\n        'padding',\n        'listStylePosition',\n    ],\n    segment: [...sharedSegmentFormats, 'textColor', 'backgroundColor', 'lineHeight'],\n    segmentOnBlock: [...sharedSegmentFormats, 'textColor'],\n    segmentOnTableCell: [...sharedSegmentFormats, 'textColorOnTableCell'],\n    tableCell: [\n        'border',\n        'backgroundColor',\n        'padding',\n        'verticalAlign',\n        'wordBreak',\n        'textColor',\n        'htmlAlign',\n    ],\n    tableRow: ['backgroundColor'],\n    table: ['id', 'border', 'backgroundColor', 'display', 'htmlAlign', 'margin', 'size'],\n    tableBorder: ['borderBox', 'tableSpacing'],\n    tableCellBorder: ['borderBox'],\n    image: ['id', 'size', 'margin', 'padding', 'borderBox', 'border', 'boxShadow', 'display'],\n    link: [\n        'link',\n        'textColor',\n        'underline',\n        'display',\n        'margin',\n        'padding',\n        'backgroundColor',\n        'border',\n        'size',\n        'textAlign',\n    ],\n    code: ['fontFamily', 'display'],\n    dataset: ['dataset'],\n    divider: [...sharedBlockFormats, ...sharedContainerFormats, 'display', 'size', 'htmlAlign'],\n    container: [...sharedContainerFormats, 'htmlAlign', 'size', 'display'],\n};\n\n/**\n * @internal\n */\nexport const defaultFormatParsers: FormatParsers = getObjectKeys(defaultFormatHandlerMap).reduce(\n    (result, key) => {\n        result[key] = defaultFormatHandlerMap[key].parse as FormatParser<any>;\n        return result;\n    },\n    <FormatParsers>{}\n);\n\n/**\n * @internal\n */\nexport const defaultFormatAppliers: FormatAppliers = getObjectKeys(defaultFormatHandlerMap).reduce(\n    (result, key) => {\n        result[key] = defaultFormatHandlerMap[key].apply as FormatApplier<any>;\n        return result;\n    },\n    <FormatAppliers>{}\n);\n\n/**\n * @internal\n */\nexport function getFormatParsers(\n    override: Partial<FormatParsers> = {},\n    additionalParsers: Partial<FormatParsersPerCategory> = {}\n): FormatParsersPerCategory {\n    return getObjectKeys(defaultFormatKeysPerCategory).reduce((result, key) => {\n        const value = defaultFormatKeysPerCategory[key]\n            .map(\n                formatKey =>\n                    (override[formatKey] === undefined\n                        ? defaultFormatParsers[formatKey]\n                        : override[formatKey]) as FormatParser<any>\n            )\n            .concat((additionalParsers[key] as FormatParser<any>[]) || []);\n\n        result[key] = value;\n\n        return result;\n    }, {} as FormatParsersPerCategory);\n}\n\n/**\n * @internal\n */\nexport function getFormatAppliers(\n    override: Partial<FormatAppliers> = {},\n    additionalAppliers: Partial<FormatAppliersPerCategory> = {}\n): FormatAppliersPerCategory {\n    return getObjectKeys(defaultFormatKeysPerCategory).reduce((result, key) => {\n        const value = defaultFormatKeysPerCategory[key]\n            .map(\n                formatKey =>\n                    (override[formatKey] === undefined\n                        ? defaultFormatAppliers[formatKey]\n                        : override[formatKey]) as FormatApplier<any>\n            )\n            .concat((additionalAppliers[key] as FormatApplier<any>[]) || []);\n\n        result[key] = value;\n\n        return result;\n    }, {} as FormatAppliersPerCategory);\n}\n","import { FormatHandler } from '../FormatHandler';\nimport { getObjectKeys, getTagOfNode } from 'roosterjs-editor-dom';\nimport { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { ListMetadataFormat } from '../../publicTypes/format/formatParts/ListMetadataFormat';\nimport { NodeType } from 'roosterjs-editor-types';\nimport { OrderedMap, UnorderedMap } from './listLevelMetadataFormatHandler';\n\nconst OrderedMapPlaceholderRegex = /\\$\\{(\\w+)\\}/;\nconst DefaultOrderedListStyles = ['decimal', 'lower-alpha', 'lower-roman'];\nconst DefaultUnorderedListStyles = ['disc', 'circle', 'square'];\nconst CharCodeOfA = 65;\nconst RomanValues: Record<string, number> = {\n    M: 1000,\n    CM: 900,\n    D: 500,\n    CD: 400,\n    C: 100,\n    XC: 90,\n    L: 50,\n    XL: 40,\n    X: 10,\n    IX: 9,\n    V: 5,\n    IV: 4,\n    I: 1,\n};\n\n/**\n * @internal\n */\nexport const listItemMetadataFormatHandler: FormatHandler<ListMetadataFormat> = {\n    parse: () => {\n        // TODO: Handle list style override\n    },\n    apply: (format, element, context) => {\n        const parent = element.parentNode;\n        const depth = context.listFormat.nodeStack.length - 2; // Minus two for the parent element and convert length to index\n\n        if (depth >= 0 && isNodeOfType(parent, NodeType.Element) && !parent.style.listStyleType) {\n            const parentTag = getTagOfNode(parent);\n            const style =\n                parentTag == 'OL'\n                    ? getOrderedListStyleValue(\n                          OrderedMap[format.orderedStyleType!],\n                          context.listFormat.threadItemCounts[depth]\n                      ) ?? DefaultOrderedListStyles[depth % DefaultOrderedListStyles.length]\n                    : UnorderedMap[format.unorderedStyleType!] ??\n                      DefaultUnorderedListStyles[depth % DefaultUnorderedListStyles.length];\n\n            if (style && (depth > 0 || (style != 'decimal' && style != 'disc'))) {\n                element.style.listStyleType = style;\n            }\n        }\n    },\n};\n\n/**\n * @internal\n * Export for test only\n */\nexport function getOrderedListStyleValue(\n    template: string | undefined,\n    listNumber: number\n): string | undefined {\n    return template\n        ? template.replace(OrderedMapPlaceholderRegex, (match, subStr) => {\n              switch (subStr) {\n                  case 'Number':\n                      return listNumber + '';\n                  case 'LowerAlpha':\n                      return convertDecimalsToAlpha(listNumber, true /*isLowerCase*/);\n                  case 'UpperAlpha':\n                      return convertDecimalsToAlpha(listNumber, false /*isLowerCase*/);\n                  case 'LowerRoman':\n                      return convertDecimalsToRoman(listNumber, true /*isLowerCase*/);\n                  case 'UpperRoman':\n                      return convertDecimalsToRoman(listNumber, false /*isLowerCase*/);\n              }\n\n              return '';\n          })\n        : undefined;\n}\n\nfunction convertDecimalsToAlpha(decimal: number, isLowerCase?: boolean): string {\n    let alpha = '';\n    decimal--;\n\n    while (decimal >= 0) {\n        alpha = String.fromCharCode((decimal % 26) + CharCodeOfA) + alpha;\n        decimal = Math.floor(decimal / 26) - 1;\n    }\n    return isLowerCase ? alpha.toLowerCase() : alpha;\n}\n\nfunction convertDecimalsToRoman(decimal: number, isLowerCase?: boolean) {\n    let romanValue = '';\n    for (let i of getObjectKeys(RomanValues)) {\n        let timesRomanCharAppear = Math.floor(decimal / RomanValues[i]);\n        decimal = decimal - timesRomanCharAppear * RomanValues[i];\n        romanValue = romanValue + i.repeat(timesRomanCharAppear);\n    }\n    return isLowerCase ? romanValue.toLocaleLowerCase() : romanValue;\n}\n","import { FormatHandler } from '../FormatHandler';\nimport { ListThreadFormat } from '../../publicTypes/format/formatParts/ListThreadFormat';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const listItemThreadFormatHandler: FormatHandler<ListThreadFormat> = {\n    parse: (format, element, context, defaultStyles) => {\n        const { listFormat } = context;\n        const depth = listFormat.levels.length;\n        const display = element.style.display || defaultStyles.display;\n\n        if (display && display != 'list-item') {\n            format.displayForDummyItem = display;\n        } else if (isLiUnderOl(element) && depth > 0) {\n            listFormat.threadItemCounts[depth - 1]++;\n            listFormat.threadItemCounts.splice(depth);\n            listFormat.levels.forEach(level => {\n                // Delete restart number so next list item doesn't need to have this value.\n                // Then it will be treated as a continuous list item to the previous one\n                delete level.startNumberOverride;\n            });\n        }\n    },\n    apply: (format, element, context) => {\n        if (format.displayForDummyItem) {\n            element.style.display = format.displayForDummyItem;\n        } else if (isLiUnderOl(element)) {\n            const { listFormat } = context;\n            const { threadItemCounts } = listFormat;\n            const index = listFormat.nodeStack.length - 2; // The first one is always the parent of list, then minus another 1 to convert length to index\n\n            if (index >= 0) {\n                threadItemCounts.splice(index + 1);\n                threadItemCounts[index] = (threadItemCounts[index] ?? 0) + 1;\n            }\n        }\n    },\n};\n\nfunction isLiUnderOl(element: HTMLElement) {\n    return (\n        safeInstanceOf(element, 'HTMLLIElement') &&\n        safeInstanceOf(element.parentNode, 'HTMLOListElement')\n    );\n}\n","import { BulletListType, NumberingListType } from 'roosterjs-editor-types';\nimport { FormatHandler } from '../FormatHandler';\nimport { getObjectKeys, getTagOfNode, safeInstanceOf } from 'roosterjs-editor-dom';\nimport { ListMetadataFormat } from '../../publicTypes/format/formatParts/ListMetadataFormat';\n\n/**\n * @internal\n */\nexport const OrderedMap: Record<NumberingListType, string> = {\n    [NumberingListType.Decimal]: 'decimal',\n    [NumberingListType.DecimalDash]: '\"${Number}- \"',\n    [NumberingListType.DecimalParenthesis]: '\"${Number}) \"',\n    [NumberingListType.DecimalDoubleParenthesis]: '\"(${Number}) \"',\n    [NumberingListType.LowerAlpha]: 'lower-alpha',\n    [NumberingListType.LowerAlphaDash]: '\"${LowerAlpha}- \"',\n    [NumberingListType.LowerAlphaParenthesis]: '\"${LowerAlpha}) \"',\n    [NumberingListType.LowerAlphaDoubleParenthesis]: '\"(${LowerAlpha}) \"',\n    [NumberingListType.UpperAlpha]: 'upper-alpha',\n    [NumberingListType.UpperAlphaDash]: '\"${UpperAlpha}- \"',\n    [NumberingListType.UpperAlphaParenthesis]: '\"${UpperAlpha}) \"',\n    [NumberingListType.UpperAlphaDoubleParenthesis]: '\"(${UpperAlpha}) \"',\n    [NumberingListType.LowerRoman]: 'lower-roman',\n    [NumberingListType.LowerRomanDash]: '\"${LowerRoman}- \"',\n    [NumberingListType.LowerRomanParenthesis]: '\"${LowerRoman}) \"',\n    [NumberingListType.LowerRomanDoubleParenthesis]: '\"(${LowerRoman}) \"',\n    [NumberingListType.UpperRoman]: 'upper-roman',\n    [NumberingListType.UpperRomanDash]: '\"${UpperRoman}- \"',\n    [NumberingListType.UpperRomanParenthesis]: '\"${UpperRoman}) \"',\n    [NumberingListType.UpperRomanDoubleParenthesis]: '\"(${UpperRoman}) \"',\n};\n\n/**\n * @internal\n */\nexport const UnorderedMap: Record<BulletListType, string> = {\n    [BulletListType.Disc]: 'disc',\n    [BulletListType.Square]: '\"∎ \"',\n    [BulletListType.Circle]: 'circle',\n    [BulletListType.Dash]: '\"- \"',\n    [BulletListType.LongArrow]: '\"➔ \"',\n    [BulletListType.DoubleLongArrow]: '\"➔ \"',\n    [BulletListType.ShortArrow]: '\"➢ \"',\n    [BulletListType.UnfilledArrow]: '\"➪ \"',\n    [BulletListType.Hyphen]: '\"— \"',\n};\n\nconst OLTypeToStyleMap: Record<string, string> = {\n    '1': 'decimal',\n    a: 'lower-alpha',\n    A: 'upper-alpha',\n    i: 'lower-roman',\n    I: 'upper-roman',\n};\n\n/**\n * @internal\n */\nexport const listLevelMetadataFormatHandler: FormatHandler<ListMetadataFormat> = {\n    parse: (format, element) => {\n        const listStyle =\n            element.style.listStyleType ||\n            (safeInstanceOf(element, 'HTMLOListElement') && OLTypeToStyleMap[element.type]);\n        const tag = getTagOfNode(element);\n\n        if (listStyle) {\n            if (tag == 'OL' && format.orderedStyleType === undefined) {\n                const value = getKeyFromValue(OrderedMap, listStyle);\n                format.orderedStyleType =\n                    typeof value === 'undefined' ? undefined : parseInt(value);\n            } else if (tag == 'UL' && format.unorderedStyleType === undefined) {\n                const value = getKeyFromValue(UnorderedMap, listStyle);\n                format.unorderedStyleType =\n                    typeof value === 'undefined' ? undefined : parseInt(value);\n            }\n        }\n    },\n    apply: (format, element) => {\n        const tag = getTagOfNode(element);\n        const listType =\n            tag == 'OL'\n                ? OrderedMap[format.orderedStyleType!]\n                : UnorderedMap[format.unorderedStyleType!];\n\n        if (listType && listType.indexOf('\"') < 0) {\n            element.style.listStyleType = listType;\n        }\n    },\n};\n\nfunction getKeyFromValue<K extends string | number, V>(\n    map: Record<K, V>,\n    value: V | undefined\n): string | undefined {\n    const result =\n        value === undefined ? undefined : getObjectKeys(map).filter(key => map[key] == value)[0];\n\n    // During run time the key is always string\n    return (result as any) as string | undefined;\n}\n","import { FormatHandler } from '../FormatHandler';\nimport { ListThreadFormat } from '../../publicTypes/format/formatParts/ListThreadFormat';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const listLevelThreadFormatHandler: FormatHandler<ListThreadFormat> = {\n    parse: (format, element, context) => {\n        if (safeInstanceOf(element, 'HTMLOListElement')) {\n            const { listFormat } = context;\n            const { threadItemCounts, levels } = listFormat;\n            const depth = levels.length;\n\n            if (\n                typeof threadItemCounts[depth] === 'number' &&\n                element.start != threadItemCounts[depth] + 1\n            ) {\n                format.startNumberOverride = element.start;\n            }\n\n            threadItemCounts[depth] = element.start - 1;\n        }\n    },\n    apply: (format, element, context) => {\n        const {\n            listFormat: { threadItemCounts, nodeStack },\n        } = context;\n        const depth = nodeStack.length - 1; // The first one is always the parent of list\n\n        if (depth >= 0 && safeInstanceOf(element, 'HTMLOListElement')) {\n            const startNumber = format.startNumberOverride;\n\n            if (typeof startNumber === 'number') {\n                threadItemCounts[depth] = startNumber - 1;\n            } else if (typeof threadItemCounts[depth] != 'number') {\n                threadItemCounts[depth] = 0;\n            }\n\n            threadItemCounts.splice(depth + 1);\n            element.start = threadItemCounts[depth] + 1;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { ListStylePositionFormat } from '../../publicTypes/format/formatParts/ListStylePositionFormat';\n\n/**\n * @internal\n */\nexport const listStylePositionFormatHandler: FormatHandler<ListStylePositionFormat> = {\n    parse: (format, element) => {\n        const listStylePosition = element.style.listStylePosition;\n\n        if (listStylePosition) {\n            format.listStylePosition = listStylePosition;\n        }\n    },\n    apply: (format, element) => {\n        if (format.listStylePosition) {\n            element.style.listStylePosition = format.listStylePosition;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { getTagOfNode } from 'roosterjs-editor-dom';\nimport { ListTypeFormat } from '../../publicTypes/format/formatParts/ListTypeFormat';\n\n/**\n * @internal\n */\nexport const listTypeFormatHandler: FormatHandler<ListTypeFormat> = {\n    parse: (format, element) => {\n        const tag = getTagOfNode(element);\n\n        if (tag == 'OL' || tag == 'UL') {\n            format.listType = tag;\n        }\n    },\n    apply: () => {},\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { MarginFormat } from '../../publicTypes/format/formatParts/MarginFormat';\nimport { parseValueWithUnit } from '../utils/parseValueWithUnit';\n\nconst MarginKeys: (keyof MarginFormat & keyof CSSStyleDeclaration)[] = [\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n];\n\n/**\n * @internal\n */\nexport const marginFormatHandler: FormatHandler<MarginFormat> = {\n    parse: (format, element, _, defaultStyle) => {\n        MarginKeys.forEach(key => {\n            const value = element.style[key] || defaultStyle[key];\n\n            if (value) {\n                switch (key) {\n                    case 'marginTop':\n                    case 'marginBottom':\n                        format[key] = value;\n                        break;\n\n                    case 'marginLeft':\n                    case 'marginRight':\n                        format[key] = format[key]\n                            ? parseValueWithUnit(format[key] || '', element) +\n                              parseValueWithUnit(value, element) +\n                              'px'\n                            : value;\n                        break;\n                }\n            }\n        });\n    },\n    apply: (format, element, context) => {\n        MarginKeys.forEach(key => {\n            const value = format[key];\n\n            if (value != context.implicitFormat[key]) {\n                element.style[key] = value || '0';\n            }\n        });\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { PaddingFormat } from '../../publicTypes/format/formatParts/PaddingFormat';\n\nconst PaddingKeys: (keyof PaddingFormat & keyof CSSStyleDeclaration)[] = [\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n];\n\n/**\n * @internal\n */\nexport const paddingFormatHandler: FormatHandler<PaddingFormat> = {\n    parse: (format, element) => {\n        PaddingKeys.forEach(key => {\n            const value = element.style[key];\n\n            if (value) {\n                format[key] = value;\n            }\n        });\n    },\n    apply: (format, element) => {\n        PaddingKeys.forEach(key => {\n            const value = format[key];\n            if (value) {\n                element.style[key] = value;\n            }\n        });\n    },\n};\n","import { DirectionFormat } from '../../publicTypes/format/formatParts/DirectionFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const rootDirectionFormatHandler: FormatHandler<DirectionFormat> = {\n    parse: (format, element) => {\n        const style = element.ownerDocument.defaultView?.getComputedStyle(element);\n\n        if (style?.direction == 'rtl') {\n            format.direction = 'rtl';\n        }\n    },\n    apply: () => {},\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { ZoomScaleFormat } from '../../publicTypes/format/formatParts/ZoomScaleFormat';\n\n/**\n * @internal\n */\nexport const zoomScaleFormatHandler: FormatHandler<ZoomScaleFormat> = {\n    parse: (format, element) => {\n        const originalWidth = element.getBoundingClientRect().width;\n        const visualWidth = element.offsetWidth;\n\n        format.zoomScale =\n            visualWidth > 0 && originalWidth > 0\n                ? Math.round((originalWidth / visualWidth) * 100) / 100\n                : 1;\n    },\n    apply: () => {},\n};\n","import { BoldFormat } from '../../publicTypes/format/formatParts/BoldFormat';\nimport { FormatHandler } from '../FormatHandler';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const boldFormatHandler: FormatHandler<BoldFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const fontWeight = element.style.fontWeight || defaultStyle.fontWeight;\n\n        if (fontWeight) {\n            format.fontWeight = fontWeight;\n        }\n    },\n    apply: (format, element, context) => {\n        if (typeof format.fontWeight === 'undefined') {\n            return;\n        }\n\n        const blockFontWeight = context.implicitFormat.fontWeight;\n\n        if (\n            (blockFontWeight && blockFontWeight != format.fontWeight) ||\n            (!blockFontWeight && format.fontWeight && format.fontWeight != 'normal')\n        ) {\n            if (format.fontWeight == 'bold') {\n                const b = element.ownerDocument.createElement('b');\n                moveChildNodes(b, element);\n                element.appendChild(b);\n            } else {\n                element.style.fontWeight = format.fontWeight || 'normal';\n            }\n        }\n    },\n};\n","import { FontFamilyFormat } from '../../publicTypes/format/formatParts/FontFamilyFormat';\nimport { FormatHandler } from '../FormatHandler';\n\n/**\n * @internal\n */\nexport const fontFamilyFormatHandler: FormatHandler<FontFamilyFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const fontFamily = element.style.fontFamily || defaultStyle.fontFamily;\n\n        if (fontFamily && fontFamily != 'inherit') {\n            format.fontFamily = fontFamily;\n        }\n    },\n    apply: (format, element, context) => {\n        if (format.fontFamily && format.fontFamily != context.implicitFormat.fontFamily) {\n            element.style.fontFamily = format.fontFamily;\n        }\n    },\n};\n","import { FontSizeFormat } from '../../publicTypes/format/formatParts/FontSizeFormat';\nimport { FormatHandler } from '../FormatHandler';\nimport { isSuperOrSubScript } from './superOrSubScriptFormatHandler';\n\n/**\n * @internal\n */\nexport const fontSizeFormatHandler: FormatHandler<FontSizeFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const fontSize = element.style.fontSize || defaultStyle.fontSize;\n        const verticalAlign = element.style.verticalAlign || defaultStyle.verticalAlign;\n\n        // when font size is 'smaller' and the style is for superscript/subscript,\n        // the font size will be handled by superOrSubScript handler\n        if (fontSize && !isSuperOrSubScript(fontSize, verticalAlign) && fontSize != 'inherit') {\n            format.fontSize = fontSize;\n        }\n    },\n    apply: (format, element, context) => {\n        if (format.fontSize && format.fontSize != context.implicitFormat.fontSize) {\n            element.style.fontSize = format.fontSize;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { ItalicFormat } from '../../publicTypes/format/formatParts/ItalicFormat';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const italicFormatHandler: FormatHandler<ItalicFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const fontStyle = element.style.fontStyle || defaultStyle.fontStyle;\n\n        if (fontStyle == 'italic' || fontStyle == 'oblique') {\n            format.italic = true;\n        } else if (fontStyle == 'initial' || fontStyle == 'normal') {\n            format.italic = false;\n        }\n    },\n    apply: (format, element, context) => {\n        if (typeof format.italic === 'undefined') {\n            return;\n        }\n\n        const implicitItalic = context.implicitFormat.italic;\n\n        if (!!implicitItalic != !!format.italic) {\n            if (format.italic) {\n                const i = element.ownerDocument.createElement('i');\n                moveChildNodes(i, element);\n                element.appendChild(i);\n            } else {\n                element.style.fontStyle = 'normal';\n            }\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { LetterSpacingFormat } from '../../publicTypes/format/formatParts/LetterSpacingFormat';\n\n/**\n * @internal\n */\nexport const letterSpacingFormatHandler: FormatHandler<LetterSpacingFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const letterSpacing = element.style.letterSpacing || defaultStyle.letterSpacing;\n\n        if (letterSpacing) {\n            format.letterSpacing = letterSpacing;\n        }\n    },\n    apply: (format, element, context) => {\n        if (format.letterSpacing) {\n            element.style.letterSpacing = format.letterSpacing;\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { LinkFormat } from '../../publicTypes/format/formatParts/LinkFormat';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const linkFormatHandler: FormatHandler<LinkFormat> = {\n    parse: (format, element) => {\n        if (safeInstanceOf(element, 'HTMLAnchorElement')) {\n            const name = element.name;\n            const href = element.getAttribute('href'); // Use getAttribute to get original HREF but not the resolved absolute url\n            const target = element.target;\n            const rel = element.rel;\n            const id = element.id;\n            const className = element.className;\n            const title = element.title;\n\n            if (name) {\n                format.name = name;\n            }\n\n            if (href) {\n                format.href = href;\n            }\n\n            if (target) {\n                format.target = target;\n            }\n\n            if (id) {\n                format.anchorId = id;\n            }\n\n            if (rel) {\n                format.relationship = rel;\n            }\n\n            if (title) {\n                format.anchorTitle = title;\n            }\n\n            if (className) {\n                format.anchorClass = className;\n            }\n        }\n    },\n    apply: (format, element) => {\n        if (safeInstanceOf(element, 'HTMLAnchorElement') && format.href) {\n            element.href = format.href;\n\n            if (format.name) {\n                element.name = format.name;\n            }\n\n            if (format.target) {\n                element.target = format.target;\n            }\n\n            if (format.anchorId) {\n                element.id = format.anchorId;\n            }\n\n            if (format.anchorClass) {\n                element.className = format.anchorClass;\n            }\n\n            if (format.anchorTitle) {\n                element.title = format.anchorTitle;\n            }\n\n            if (format.relationship) {\n                element.rel = format.relationship;\n            }\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\nimport { StrikeFormat } from '../../publicTypes/format/formatParts/StrikeFormat';\n\n/**\n * @internal\n */\nexport const strikeFormatHandler: FormatHandler<StrikeFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const textDecoration = element.style.textDecoration || defaultStyle.textDecoration;\n\n        if (textDecoration?.indexOf('line-through')! >= 0) {\n            format.strikethrough = true;\n        }\n    },\n    apply: (format, element) => {\n        if (format.strikethrough) {\n            const strike = element.ownerDocument.createElement('s');\n            moveChildNodes(strike, element);\n            element.appendChild(strike);\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\nimport { SuperOrSubScriptFormat } from '../../publicTypes/format/formatParts/SuperOrSubScriptFormat';\n\n/**\n * @internal\n */\nexport const superOrSubScriptFormatHandler: FormatHandler<SuperOrSubScriptFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const verticalAlign = element.style.verticalAlign || defaultStyle.verticalAlign;\n        const fontSize = element.style.fontSize || defaultStyle.fontSize;\n\n        if (isSuperOrSubScript(fontSize, verticalAlign)) {\n            format.superOrSubScriptSequence = (format.superOrSubScriptSequence || '')\n                .split(' ')\n                .concat(verticalAlign)\n                .join(' ')\n                .trim();\n        }\n    },\n    apply: (format, element) => {\n        if (format.superOrSubScriptSequence) {\n            format.superOrSubScriptSequence\n                .split(' ')\n                .reverse()\n                .forEach(value => {\n                    const tagName = value == 'super' ? 'sup' : value == 'sub' ? 'sub' : null;\n\n                    if (tagName) {\n                        const wrapper = element.ownerDocument.createElement(tagName);\n                        moveChildNodes(wrapper, element);\n                        element.appendChild(wrapper);\n                    }\n                });\n        }\n    },\n};\n\n/**\n * @internal\n */\nexport function isSuperOrSubScript(\n    fontSize: string | undefined,\n    verticalAlign: string | undefined\n): verticalAlign is 'sub' | 'super' {\n    return fontSize == 'smaller' && (verticalAlign == 'sub' || verticalAlign == 'super');\n}\n","import { FormatHandler } from '../FormatHandler';\nimport { getColor, setColor } from '../utils/color';\nimport { TextColorFormat } from '../../publicTypes/format/formatParts/TextColorFormat';\n\n/**\n * @internal\n */\nexport const textColorFormatHandler: FormatHandler<TextColorFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const textColor =\n            getColor(\n                element,\n                false /*isBackground*/,\n                context.darkColorHandler,\n                context.isDarkMode\n            ) || defaultStyle.color;\n\n        if (textColor && textColor != 'inherit') {\n            format.textColor = textColor;\n        }\n    },\n    apply: (format, element, context) => {\n        const implicitColor = context.implicitFormat.textColor;\n\n        if (format.textColor && format.textColor != implicitColor) {\n            setColor(\n                element,\n                format.textColor,\n                false /*isBackground*/,\n                context.darkColorHandler,\n                context.isDarkMode\n            );\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\nimport { UnderlineFormat } from '../../publicTypes/format/formatParts/UnderlineFormat';\n\n/**\n * @internal\n */\nexport const underlineFormatHandler: FormatHandler<UnderlineFormat> = {\n    parse: (format, element, context, defaultStyle) => {\n        const textDecoration = element.style.textDecoration || defaultStyle.textDecoration;\n\n        if (textDecoration?.indexOf('underline')! >= 0) {\n            format.underline = true;\n        } else if (element.tagName == 'A' && textDecoration == 'none') {\n            format.underline = false;\n        }\n    },\n    apply: (format, element, context) => {\n        if (typeof format.underline === 'undefined') {\n            return;\n        }\n\n        const blockUnderline = context.implicitFormat.underline;\n\n        if (!!blockUnderline != !!format.underline) {\n            if (format.underline) {\n                const u = element.ownerDocument.createElement('u');\n                moveChildNodes(u, element);\n                element.appendChild(u);\n            } else {\n                element.style.textDecoration = 'none';\n            }\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { SpacingFormat } from '../../publicTypes/format/formatParts/SpacingFormat';\n\nconst BorderCollapsed = 'collapse';\n\n/**\n * @internal\n */\nexport const tableSpacingFormatHandler: FormatHandler<SpacingFormat> = {\n    parse: (format, element) => {\n        if (element.style.borderCollapse == BorderCollapsed) {\n            format.borderCollapse = true;\n        }\n    },\n    apply: (format, element) => {\n        if (format.borderCollapse) {\n            element.style.borderCollapse = BorderCollapsed;\n            element.style.borderSpacing = '0';\n            element.style.boxSizing = 'border-box';\n        }\n    },\n};\n","import { FormatHandler } from '../FormatHandler';\nimport { TextColorFormat } from '../../publicTypes/format/formatParts/TextColorFormat';\n\nexport const textColorOnTableCellFormatHandler: FormatHandler<TextColorFormat> = {\n    parse: (format, element) => {\n        if (element.style.color) {\n            // Delete color from format since text color on TD/TH will be handled by separate code\n            // and text color on segment format context need to be reset so that it will not inherit\n            // value outer container\n            delete format.textColor;\n        }\n    },\n    apply: () => {},\n};\n","import { DarkColorHandler } from 'roosterjs-editor-types';\nimport { getTagOfNode } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport function getColor(\n    element: HTMLElement,\n    isBackground: boolean,\n    darkColorHandler: DarkColorHandler | undefined | null,\n    isDarkMode: boolean\n): string | undefined {\n    let color: string | undefined;\n\n    if (!color) {\n        color =\n            (darkColorHandler &&\n                tryGetFontColor(element, isDarkMode, darkColorHandler, isBackground)) ||\n            (isBackground ? element.style.backgroundColor : element.style.color) ||\n            element.getAttribute(isBackground ? 'bgcolor' : 'color') ||\n            undefined;\n    }\n\n    if (darkColorHandler) {\n        color = darkColorHandler.parseColorValue(color).lightModeColor;\n    }\n\n    return color;\n}\n\n/**\n * @internal\n */\nexport function setColor(\n    element: HTMLElement,\n    lightModeColor: string,\n    isBackground: boolean,\n    darkColorHandler: DarkColorHandler | undefined | null,\n    isDarkMode: boolean\n) {\n    const effectiveColor = darkColorHandler?.registerColor(lightModeColor, isDarkMode) || '';\n\n    if (isBackground) {\n        element.style.backgroundColor = effectiveColor;\n    } else {\n        element.style.color = effectiveColor;\n    }\n}\n\n/**\n * There is a known issue that when input with IME in Chrome, it is possible Chrome insert a new FONT tag with colors.\n * If editor is in dark mode, this color will cause the FONT tag doesn't have light mode color info so that after convert\n * to light mode the color will be wrong.\n * To workaround it, we check if this is a known color (for light mode with VariableBasedDarkColor enabled, all used colors\n * are stored in darkColorHandler), then use the related light mode color instead.\n */\nfunction tryGetFontColor(\n    element: HTMLElement,\n    isDarkMode: boolean,\n    darkColorHandler: DarkColorHandler,\n    isBackground: boolean\n) {\n    let darkColor: string | null;\n\n    return getTagOfNode(element) == 'FONT' &&\n        !element.style.getPropertyValue(isBackground ? 'background-color' : 'color') &&\n        isDarkMode &&\n        (darkColor = element.getAttribute(isBackground ? 'bgcolor' : 'color'))\n        ? darkColorHandler.findLightColorFromDarkColor(darkColor)\n        : null;\n}\n","import { DefaultImplicitFormatMap } from '../../publicTypes/context/ModelToDomSettings';\nimport { DefaultStyleMap } from '../../publicTypes/context/DomToModelSettings';\n\nconst blockElement: Partial<CSSStyleDeclaration> = {\n    display: 'block',\n};\n\n/**\n * @internal\n */\nexport const defaultStyleMap: DefaultStyleMap = {\n    address: blockElement,\n    article: blockElement,\n    aside: blockElement,\n    b: {\n        fontWeight: 'bold',\n    },\n    blockquote: {\n        display: 'block',\n        marginTop: '1em',\n        marginBottom: '1em',\n        marginLeft: '40px',\n        marginRight: '40px',\n    },\n    br: blockElement,\n    center: {\n        display: 'block',\n        textAlign: 'center',\n    },\n    dd: blockElement,\n    div: blockElement,\n    dl: blockElement,\n    dt: blockElement,\n    em: {\n        fontStyle: 'italic',\n    },\n    fieldset: blockElement,\n    figcaption: blockElement,\n    figure: blockElement,\n    footer: blockElement,\n    form: blockElement,\n    h1: {\n        display: 'block',\n        fontWeight: 'bold',\n        fontSize: '2em',\n    },\n    h2: {\n        display: 'block',\n        fontWeight: 'bold',\n        fontSize: '1.5em',\n    },\n    h3: {\n        display: 'block',\n        fontWeight: 'bold',\n        fontSize: '1.17em',\n    },\n    h4: {\n        display: 'block',\n        fontWeight: 'bold',\n    },\n    h5: {\n        display: 'block',\n        fontWeight: 'bold',\n        fontSize: '0.83em',\n    },\n    h6: {\n        display: 'block',\n        fontWeight: 'bold',\n        fontSize: '0.67em',\n    },\n    header: blockElement,\n    hr: blockElement,\n    i: {\n        fontStyle: 'italic',\n    },\n    li: {\n        display: 'list-item',\n    },\n    main: blockElement,\n    nav: blockElement,\n    ol: blockElement,\n    p: {\n        display: 'block',\n        marginTop: '1em',\n        marginBottom: '1em',\n    },\n    pre: {\n        display: 'block',\n        fontFamily: 'monospace',\n        whiteSpace: 'pre',\n        marginTop: '1em',\n        marginBottom: '1em',\n    },\n    s: {\n        textDecoration: 'line-through',\n    },\n    section: blockElement,\n    strike: {\n        textDecoration: 'line-through',\n    },\n    strong: {\n        fontWeight: 'bold',\n    },\n    sub: {\n        verticalAlign: 'sub',\n        fontSize: 'smaller',\n    },\n    sup: {\n        verticalAlign: 'super',\n        fontSize: 'smaller',\n    },\n    table: {\n        display: 'table',\n        boxSizing: 'border-box',\n    },\n    td: {\n        display: 'table-cell',\n    },\n    th: {\n        display: 'table-cell',\n    },\n    u: {\n        textDecoration: 'underline',\n    },\n    ul: blockElement,\n};\n\n/**\n * @internal\n */\nexport const enum PseudoTagNames {\n    childOfPre = 'pre *', // This value is not a CSS selector, it just to tell this will impact elements under PRE tag. Any unique value here can work actually\n}\n\n/**\n * @internal\n */\nexport const defaultImplicitFormatMap: DefaultImplicitFormatMap = {\n    a: {\n        underline: true,\n    },\n    blockquote: {\n        marginTop: '1em',\n        marginBottom: '1em',\n        marginLeft: '40px',\n        marginRight: '40px',\n    },\n    code: {\n        fontFamily: 'monospace',\n    },\n    h1: {\n        fontWeight: 'bold',\n        fontSize: '2em',\n    },\n    h2: {\n        fontWeight: 'bold',\n        fontSize: '1.5em',\n    },\n    h3: {\n        fontWeight: 'bold',\n        fontSize: '1.17em',\n    },\n    h4: {\n        fontWeight: 'bold',\n        fontSize: '1em', // Set this default value here to overwrite existing font size when change header level\n    },\n    h5: {\n        fontWeight: 'bold',\n        fontSize: '0.83em',\n    },\n    h6: {\n        fontWeight: 'bold',\n        fontSize: '0.67em',\n    },\n    p: {\n        marginTop: '1em',\n        marginBottom: '1em',\n    },\n    pre: {\n        fontFamily: 'monospace',\n        whiteSpace: 'pre',\n        marginTop: '1em',\n        marginBottom: '1em',\n    },\n\n    // For PRE tag, the following styles will be included from the PRE tag.\n    // Adding this implicit style here so no need to generate these style for child elements\n    [PseudoTagNames.childOfPre]: {\n        fontFamily: 'monospace',\n        whiteSpace: 'pre',\n    },\n};\n","/**\n * @internal\n */\nexport const ResultMap = {\n    start: {\n        ltr: 'left',\n        rtl: 'right',\n    },\n    center: {\n        ltr: 'center',\n        rtl: 'center',\n    },\n    end: {\n        ltr: 'right',\n        rtl: 'left',\n    },\n    initial: {\n        ltr: 'initial',\n        rtl: 'initial',\n    },\n    justify: {\n        ltr: 'justify',\n        rtl: 'justify',\n    },\n};\n\n/**\n * @internal\n */\nexport function calcAlign(align: string, dir?: 'ltr' | 'rtl') {\n    switch (align) {\n        case 'center':\n            return 'center';\n\n        case 'left':\n            return dir == 'rtl' ? 'end' : 'start';\n\n        case 'right':\n            return dir == 'rtl' ? 'start' : 'end';\n\n        case 'start':\n        case 'end':\n            return align;\n\n        case 'justify':\n        case 'initial':\n            return align;\n\n        default:\n            return undefined;\n    }\n}\n","import { getComputedStyle } from 'roosterjs-editor-dom';\n\nconst MarginValueRegex = /(-?\\d+(\\.\\d+)?)([a-z]+|%)/;\n\n/**\n * @internal\n */\nexport function parseValueWithUnit(\n    value: string = '',\n    element?: HTMLElement,\n    resultUnit: 'px' | 'pt' = 'px'\n): number {\n    const match = MarginValueRegex.exec(value);\n    let result = 0;\n\n    if (match) {\n        const [_, numStr, __, unit] = match;\n        const num = parseFloat(numStr);\n\n        switch (unit) {\n            case 'px':\n                result = num;\n                break;\n            case 'pt':\n                result = ptToPx(num);\n                break;\n            case 'em':\n                result = element ? getFontSize(element) * num : 0;\n                break;\n            case 'ex':\n                result = element ? (getFontSize(element) * num) / 2 : 0;\n                break;\n            case '%':\n                result = element ? (element.offsetWidth * num) / 100 : 0;\n                break;\n            default:\n                // TODO: Support more unit if need\n                break;\n        }\n    }\n\n    if (result > 0 && resultUnit == 'pt') {\n        result = pxToPt(result);\n    }\n\n    return result;\n}\n\nfunction getFontSize(element: HTMLElement) {\n    const styleInPt = getComputedStyle(element, 'font-size');\n    const floatInPt = parseFloat(styleInPt);\n    const floatInPx = ptToPx(floatInPt);\n\n    return floatInPx;\n}\n\nfunction ptToPx(pt: number): number {\n    return Math.round((pt * 4000) / 3) / 1000;\n}\n\nfunction pxToPt(px: number) {\n    return Math.round((px * 3000) / 4) / 1000;\n}\n","export * from './publicTypes/index';\r\nexport * from './editor/index';\r\nexport * from './publicApi/index';\r\nexport * from './domUtils/index';\r\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { isGeneralSegment } from '../common/isGeneralSegment';\n\n/**\n * @internal\n */\nexport type BlockAndPath = {\n    /**\n     * The sibling block\n     */\n    block: ContentModelBlock;\n\n    /**\n     * Path of this sibling block\n     */\n    path: ContentModelBlockGroup[];\n\n    /**\n     * If the input block is under a general segment, it is possible there are sibling segments under the same paragraph.\n     * Use this property to return the sibling sibling under the same paragraph\n     */\n    siblingSegment?: ContentModelSegment;\n};\n\n/**\n * @internal\n */\nexport function getLeafSiblingBlock(\n    path: ContentModelBlockGroup[],\n    block: ContentModelBlock,\n    isNext: boolean\n): BlockAndPath | null {\n    const newPath = [...path];\n\n    while (newPath.length > 0) {\n        let group = newPath[0];\n        const index = group.blocks.indexOf(block);\n\n        if (index < 0) {\n            break;\n        }\n\n        let nextBlock = group.blocks[index + (isNext ? 1 : -1)];\n\n        if (nextBlock) {\n            while (nextBlock.blockType == 'BlockGroup') {\n                const child = nextBlock.blocks[isNext ? 0 : nextBlock.blocks.length - 1];\n\n                if (!child) {\n                    return { block: nextBlock, path: newPath };\n                } else if (child.blockType != 'BlockGroup') {\n                    newPath.unshift(nextBlock);\n                    return { block: child, path: newPath };\n                } else {\n                    newPath.unshift(nextBlock);\n                    nextBlock = child;\n                }\n            }\n\n            return { block: nextBlock, path: newPath };\n        } else if (isGeneralSegment(group)) {\n            // For general segment, we need to check if there is sibling segment under the same paragraph\n            // First let's find the parent paragraph of this segment\n            newPath.shift();\n\n            let segmentIndex = -1;\n            const segment = group;\n            const para = newPath[0]?.blocks.find(\n                x => x.blockType == 'Paragraph' && (segmentIndex = x.segments.indexOf(segment)) >= 0\n            ) as ContentModelParagraph;\n\n            if (para) {\n                // Now we have found the parent paragraph, so let's check if it has a sibling segment\n                const siblingSegment = para.segments[segmentIndex + (isNext ? 1 : -1)];\n\n                if (siblingSegment) {\n                    // Return this block, path and segment since we have found it\n                    return { block: para, path: newPath, siblingSegment };\n                } else {\n                    // No sibling segment, let's keep go upper level\n                    block = para;\n                }\n            } else {\n                // Parent sibling is not found (in theory this should never happen), just return null\n                break;\n            }\n        } else if (group.blockGroupType != 'Document' && group.blockGroupType != 'TableCell') {\n            newPath.shift();\n            block = group;\n        } else {\n            break;\n        }\n    }\n\n    return null;\n}\n","import { alignTable } from '../table/alignTable';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { getOperationalBlocks } from '../selection/collectSelections';\nimport { TableOperation } from 'roosterjs-editor-types';\n\nconst ResultMap: Record<\n    'left' | 'center' | 'right',\n    Record<'ltr' | 'rtl', 'start' | 'center' | 'end'>\n> = {\n    left: {\n        ltr: 'start',\n        rtl: 'end',\n    },\n    center: {\n        ltr: 'center',\n        rtl: 'center',\n    },\n    right: {\n        ltr: 'end',\n        rtl: 'start',\n    },\n};\n\nconst TableAlignMap: Record<\n    'left' | 'center' | 'right',\n    Record<\n        'ltr' | 'rtl',\n        TableOperation.AlignLeft | TableOperation.AlignCenter | TableOperation.AlignRight\n    >\n> = {\n    left: {\n        ltr: TableOperation.AlignLeft,\n        rtl: TableOperation.AlignRight,\n    },\n    center: {\n        ltr: TableOperation.AlignCenter,\n        rtl: TableOperation.AlignCenter,\n    },\n    right: {\n        ltr: TableOperation.AlignRight,\n        rtl: TableOperation.AlignLeft,\n    },\n};\n\n/**\n * @internal\n */\nexport function setModelAlignment(\n    model: ContentModelDocument,\n    alignment: 'left' | 'center' | 'right'\n) {\n    const paragraphOrListItemOrTable = getOperationalBlocks<ContentModelListItem>(\n        model,\n        ['ListItem'],\n        ['TableCell']\n    );\n\n    paragraphOrListItemOrTable.forEach(({ block }) => {\n        const newAligment = ResultMap[alignment][block.format.direction == 'rtl' ? 'rtl' : 'ltr'];\n        if (block.blockType === 'Table') {\n            alignTable(\n                block,\n                TableAlignMap[alignment][block.format.direction == 'rtl' ? 'rtl' : 'ltr']\n            );\n        } else if (block) {\n            const { format } = block;\n            format.textAlign = newAligment;\n        }\n    });\n\n    return paragraphOrListItemOrTable.length > 0;\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelListItemLevelFormat } from '../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { getOperationalBlocks } from '../selection/collectSelections';\nimport { isBlockGroupOfType } from '../common/isBlockGroupOfType';\nimport { parseValueWithUnit } from '../../formatHandlers/utils/parseValueWithUnit';\n\nconst IndentStepInPixel = 40;\n\n/**\n * @internal\n */\nexport function setModelIndentation(\n    model: ContentModelDocument,\n    indentation: 'indent' | 'outdent',\n    length: number = IndentStepInPixel\n) {\n    const paragraphOrListItem = getOperationalBlocks<ContentModelListItem>(\n        model,\n        ['ListItem'],\n        ['TableCell']\n    );\n    const isIndent = indentation == 'indent';\n\n    paragraphOrListItem.forEach(({ block }) => {\n        if (isBlockGroupOfType<ContentModelListItem>(block, 'ListItem')) {\n            if (isIndent) {\n                const newLevel: ContentModelListItemLevelFormat = {\n                    ...block.levels[block.levels.length - 1],\n                };\n\n                // New level is totally new, no need to have these attributes for now\n                delete newLevel.startNumberOverride;\n                delete newLevel.orderedStyleType;\n                delete newLevel.unorderedStyleType;\n\n                block.levels.push(newLevel);\n            } else {\n                block.levels.pop();\n            }\n        } else if (block) {\n            const { format } = block;\n            const { marginLeft, marginRight, direction } = format;\n            const isRtl = direction == 'rtl';\n            const originalValue = parseValueWithUnit(isRtl ? marginRight : marginLeft);\n            let newValue = (isIndent ? Math.ceil : Math.floor)(originalValue / length) * length;\n\n            if (newValue == originalValue) {\n                newValue = Math.max(newValue + length * (isIndent ? 1 : -1), 0);\n            }\n\n            if (isRtl) {\n                format.marginRight = newValue + 'px';\n            } else {\n                format.marginLeft = newValue + 'px';\n            }\n        }\n    });\n\n    return paragraphOrListItem.length > 0;\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\n\n/**\n * @internal\n */\nexport function setParagraphNotImplicit(block: ContentModelBlock) {\n    if (block.blockType == 'Paragraph' && block.isImplicit) {\n        block.isImplicit = false;\n    }\n}\n","import { areSameFormats } from '../../domToModel/utils/areSameFormats';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelFormatContainerFormat } from '../../publicTypes/format/ContentModelFormatContainerFormat';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { createQuote } from '../creators/createQuote';\nimport { getOperationalBlocks, OperationalBlocks } from '../selection/collectSelections';\nimport { isBlockGroupOfType } from '../common/isBlockGroupOfType';\nimport { unwrapBlock } from '../common/unwrapBlock';\nimport { wrapBlockStep1, WrapBlockStep1Result, wrapBlockStep2 } from '../common/wrapBlock';\n\n/**\n * @internal\n */\nexport function toggleModelBlockQuote(\n    model: ContentModelDocument,\n    format: ContentModelFormatContainerFormat\n): boolean {\n    const paragraphOfQuote = getOperationalBlocks<\n        ContentModelFormatContainer | ContentModelListItem\n    >(model, ['FormatContainer', 'ListItem'], ['TableCell'], true /*deepFirst*/);\n\n    if (areAllBlockQuotes(paragraphOfQuote)) {\n        // All selections are already in quote, we need to unquote them\n        paragraphOfQuote.forEach(({ block, parent }) => {\n            unwrapBlock(parent, block);\n        });\n    } else {\n        const step1Results: WrapBlockStep1Result<ContentModelFormatContainer>[] = [];\n        const creator = () => createQuote(format);\n        const canMerge = (\n            target: ContentModelBlock,\n            current?: ContentModelFormatContainer\n        ): target is ContentModelFormatContainer =>\n            canMergeQuote(target, current?.format || format);\n\n        paragraphOfQuote.forEach(({ block, parent }) => {\n            if (isQuote(block)) {\n                // Already in quote, no op\n            } else {\n                wrapBlockStep1(step1Results, parent, block, creator, canMerge);\n            }\n        });\n\n        wrapBlockStep2(step1Results, canMerge);\n    }\n\n    return paragraphOfQuote.length > 0;\n}\n\nfunction canMergeQuote(\n    target: ContentModelBlock,\n    format: ContentModelFormatContainerFormat\n): target is ContentModelFormatContainer {\n    return isQuote(target) && areSameFormats(format, target.format);\n}\n\nfunction isQuote(block: ContentModelBlock): block is ContentModelFormatContainer {\n    return (\n        isBlockGroupOfType<ContentModelFormatContainer>(block, 'FormatContainer') &&\n        block.tagName == 'blockquote'\n    );\n}\n\nfunction areAllBlockQuotes(\n    blockAndParents: OperationalBlocks<ContentModelFormatContainer | ContentModelListItem>[]\n): blockAndParents is { block: ContentModelFormatContainer; parent: ContentModelBlockGroup }[] {\n    return blockAndParents.every(blockAndParent => isQuote(blockAndParent.block));\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\n\n/**\n * @internal\n */\nexport function addBlock(group: ContentModelBlockGroup, block: ContentModelBlock) {\n    group.blocks.push(block);\n}\n","import { ContentModelCode } from '../../publicTypes/decorator/ContentModelCode';\nimport { ContentModelLink } from '../../publicTypes/decorator/ContentModelLink';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { DomToModelDecoratorContext } from '../../publicTypes/context/DomToModelFormatContext';\n\n/**\n * @internal\n */\nexport function addLink(segment: ContentModelSegment, link: ContentModelLink) {\n    if (link.format.href) {\n        segment.link = {\n            format: { ...link.format },\n            dataset: { ...link.dataset },\n        };\n    }\n}\n\n/**\n * @internal\n */\nexport function addCode(segment: ContentModelSegment, code: ContentModelCode) {\n    if (code.format.fontFamily) {\n        segment.code = {\n            format: { ...code.format },\n        };\n    }\n}\n\n/**\n * @internal\n */\nexport function addDecorators(segment: ContentModelSegment, context: DomToModelDecoratorContext) {\n    addLink(segment, context.link);\n    addCode(segment, context.code);\n}\n","import { addBlock } from './addBlock';\nimport { ContentModelBlockFormat } from '../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { createParagraph } from '../creators/createParagraph';\n\n/**\n * @internal\n */\nexport function addSegment(\n    group: ContentModelBlockGroup,\n    newSegment: ContentModelSegment,\n    blockFormat?: ContentModelBlockFormat\n) {\n    const lastBlock = group.blocks[group.blocks.length - 1];\n    let paragraph: ContentModelParagraph;\n\n    if (lastBlock?.blockType == 'Paragraph') {\n        paragraph = lastBlock;\n    } else {\n        paragraph = createParagraph(true, blockFormat);\n        addBlock(group, paragraph);\n    }\n\n    const lastSegment = paragraph.segments[paragraph.segments.length - 1];\n\n    if (newSegment.segmentType == 'SelectionMarker') {\n        if (!lastSegment || !lastSegment.isSelected) {\n            paragraph.segments.push(newSegment);\n        }\n    } else {\n        if (newSegment.isSelected && lastSegment?.segmentType == 'SelectionMarker') {\n            paragraph.segments.pop();\n        }\n\n        paragraph.segments.push(newSegment);\n    }\n}\n","import { adjustWordSelection } from '../selection/adjustWordSelection';\nimport { applyTableFormat } from '../table/applyTableFormat';\nimport { arrayPush } from 'roosterjs-editor-dom';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createFormatContainer } from '../creators/createFormatContainer';\nimport { getClosestAncestorBlockGroupIndex } from './getClosestAncestorBlockGroupIndex';\nimport { iterateSelections } from '../selection/iterateSelections';\nimport { Selectable } from '../../publicTypes/selection/Selectable';\nimport { TableSelectionContext } from '../../publicTypes/selection/TableSelectionContext';\nimport { updateTableCellMetadata } from '../../domUtils/metadata/updateTableCellMetadata';\nimport { updateTableMetadata } from '../../domUtils/metadata/updateTableMetadata';\n\n/**\n * @internal\n */\nexport function clearModelFormat(\n    model: ContentModelDocument,\n    blocksToClear: [ContentModelBlockGroup[], ContentModelBlock][],\n    segmentsToClear: ContentModelSegment[],\n    tablesToClear: [ContentModelTable, boolean][]\n) {\n    iterateSelections(\n        [model],\n        (path, tableContext, block, segments) => {\n            if (segments) {\n                arrayPush(segmentsToClear, segments);\n            }\n\n            if (block) {\n                blocksToClear.push([path, block]);\n            } else if (tableContext) {\n                clearTableCellFormat(tableContext, tablesToClear);\n            }\n        },\n        {\n            // When there is a default format to apply, we know how to handle segment format under list.\n            // So no need to clear format of list number.\n            // Otherwise, we will clear all format of selected text. And since they are under LI tag, we\n            // also need to clear the format of LI (format holder) so that the format is really cleared\n            includeListFormatHolder: model.format ? 'never' : 'anySegment',\n        }\n    );\n\n    const marker = segmentsToClear[0];\n\n    // 2. If selection is collapsed, add selection to whole word to clear if any\n    if (\n        blocksToClear.length == 1 &&\n        isOnlySelectionMarkerSelected(blocksToClear[0][1]) &&\n        blocksToClear.length == 1\n    ) {\n        segmentsToClear.splice(0, segmentsToClear.length, ...adjustWordSelection(model, marker));\n        clearListFormat(blocksToClear[0][0]);\n    } else if (blocksToClear.length > 1 || blocksToClear.some(x => isWholeBlockSelected(x[1]))) {\n        // 2. If a full block or multiple blocks are selected, clear block format\n        for (let i = blocksToClear.length - 1; i >= 0; i--) {\n            const [path, block] = blocksToClear[i];\n\n            clearBlockFormat(path, block);\n            clearListFormat(path);\n            clearContainerFormat(path, block);\n        }\n    }\n\n    // 3. Finally clear format for segments\n    clearSegmentsFormat(segmentsToClear, model.format);\n\n    // 4. Clear format for table if any\n    createTablesFormat(tablesToClear);\n}\n\nfunction createTablesFormat(tablesToClear: [ContentModelTable, boolean][]) {\n    tablesToClear.forEach(x => {\n        const [table, isWholeTableSelected] = x;\n        if (isWholeTableSelected) {\n            table.format = {\n                useBorderBox: table.format.useBorderBox,\n                borderCollapse: table.format.borderCollapse,\n            };\n            updateTableMetadata(table, () => null);\n        }\n\n        applyTableFormat(table, undefined /*newFormat*/, true);\n    });\n}\n\nfunction clearSegmentsFormat(\n    segmentsToClear: ContentModelSegment[],\n    defaultSegmentFormat: ContentModelSegmentFormat | undefined\n) {\n    segmentsToClear.forEach(x => {\n        x.format = { ...(defaultSegmentFormat || {}) };\n\n        if (x.link) {\n            delete x.link.format.textColor;\n        }\n\n        delete x.code;\n    });\n}\n\nfunction clearTableCellFormat(\n    tableContext: TableSelectionContext | undefined,\n    tablesToClear: [ContentModelTable, boolean][]\n) {\n    if (tableContext) {\n        const { table, colIndex, rowIndex, isWholeTableSelected } = tableContext;\n        const cell = table.rows[rowIndex].cells[colIndex];\n\n        if (cell.isSelected) {\n            updateTableCellMetadata(cell, () => null);\n            cell.isHeader = false;\n            cell.format = {\n                useBorderBox: cell.format.useBorderBox,\n            };\n        }\n\n        if (!tablesToClear.find(x => x[0] == table)) {\n            tablesToClear.push([table, isWholeTableSelected]);\n        }\n    }\n}\n\nfunction clearContainerFormat(path: ContentModelBlockGroup[], block: ContentModelBlock) {\n    const containerPathIndex = getClosestAncestorBlockGroupIndex(\n        path,\n        ['FormatContainer'],\n        ['TableCell']\n    );\n\n    if (containerPathIndex >= 0 && containerPathIndex < path.length - 1) {\n        const container = path[containerPathIndex] as ContentModelFormatContainer;\n        const containerIndex = path[containerPathIndex + 1].blocks.indexOf(container);\n        const blockIndex = container.blocks.indexOf(block);\n\n        if (blockIndex >= 0 && containerIndex >= 0) {\n            const newContainer = createFormatContainer(container.tagName, container.format);\n\n            container.blocks.splice(blockIndex, 1);\n            newContainer.blocks = container.blocks.splice(blockIndex);\n\n            path[containerPathIndex + 1].blocks.splice(containerIndex + 1, 0, block, newContainer);\n        }\n    }\n}\n\nfunction clearListFormat(path: ContentModelBlockGroup[]) {\n    const listItem = path[getClosestAncestorBlockGroupIndex(path, ['ListItem'], ['TableCell'])] as\n        | ContentModelListItem\n        | undefined;\n\n    if (listItem) {\n        listItem.levels = [];\n    }\n}\n\nfunction clearBlockFormat(path: ContentModelBlockGroup[], block: ContentModelBlock) {\n    if (block.blockType == 'Divider') {\n        const index = path[0].blocks.indexOf(block);\n\n        if (index >= 0) {\n            path[0].blocks.splice(index, 1);\n        }\n    } else if (block.blockType == 'Paragraph') {\n        block.format = {};\n        delete block.decorator;\n    }\n}\n\nfunction isOnlySelectionMarkerSelected(block: ContentModelBlock) {\n    const segments = block.blockType == 'Paragraph' ? block.segments.filter(x => x.isSelected) : [];\n\n    return segments.length == 1 && segments[0].segmentType == 'SelectionMarker';\n}\n\nfunction isWholeBlockSelected(block: ContentModelBlock) {\n    return (\n        (block as Selectable).isSelected ||\n        (block.blockType == 'Paragraph' && block.segments.every(x => x.isSelected))\n    );\n}\n","import type { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport type { ContentModelBlockBase } from '../../publicTypes/block/ContentModelBlockBase';\nimport type { ContentModelBlockGroupBase } from '../../publicTypes/group/ContentModelBlockGroupBase';\nimport type { ContentModelBlockGroupType } from '../../publicTypes/enum/BlockGroupType';\nimport type { ContentModelBlockType } from '../../publicTypes/enum/BlockType';\nimport type { ContentModelDivider } from '../../publicTypes/block/ContentModelDivider';\nimport type { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport type { ContentModelEntity } from '../../publicTypes/entity/ContentModelEntity';\nimport type { ContentModelFormatBase } from '../../publicTypes/format/ContentModelFormatBase';\nimport type { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport type { ContentModelGeneralBlock } from '../../publicTypes/group/ContentModelGeneralBlock';\nimport type { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport type { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport type { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport type { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport type { ContentModelSegmentBase } from '../../publicTypes/segment/ContentModelSegmentBase';\nimport type { ContentModelSegmentType } from '../../publicTypes/enum/SegmentType';\nimport type { ContentModelSelectionMarker } from '../../publicTypes/segment/ContentModelSelectionMarker';\nimport type { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport type { ContentModelTableCell } from '../../publicTypes/group/ContentModelTableCell';\nimport type { ContentModelWithDataset } from '../../publicTypes/format/ContentModelWithDataset';\nimport type { ContentModelWithFormat } from '../../publicTypes/format/ContentModelWithFormat';\nimport type { ContentModelGeneralSegment } from '../../publicTypes/segment/ContentModelGeneralSegment';\nimport type { ContentModelText } from '../../publicTypes/segment/ContentModelText';\nimport type { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\n\n/**\n * @internal\n */\nexport function cloneModel(model: ContentModelDocument): ContentModelDocument {\n    const newModel: ContentModelDocument = cloneBlockGroupBase(model);\n\n    if (model.format) {\n        newModel.format = Object.assign({}, model.format);\n    }\n\n    return newModel;\n}\n\nfunction cloneBlock(block: ContentModelBlock): ContentModelBlock {\n    switch (block.blockType) {\n        case 'BlockGroup':\n            switch (block.blockGroupType) {\n                case 'FormatContainer':\n                    return cloneFormatContainer(block);\n                case 'General':\n                    return cloneGeneralBlock(block);\n                case 'ListItem':\n                    return cloneListItem(block);\n            }\n            break;\n        case 'Divider':\n            return cloneDivider(block);\n        case 'Entity':\n            return cloneEntity(block);\n        case 'Paragraph':\n            return cloneParagraph(block);\n        case 'Table':\n            return cloneTable(block);\n    }\n}\n\nfunction cloneSegment(segment: ContentModelSegment): ContentModelSegment {\n    switch (segment.segmentType) {\n        case 'Br':\n            return cloneSegmentBase(segment);\n        case 'Entity':\n            return cloneEntity(segment);\n        case 'General':\n            return cloneGeneralSegment(segment);\n        case 'Image':\n            return cloneImage(segment);\n        case 'SelectionMarker':\n            return cloneSelectionMarker(segment);\n        case 'Text':\n            return cloneText(segment);\n    }\n}\n\nfunction cloneModelWithFormat<T extends ContentModelFormatBase>(\n    model: ContentModelWithFormat<T>\n): ContentModelWithFormat<T> {\n    return {\n        format: Object.assign({}, model.format),\n    };\n}\n\nfunction cloneModelWithDataset<T>(model: ContentModelWithDataset<T>): ContentModelWithDataset<T> {\n    return {\n        dataset: Object.assign({}, model.dataset),\n    };\n}\n\nfunction cloneBlockBase<T extends ContentModelBlockType>(\n    block: ContentModelBlockBase<T>\n): ContentModelBlockBase<T> {\n    const { blockType } = block;\n\n    return Object.assign(\n        {\n            blockType,\n        },\n        cloneModelWithFormat(block)\n    );\n}\n\nfunction cloneBlockGroupBase<T extends ContentModelBlockGroupType>(\n    group: ContentModelBlockGroupBase<T>\n): ContentModelBlockGroupBase<T> {\n    const { blockGroupType, blocks } = group;\n\n    return {\n        blockGroupType: blockGroupType,\n        blocks: blocks.map(cloneBlock),\n    };\n}\n\nfunction cloneSegmentBase<T extends ContentModelSegmentType>(\n    segment: ContentModelSegmentBase<T>\n): ContentModelSegmentBase<T> {\n    const { segmentType, isSelected, code, link } = segment;\n\n    const newSegment: ContentModelSegmentBase<T> = Object.assign(\n        {\n            segmentType,\n            isSelected,\n        },\n        cloneModelWithFormat(segment)\n    );\n\n    if (code) {\n        newSegment.code = cloneModelWithFormat(code);\n    }\n    if (link) {\n        newSegment.link = Object.assign(cloneModelWithFormat(link), cloneModelWithDataset(link));\n    }\n\n    return newSegment;\n}\n\nfunction cloneEntity(entity: ContentModelEntity): ContentModelEntity {\n    const { wrapper, isReadonly, type, id } = entity;\n\n    return Object.assign(\n        { wrapper, isReadonly, type, id },\n        cloneBlockBase(entity),\n        cloneSegmentBase(entity)\n    );\n}\n\nfunction cloneParagraph(paragraph: ContentModelParagraph): ContentModelParagraph {\n    const { cachedElement, segments, isImplicit, decorator } = paragraph;\n\n    const newParagraph: ContentModelParagraph = Object.assign(\n        {\n            cachedElement,\n            isImplicit,\n            segments: segments.map(cloneSegment),\n        },\n        cloneBlockBase(paragraph),\n        cloneModelWithFormat(paragraph)\n    );\n\n    if (paragraph.zeroFontSize) {\n        newParagraph.zeroFontSize = true;\n    }\n\n    if (decorator) {\n        newParagraph.decorator = Object.assign(\n            {\n                tagName: decorator.tagName,\n            },\n            cloneModelWithFormat(decorator)\n        );\n    }\n\n    return newParagraph;\n}\n\nfunction cloneTable(table: ContentModelTable): ContentModelTable {\n    const { cachedElement, widths, rows } = table;\n\n    return Object.assign(\n        {\n            cachedElement,\n            widths: Array.from(widths),\n            rows: rows.map(cloneTableRow),\n        },\n        cloneBlockBase(table),\n        cloneModelWithDataset(table)\n    );\n}\n\nfunction cloneTableRow(row: ContentModelTableRow): ContentModelTableRow {\n    const { height, cells, cachedElement } = row;\n\n    return Object.assign(\n        {\n            height,\n            cachedElement,\n            cells: cells.map(cloneTableCell),\n        },\n        cloneModelWithFormat(row)\n    );\n}\n\nfunction cloneTableCell(cell: ContentModelTableCell): ContentModelTableCell {\n    const { cachedElement, isSelected, spanAbove, spanLeft, isHeader } = cell;\n\n    return Object.assign(\n        { cachedElement, isSelected, spanAbove, spanLeft, isHeader },\n        cloneBlockGroupBase(cell),\n        cloneModelWithFormat(cell),\n        cloneModelWithDataset(cell)\n    );\n}\n\nfunction cloneFormatContainer(container: ContentModelFormatContainer): ContentModelFormatContainer {\n    const { tagName, cachedElement } = container;\n    const newContainer: ContentModelFormatContainer = Object.assign(\n        { tagName, cachedElement },\n        cloneBlockBase(container),\n        cloneBlockGroupBase(container)\n    );\n\n    if (container.zeroFontSize) {\n        newContainer.zeroFontSize = true;\n    }\n\n    return newContainer;\n}\n\nfunction cloneListItem(item: ContentModelListItem): ContentModelListItem {\n    const { formatHolder, levels } = item;\n\n    return Object.assign(\n        {\n            formatHolder: cloneSelectionMarker(formatHolder),\n            levels: levels.map(x => Object.assign({}, x)),\n        },\n        cloneBlockBase(item),\n        cloneBlockGroupBase(item)\n    );\n}\n\nfunction cloneDivider(divider: ContentModelDivider): ContentModelDivider {\n    const { tagName, isSelected, cachedElement } = divider;\n\n    return Object.assign({ isSelected, tagName, cachedElement }, cloneBlockBase(divider));\n}\n\nfunction cloneGeneralBlock(general: ContentModelGeneralBlock): ContentModelGeneralBlock {\n    const { element } = general;\n\n    return Object.assign({ element }, cloneBlockBase(general), cloneBlockGroupBase(general));\n}\n\nfunction cloneSelectionMarker(marker: ContentModelSelectionMarker): ContentModelSelectionMarker {\n    return Object.assign({ isSelected: marker.isSelected }, cloneSegmentBase(marker));\n}\n\nfunction cloneImage(image: ContentModelImage): ContentModelImage {\n    const { src, alt, title, isSelectedAsImageSelection } = image;\n\n    return Object.assign(\n        { src, alt, title, isSelectedAsImageSelection },\n        cloneSegmentBase(image),\n        cloneModelWithDataset(image)\n    );\n}\n\nfunction cloneGeneralSegment(general: ContentModelGeneralSegment): ContentModelGeneralSegment {\n    return Object.assign(cloneGeneralBlock(general), cloneSegmentBase(general));\n}\n\nfunction cloneText(textSegment: ContentModelText): ContentModelText {\n    const { text } = textSegment;\n    return Object.assign({ text }, cloneSegmentBase(textSegment));\n}\n","import { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelBlockGroupBase } from '../../publicTypes/group/ContentModelBlockGroupBase';\nimport { ContentModelBlockGroupType } from '../../publicTypes/enum/BlockGroupType';\n\n/**\n * @internal\n */\nexport type TypeOfBlockGroup<\n    T extends ContentModelBlockGroup\n> = T extends ContentModelBlockGroupBase<infer U> ? U : never;\n\n/**\n * @internal\n */\nexport function getClosestAncestorBlockGroupIndex<T extends ContentModelBlockGroup>(\n    path: ContentModelBlockGroup[],\n    blockGroupTypes: TypeOfBlockGroup<T>[],\n    stopTypes: ContentModelBlockGroupType[] = []\n): number {\n    for (let i = 0; i < path.length; i++) {\n        const group = path[i];\n\n        if ((blockGroupTypes as string[]).indexOf(group.blockGroupType) >= 0) {\n            return i;\n        } else if (stopTypes.indexOf(group.blockGroupType) >= 0) {\n            // Do not go across boundary specified by stopTypes.\n            // For example, in most case we will set table as the boundary,\n            // in order to allow modify list item under a table when the table itself is in another list item\n            // Although this is not very likely to happen in most case, but we still need to handle it\n            return -1;\n        }\n    }\n\n    return -1;\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { TypeOfBlockGroup } from './getClosestAncestorBlockGroupIndex';\n\n/**\n * @internal\n */\nexport function isBlockGroupOfType<T extends ContentModelBlockGroup>(\n    input: ContentModelBlock | ContentModelBlockGroup | null | undefined,\n    type: TypeOfBlockGroup<T>\n): input is T {\n    const item = <T | null | undefined>input;\n\n    return item?.blockGroupType == type;\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\n\n/**\n * @internal\n */\nexport function isBlockEmpty(block: ContentModelBlock): boolean {\n    switch (block.blockType) {\n        case 'Paragraph':\n            return block.segments.length == 0;\n\n        case 'Table':\n            return block.rows.every(row => row.cells.length == 0);\n\n        case 'BlockGroup':\n            return isBlockGroupEmpty(block);\n\n        case 'Entity':\n            return false;\n\n        default:\n            return false;\n    }\n}\n\n/**\n * @internal\n */\nexport function isBlockGroupEmpty(group: ContentModelBlockGroup): boolean {\n    switch (group.blockGroupType) {\n        case 'FormatContainer':\n            // Format Container of DIV is a container for style, so we always treat it as not empty\n            return group.tagName == 'div' ? false : group.blocks.every(isBlockEmpty);\n\n        case 'ListItem':\n            return group.blocks.every(isBlockEmpty);\n\n        case 'Document':\n        case 'General':\n        case 'TableCell':\n            return false;\n\n        default:\n            return true;\n    }\n}\n\n/**\n * @internal\n */\nexport function isSegmentEmpty(segment: ContentModelSegment): boolean {\n    switch (segment.segmentType) {\n        case 'Text':\n            return !segment.text;\n\n        case 'Image':\n            return !segment.src;\n\n        default:\n            return false;\n    }\n}\n\n/**\n * @internal\n */\nexport function isEmpty(\n    model: ContentModelBlock | ContentModelBlockGroup | ContentModelSegment\n): boolean {\n    if (isBlockGroup(model)) {\n        return isBlockGroupEmpty(model);\n    } else if (isBlock(model)) {\n        return isBlockEmpty(model);\n    } else if (isSegment(model)) {\n        return isSegmentEmpty(model);\n    }\n\n    return false;\n}\n\nfunction isSegment(\n    model: ContentModelBlock | ContentModelBlockGroup | ContentModelSegment\n): model is ContentModelSegment {\n    return typeof (<ContentModelSegment>model).segmentType === 'string';\n}\n\nfunction isBlock(\n    model: ContentModelBlock | ContentModelBlockGroup | ContentModelSegment\n): model is ContentModelBlock {\n    return typeof (<ContentModelBlock>model).blockType === 'string';\n}\n\nfunction isBlockGroup(\n    model: ContentModelBlock | ContentModelBlockGroup | ContentModelSegment\n): model is ContentModelBlockGroup {\n    return typeof (<ContentModelBlockGroup>model).blockGroupType === 'string';\n}\n","import { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelGeneralSegment } from '../../publicTypes/segment/ContentModelGeneralSegment';\n\n/**\n * @internal\n */\nexport function isGeneralSegment(\n    group: ContentModelBlockGroup | ContentModelGeneralSegment\n): group is ContentModelGeneralSegment {\n    return (\n        group.blockGroupType == 'General' &&\n        (<ContentModelGeneralSegment>group).segmentType == 'General'\n    );\n}\n","import { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\n\n// According to https://developer.mozilla.org/en-US/docs/Web/CSS/white-space, these style values will need to preserve white spaces\nconst WHITESPACE_PRE_VALUES = ['pre', 'pre-wrap', 'break-spaces'];\n\n/**\n * @internal\n */\nexport function isWhiteSpacePreserved(paragraph: ContentModelParagraph): boolean {\n    return (\n        (paragraph.format.whiteSpace &&\n            WHITESPACE_PRE_VALUES.indexOf(paragraph.format.whiteSpace) >= 0) ||\n        false\n    );\n}\n","import { addSegment } from './addSegment';\nimport { applyTableFormat } from '../table/applyTableFormat';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createListItem } from '../creators/createListItem';\nimport { createParagraph } from '../creators/createParagraph';\nimport { createSelectionMarker } from '../creators/createSelectionMarker';\nimport { createTableCell } from '../creators/createTableCell';\nimport { deleteSelection } from '../edit/deleteSelection';\nimport { getClosestAncestorBlockGroupIndex } from './getClosestAncestorBlockGroupIndex';\nimport { InsertPoint } from '../../publicTypes/selection/InsertPoint';\nimport { normalizeContentModel } from './normalizeContentModel';\nimport { normalizeTable } from '../table/normalizeTable';\nimport { OnDeleteEntity } from '../edit/utils/DeleteSelectionStep';\n\n/**\n * @internal\n * Options to specify how to merge models\n */\nexport interface MergeModelOption {\n    /**\n     * When there is only a table to merge, whether merge this table into current table (if any), or just directly insert (nested table).\n     * This is usually used when paste table inside a table\n     * @default false\n     */\n    mergeTable?: boolean;\n\n    /**\n     * Use this insert position to merge instead of querying selection from target model\n     * @default undefined\n     */\n    insertPosition?: InsertPoint;\n\n    /**\n     * When set to true, segment format of the insert position will be merged into the content that is merged into current model.\n     * If the source model already has some format, it will not be overwritten.\n     * @default false\n     */\n    mergeCurrentFormat?: boolean;\n}\n\n/**\n * @internal\n */\nexport function mergeModel(\n    target: ContentModelDocument,\n    source: ContentModelDocument,\n    onDeleteEntity: OnDeleteEntity,\n    options?: MergeModelOption\n) {\n    const insertPosition =\n        options?.insertPosition ?? deleteSelection(target, onDeleteEntity).insertPoint;\n\n    if (insertPosition) {\n        if (options?.mergeCurrentFormat) {\n            const newFormat: ContentModelSegmentFormat = {\n                ...(target.format || {}),\n                ...insertPosition.marker.format,\n            };\n\n            applyDefaultFormat(source, newFormat);\n        }\n\n        for (let i = 0; i < source.blocks.length; i++) {\n            const block = source.blocks[i];\n\n            switch (block.blockType) {\n                case 'Paragraph':\n                    mergeParagraph(insertPosition, block, i == 0);\n                    break;\n\n                case 'Divider':\n                case 'Entity':\n                    insertBlock(insertPosition, block);\n                    break;\n\n                case 'Table':\n                    if (source.blocks.length == 1 && options?.mergeTable) {\n                        mergeTable(insertPosition, block, source);\n                    } else {\n                        insertBlock(insertPosition, block);\n                    }\n                    break;\n\n                case 'BlockGroup':\n                    switch (block.blockGroupType) {\n                        case 'General':\n                        case 'FormatContainer':\n                            insertBlock(insertPosition, block);\n                            break;\n                        case 'ListItem':\n                            mergeList(insertPosition, block);\n                            break;\n                    }\n                    break;\n            }\n        }\n    }\n\n    normalizeContentModel(target);\n}\n\nfunction mergeParagraph(\n    markerPosition: InsertPoint,\n    newPara: ContentModelParagraph,\n    mergeToCurrentParagraph: boolean\n) {\n    const { paragraph, marker } = markerPosition;\n    const newParagraph = mergeToCurrentParagraph ? paragraph : splitParagraph(markerPosition);\n    const segmentIndex = newParagraph.segments.indexOf(marker);\n\n    if (segmentIndex >= 0) {\n        newParagraph.segments.splice(segmentIndex, 0, ...newPara.segments);\n    }\n}\n\nfunction mergeTable(\n    markerPosition: InsertPoint,\n    newTable: ContentModelTable,\n    source: ContentModelDocument\n) {\n    const { tableContext } = markerPosition;\n\n    if (tableContext && source.blocks.length == 1 && source.blocks[0] == newTable) {\n        const { table, colIndex, rowIndex } = tableContext;\n        for (let i = 0; i < newTable.rows.length; i++) {\n            for (let j = 0; j < newTable.rows[i].cells.length; j++) {\n                const newCell = newTable.rows[i].cells[j];\n\n                if (i == 0 && colIndex + j >= table.rows[0].cells.length) {\n                    for (let k = 0; k < table.rows.length; k++) {\n                        const leftCell = table.rows[k]?.cells[colIndex + j - 1];\n                        table.rows[k].cells[colIndex + j] = createTableCell(\n                            false /*spanLeft*/,\n                            false /*spanAbove*/,\n                            leftCell?.isHeader,\n                            leftCell?.format\n                        );\n                    }\n                }\n\n                if (j == 0 && rowIndex + i >= table.rows.length) {\n                    if (!table.rows[rowIndex + i]) {\n                        table.rows[rowIndex + i] = {\n                            cells: [],\n                            format: {},\n                            height: 0,\n                        };\n                    }\n\n                    for (let k = 0; k < table.rows[rowIndex].cells.length; k++) {\n                        const aboveCell = table.rows[rowIndex + i - 1]?.cells[k];\n                        table.rows[rowIndex + i].cells[k] = createTableCell(\n                            false /*spanLeft*/,\n                            false /*spanAbove*/,\n                            false /*isHeader*/,\n                            aboveCell?.format\n                        );\n                    }\n                }\n\n                table.rows[rowIndex + i].cells[colIndex + j] = newCell;\n\n                if (i == 0 && j == 0) {\n                    addSegment(newCell, createSelectionMarker());\n                }\n            }\n        }\n\n        normalizeTable(table, markerPosition.marker.format);\n        applyTableFormat(table, undefined /*newFormat*/, true /*keepCellShade*/);\n    } else {\n        insertBlock(markerPosition, newTable);\n    }\n}\n\nfunction mergeList(markerPosition: InsertPoint, newList: ContentModelListItem) {\n    splitParagraph(markerPosition);\n\n    const { path, paragraph } = markerPosition;\n\n    const listItemIndex = getClosestAncestorBlockGroupIndex(path, ['ListItem']);\n    const listItem = path[listItemIndex] as ContentModelListItem;\n    const listParent = path[listItemIndex + 1]; // It is ok here when index is -1, that means there is no list and we just insert a new paragraph and use path[0] as its parent\n    const blockIndex = listParent.blocks.indexOf(listItem || paragraph);\n\n    if (blockIndex >= 0) {\n        listParent.blocks.splice(blockIndex, 0, newList);\n    }\n\n    if (listItem) {\n        listItem?.levels.forEach((level, i) => {\n            newList.levels[i] = { ...level };\n        });\n    }\n}\n\nfunction splitParagraph(markerPosition: InsertPoint) {\n    const { paragraph, marker, path } = markerPosition;\n    const segmentIndex = paragraph.segments.indexOf(marker);\n    const paraIndex = path[0].blocks.indexOf(paragraph);\n    const newParagraph = createParagraph(false /*isImplicit*/, paragraph.format);\n\n    if (segmentIndex >= 0) {\n        newParagraph.segments = paragraph.segments.splice(segmentIndex);\n    }\n\n    if (paraIndex >= 0) {\n        path[0].blocks.splice(paraIndex + 1, 0, newParagraph);\n    }\n\n    const listItemIndex = getClosestAncestorBlockGroupIndex(\n        path,\n        ['ListItem'],\n        ['FormatContainer', 'TableCell']\n    );\n    const listItem = path[listItemIndex] as ContentModelListItem;\n\n    if (listItem) {\n        const listParent = listItemIndex >= 0 ? path[listItemIndex + 1] : null;\n        const blockIndex = listParent ? listParent.blocks.indexOf(listItem) : -1;\n\n        if (blockIndex >= 0 && listParent) {\n            const newListItem = createListItem(listItem.levels, listItem.formatHolder.format);\n\n            if (paraIndex >= 0) {\n                newListItem.blocks = listItem.blocks.splice(paraIndex + 1);\n            }\n\n            if (blockIndex >= 0) {\n                listParent.blocks.splice(blockIndex + 1, 0, newListItem);\n            }\n\n            path[listItemIndex] = newListItem;\n        }\n    }\n\n    markerPosition.paragraph = newParagraph;\n\n    return newParagraph;\n}\n\nfunction insertBlock(markerPosition: InsertPoint, block: ContentModelBlock) {\n    const { path } = markerPosition;\n    const newPara = splitParagraph(markerPosition);\n    const blockIndex = path[0].blocks.indexOf(newPara);\n\n    if (blockIndex >= 0) {\n        path[0].blocks.splice(blockIndex, 0, block);\n    }\n}\n\nfunction applyDefaultFormat(group: ContentModelBlockGroup, format: ContentModelSegmentFormat) {\n    group.blocks.forEach(block => {\n        switch (block.blockType) {\n            case 'BlockGroup':\n                applyDefaultFormat(block, format);\n                break;\n\n            case 'Table':\n                block.rows.forEach(row =>\n                    row.cells.forEach(cell => {\n                        applyDefaultFormat(cell, format);\n                    })\n                );\n                break;\n\n            case 'Paragraph':\n                block.segments.forEach(segment => {\n                    if (segment.segmentType == 'General') {\n                        applyDefaultFormat(segment, format);\n                    }\n\n                    segment.format = { ...format, ...segment.format };\n                });\n                break;\n        }\n    });\n}\n","import { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { isBlockEmpty } from './isEmpty';\nimport { normalizeParagraph } from './normalizeParagraph';\nimport { unwrapBlock } from './unwrapBlock';\n\n/**\n * @internal\n */ export function normalizeContentModel(group: ContentModelBlockGroup) {\n    for (let i = group.blocks.length - 1; i >= 0; i--) {\n        const block = group.blocks[i];\n\n        switch (block.blockType) {\n            case 'BlockGroup':\n                if (block.blockGroupType == 'ListItem' && block.levels.length == 0) {\n                    i += block.blocks.length;\n                    unwrapBlock(group, block);\n                } else {\n                    normalizeContentModel(block);\n                }\n                break;\n            case 'Paragraph':\n                normalizeParagraph(block);\n                break;\n            case 'Table':\n                for (let r = 0; r < block.rows.length; r++) {\n                    for (let c = 0; c < block.rows[r].cells.length; c++) {\n                        if (block.rows[r].cells[c]) {\n                            normalizeContentModel(block.rows[r].cells[c]);\n                        }\n                    }\n                }\n                break;\n        }\n\n        if (isBlockEmpty(block)) {\n            group.blocks.splice(i, 1);\n        }\n    }\n}\n","import { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { createBr } from '../creators/createBr';\nimport { isSegmentEmpty } from './isEmpty';\nimport { isWhiteSpacePreserved } from './isWhiteSpacePreserved';\nimport {\n    createNormalizeSegmentContext,\n    normalizeLastTextSegment,\n    normalizeSegment,\n    normalizeTextSegments,\n} from './normalizeSegment';\n\n/**\n * @internal\n */\nexport function normalizeParagraph(paragraph: ContentModelParagraph) {\n    const segments = paragraph.segments;\n\n    if (!paragraph.isImplicit && segments.length > 0) {\n        const last = segments[segments.length - 1];\n        const secondLast = segments[segments.length - 2];\n\n        if (\n            last.segmentType == 'SelectionMarker' &&\n            (!secondLast || secondLast.segmentType == 'Br')\n        ) {\n            segments.push(createBr(last.format));\n        } else if (segments.length > 1 && segments[segments.length - 1].segmentType == 'Br') {\n            const noMarkerSegments = segments.filter(x => x.segmentType != 'SelectionMarker');\n\n            // When there is content with a <BR> tag at the end, we can remove the BR.\n            // But if there are more than one <BR> at the end, do not remove them.\n            if (\n                noMarkerSegments.length > 1 &&\n                noMarkerSegments[noMarkerSegments.length - 2].segmentType != 'Br'\n            ) {\n                segments.pop();\n            }\n        }\n    }\n\n    if (!isWhiteSpacePreserved(paragraph)) {\n        const context = createNormalizeSegmentContext();\n\n        segments.forEach(segment => {\n            normalizeSegment(segment, context);\n        });\n\n        normalizeTextSegments(context.textSegments, context.lastInlineSegment);\n        normalizeLastTextSegment(context.lastTextSegment, context.lastInlineSegment);\n    }\n\n    removeEmptySegments(paragraph);\n}\n\nfunction removeEmptySegments(block: ContentModelParagraph) {\n    for (let j = block.segments.length - 1; j >= 0; j--) {\n        if (isSegmentEmpty(block.segments[j])) {\n            block.segments.splice(j, 1);\n        }\n    }\n}\n","import { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelText } from '../../publicTypes/segment/ContentModelText';\nimport { hasSpacesOnly } from '../../domUtils/stringUtil';\n\nconst SPACE = '\\u0020';\nconst NONE_BREAK_SPACE = '\\u00A0';\nconst LEADING_SPACE_REGEX = /^\\u0020+/;\nconst TRAILING_SPACE_REGEX = /\\u0020+$/;\n\n/**\n * @internal\n */\nexport interface NormalizeSegmentContext {\n    textSegments: ContentModelText[];\n    ignoreLeadingSpaces: boolean;\n    ignoreTrailingSpaces: boolean;\n    lastTextSegment: ContentModelText | undefined;\n    lastInlineSegment: ContentModelSegment | undefined;\n}\n\nexport function createNormalizeSegmentContext(): NormalizeSegmentContext {\n    return resetNormalizeSegmentContext();\n}\n\nfunction resetNormalizeSegmentContext(\n    context?: Partial<NormalizeSegmentContext>\n): NormalizeSegmentContext {\n    return Object.assign(context ?? {}, {\n        textSegments: [],\n        ignoreLeadingSpaces: true,\n        ignoreTrailingSpaces: true,\n        lastInlineSegment: undefined,\n        lastTextSegment: undefined,\n    });\n}\n\n/**\n * @internal\n */\nexport function normalizeSegment(segment: ContentModelSegment, context: NormalizeSegmentContext) {\n    switch (segment.segmentType) {\n        case 'Br':\n            normalizeTextSegments(context.textSegments, context.lastInlineSegment);\n            normalizeLastTextSegment(context.lastTextSegment, context.lastInlineSegment);\n\n            // Line ends, reset all states\n            resetNormalizeSegmentContext(context);\n            break;\n\n        case 'Entity':\n        case 'General':\n        case 'Image':\n            // Here \"inline segment\" means a segment showing some content inline such as text, image, or other inline HTML elements\n            // BR will end current line, so it is not treated as \"inline\" here.\n            // We will do some normalization to the trailing spaces for non-inline-segments\n            context.lastInlineSegment = segment;\n            context.ignoreLeadingSpaces = false;\n            break;\n\n        case 'Text':\n            context.textSegments.push(segment);\n            context.lastInlineSegment = segment;\n            context.lastTextSegment = segment;\n\n            const first = segment.text.substring(0, 1);\n            const last = segment.text.substr(-1);\n\n            if (!hasSpacesOnly(segment.text)) {\n                if (first == SPACE) {\n                    // 1. Multiple leading space => single &nbsp; or empty (depends on if previous segment ends with space)\n                    segment.text = segment.text.replace(\n                        LEADING_SPACE_REGEX,\n                        context.ignoreLeadingSpaces ? '' : NONE_BREAK_SPACE\n                    );\n                }\n\n                if (last == SPACE) {\n                    // 2. Multiple trailing space => single space\n                    segment.text = segment.text.replace(\n                        TRAILING_SPACE_REGEX,\n                        context.ignoreTrailingSpaces ? SPACE : NONE_BREAK_SPACE\n                    );\n                }\n            }\n\n            context.ignoreLeadingSpaces = last == SPACE;\n\n            break;\n    }\n}\n\nexport function normalizeTextSegments(\n    segments: ContentModelText[],\n    lastInlineSegment: ContentModelSegment | undefined\n) {\n    segments.forEach(segment => {\n        // 3. Segment ends with &nbsp; replace it with space if the previous char is not space so that next segment can wrap\n        // Only do this for segments that is not the last one since the last space will be removed in step 4\n        if (segment != lastInlineSegment) {\n            const text = segment.text;\n\n            if (\n                text.substr(-1) == NONE_BREAK_SPACE &&\n                text.length > 1 &&\n                text.substr(-2, 1) != SPACE\n            ) {\n                segment.text = text.substring(0, text.length - 1) + SPACE;\n            }\n        }\n    });\n}\n\nexport function normalizeLastTextSegment(\n    segment: ContentModelText | undefined,\n    lastInlineSegment: ContentModelSegment | undefined\n) {\n    if (segment && segment == lastInlineSegment && segment?.text.substr(-1) == SPACE) {\n        // 4. last text segment of the paragraph, remove trailing space\n        segment.text = segment.text.replace(TRAILING_SPACE_REGEX, '');\n    }\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelFormatState } from '../../publicTypes/format/formatState/ContentModelFormatState';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { extractBorderValues } from '../../domUtils/borderValues';\nimport { getClosestAncestorBlockGroupIndex } from './getClosestAncestorBlockGroupIndex';\nimport { isBold } from '../../publicApi/segment/toggleBold';\nimport { iterateSelections } from '../selection/iterateSelections';\nimport { TableSelectionContext } from '../../publicTypes/selection/TableSelectionContext';\nimport { updateTableMetadata } from '../../domUtils/metadata/updateTableMetadata';\n\n/**\n * @internal\n */\nexport function retrieveModelFormatState(\n    model: ContentModelDocument,\n    pendingFormat: ContentModelSegmentFormat | null,\n    formatState: ContentModelFormatState\n) {\n    let firstTableContext: TableSelectionContext | undefined;\n    let firstBlock: ContentModelBlock | undefined;\n    let isFirst = true;\n    let isFirstImage = true;\n    let isFirstSegment = true;\n\n    iterateSelections(\n        [model],\n        (path, tableContext, block, segments) => {\n            // Structure formats\n            retrieveStructureFormat(formatState, path, isFirst);\n\n            // Multiple line format\n            if (block) {\n                if (firstBlock) {\n                    formatState.isMultilineSelection = true;\n                } else {\n                    firstBlock = block;\n                }\n            }\n\n            if (block?.blockType == 'Paragraph') {\n                // Paragraph formats\n                retrieveParagraphFormat(formatState, block, isFirst);\n\n                // Segment formats\n                segments?.forEach(segment => {\n                    if (isFirstSegment || segment.segmentType != 'SelectionMarker') {\n                        retrieveSegmentFormat(\n                            formatState,\n                            isFirst,\n                            Object.assign(\n                                {},\n                                model.format,\n                                block.format,\n                                block.decorator?.format,\n                                segment.format,\n                                segment.code?.format,\n                                segment.link?.format,\n                                pendingFormat\n                            )\n                        );\n\n                        mergeValue(formatState, 'isCodeInline', !!segment?.code, isFirst);\n                    }\n\n                    // We only care the format of selection marker when it is the first selected segment. This is because when selection marker\n                    // is after some other selected segments, it mostly like appears at the beginning of a seconde line when the whole first line\n                    // is selected (e.g. triple-click on a line) then the second selection marker doesn't contain a correct format, so we need to\n                    // ignore it\n                    isFirstSegment = false;\n\n                    formatState.canUnlink = formatState.canUnlink || !!segment.link;\n                    formatState.canAddImageAltText =\n                        formatState.canAddImageAltText ||\n                        segments.some(segment => segment.segmentType == 'Image');\n\n                    isFirst = false;\n\n                    if (segment.segmentType === 'Image') {\n                        if (isFirstImage) {\n                            retrieveImageFormat(segment, formatState);\n                            isFirstImage = false;\n                        } else {\n                            formatState.imageFormat = undefined;\n                        }\n                    }\n                });\n\n                isFirst = false;\n            }\n\n            if (tableContext) {\n                if (firstTableContext) {\n                    const { table, colIndex, rowIndex } = firstTableContext;\n\n                    // Merge table format\n                    if (\n                        tableContext.table == table &&\n                        (tableContext.colIndex != colIndex || tableContext.rowIndex != rowIndex)\n                    ) {\n                        formatState.canMergeTableCell = true;\n                        formatState.isMultilineSelection = true;\n                    }\n                } else {\n                    // Table formats\n                    retrieveTableFormat(tableContext, formatState);\n                    firstTableContext = tableContext;\n                }\n            }\n\n            // TODO: Support Code block in format state for Content Model\n        },\n        {\n            includeListFormatHolder: 'never',\n        }\n    );\n}\n\nfunction retrieveSegmentFormat(\n    result: ContentModelFormatState,\n    isFirst: boolean,\n    mergedFormat: ContentModelSegmentFormat\n) {\n    const superOrSubscript = mergedFormat.superOrSubScriptSequence?.split(' ')?.pop();\n\n    mergeValue(result, 'isBold', isBold(mergedFormat.fontWeight), isFirst);\n    mergeValue(result, 'isItalic', mergedFormat.italic, isFirst);\n    mergeValue(result, 'isUnderline', mergedFormat.underline, isFirst);\n    mergeValue(result, 'isStrikeThrough', mergedFormat.strikethrough, isFirst);\n    mergeValue(result, 'isSuperscript', superOrSubscript == 'super', isFirst);\n    mergeValue(result, 'isSubscript', superOrSubscript == 'sub', isFirst);\n\n    mergeValue(result, 'fontName', mergedFormat.fontFamily, isFirst);\n    mergeValue(result, 'fontSize', mergedFormat.fontSize, isFirst);\n    mergeValue(result, 'backgroundColor', mergedFormat.backgroundColor, isFirst);\n    mergeValue(result, 'textColor', mergedFormat.textColor, isFirst);\n\n    //TODO: handle block owning segments with different line-heights\n    mergeValue(result, 'lineHeight', mergedFormat.lineHeight, isFirst);\n}\n\nfunction retrieveParagraphFormat(\n    result: ContentModelFormatState,\n    paragraph: ContentModelParagraph,\n    isFirst: boolean\n) {\n    const headerLevel = parseInt((paragraph.decorator?.tagName || '').substring(1));\n    const validHeaderLevel = headerLevel >= 1 && headerLevel <= 6 ? headerLevel : undefined;\n\n    mergeValue(result, 'marginBottom', paragraph.format.marginBottom, isFirst);\n    mergeValue(result, 'marginTop', paragraph.format.marginTop, isFirst);\n    mergeValue(result, 'headerLevel', validHeaderLevel, isFirst);\n    mergeValue(result, 'textAlign', paragraph.format.textAlign, isFirst);\n    mergeValue(result, 'direction', paragraph.format.direction, isFirst);\n}\n\nfunction retrieveStructureFormat(\n    result: ContentModelFormatState,\n    path: ContentModelBlockGroup[],\n    isFirst: boolean\n) {\n    const listItemIndex = getClosestAncestorBlockGroupIndex(path, ['ListItem'], []);\n    const containerIndex = getClosestAncestorBlockGroupIndex(path, ['FormatContainer'], []);\n\n    if (listItemIndex >= 0) {\n        const listItem = path[listItemIndex] as ContentModelListItem;\n        const listType = listItem?.levels[listItem.levels.length - 1]?.listType;\n\n        mergeValue(result, 'isBullet', listType == 'UL', isFirst);\n        mergeValue(result, 'isNumbering', listType == 'OL', isFirst);\n    }\n\n    mergeValue(\n        result,\n        'isBlockQuote',\n        containerIndex >= 0 &&\n            (path[containerIndex] as ContentModelFormatContainer)?.tagName == 'blockquote',\n        isFirst\n    );\n}\n\nfunction retrieveTableFormat(tableContext: TableSelectionContext, result: ContentModelFormatState) {\n    const tableFormat = updateTableMetadata(tableContext.table);\n\n    result.isInTable = true;\n    result.tableHasHeader = tableContext.table.rows.some(row =>\n        row.cells.some(cell => cell.isHeader)\n    );\n\n    if (tableFormat) {\n        result.tableFormat = tableFormat;\n    }\n}\n\nfunction retrieveImageFormat(image: ContentModelImage, result: ContentModelFormatState) {\n    const { format } = image;\n    const borderKey = 'borderTop';\n    const extractedBorder = extractBorderValues(format[borderKey]);\n    const borderColor = extractedBorder.color;\n    const borderWidth = extractedBorder.width;\n    const borderStyle = extractedBorder.style;\n    result.imageFormat = {\n        borderColor,\n        borderWidth,\n        borderStyle,\n        boxShadow: format.boxShadow,\n        borderRadius: format.borderRadius,\n    };\n}\n\nfunction mergeValue<K extends keyof ContentModelFormatState>(\n    format: ContentModelFormatState,\n    key: K,\n    newValue: ContentModelFormatState[K] | undefined,\n    isFirst: boolean\n) {\n    if (isFirst) {\n        if (newValue !== undefined) {\n            format[key] = newValue;\n        }\n    } else if (newValue !== format[key]) {\n        delete format[key];\n    }\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { setParagraphNotImplicit } from '../block/setParagraphNotImplicit';\n\n/**\n * @internal\n */\nexport function unwrapBlock(\n    parent: ContentModelBlockGroup | null,\n    groupToUnwrap: ContentModelBlockGroup & ContentModelBlock\n) {\n    const index = parent?.blocks.indexOf(groupToUnwrap) ?? -1;\n\n    if (index >= 0) {\n        groupToUnwrap.blocks.forEach(setParagraphNotImplicit);\n\n        parent?.blocks.splice(index, 1, ...groupToUnwrap.blocks);\n    }\n}\n","import { addBlock } from './addBlock';\nimport { arrayPush } from 'roosterjs-editor-dom';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { setParagraphNotImplicit } from '../block/setParagraphNotImplicit';\n\n/**\n * @internal\n */\nexport interface WrapBlockStep1Result<T extends ContentModelBlockGroup & ContentModelBlock> {\n    parent: ContentModelBlockGroup;\n    wrapper: T;\n}\n\n/**\n * @internal\n */\nexport function wrapBlockStep1<T extends ContentModelBlockGroup & ContentModelBlock>(\n    step1Result: WrapBlockStep1Result<T>[],\n    parent: ContentModelBlockGroup | null,\n    blockToWrap: ContentModelBlock,\n    creator: () => T,\n    canMerge: (target: ContentModelBlock) => target is T\n) {\n    const index = parent?.blocks.indexOf(blockToWrap) ?? -1;\n\n    if (parent && index >= 0) {\n        parent.blocks.splice(index, 1);\n\n        const prevBlock = parent.blocks[index - 1];\n        const wrapper = canMerge(prevBlock) ? prevBlock : createAndAdd(parent, index, creator);\n\n        setParagraphNotImplicit(blockToWrap);\n        addBlock(wrapper, blockToWrap);\n\n        // Use reverse order, so that we can merge from last to first to avoid modifying unmerged quotes\n        step1Result.unshift({ parent, wrapper });\n    }\n}\n\n/**\n * @internal\n */\nexport function wrapBlockStep2<T extends ContentModelBlockGroup & ContentModelBlock>(\n    step1Result: WrapBlockStep1Result<T>[],\n    canMerge: (target: ContentModelBlock, current: T) => target is T\n) {\n    step1Result.forEach(({ parent, wrapper }) => {\n        const index = parent.blocks.indexOf(wrapper);\n        const nextBlock = parent.blocks[index + 1];\n\n        if (index >= 0 && canMerge(nextBlock, wrapper)) {\n            wrapper.blocks.forEach(setParagraphNotImplicit);\n            arrayPush(wrapper.blocks, nextBlock.blocks);\n            parent.blocks.splice(index + 1, 1);\n        }\n    });\n}\n\nfunction createAndAdd<T extends ContentModelBlockGroup & ContentModelBlock>(\n    parent: ContentModelBlockGroup,\n    index: number,\n    creator: () => T\n): T {\n    const block = creator();\n\n    parent.blocks.splice(index, 0, block);\n    return block;\n}\n","import { ContentModelBr } from '../../publicTypes/segment/ContentModelBr';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\n\n/**\n * @internal\n */\nexport function createBr(format?: ContentModelSegmentFormat): ContentModelBr {\n    return {\n        segmentType: 'Br',\n        format: format ? { ...format } : {},\n    };\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\n\n/**\n * @internal\n */\nexport function createContentModelDocument(\n    defaultFormat?: ContentModelSegmentFormat\n): ContentModelDocument {\n    const result: ContentModelDocument = {\n        blockGroupType: 'Document',\n        blocks: [],\n    };\n\n    if (defaultFormat) {\n        result.format = defaultFormat;\n    }\n\n    return result;\n}\n","import { ContentModelBlockFormat } from '../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelDivider } from '../../publicTypes/block/ContentModelDivider';\n\n/**\n * @internal\n */\nexport function createDivider(\n    tagName: 'hr' | 'div',\n    format?: ContentModelBlockFormat\n): ContentModelDivider {\n    return {\n        blockType: 'Divider',\n        tagName,\n        format: format ? { ...format } : {},\n    };\n}\n","import { ContentModelEntity } from '../../publicTypes/entity/ContentModelEntity';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\n\n/**\n * @internal\n */\nexport function createEntity(\n    wrapper: HTMLElement,\n    isReadonly: boolean,\n    segmentFormat?: ContentModelSegmentFormat,\n    id?: string,\n    type?: string\n): ContentModelEntity {\n    return {\n        segmentType: 'Entity',\n        blockType: 'Entity',\n        format: {\n            ...(segmentFormat || {}),\n        },\n        id,\n        type,\n        isReadonly,\n        wrapper,\n    };\n}\n","import { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelFormatContainerFormat } from '../../publicTypes/format/ContentModelFormatContainerFormat';\n\n/**\n * @internal\n */\nexport function createFormatContainer(\n    tag: string,\n    format?: ContentModelFormatContainerFormat\n): ContentModelFormatContainer {\n    return {\n        blockType: 'BlockGroup',\n        blockGroupType: 'FormatContainer',\n        tagName: tag,\n        blocks: [],\n        format: { ...(format || {}) },\n    };\n}\n","import { ContentModelGeneralBlock } from '../../publicTypes/group/ContentModelGeneralBlock';\n\n/**\n * @internal\n */\nexport function createGeneralBlock(element: HTMLElement): ContentModelGeneralBlock {\n    return {\n        blockType: 'BlockGroup',\n        blockGroupType: 'General',\n        element: element,\n        blocks: [],\n        format: {},\n    };\n}\n","import { ContentModelGeneralSegment } from '../../publicTypes/segment/ContentModelGeneralSegment';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\n\n/**\n * @internal\n */\nexport function createGeneralSegment(\n    element: HTMLElement,\n    format?: ContentModelSegmentFormat\n): ContentModelGeneralSegment {\n    return {\n        blockType: 'BlockGroup',\n        blockGroupType: 'General',\n        segmentType: 'General',\n        format: format ? { ...format } : {},\n        blocks: [],\n        element: element,\n    };\n}\n","import { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { ContentModelImageFormat } from '../../publicTypes/format/ContentModelImageFormat';\n\n/**\n * @internal\n */\nexport function createImage(src: string, format?: ContentModelImageFormat): ContentModelImage {\n    return {\n        segmentType: 'Image',\n        src: src,\n        format: format ? { ...format } : {},\n        dataset: {},\n    };\n}\n","import { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelListItemLevelFormat } from '../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { createSelectionMarker } from './createSelectionMarker';\n\n/**\n * @internal\n */\nexport function createListItem(\n    levels: ContentModelListItemLevelFormat[],\n    format?: ContentModelSegmentFormat\n): ContentModelListItem {\n    return {\n        blockType: 'BlockGroup',\n        blockGroupType: 'ListItem',\n        blocks: [],\n        levels: levels ? levels.map(level => ({ ...level })) : [],\n        formatHolder: createSelectionMarker(format),\n        format: {},\n    };\n}\n","import { ContentModelBlockFormat } from '../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelParagraphDecorator } from '../../publicTypes/decorator/ContentModelParagraphDecorator';\n\n/**\n * @internal\n */\nexport function createParagraph(\n    isImplicit?: boolean,\n    format?: ContentModelBlockFormat,\n    decorator?: ContentModelParagraphDecorator\n): ContentModelParagraph {\n    const result: ContentModelParagraph = {\n        blockType: 'Paragraph',\n        segments: [],\n        format: format ? { ...format } : {},\n    };\n\n    if (isImplicit) {\n        result.isImplicit = true;\n    }\n\n    if (decorator) {\n        result.decorator = {\n            tagName: decorator.tagName,\n            format: { ...decorator.format },\n        };\n    }\n\n    return result;\n}\n","import { ContentModelParagraphDecorator } from '../../publicTypes/decorator/ContentModelParagraphDecorator';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\n\n/**\n * @internal\n */\nexport function createParagraphDecorator(\n    tagName: string,\n    format?: ContentModelSegmentFormat\n): ContentModelParagraphDecorator {\n    return {\n        tagName: tagName.toLocaleLowerCase(),\n        format: { ...(format || {}) },\n    };\n}\n","import { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { ContentModelFormatContainerFormat } from '../../publicTypes/format/ContentModelFormatContainerFormat';\nimport { createFormatContainer } from './createFormatContainer';\n\n/**\n * @internal\n */\nexport function createQuote(\n    format?: ContentModelFormatContainerFormat\n): ContentModelFormatContainer {\n    return createFormatContainer('blockquote', format);\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ContentModelSelectionMarker } from '../../publicTypes/segment/ContentModelSelectionMarker';\n\n/**\n * @internal\n */\nexport function createSelectionMarker(\n    format?: ContentModelSegmentFormat\n): ContentModelSelectionMarker {\n    return {\n        segmentType: 'SelectionMarker',\n        isSelected: true,\n        format: format ? { ...format } : {},\n    };\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { ContentModelTableFormat } from '../../publicTypes/format/ContentModelTableFormat';\nimport { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\n\n/**\n * @internal\n */\nexport function createTable(rowCount: number, format?: ContentModelTableFormat): ContentModelTable {\n    const rows: ContentModelTableRow[] = [];\n\n    for (let i = 0; i < rowCount; i++) {\n        rows.push({\n            height: 0,\n            format: {},\n            cells: [],\n        });\n    }\n\n    return {\n        blockType: 'Table',\n        rows,\n        format: { ...(format || {}) },\n        widths: [],\n        dataset: {},\n    };\n}\n","import { ContentModelTableCell } from '../../publicTypes/group/ContentModelTableCell';\nimport { ContentModelTableCellFormat } from '../../publicTypes/format/ContentModelTableCellFormat';\n\n/**\n * @internal\n */\nexport function createTableCell(\n    spanLeftOrColSpan?: boolean | number,\n    spanAboveOrRowSpan?: boolean | number,\n    isHeader?: boolean,\n    format?: ContentModelTableCellFormat\n): ContentModelTableCell {\n    const spanLeft =\n        typeof spanLeftOrColSpan === 'number' ? spanLeftOrColSpan > 1 : !!spanLeftOrColSpan;\n    const spanAbove =\n        typeof spanAboveOrRowSpan === 'number' ? spanAboveOrRowSpan > 1 : !!spanAboveOrRowSpan;\n    return {\n        blockGroupType: 'TableCell',\n        blocks: [],\n        format: format ? { ...format } : {},\n        spanLeft,\n        spanAbove,\n        isHeader: !!isHeader,\n        dataset: {},\n    };\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ContentModelText } from '../../publicTypes/segment/ContentModelText';\n\n/**\n * @internal\n */\nexport function createText(text: string, format?: ContentModelSegmentFormat): ContentModelText {\n    return {\n        segmentType: 'Text',\n        text: text,\n        format: format ? { ...format } : {},\n    };\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { deleteExpandedSelection } from './utils/deleteExpandedSelection';\nimport {\n    DeleteResult,\n    DeleteSelectionContext,\n    DeleteSelectionResult,\n    DeleteSelectionStep,\n    ValidDeleteSelectionContext,\n    OnDeleteEntity,\n} from './utils/DeleteSelectionStep';\n\n/**\n * @internal\n */\nexport function deleteSelection(\n    model: ContentModelDocument,\n    onDeleteEntity: OnDeleteEntity,\n    additionalSteps: (DeleteSelectionStep | null)[] = []\n): DeleteSelectionResult {\n    const context = deleteExpandedSelection(model, onDeleteEntity);\n\n    additionalSteps.forEach(step => {\n        if (\n            step &&\n            isValidDeleteSelectionContext(context) &&\n            context.deleteResult == DeleteResult.NotDeleted\n        ) {\n            step(context, onDeleteEntity);\n        }\n    });\n\n    mergeParagraphAfterDelete(context);\n\n    return context;\n}\n\nfunction isValidDeleteSelectionContext(\n    context: DeleteSelectionContext\n): context is ValidDeleteSelectionContext {\n    return !!context.insertPoint;\n}\n\n// If we end up with multiple paragraphs impacted, we need to merge them\nfunction mergeParagraphAfterDelete(context: DeleteSelectionContext) {\n    const { insertPoint, deleteResult, lastParagraph, lastTableContext } = context;\n\n    if (\n        insertPoint &&\n        deleteResult != DeleteResult.NotDeleted &&\n        deleteResult != DeleteResult.NothingToDelete &&\n        lastParagraph &&\n        lastParagraph != insertPoint.paragraph &&\n        lastTableContext == insertPoint.tableContext\n    ) {\n        insertPoint.paragraph.segments.push(...lastParagraph.segments);\n        lastParagraph.segments = [];\n    }\n}\n","import { DeleteResult, DeleteSelectionStep } from '../utils/DeleteSelectionStep';\nimport { deleteSegment } from '../utils/deleteSegment';\n\n/**\n * @internal\n */\nexport const deleteAllSegmentBefore: DeleteSelectionStep = (context, onDeleteEntity) => {\n    const { paragraph, marker } = context.insertPoint;\n    const index = paragraph.segments.indexOf(marker);\n\n    for (let i = index - 1; i >= 0; i--) {\n        const segment = paragraph.segments[i];\n\n        segment.isSelected = true;\n\n        if (deleteSegment(paragraph, segment, onDeleteEntity)) {\n            context.deleteResult = DeleteResult.Range;\n        }\n    }\n};\n","import { BlockAndPath, getLeafSiblingBlock } from '../../block/getLeafSiblingBlock';\nimport { ContentModelSegment } from '../../../publicTypes/segment/ContentModelSegment';\nimport { createInsertPoint } from '../utils/createInsertPoint';\nimport { deleteBlock } from '../utils/deleteBlock';\nimport { DeleteResult, DeleteSelectionStep } from '../utils/DeleteSelectionStep';\nimport { deleteSegment } from '../utils/deleteSegment';\n\nfunction getDeleteCollapsedSelection(direction: 'forward' | 'backward'): DeleteSelectionStep {\n    return (context, onDeleteEntity) => {\n        const isForward = direction == 'forward';\n        const { paragraph, marker, path, tableContext } = context.insertPoint;\n        const segments = paragraph.segments;\n\n        fixupBr(segments);\n\n        const index = segments.indexOf(marker) + (isForward ? 1 : -1);\n        const segmentToDelete = segments[index];\n        let blockToDelete: BlockAndPath | null;\n\n        if (segmentToDelete) {\n            if (deleteSegment(paragraph, segmentToDelete, onDeleteEntity, direction)) {\n                context.deleteResult = DeleteResult.SingleChar;\n            }\n        } else if ((blockToDelete = getLeafSiblingBlock(path, paragraph, isForward))) {\n            const { block, path, siblingSegment } = blockToDelete;\n\n            if (block.blockType == 'Paragraph') {\n                if (siblingSegment) {\n                    // When selection is under general segment, need to check if it has a sibling sibling, and delete from it\n                    if (deleteSegment(block, siblingSegment, onDeleteEntity, direction)) {\n                        context.deleteResult = DeleteResult.Range;\n                    }\n                } else {\n                    if (isForward) {\n                        context.lastParagraph = block;\n                    } else {\n                        if (block.segments[block.segments.length - 1]?.segmentType == 'Br') {\n                            block.segments.pop();\n                        }\n\n                        context.insertPoint = createInsertPoint(marker, block, path, tableContext);\n                        context.lastParagraph = paragraph;\n                        delete block.cachedElement;\n                    }\n\n                    context.deleteResult = DeleteResult.Range;\n                }\n\n                // When go across table, getLeafSiblingBlock will return null, when we are here, we must be in the same table context\n                context.lastTableContext = tableContext;\n            } else {\n                if (\n                    deleteBlock(\n                        path[0].blocks,\n                        block,\n                        onDeleteEntity,\n                        undefined /*replacement*/,\n                        direction\n                    )\n                ) {\n                    context.deleteResult = DeleteResult.Range;\n                }\n            }\n        } else {\n            // We have nothing to delete, in this case we don't want browser handle it as well.\n            // Because when Backspace on an empty document, it will also delete the only DIV and SPAN element, causes\n            // editor is really empty. We don't want that happen. So the handling should stop here.\n            context.deleteResult = DeleteResult.NothingToDelete;\n        }\n    };\n}\n\n/**\n * If the last segment is BR, remove it for now. We may add it back later when normalize model.\n * So that if this is an empty paragraph, it will start to delete next block\n */\nfunction fixupBr(segments: ContentModelSegment[]) {\n    if (segments[segments.length - 1]?.segmentType == 'Br') {\n        const segmentsWithoutBr = segments.filter(x => x.segmentType != 'SelectionMarker');\n\n        if (segmentsWithoutBr[segmentsWithoutBr.length - 2]?.segmentType != 'Br') {\n            segments.pop();\n        }\n    }\n}\n\n/**\n * @internal if we didn't delete anything, and we want to delete forward, now perform it\n */\nexport const forwardDeleteCollapsedSelection = getDeleteCollapsedSelection('forward');\n\n/**\n * @internal if we didn't delete anything, and we want to delete backward, now perform it\n */\nexport const backwardDeleteCollapsedSelection = getDeleteCollapsedSelection('backward');\n","import { ContentModelParagraph } from '../../../publicTypes/block/ContentModelParagraph';\nimport { isPunctuation, isSpace, normalizeText } from '../../../domUtils/stringUtil';\nimport { isWhiteSpacePreserved } from '../../common/isWhiteSpacePreserved';\nimport {\n    DeleteResult,\n    DeleteSelectionContext,\n    DeleteSelectionStep,\n} from '../utils/DeleteSelectionStep';\n\nconst enum DeleteWordState {\n    Start,\n    Punctuation,\n    Text,\n    NonText,\n    Space,\n    End,\n}\n\ninterface CharInfo {\n    text: boolean;\n    space: boolean;\n    punctuation: boolean;\n}\n\nfunction getDeleteWordSelection(direction: 'forward' | 'backward'): DeleteSelectionStep {\n    return context => {\n        const { marker, paragraph } = context.insertPoint;\n        const startIndex = paragraph.segments.indexOf(marker);\n        const deleteNext = direction == 'forward';\n\n        let iterator = iterateSegments(paragraph, startIndex, deleteNext, context);\n        let curr = iterator.next();\n\n        for (let state = DeleteWordState.Start; state != DeleteWordState.End && !curr.done; ) {\n            const { punctuation, space, text } = curr.value;\n\n            // This is a state machine of how to delete a whole word together with space and punctuations.\n            // For a full state machine chart, see\n            // Forward delete: https://github.com/microsoft/roosterjs/blob/master/assets/design-charts/ForwardDeleteWord.png\n            // Backward delete: https://github.com/microsoft/roosterjs/blob/master/assets/design-charts/BackwardDeleteWord.png\n            switch (state) {\n                case DeleteWordState.Start:\n                    state = space\n                        ? DeleteWordState.Space\n                        : punctuation\n                        ? DeleteWordState.Punctuation\n                        : DeleteWordState.Text;\n                    curr = iterator.next(true /*delete*/);\n                    break;\n\n                case DeleteWordState.Punctuation:\n                    if (deleteNext && space) {\n                        state = DeleteWordState.NonText;\n                        curr = iterator.next(true /*delete*/);\n                    } else if (punctuation) {\n                        curr = iterator.next(true /*delete*/);\n                    } else {\n                        state = DeleteWordState.End;\n                    }\n                    break;\n\n                case DeleteWordState.Text:\n                    if (deleteNext && space) {\n                        state = DeleteWordState.NonText;\n                        curr = iterator.next(true /*delete*/);\n                    } else if (text) {\n                        curr = iterator.next(true /*delete*/);\n                    } else {\n                        state = DeleteWordState.End;\n                    }\n                    break;\n\n                case DeleteWordState.NonText:\n                    if (punctuation || !space) {\n                        state = DeleteWordState.End;\n                    } else {\n                        curr = iterator.next(true /*delete*/);\n                    }\n                    break;\n\n                case DeleteWordState.Space:\n                    if (space) {\n                        curr = iterator.next(true /*delete*/);\n                    } else if (punctuation) {\n                        state = deleteNext ? DeleteWordState.NonText : DeleteWordState.Punctuation;\n                        curr = iterator.next(true /*delete*/);\n                    } else {\n                        state = deleteNext ? DeleteWordState.End : DeleteWordState.Text;\n                    }\n                    break;\n            }\n        }\n    };\n}\n\nfunction* iterateSegments(\n    paragraph: ContentModelParagraph,\n    markerIndex: number,\n    forward: boolean,\n    context: DeleteSelectionContext\n): Generator<CharInfo, null, boolean> {\n    const step = forward ? 1 : -1;\n    const segments = paragraph.segments;\n    const preserveWhiteSpace = isWhiteSpacePreserved(paragraph);\n\n    for (let i = markerIndex + step; i >= 0 && i < segments.length; i += step) {\n        const segment = segments[i];\n\n        switch (segment.segmentType) {\n            case 'Text':\n                for (\n                    let j = forward ? 0 : segment.text.length - 1;\n                    j >= 0 && j < segment.text.length;\n                    j += step\n                ) {\n                    const c = segment.text[j];\n                    const punctuation = isPunctuation(c);\n                    const space = isSpace(c);\n                    const text = !punctuation && !space;\n\n                    if (yield { punctuation, space, text }) {\n                        let newText = segment.text;\n\n                        newText = newText.substring(0, j) + newText.substring(j + 1);\n\n                        if (!preserveWhiteSpace) {\n                            newText = normalizeText(newText, forward);\n                        }\n\n                        context.deleteResult = DeleteResult.Range;\n\n                        if (newText) {\n                            segment.text = newText;\n\n                            if (step > 0) {\n                                j -= step;\n                            }\n                        } else {\n                            segments.splice(i, 1);\n\n                            if (step > 0) {\n                                i -= step;\n                            }\n\n                            break;\n                        }\n                    }\n                }\n                break;\n\n            case 'Image':\n                if (\n                    yield { punctuation: true, space: false, text: false } // Treat image as punctuation since they have the same behavior.\n                ) {\n                    segments.splice(i, 1);\n\n                    if (step > 0) {\n                        i -= step;\n                    }\n\n                    context.deleteResult = DeleteResult.Range;\n                }\n                break;\n\n            case 'SelectionMarker':\n                break;\n\n            default:\n                return null;\n        }\n    }\n\n    return null;\n}\n\n/**\n * @internal\n */\nexport const forwardDeleteWordSelection = getDeleteWordSelection('forward');\n\n/**\n * @internal\n */\nexport const backwardDeleteWordSelection = getDeleteWordSelection('backward');\n","import { ContentModelBlockGroup } from '../../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelParagraph } from '../../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSelectionMarker } from '../../../publicTypes/segment/ContentModelSelectionMarker';\nimport { InsertPoint } from '../../../publicTypes/selection/InsertPoint';\nimport { TableSelectionContext } from '../../../publicTypes/selection/TableSelectionContext';\n\n/**\n * @internal\n */\nexport function createInsertPoint(\n    marker: ContentModelSelectionMarker,\n    paragraph: ContentModelParagraph,\n    path: ContentModelBlockGroup[],\n    tableContext: TableSelectionContext | undefined\n): InsertPoint {\n    return {\n        marker,\n        paragraph,\n        path,\n        tableContext,\n    };\n}\n","import { ContentModelBlock } from '../../../publicTypes/block/ContentModelBlock';\nimport { EntityOperation } from 'roosterjs-editor-types';\nimport { OnDeleteEntity } from './DeleteSelectionStep';\n\n/**\n * @internal\n */\nexport function deleteBlock(\n    blocks: ContentModelBlock[],\n    blockToDelete: ContentModelBlock,\n    onDeleteEntity: OnDeleteEntity,\n    replacement?: ContentModelBlock,\n    direction?: 'forward' | 'backward'\n): boolean {\n    const index = blocks.indexOf(blockToDelete);\n\n    switch (blockToDelete.blockType) {\n        case 'Table':\n        case 'Divider':\n            replacement ? blocks.splice(index, 1, replacement) : blocks.splice(index, 1);\n            return true;\n\n        case 'Entity':\n            const operation = blockToDelete.isSelected\n                ? EntityOperation.Overwrite\n                : direction == 'forward'\n                ? EntityOperation.RemoveFromStart\n                : direction == 'backward'\n                ? EntityOperation.RemoveFromEnd\n                : undefined;\n\n            if (operation !== undefined && !onDeleteEntity(blockToDelete, operation)) {\n                replacement ? blocks.splice(index, 1, replacement) : blocks.splice(index, 1);\n            }\n\n            return true;\n\n        case 'BlockGroup':\n            switch (blockToDelete.blockGroupType) {\n                case 'General':\n                    if (replacement) {\n                        blocks.splice(index, 1, replacement);\n                        return true;\n                    } else {\n                        // no op, let browser handle it\n                        return false;\n                    }\n\n                case 'ListItem':\n                case 'FormatContainer':\n                    blocks.splice(index, 1);\n                    return true;\n            }\n    }\n\n    return false;\n}\n","import { ContentModelDocument } from '../../../publicTypes/group/ContentModelDocument';\nimport { createBr } from '../../creators/createBr';\nimport { createInsertPoint } from '../utils/createInsertPoint';\nimport { createParagraph } from '../../creators/createParagraph';\nimport { createSelectionMarker } from '../../creators/createSelectionMarker';\nimport { deleteBlock } from '../utils/deleteBlock';\nimport { DeleteResult, DeleteSelectionContext, OnDeleteEntity } from '../utils/DeleteSelectionStep';\nimport { deleteSegment } from '../utils/deleteSegment';\nimport { iterateSelections, IterateSelectionsOption } from '../../selection/iterateSelections';\nimport { setParagraphNotImplicit } from '../../block/setParagraphNotImplicit';\n\nconst DeleteSelectionIteratingOptions: IterateSelectionsOption = {\n    contentUnderSelectedTableCell: 'ignoreForTableOrCell', // When a table cell is selected, we replace all content for this cell, so no need to go into its content\n    contentUnderSelectedGeneralElement: 'generalElementOnly', // When a general element is selected, we replace the whole element so no need to go into its content\n    includeListFormatHolder: 'never',\n};\n\n/**\n * @internal\n * Iterate the model and find all selected content if any, delete them, and keep/create an insert point\n * at the first deleted position so that we know where to put cursor to after delete\n */\nexport function deleteExpandedSelection(\n    model: ContentModelDocument,\n    onDeleteEntity: OnDeleteEntity\n): DeleteSelectionContext {\n    const context: DeleteSelectionContext = {\n        deleteResult: DeleteResult.NotDeleted,\n        insertPoint: null,\n    };\n\n    iterateSelections(\n        [model],\n        (path, tableContext, block, segments) => {\n            // Set paragraph, format and index for default position where we will put cursor to.\n            // Later we can overwrite these info when process the selections\n            let paragraph = createParagraph(true /*implicit*/);\n            let markerFormat = model.format;\n            let insertMarkerIndex = 0;\n\n            if (segments) {\n                // Delete segments inside a paragraph\n                if (segments[0] && block?.blockType == 'Paragraph') {\n                    // Now that we have found a paragraph with selections, we can overwrite the default paragraph with this one\n                    // so we can put cursor here after delete\n                    paragraph = block;\n                    insertMarkerIndex = paragraph.segments.indexOf(segments[0]);\n                    markerFormat = segments[0].format;\n\n                    context.lastParagraph = paragraph;\n                    context.lastTableContext = tableContext;\n\n                    segments.forEach((segment, i) => {\n                        if (\n                            i == 0 &&\n                            !context.insertPoint &&\n                            segment.segmentType == 'SelectionMarker'\n                        ) {\n                            // First time we hit a selection and it is a selection marker, just mark it and not need to delete\n                            // because this is possible a collapsed selection, then it will be handled later\n                            context.insertPoint = createInsertPoint(\n                                segment,\n                                block,\n                                path,\n                                tableContext\n                            );\n                        } else if (deleteSegment(block, segment, onDeleteEntity)) {\n                            context.deleteResult = DeleteResult.Range;\n                        }\n                    });\n\n                    // Since we are operating on this paragraph and it possible we delete everything from this paragraph,\n                    // Need to make it \"not implicit\" so that it will always have a container element, so that when we do normalization\n                    // of this paragraph, a BR can be added if need\n                    setParagraphNotImplicit(block);\n                }\n            } else if (block) {\n                // Delete a whole block (divider, table, ...)\n                const blocks = path[0].blocks;\n\n                if (deleteBlock(blocks, block, onDeleteEntity, paragraph)) {\n                    context.deleteResult = DeleteResult.Range;\n                }\n            } else if (tableContext) {\n                // Delete a whole table cell\n                const { table, colIndex, rowIndex } = tableContext;\n                const row = table.rows[rowIndex];\n                const cell = row.cells[colIndex];\n\n                path = [cell, ...path];\n                paragraph.segments.push(createBr(model.format));\n                cell.blocks = [paragraph];\n\n                delete cell.cachedElement;\n                delete row.cachedElement;\n                context.deleteResult = DeleteResult.Range;\n            }\n\n            if (!context.insertPoint) {\n                // If we have not got a insert point after delete and we have a paragraph to put an insert point in, create insert point now\n                const marker = createSelectionMarker(markerFormat);\n\n                setParagraphNotImplicit(paragraph);\n                paragraph.segments.splice(insertMarkerIndex, 0, marker);\n                context.insertPoint = createInsertPoint(marker, paragraph, path, tableContext);\n            }\n        },\n        DeleteSelectionIteratingOptions\n    );\n\n    return context;\n}\n","import { ContentModelParagraph } from '../../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegment } from '../../../publicTypes/segment/ContentModelSegment';\nimport { createNormalizeSegmentContext, normalizeSegment } from '../../common/normalizeSegment';\nimport { deleteSingleChar } from './deleteSingleChar';\nimport { EntityOperation } from 'roosterjs-editor-types';\nimport { isWhiteSpacePreserved } from '../../common/isWhiteSpacePreserved';\nimport { normalizeText } from '../../../domUtils/stringUtil';\nimport { OnDeleteEntity } from './DeleteSelectionStep';\n\n/**\n * @internal\n */\nexport function deleteSegment(\n    paragraph: ContentModelParagraph,\n    segmentToDelete: ContentModelSegment,\n    onDeleteEntity: OnDeleteEntity,\n    direction?: 'forward' | 'backward'\n): boolean {\n    const segments = paragraph.segments;\n    const index = segments.indexOf(segmentToDelete);\n    const preserveWhiteSpace = isWhiteSpacePreserved(paragraph);\n    const isForward = direction == 'forward';\n    const isBackward = direction == 'backward';\n\n    if (!preserveWhiteSpace) {\n        normalizePreviousSegment(segments, index);\n    }\n\n    switch (segmentToDelete.segmentType) {\n        case 'Br':\n        case 'Image':\n        case 'SelectionMarker':\n            segments.splice(index, 1);\n            return true;\n\n        case 'Entity':\n            const operation = segmentToDelete.isSelected\n                ? EntityOperation.Overwrite\n                : isForward\n                ? EntityOperation.RemoveFromStart\n                : isBackward\n                ? EntityOperation.RemoveFromEnd\n                : undefined;\n            if (operation !== undefined && !onDeleteEntity(segmentToDelete, operation)) {\n                segments.splice(index, 1);\n            }\n\n            return true;\n\n        case 'Text':\n            let text = segmentToDelete.text;\n\n            if (text.length == 0 || segmentToDelete.isSelected) {\n                segments.splice(index, 1);\n            } else if (direction) {\n                text = deleteSingleChar(text, isForward); //  isForward ? text.substring(1) : text.substring(0, text.length - 1);\n\n                if (!preserveWhiteSpace) {\n                    text = normalizeText(text, isForward);\n                }\n\n                if (text == '') {\n                    segments.splice(index, 1);\n                } else {\n                    segmentToDelete.text = text;\n                }\n            }\n\n            return true;\n\n        case 'General':\n            if (segmentToDelete.isSelected) {\n                segments.splice(index, 1);\n                return true;\n            } else {\n                // No op if a general segment is not selected, let browser handle general segment\n                // TODO: Need to revisit this\n                return false;\n            }\n    }\n}\n\nfunction normalizePreviousSegment(segments: ContentModelSegment[], currentIndex: number) {\n    let index = currentIndex - 1;\n\n    while (segments[index]?.segmentType == 'SelectionMarker') {\n        index--;\n    }\n\n    const segment = segments[index];\n\n    if (segment) {\n        const context = createNormalizeSegmentContext();\n\n        context.ignoreTrailingSpaces = false;\n        normalizeSegment(segment, context);\n    }\n}\n","/**\n * @internal\n */\nexport function deleteSingleChar(text: string, isForward: boolean) {\n    // In case of emoji that occupies multiple characters, we need to delete the whole emoji\n    const array = [...text];\n    let deleteLength = 0;\n\n    for (\n        let i = isForward ? 0 : array.length - 1,\n            deleteState: 'notDeleted' | 'waiting' | 'done' = 'notDeleted';\n        i >= 0 && i < array.length && deleteState != 'done';\n        i += isForward ? 1 : -1\n    ) {\n        switch (array[i]) {\n            case '\\u200D': // ZERO WIDTH JOINER\n            case '\\u20E3': // COMBINING ENCLOSING KEYCAP\n            case '\\uFE0E': // VARIATION SELECTOR-15\n            case '\\uFE0F': // VARIATION SELECTOR-16\n                deleteState = 'notDeleted';\n                deleteLength++;\n                break;\n\n            default:\n                if (deleteState == 'notDeleted') {\n                    deleteState = 'waiting';\n                    deleteLength++;\n                } else if (deleteState == 'waiting') {\n                    deleteState = 'done';\n                }\n                break;\n        }\n    }\n\n    array.splice(isForward ? 0 : array.length - deleteLength, deleteLength);\n\n    return array.join('');\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { NodePosition } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * Get pending segment format from editor if any, otherwise null\n * @param editor The editor to get format from\n */\nexport function getPendingFormat(editor: IContentModelEditor): ContentModelSegmentFormat | null {\n    return getPendingFormatHolder(editor).format;\n}\n\n/**\n * @internal\n * Set pending segment format to editor\n * @param editor The editor to set pending format to\n * @param format The format to set.\n * @param position Cursor position when set this format\n */\nexport function setPendingFormat(\n    editor: IContentModelEditor,\n    format: ContentModelSegmentFormat,\n    position: NodePosition\n) {\n    const holder = getPendingFormatHolder(editor);\n\n    holder.format = format;\n    holder.position = position;\n}\n\n/**\n * @internal Clear pending format if any\n * @param editor The editor to set pending format to\n */\nexport function clearPendingFormat(editor: IContentModelEditor) {\n    const holder = getPendingFormatHolder(editor);\n\n    holder.format = null;\n    holder.position = null;\n}\n\n/**\n * @internal\n * Check if this editor can apply pending format\n * @param editor The editor to get format from\n */\nexport function canApplyPendingFormat(editor: IContentModelEditor): boolean {\n    const holder = getPendingFormatHolder(editor);\n    let result = false;\n\n    if (holder.format && holder.position) {\n        const position = editor.getFocusedPosition();\n\n        if (position?.equalTo(holder.position)) {\n            result = true;\n        }\n    }\n\n    return result;\n}\ninterface PendingFormatHolder {\n    format: ContentModelSegmentFormat | null;\n    position: NodePosition | null;\n}\n\nconst PendingFormatHolderKey = '__ContentModelPendingFormat';\n\nfunction getPendingFormatHolder(editor: IContentModelEditor): PendingFormatHolder {\n    return editor.getCustomData<PendingFormatHolder>(PendingFormatHolderKey, () => ({\n        format: null,\n        position: null,\n    }));\n}\n","import { Border } from '../../publicTypes/interface/Border';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { extractBorderValues } from '../../domUtils/borderValues';\nimport { parseValueWithUnit } from '../../formatHandlers/utils/parseValueWithUnit';\n\n/**\n * @internal\n */\nexport default function applyImageBorderFormat(\n    image: ContentModelImage,\n    border: Border | null,\n    borderRadius?: string\n) {\n    if (border) {\n        const format = image.format;\n        const { width, style, color } = border;\n        const borderKey = 'borderTop';\n        const extractedBorder = extractBorderValues(format[borderKey]);\n        const borderColor = extractedBorder.color;\n        const borderWidth = extractedBorder.width;\n        const borderStyle = extractedBorder.style;\n        let borderFormat = '';\n\n        if (width) {\n            borderFormat = parseValueWithUnit(width) + 'px';\n        } else if (borderWidth) {\n            borderFormat = borderWidth;\n        } else {\n            borderFormat = '1px';\n        }\n\n        if (style) {\n            borderFormat = `${borderFormat} ${style}`;\n        } else if (borderStyle) {\n            borderFormat = `${borderFormat} ${borderStyle}`;\n        } else {\n            borderFormat = `${borderFormat} solid`;\n        }\n\n        if (color) {\n            borderFormat = `${borderFormat} ${color}`;\n        } else if (borderColor) {\n            borderFormat = `${borderFormat} ${borderColor}`;\n        }\n        image.format.borderLeft = borderFormat;\n        image.format.borderTop = borderFormat;\n        image.format.borderBottom = borderFormat;\n        image.format.borderRight = borderFormat;\n    } else {\n        delete image.format.borderLeft;\n        delete image.format.borderTop;\n        delete image.format.borderBottom;\n        delete image.format.borderRight;\n    }\n\n    if (borderRadius) {\n        image.format.borderRadius = borderRadius;\n    }\n}\n","import { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\n\n/**\n * @internal\n */\nexport function findListItemsInSameThread(\n    model: ContentModelDocument,\n    currentItem: ContentModelListItem\n): ContentModelListItem[] {\n    const items: (ContentModelListItem | null)[] = [];\n\n    findListItems(model, items);\n\n    return filterListItems(items, currentItem);\n}\n\nfunction findListItems(group: ContentModelBlockGroup, result: (ContentModelListItem | null)[]) {\n    group.blocks.forEach(block => {\n        switch (block.blockType) {\n            case 'BlockGroup':\n                if (block.blockGroupType == 'ListItem') {\n                    result.push(block);\n                } else {\n                    pushNullIfNecessary(result);\n                    findListItems(block, result);\n                    pushNullIfNecessary(result);\n                }\n                break;\n\n            case 'Paragraph':\n                pushNullIfNecessary(result);\n\n                block.segments.forEach(segment => {\n                    if (segment.segmentType == 'General') {\n                        findListItems(segment, result);\n                    }\n                });\n\n                pushNullIfNecessary(result);\n                break;\n\n            case 'Table':\n                pushNullIfNecessary(result);\n\n                block.rows.forEach(row =>\n                    row.cells.forEach(cell => {\n                        findListItems(cell, result);\n                    })\n                );\n                pushNullIfNecessary(result);\n\n                break;\n        }\n    });\n}\n\nfunction pushNullIfNecessary(result: (ContentModelListItem | null)[]) {\n    const last = result[result.length - 1];\n\n    if (!last || last !== null) {\n        result.push(null);\n    }\n}\n\nfunction filterListItems(\n    items: (ContentModelListItem | null)[],\n    currentItem: ContentModelListItem\n) {\n    const result: ContentModelListItem[] = [];\n    const currentIndex = items.indexOf(currentItem);\n    const levelLength = currentItem.levels.length;\n    const isOrderedList = currentItem.levels[levelLength - 1]?.listType == 'OL';\n\n    if (currentIndex >= 0) {\n        for (let i = currentIndex; i >= 0; i--) {\n            const item = items[i];\n\n            if (!item) {\n                if (isOrderedList) {\n                    continue;\n                } else {\n                    break;\n                }\n            }\n\n            const startNumberOverride = hasStartNumberOverride(item, levelLength);\n\n            if (areListTypesCompatible(items, currentIndex, i)) {\n                result.unshift(item);\n\n                if (isOrderedList && startNumberOverride) {\n                    break;\n                }\n            } else if (!isOrderedList || startNumberOverride) {\n                break;\n            }\n        }\n\n        for (let i = currentIndex + 1; i < items.length; i++) {\n            const item = items[i];\n\n            if (!item) {\n                if (isOrderedList) {\n                    continue;\n                } else {\n                    break;\n                }\n            }\n\n            const startNumberOverride = hasStartNumberOverride(item, levelLength);\n\n            if (areListTypesCompatible(items, currentIndex, i) && !startNumberOverride) {\n                result.push(item);\n            } else if (!isOrderedList || startNumberOverride) {\n                break;\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction areListTypesCompatible(\n    listItems: (ContentModelListItem | null)[],\n    currentIndex: number,\n    compareToIndex: number\n): boolean {\n    const currentLevels = listItems[currentIndex]!.levels;\n    const compareToLevels = listItems[compareToIndex]!.levels;\n\n    return (\n        currentLevels.length <= compareToLevels.length &&\n        currentLevels.every(\n            (currentLevel, i) => currentLevel.listType == compareToLevels[i].listType\n        )\n    );\n}\n\nfunction hasStartNumberOverride(item: ContentModelListItem, levelLength: number): boolean {\n    return item.levels.slice(0, levelLength).some(level => level.startNumberOverride !== undefined);\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { createListItem } from '../creators/createListItem';\nimport { getOperationalBlocks } from '../selection/collectSelections';\nimport { isBlockGroupOfType } from '../common/isBlockGroupOfType';\nimport { normalizeContentModel } from '../common/normalizeContentModel';\nimport { setParagraphNotImplicit } from '../block/setParagraphNotImplicit';\n\n/**\n * @internal\n */\nexport function setListType(model: ContentModelDocument, listType: 'OL' | 'UL') {\n    const paragraphOrListItems = getOperationalBlocks<ContentModelListItem>(\n        model,\n        ['ListItem'],\n        [] // Set stop types to be empty so we can find list items even cross the boundary of table, then we can always operation on the list item if any\n    );\n    const alreadyInExpectedType = paragraphOrListItems.every(\n        ({ block }) =>\n            isBlockGroupOfType<ContentModelListItem>(block, 'ListItem') &&\n            block.levels[block.levels.length - 1]?.listType == listType\n    );\n\n    paragraphOrListItems.forEach(({ block, parent }, itemIndex) => {\n        if (isBlockGroupOfType<ContentModelListItem>(block, 'ListItem')) {\n            const level = block.levels.pop();\n\n            if (!alreadyInExpectedType && level) {\n                level.listType = listType;\n                block.levels.push(level);\n            } else if (block.blocks.length == 1) {\n                setParagraphNotImplicit(block.blocks[0]);\n            }\n        } else {\n            const index = parent.blocks.indexOf(block);\n\n            if (index >= 0) {\n                const prevBlock = parent.blocks[index - 1];\n                const segmentFormat =\n                    (block.blockType == 'Paragraph' && block.segments[0]?.format) || {};\n                const newListItem = createListItem(\n                    [\n                        {\n                            listType,\n                            startNumberOverride:\n                                itemIndex > 0 ||\n                                (prevBlock?.blockType == 'BlockGroup' &&\n                                    prevBlock.blockGroupType == 'ListItem' &&\n                                    prevBlock.levels[0]?.listType == 'OL')\n                                    ? undefined\n                                    : 1,\n                            direction: block.format.direction,\n                            textAlign: block.format.textAlign,\n                        },\n                    ],\n                    // For list bullet, we only want to carry over these formats from segments:\n                    {\n                        fontFamily: segmentFormat.fontFamily,\n                        fontSize: segmentFormat.fontSize,\n                        textColor: segmentFormat.textColor,\n                    }\n                );\n\n                // Since there is only one paragraph under the list item, no need to keep its paragraph element (DIV).\n                // TODO: Do we need to keep the CSS styles applied to original DIV?\n                if (block.blockType == 'Paragraph') {\n                    block.isImplicit = true;\n                }\n\n                newListItem.blocks.push(block);\n\n                parent.blocks.splice(index, 1, newListItem);\n            }\n        }\n    });\n\n    normalizeContentModel(model);\n\n    return paragraphOrListItems.length > 0;\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { getSelectedParagraphs } from './collectSelections';\nimport { setSelection } from './setSelection';\n\n/**\n * @internal\n */\nexport function adjustSegmentSelection(\n    model: ContentModelDocument,\n    firstMatcher: (target: ContentModelSegment) => boolean,\n    siblingMatcher: (target: ContentModelSegment, ref: ContentModelSegment) => boolean\n): boolean {\n    const paragraphs = getSelectedParagraphs(model);\n    let first: ContentModelSegment | undefined;\n    let last: ContentModelSegment | undefined;\n    let changed = false;\n\n    paragraphs.forEach(p => {\n        const index = first ? 0 : p.segments.findIndex(x => firstMatcher(x));\n        const segments = p.segments;\n\n        if (!first) {\n            first = segments[index];\n\n            for (let i = index; i > 0; i--) {\n                if (siblingMatcher(segments[i - 1], first)) {\n                    first = segments[i - 1];\n                    changed = changed || !segments[i - 1].isSelected;\n                } else {\n                    changed = changed || !!segments[i - 1].isSelected;\n                    break;\n                }\n            }\n        }\n\n        if (first) {\n            for (let i = index; i < p.segments.length; i++) {\n                if (i == index || siblingMatcher(segments[i], last || segments[index])) {\n                    last = segments[i];\n                    changed = changed || !segments[i].isSelected;\n                } else {\n                    changed = changed || !!segments[i].isSelected;\n                    break;\n                }\n            }\n        }\n    });\n\n    if (first && last) {\n        setSelection(model, first, last);\n    }\n\n    return changed;\n}\n","import { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelText } from '../../publicTypes/segment/ContentModelText';\nimport { createText } from '../creators/createText';\nimport { isPunctuation, isSpace } from '../../domUtils/stringUtil';\nimport { iterateSelections } from '../../modelApi/selection/iterateSelections';\n\n/**\n * @internal\n */\nexport function adjustWordSelection(\n    model: ContentModelDocument,\n    marker: ContentModelSegment\n): ContentModelSegment[] {\n    let markerBlock: ContentModelParagraph | undefined;\n\n    iterateSelections([model], (path, tableContext, block, segments) => {\n        //Find the block with the selection marker\n        if (block?.blockType == 'Paragraph' && segments?.length == 1 && segments[0] == marker) {\n            markerBlock = block;\n        }\n        return true;\n    });\n\n    if (markerBlock) {\n        const segments: ContentModelSegment[] = [];\n        let markerSelectionIndex = markerBlock.segments.indexOf(marker);\n        for (let i = markerSelectionIndex - 1; i >= 0; i--) {\n            const currentSegment = markerBlock.segments[i];\n            if (currentSegment.segmentType == 'Text') {\n                const found = findDelimiter(currentSegment, false /*moveRightward*/);\n                if (found > -1) {\n                    if (found == currentSegment.text.length) {\n                        break;\n                    }\n                    splitTextSegment(markerBlock.segments, currentSegment, i, found);\n                    segments.push(markerBlock.segments[i + 1]);\n                    break;\n                } else {\n                    segments.push(markerBlock.segments[i]);\n                }\n            } else {\n                break;\n            }\n        }\n        markerSelectionIndex = markerBlock.segments.indexOf(marker);\n        segments.push(marker);\n\n        // Marker is at start of word\n        if (segments.length <= 1) {\n            return segments;\n        }\n\n        for (let i = markerSelectionIndex + 1; i < markerBlock.segments.length; i++) {\n            const currentSegment = markerBlock.segments[i];\n            if (currentSegment.segmentType == 'Text') {\n                const found = findDelimiter(currentSegment, true /*moveRightward*/);\n                if (found > -1) {\n                    if (found == 0) {\n                        break;\n                    }\n                    splitTextSegment(markerBlock.segments, currentSegment, i, found);\n                    segments.push(markerBlock.segments[i]);\n                    break;\n                } else {\n                    segments.push(markerBlock.segments[i]);\n                }\n            } else {\n                break;\n            }\n        }\n\n        // Marker is at end of word\n        if (segments[segments.length - 1] == marker) {\n            return [marker];\n        }\n\n        return segments;\n    } else {\n        return [marker];\n    }\n}\n\n/*\n// These are unicode characters mostly from the Category Space Separator (Zs)\nhttps://unicode.org/Public/UNIDATA/Scripts.txt\n\n\\u2000 = EN QUAD\n\\u2009 = THIN SPACE\n\\u200a = HAIR SPACE\n​\\u200b = ZERO WIDTH SPACE\n​\\u202f = NARROW NO-BREAK SPACE\n\\u205f​ = MEDIUM MATHEMATICAL SPACE\n\\u3000 = IDEOGRAPHIC SPACE\n*/\nfunction findDelimiter(segment: ContentModelText, moveRightward: boolean): number {\n    const word = segment.text;\n    let offset = -1;\n    if (moveRightward) {\n        for (let i = 0; i < word.length; i++) {\n            const char = word[i];\n\n            if (isPunctuation(char) || isSpace(char)) {\n                offset = i;\n                break;\n            }\n        }\n    } else {\n        for (let i = word.length - 1; i >= 0; i--) {\n            const char = word[i];\n\n            if (isPunctuation(char) || isSpace(char)) {\n                offset = i + 1;\n                break;\n            }\n        }\n    }\n    return offset;\n}\n\nfunction splitTextSegment(\n    segments: ContentModelSegment[],\n    textSegment: ContentModelText,\n    index: number,\n    found: number\n) {\n    const text = textSegment.text;\n    const newSegment = createText(text.substring(0, found), segments[index].format);\n\n    if (textSegment.code) {\n        newSegment.code = {\n            format: { ...textSegment.code.format },\n        };\n    }\n\n    if (textSegment.link) {\n        newSegment.link = {\n            format: { ...textSegment.link.format },\n            dataset: { ...textSegment.link.dataset },\n        };\n    }\n\n    textSegment.text = text.substring(found, text.length);\n    segments.splice(index, 0, newSegment);\n}\n","import { addSegment } from '../common/addSegment';\nimport { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\nimport { createSelectionMarker } from '../creators/createSelectionMarker';\nimport { TableSelectionCoordinates } from '../table/getSelectedCells';\n\n/**\n * @internal\n */\nexport function collapseTableSelection(\n    rows: ContentModelTableRow[],\n    selection: TableSelectionCoordinates\n) {\n    const { firstCol, firstRow } = selection;\n    const cell = rows[firstRow]?.cells[firstCol];\n    if (cell) {\n        addSegment(cell, createSelectionMarker());\n    }\n}\n","import { arrayPush } from 'roosterjs-editor-dom';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelBlockGroupType } from '../../publicTypes/enum/BlockGroupType';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { isBlockGroupOfType } from '..//common/isBlockGroupOfType';\nimport { iterateSelections, IterateSelectionsOption } from './iterateSelections';\nimport { TableSelectionContext } from '../../publicTypes/selection/TableSelectionContext';\nimport {\n    getClosestAncestorBlockGroupIndex,\n    TypeOfBlockGroup,\n} from '../common/getClosestAncestorBlockGroupIndex';\n\n/**\n * @internal\n */\nexport type OperationalBlocks<T extends ContentModelBlockGroup> = {\n    parent: ContentModelBlockGroup;\n    block: ContentModelBlock | T;\n};\n\n/**\n * @internal\n */\nexport function getSelectedSegments(\n    model: ContentModelDocument,\n    includingFormatHolder: boolean\n): ContentModelSegment[] {\n    const selections = collectSelections(model, {\n        includeListFormatHolder: includingFormatHolder ? 'allSegments' : 'never',\n    });\n    const result: ContentModelSegment[] = [];\n\n    selections.forEach(({ segments, block }) => {\n        if (segments && ((includingFormatHolder && !block) || block?.blockType == 'Paragraph')) {\n            arrayPush(\n                result,\n                segments.filter(x => x.segmentType != 'Entity' || !x.isReadonly)\n            );\n        }\n    });\n\n    return result;\n}\n\n/**\n * @internal\n */\nexport function getSelectedParagraphs(model: ContentModelDocument): ContentModelParagraph[] {\n    const selections = collectSelections(model, { includeListFormatHolder: 'never' });\n    const result: ContentModelParagraph[] = [];\n\n    removeUnmeaningfulSelections(selections);\n\n    selections.forEach(({ block }) => {\n        if (block?.blockType == 'Paragraph') {\n            result.push(block);\n        }\n    });\n\n    return result;\n}\n\n/**\n * @internal\n */\nexport function getOperationalBlocks<T extends ContentModelBlockGroup>(\n    model: ContentModelDocument,\n    blockGroupTypes: TypeOfBlockGroup<T>[],\n    stopTypes: ContentModelBlockGroupType[],\n    deepFirst?: boolean\n): OperationalBlocks<T>[] {\n    const result: OperationalBlocks<T>[] = [];\n    const findSequence = deepFirst ? blockGroupTypes.map(type => [type]) : [blockGroupTypes];\n    const selections = collectSelections(model, {\n        includeListFormatHolder: 'never',\n        contentUnderSelectedTableCell: 'ignoreForTable', // When whole table is selected, we treat the table as a single block\n    });\n\n    removeUnmeaningfulSelections(selections);\n\n    selections.forEach(({ path, block }) => {\n        for (let i = 0; i < findSequence.length; i++) {\n            const groupIndex = getClosestAncestorBlockGroupIndex(path, findSequence[i], stopTypes);\n\n            if (groupIndex >= 0) {\n                if (result.filter(x => x.block == path[groupIndex]).length <= 0) {\n                    result.push({\n                        parent: path[groupIndex + 1],\n                        block: path[groupIndex] as T,\n                    });\n                }\n                break;\n            } else if (i == findSequence.length - 1 && block) {\n                result.push({\n                    parent: path[0],\n                    block: block,\n                });\n                break;\n            }\n        }\n    });\n\n    return result;\n}\n\n/**\n * @internal\n */\nexport function getFirstSelectedTable(model: ContentModelDocument): ContentModelTable | undefined {\n    const selections = collectSelections(model, { includeListFormatHolder: 'never' });\n    let table: ContentModelTable | undefined;\n\n    removeUnmeaningfulSelections(selections);\n\n    selections.forEach(({ block, tableContext }) => {\n        if (!table) {\n            table = block?.blockType == 'Table' ? block : tableContext?.table;\n        }\n    });\n\n    return table;\n}\n\n/**\n * @internal\n */\nexport function getFirstSelectedListItem(\n    model: ContentModelDocument\n): ContentModelListItem | undefined {\n    let listItem: ContentModelListItem | undefined;\n\n    getOperationalBlocks(model, ['ListItem'], ['TableCell']).forEach(r => {\n        if (!listItem && isBlockGroupOfType<ContentModelListItem>(r.block, 'ListItem')) {\n            listItem = r.block;\n        }\n    });\n\n    return listItem;\n}\n\ninterface SelectionInfo {\n    path: ContentModelBlockGroup[];\n    segments?: ContentModelSegment[];\n    block?: ContentModelBlock;\n    tableContext?: TableSelectionContext;\n}\n\nfunction collectSelections(\n    model: ContentModelDocument,\n    option?: IterateSelectionsOption\n): SelectionInfo[] {\n    const selections: SelectionInfo[] = [];\n\n    iterateSelections(\n        [model],\n        (path, tableContext, block, segments) => {\n            selections.push({\n                path,\n                tableContext,\n                block,\n                segments,\n            });\n        },\n        option\n    );\n\n    return selections;\n}\n\nfunction removeUnmeaningfulSelections(selections: SelectionInfo[]) {\n    if (\n        selections.length > 1 &&\n        isOnlySelectionMarkerSelected(selections, false /*checkFirstParagraph*/)\n    ) {\n        selections.pop();\n    }\n\n    // Remove head paragraph if first selection marker is the only selection\n    if (\n        selections.length > 1 &&\n        isOnlySelectionMarkerSelected(selections, true /*checkFirstParagraph*/)\n    ) {\n        selections.shift();\n    }\n}\n\nfunction isOnlySelectionMarkerSelected(\n    selections: SelectionInfo[],\n    checkFirstParagraph: boolean\n): boolean {\n    const selection = selections[checkFirstParagraph ? 0 : selections.length - 1];\n\n    if (\n        selection.block?.blockType == 'Paragraph' &&\n        selection.segments &&\n        selection.segments.length > 0\n    ) {\n        const allSegments = selection.block.segments;\n        const segment = selection.segments[0];\n\n        return (\n            selection.segments.length == 1 &&\n            segment.segmentType == 'SelectionMarker' &&\n            segment == allSegments[checkFirstParagraph ? allSegments.length - 1 : 0]\n        );\n    } else {\n        return false;\n    }\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelBlockWithCache } from '../../publicTypes/block/ContentModelBlockWithCache';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { TableSelectionContext } from '../../publicTypes/selection/TableSelectionContext';\n\n/**\n * @internal\n */\nexport interface IterateSelectionsOption {\n    /**\n     * For selected table cell, this property determines how do we handle its content.\n     * include: No matter if table cell is selected, always invoke callback function for selected content (default value)\n     * ignoreForTable: When the whole table is selected we invoke callback for the table (using block parameter) but skip\n     * all its cells and content, otherwise keep invoking callback for table cell and content\n     * ignoreForTableOrCell: If whole table is selected, same with ignoreForTable, or if a table cell is selected, only\n     * invoke callback for the table cell itself but not for its content, otherwise keep invoking callback for content.\n     * @default include\n     */\n    contentUnderSelectedTableCell?: 'include' | 'ignoreForTable' | 'ignoreForTableOrCell';\n\n    /**\n     * For a selected general element, this property determines how do we handle its content.\n     * contentOnly: (Default) When the whole general element is selected, we only invoke callback for its selected content\n     * generalElementOnly: When the whole general element is selected, we only invoke callback for the general element (using block or\n     * segment parameter depends on if it is a block or segment), but skip all its content.\n     * both: When general element is selected, we invoke callback first for its content, then for general element itself\n     */\n    contentUnderSelectedGeneralElement?: 'contentOnly' | 'generalElementOnly' | 'both';\n\n    /**\n     * Whether call the callback for the list item format holder segment\n     * anySegment: call the callback if any segment is selected under a list item\n     * allSegments: call the callback only when all segments under the list item are selected\n     * never: never call the callback for list item format holder\n     * @default allSegments\n     */\n    includeListFormatHolder?: 'anySegment' | 'allSegments' | 'never';\n}\n\n/**\n * @internal\n * @returns True to stop iterating, otherwise keep going\n */\nexport type IterateSelectionsCallback = (\n    path: ContentModelBlockGroup[],\n    tableContext?: TableSelectionContext,\n    block?: ContentModelBlock,\n    segments?: ContentModelSegment[]\n) => void | boolean;\n\n/**\n * @internal\n * @returns True to stop iterating, otherwise keep going\n */\nexport function iterateSelections(\n    path: ContentModelBlockGroup[],\n    callback: IterateSelectionsCallback,\n    option?: IterateSelectionsOption,\n    table?: TableSelectionContext,\n    treatAllAsSelect?: boolean\n) {\n    const internalCallback: IterateSelectionsCallback = (path, tableContext, block, segments) => {\n        if (!!(block as ContentModelBlockWithCache)?.cachedElement) {\n            // TODO: This is a temporary solution. A better solution would be making all results from iterationSelection() to be readonly,\n            // use a util function to change it to be editable before edit them where we clear its cached element\n            delete (block as ContentModelBlockWithCache).cachedElement;\n        }\n\n        return callback(path, tableContext, block, segments);\n    };\n\n    internalIterateSelections(path, internalCallback, option, table, treatAllAsSelect);\n}\n\nfunction internalIterateSelections(\n    path: ContentModelBlockGroup[],\n    callback: IterateSelectionsCallback,\n    option?: IterateSelectionsOption,\n    table?: TableSelectionContext,\n    treatAllAsSelect?: boolean\n): boolean {\n    const parent = path[0];\n    const includeListFormatHolder = option?.includeListFormatHolder || 'allSegments';\n    const contentUnderSelectedTableCell = option?.contentUnderSelectedTableCell || 'include';\n    const contentUnderSelectedGeneralElement =\n        option?.contentUnderSelectedGeneralElement || 'contentOnly';\n\n    let hasSelectedSegment = false;\n    let hasUnselectedSegment = false;\n\n    for (let i = 0; i < parent.blocks.length; i++) {\n        const block = parent.blocks[i];\n\n        switch (block.blockType) {\n            case 'BlockGroup':\n                const newPath = [block, ...path];\n\n                if (block.blockGroupType == 'General') {\n                    const isSelected = treatAllAsSelect || block.isSelected;\n                    const handleGeneralContent =\n                        !isSelected ||\n                        contentUnderSelectedGeneralElement == 'both' ||\n                        contentUnderSelectedGeneralElement == 'contentOnly';\n                    const handleGeneralElement =\n                        isSelected &&\n                        (contentUnderSelectedGeneralElement == 'both' ||\n                            contentUnderSelectedGeneralElement == 'generalElementOnly' ||\n                            block.blocks.length == 0);\n\n                    if (\n                        (handleGeneralContent &&\n                            internalIterateSelections(\n                                newPath,\n                                callback,\n                                option,\n                                table,\n                                isSelected\n                            )) ||\n                        (handleGeneralElement && callback(path, table, block))\n                    ) {\n                        return true;\n                    }\n                } else if (\n                    internalIterateSelections(newPath, callback, option, table, treatAllAsSelect)\n                ) {\n                    return true;\n                }\n                break;\n\n            case 'Table':\n                const rows = block.rows;\n                const isWholeTableSelected = rows.every(row =>\n                    row.cells.every(cell => cell.isSelected)\n                );\n\n                if (contentUnderSelectedTableCell != 'include' && isWholeTableSelected) {\n                    if (callback(path, table, block)) {\n                        return true;\n                    }\n                } else {\n                    for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n                        const row = rows[rowIndex];\n\n                        for (let colIndex = 0; colIndex < row.cells.length; colIndex++) {\n                            const cell = row.cells[colIndex];\n                            if (!cell) {\n                                continue;\n                            }\n\n                            const newTable: TableSelectionContext = {\n                                table: block,\n                                rowIndex,\n                                colIndex,\n                                isWholeTableSelected,\n                            };\n\n                            if (cell.isSelected && callback(path, newTable)) {\n                                return true;\n                            }\n\n                            if (\n                                !cell.isSelected ||\n                                contentUnderSelectedTableCell != 'ignoreForTableOrCell'\n                            ) {\n                                const newPath = [cell, ...path];\n                                const isSelected = treatAllAsSelect || cell.isSelected;\n\n                                if (\n                                    internalIterateSelections(\n                                        newPath,\n                                        callback,\n                                        option,\n                                        newTable,\n                                        isSelected\n                                    )\n                                ) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                }\n\n                break;\n\n            case 'Paragraph':\n                const segments: ContentModelSegment[] = [];\n\n                for (let i = 0; i < block.segments.length; i++) {\n                    const segment = block.segments[i];\n                    const isSelected = treatAllAsSelect || segment.isSelected;\n\n                    if (segment.segmentType == 'General') {\n                        const handleGeneralContent =\n                            !isSelected ||\n                            contentUnderSelectedGeneralElement == 'both' ||\n                            contentUnderSelectedGeneralElement == 'contentOnly';\n                        const handleGeneralElement =\n                            isSelected &&\n                            (contentUnderSelectedGeneralElement == 'both' ||\n                                contentUnderSelectedGeneralElement == 'generalElementOnly' ||\n                                segment.blocks.length == 0);\n\n                        if (\n                            handleGeneralContent &&\n                            internalIterateSelections(\n                                [segment, ...path],\n                                callback,\n                                option,\n                                table,\n                                isSelected\n                            )\n                        ) {\n                            return true;\n                        }\n\n                        if (handleGeneralElement) {\n                            segments.push(segment);\n                        }\n                    } else if (isSelected) {\n                        segments.push(segment);\n                    }\n\n                    if (isSelected) {\n                        hasSelectedSegment = true;\n                    } else {\n                        hasUnselectedSegment = true;\n                    }\n                }\n\n                if (segments.length > 0 && callback(path, table, block, segments)) {\n                    return true;\n                }\n                break;\n\n            case 'Divider':\n            case 'Entity':\n                if ((treatAllAsSelect || block.isSelected) && callback(path, table, block)) {\n                    return true;\n                }\n\n                break;\n        }\n    }\n\n    if (\n        includeListFormatHolder != 'never' &&\n        parent.blockGroupType == 'ListItem' &&\n        hasSelectedSegment &&\n        (!hasUnselectedSegment || includeListFormatHolder == 'anySegment') &&\n        // When whole list item is selected, also add its format holder as selected segment\n        callback(path, table, undefined /*block*/, [parent.formatHolder])\n    ) {\n        return true;\n    }\n\n    return false;\n}\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { Coordinates } from 'roosterjs-editor-types';\nimport { isGeneralSegment } from '../common/isGeneralSegment';\nimport { Selectable } from '../../publicTypes/selection/Selectable';\n\n/**\n * @internal\n */\nexport function setSelection(group: ContentModelBlockGroup, start?: Selectable, end?: Selectable) {\n    setSelectionToBlockGroup(group, false /*isInSelection*/, start || null, end || null);\n}\n\nfunction setSelectionToBlockGroup(\n    group: ContentModelBlockGroup,\n    isInSelection: boolean,\n    start: Selectable | null,\n    end: Selectable | null\n): boolean {\n    return handleSelection(isInSelection, group, start, end, isInSelection => {\n        if (isGeneralSegment(group)) {\n            setIsSelected(group, isInSelection);\n        }\n\n        group.blocks.forEach(block => {\n            isInSelection = setSelectionToBlock(block, isInSelection, start, end);\n        });\n\n        return isInSelection;\n    });\n}\n\nfunction setSelectionToBlock(\n    block: ContentModelBlock,\n    isInSelection: boolean,\n    start: Selectable | null,\n    end: Selectable | null\n) {\n    switch (block.blockType) {\n        case 'BlockGroup':\n            return setSelectionToBlockGroup(block, isInSelection, start, end);\n\n        case 'Table':\n            return setSelectionToTable(block, isInSelection, start, end);\n\n        case 'Divider':\n        case 'Entity':\n            return handleSelection(isInSelection, block, start, end, isInSelection => {\n                if (isInSelection) {\n                    block.isSelected = true;\n                } else {\n                    delete block.isSelected;\n                }\n\n                return isInSelection;\n            });\n\n        case 'Paragraph':\n            const segmentsToDelete: number[] = [];\n\n            block.segments.forEach((segment, i) => {\n                isInSelection = handleSelection(\n                    isInSelection,\n                    segment,\n                    start,\n                    end,\n                    isInSelection => {\n                        return setSelectionToSegment(\n                            segment,\n                            isInSelection,\n                            segmentsToDelete,\n                            start,\n                            end,\n                            i\n                        );\n                    }\n                );\n            });\n\n            while (segmentsToDelete.length > 0) {\n                const index = segmentsToDelete.pop()!;\n\n                if (index >= 0) {\n                    block.segments.splice(index, 1);\n                }\n            }\n\n            return isInSelection;\n\n        default:\n            return isInSelection;\n    }\n}\n\nfunction setSelectionToTable(\n    table: ContentModelTable,\n    isInSelection: boolean,\n    start: Selectable | null,\n    end: Selectable | null\n): boolean {\n    const startCo = findCell(table, start);\n    const endCo = end ? findCell(table, end) : startCo;\n\n    if (!isInSelection && startCo && endCo) {\n        for (let row = 0; row < table.rows.length; row++) {\n            for (let col = 0; col < table.rows[row].cells.length; col++) {\n                const isSelected =\n                    row >= startCo.y && row <= endCo.y && col >= startCo.x && col <= endCo.x;\n\n                setIsSelected(table.rows[row].cells[col], isSelected);\n            }\n        }\n    } else {\n        table.rows.forEach(row =>\n            row.cells.forEach(cell => {\n                isInSelection = setSelectionToBlockGroup(cell, isInSelection, start, end);\n            })\n        );\n    }\n\n    return isInSelection;\n}\n\nfunction findCell(table: ContentModelTable, cell: Selectable | null): Coordinates | undefined {\n    let x = -1;\n    let y = -1;\n\n    if (cell) {\n        for (let row = 0; y < 0 && row < table.rows.length; row++) {\n            for (let col = 0; x < 0 && col < table.rows[row].cells.length; col++) {\n                if (table.rows[row].cells[col] == cell) {\n                    x = col;\n                    y = row;\n                }\n            }\n        }\n    }\n\n    return x >= 0 && y >= 0 ? { x, y } : undefined;\n}\n\nfunction setSelectionToSegment(\n    segment: ContentModelSegment,\n    isInSelection: boolean,\n    segmentsToDelete: number[],\n    start: Selectable | null,\n    end: Selectable | null,\n    i: number\n) {\n    switch (segment.segmentType) {\n        case 'SelectionMarker':\n            if (!isInSelection || (segment != start && segment != end)) {\n                // Delete the selection marker when\n                // 1. It is not in selection any more. Or\n                // 2. It is in middle of selection, so no need to have it\n                segmentsToDelete.push(i);\n            }\n            return isInSelection;\n\n        case 'General':\n            setIsSelected(segment, isInSelection);\n\n            return segment != start && segment != end\n                ? setSelectionToBlockGroup(segment, isInSelection, start, end)\n                : isInSelection;\n\n        case 'Image':\n            setIsSelected(segment, isInSelection);\n            segment.isSelectedAsImageSelection = start == segment && (!end || end == segment);\n            return isInSelection;\n        default:\n            setIsSelected(segment, isInSelection);\n            return isInSelection;\n    }\n}\n\nfunction setIsSelected(selectable: Selectable, value: boolean) {\n    if (value) {\n        selectable.isSelected = true;\n    } else {\n        delete selectable.isSelected;\n    }\n\n    return value;\n}\n\nfunction handleSelection(\n    isInSelection: boolean,\n    model: ContentModelBlockGroup | ContentModelBlock | ContentModelSegment,\n    start: Selectable | null,\n    end: Selectable | null,\n    callback: (isInSelection: boolean) => boolean\n) {\n    isInSelection = isInSelection || model == start;\n    isInSelection = callback(isInSelection);\n    return isInSelection && !!end && model != end;\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * @internal\n */\nexport function alignTable(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.AlignCenter\n        | TableOperation.AlignLeft\n        | TableOperation.AlignRight\n        | CompatibleTableOperation.AlignCenter\n        | CompatibleTableOperation.AlignLeft\n        | CompatibleTableOperation.AlignRight\n) {\n    table.format.marginLeft = operation == TableOperation.AlignLeft ? '' : 'auto';\n    table.format.marginRight = operation == TableOperation.AlignRight ? '' : 'auto';\n\n    delete table.cachedElement;\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\nconst TextAlignValueMap: Partial<Record<TableOperation, 'start' | 'center' | 'end'>> = {\n    [TableOperation.AlignCellLeft]: 'start',\n    [TableOperation.AlignCellCenter]: 'center',\n    [TableOperation.AlignCellRight]: 'end',\n};\n\nconst VerticalAlignValueMap: Partial<Record<TableOperation, 'top' | 'middle' | 'bottom'>> = {\n    [TableOperation.AlignCellTop]: 'top',\n    [TableOperation.AlignCellMiddle]: 'middle',\n    [TableOperation.AlignCellBottom]: 'bottom',\n};\n\n/**\n * @internal\n */\nexport function alignTableCell(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.AlignCellCenter\n        | TableOperation.AlignCellLeft\n        | TableOperation.AlignCellRight\n        | TableOperation.AlignCellTop\n        | TableOperation.AlignCellMiddle\n        | TableOperation.AlignCellBottom\n        | CompatibleTableOperation.AlignCellCenter\n        | CompatibleTableOperation.AlignCellLeft\n        | CompatibleTableOperation.AlignCellRight\n        | CompatibleTableOperation.AlignCellTop\n        | CompatibleTableOperation.AlignCellMiddle\n        | CompatibleTableOperation.AlignCellBottom\n) {\n    const sel = getSelectedCells(table);\n\n    if (sel) {\n        const textAlign = TextAlignValueMap[operation];\n        const verticalAlign = VerticalAlignValueMap[operation];\n\n        for (let rowIndex = sel.firstRow; rowIndex <= sel.lastRow; rowIndex++) {\n            for (let colIndex = sel.firstCol; colIndex <= sel.lastCol; colIndex++) {\n                const cell = table.rows[rowIndex]?.cells[colIndex];\n                const format = cell?.format;\n\n                if (format) {\n                    delete cell.cachedElement;\n\n                    format.textAlign = textAlign || format.textAlign;\n                    format.verticalAlign = verticalAlign || format.verticalAlign;\n                }\n            }\n        }\n    }\n}\n","import { BorderFormat } from '../../publicTypes/format/formatParts/BorderFormat';\nimport { BorderKeys } from '../../formatHandlers/common/borderFormatHandler';\nimport { combineBorderValue, extractBorderValues } from '../../domUtils/borderValues';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\nimport { setTableCellBackgroundColor } from './setTableCellBackgroundColor';\nimport { TableBorderFormat } from 'roosterjs-editor-types';\nimport { TableMetadataFormat } from '../../publicTypes/format/formatParts/TableMetadataFormat';\nimport { updateTableCellMetadata } from '../../domUtils/metadata/updateTableCellMetadata';\nimport { updateTableMetadata } from '../../domUtils/metadata/updateTableMetadata';\n\nconst DEFAULT_FORMAT: Required<TableMetadataFormat> = {\n    topBorderColor: '#ABABAB',\n    bottomBorderColor: '#ABABAB',\n    verticalBorderColor: '#ABABAB',\n    hasHeaderRow: false,\n    hasFirstColumn: false,\n    hasBandedRows: false,\n    hasBandedColumns: false,\n    bgColorEven: null,\n    bgColorOdd: '#ABABAB20',\n    headerRowColor: '#ABABAB',\n    tableBorderFormat: TableBorderFormat.DEFAULT,\n};\n\n/**\n * @internal\n */\nexport function applyTableFormat(\n    table: ContentModelTable,\n    newFormat?: TableMetadataFormat,\n    keepCellShade?: boolean\n) {\n    const { rows } = table;\n\n    updateTableMetadata(table, format => {\n        const effectiveMetadata = {\n            ...DEFAULT_FORMAT,\n            ...format,\n            ...(newFormat || {}),\n        };\n\n        const bgColorOverrides = updateBgColorOverrides(rows, !keepCellShade);\n\n        delete table.cachedElement;\n\n        clearCache(rows);\n        formatBorders(rows, effectiveMetadata);\n        formatBackgroundColors(rows, effectiveMetadata, bgColorOverrides);\n        setFirstColumnFormat(rows, effectiveMetadata, bgColorOverrides);\n        setHeaderRowFormat(rows, effectiveMetadata, bgColorOverrides);\n\n        return effectiveMetadata;\n    });\n}\n\nfunction clearCache(rows: ContentModelTableRow[]) {\n    rows.forEach(row => {\n        row.cells.forEach(cell => {\n            delete cell.cachedElement;\n        });\n\n        delete row.cachedElement;\n    });\n}\n\nfunction updateBgColorOverrides(rows: ContentModelTableRow[], forceClear: boolean): boolean[][] {\n    const result: boolean[][] = [];\n\n    rows.forEach(row => {\n        const currentRow: boolean[] = [];\n\n        result.push(currentRow);\n\n        row.cells.forEach(cell => {\n            updateTableCellMetadata(cell, metadata => {\n                if (metadata && forceClear) {\n                    currentRow.push(false);\n                    delete metadata.bgColorOverride;\n                } else {\n                    currentRow.push(!!metadata?.bgColorOverride);\n                }\n\n                return metadata;\n            });\n        });\n    });\n\n    return result;\n}\n\ntype ShouldUseTransparentBorder = (indexProp: {\n    firstRow: boolean;\n    lastRow: boolean;\n    firstColumn: boolean;\n    lastColumn: boolean;\n}) => [boolean, boolean, boolean, boolean];\n\nconst BorderFormatters: Record<TableBorderFormat, ShouldUseTransparentBorder> = {\n    [TableBorderFormat.DEFAULT]: _ => [false, false, false, false],\n    [TableBorderFormat.LIST_WITH_SIDE_BORDERS]: ({ lastColumn, firstColumn }) => [\n        false,\n        !lastColumn,\n        false,\n        !firstColumn,\n    ],\n    [TableBorderFormat.FIRST_COLUMN_HEADER_EXTERNAL]: ({\n        firstColumn,\n        firstRow,\n        lastColumn,\n        lastRow,\n    }) => [\n        !firstRow,\n        (!lastColumn && !firstColumn) || (firstColumn && firstRow),\n        !lastRow && !firstRow,\n        !firstColumn,\n    ],\n    [TableBorderFormat.NO_HEADER_BORDERS]: ({ firstRow, firstColumn, lastColumn }) => [\n        firstRow,\n        firstRow || lastColumn,\n        false,\n        firstRow || firstColumn,\n    ],\n    [TableBorderFormat.NO_SIDE_BORDERS]: ({ firstColumn, lastColumn }) => [\n        false,\n        lastColumn,\n        false,\n        firstColumn,\n    ],\n    [TableBorderFormat.ESPECIAL_TYPE_1]: ({ firstRow, firstColumn }) => [\n        firstColumn && !firstRow,\n        firstRow,\n        firstColumn && !firstRow,\n        firstRow && !firstColumn,\n    ],\n    [TableBorderFormat.ESPECIAL_TYPE_2]: ({ firstRow, firstColumn }) => [\n        !firstRow,\n        firstRow || !firstColumn,\n        !firstRow,\n        !firstColumn,\n    ],\n    [TableBorderFormat.ESPECIAL_TYPE_3]: ({ firstColumn, firstRow }) => [\n        true,\n        firstRow || !firstColumn,\n        !firstRow,\n        true,\n    ],\n    [TableBorderFormat.CLEAR]: () => [true, true, true, true],\n};\n\nfunction formatBorders(rows: ContentModelTableRow[], format: TableMetadataFormat) {\n    rows.forEach((row, rowIndex) => {\n        row.cells.forEach((cell, cellIndex) => {\n            const transparentBorderMatrix = BorderFormatters[\n                format.tableBorderFormat as TableBorderFormat\n            ]({\n                firstRow: rowIndex === 0,\n                lastRow: rowIndex === rows.length - 1,\n                firstColumn: cellIndex === 0,\n                lastColumn: cellIndex === row.cells.length - 1,\n            });\n\n            const formatColor = [\n                format.topBorderColor,\n                format.verticalBorderColor,\n                format.bottomBorderColor,\n                format.verticalBorderColor,\n            ];\n\n            transparentBorderMatrix.forEach((alwaysUseTransparent, i) => {\n                const borderColor = (!alwaysUseTransparent && formatColor[i]) || '';\n\n                cell.format[BorderKeys[i]] = combineBorderValue({\n                    style: getBorderStyleFromColor(borderColor),\n                    width: '1px',\n                    color: borderColor,\n                });\n            });\n        });\n    });\n}\n\nfunction formatBackgroundColors(\n    rows: ContentModelTableRow[],\n    format: TableMetadataFormat,\n    bgColorOverrides: boolean[][]\n) {\n    const { hasBandedRows, hasBandedColumns, bgColorOdd, bgColorEven } = format;\n\n    rows.forEach((row, rowIndex) => {\n        row.cells.forEach((cell, colIndex) => {\n            if (!bgColorOverrides[rowIndex][colIndex]) {\n                const color =\n                    hasBandedRows || hasBandedColumns\n                        ? (hasBandedColumns && colIndex % 2 != 0) ||\n                          (hasBandedRows && rowIndex % 2 != 0)\n                            ? bgColorOdd\n                            : bgColorEven\n                        : bgColorEven;\n\n                setTableCellBackgroundColor(cell, color);\n            }\n        });\n    });\n}\n\nfunction setFirstColumnFormat(\n    rows: ContentModelTableRow[],\n    format: Partial<TableMetadataFormat>,\n    bgColorOverrides: boolean[][]\n) {\n    rows.forEach((row, rowIndex) => {\n        row.cells.forEach((cell, cellIndex) => {\n            if (format.hasFirstColumn && cellIndex === 0) {\n                cell.isHeader = true;\n\n                if (rowIndex !== 0 && !bgColorOverrides[rowIndex][cellIndex]) {\n                    setBorderColor(cell.format, 'borderTop');\n                    setTableCellBackgroundColor(cell, null /*color*/);\n                }\n\n                if (rowIndex !== rows.length - 1 && rowIndex !== 0) {\n                    setBorderColor(cell.format, 'borderBottom');\n                }\n            } else {\n                cell.isHeader = false;\n            }\n        });\n    });\n}\n\nfunction setHeaderRowFormat(\n    rows: ContentModelTableRow[],\n    format: TableMetadataFormat,\n    bgColorOverrides: boolean[][]\n) {\n    const rowIndex = 0;\n\n    rows[rowIndex]?.cells.forEach((cell, cellIndex) => {\n        cell.isHeader = format.hasHeaderRow;\n\n        if (format.hasHeaderRow && format.headerRowColor) {\n            if (!bgColorOverrides[rowIndex][cellIndex]) {\n                setTableCellBackgroundColor(cell, format.headerRowColor);\n            }\n\n            setBorderColor(cell.format, 'borderTop', format.headerRowColor);\n            setBorderColor(cell.format, 'borderRight', format.headerRowColor);\n            setBorderColor(cell.format, 'borderLeft', format.headerRowColor);\n        }\n    });\n}\n\nfunction setBorderColor(format: BorderFormat, key: keyof BorderFormat, value?: string) {\n    const border = extractBorderValues(format[key]);\n    border.color = value || '';\n    border.style = getBorderStyleFromColor(border.color);\n    format[key] = combineBorderValue(border);\n}\n\nfunction getBorderStyleFromColor(color?: string): string {\n    return !color || color == 'transparent' ? 'none' : 'solid';\n}\n","import { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\n\n/**\n * @internal\n */\nexport function canMergeCells(\n    rows: ContentModelTableRow[],\n    firstRow: number,\n    firstCol: number,\n    lastRow: number,\n    lastCol: number\n): boolean {\n    const noSpanAbove =\n        firstCol == lastCol ||\n        rows[firstRow].cells.every(\n            (cell, colIndex) => colIndex < firstCol || colIndex > lastCol || !cell.spanAbove\n        );\n    const noSpanLeft =\n        firstRow == lastRow ||\n        rows.every(\n            (row, rowIndex) =>\n                rowIndex < firstRow || rowIndex > lastRow || !row.cells[firstCol].spanLeft\n        );\n\n    const noDifferentBelowSpan = rows[lastRow].cells\n        .map((_, colIndex) =>\n            colIndex >= firstCol && colIndex <= lastCol\n                ? getBelowSpanCount(rows, lastRow, colIndex)\n                : -1\n        )\n        .every((x, _, a) => x < 0 || x == a[firstCol]);\n    const noDifferentRightSpan = rows\n        .map((_, rowIndex) =>\n            rowIndex >= firstRow && rowIndex <= lastRow\n                ? getRightSpanCount(rows, rowIndex, lastCol)\n                : -1\n        )\n        .every((x, _, a) => x < 0 || x == a[firstRow]);\n\n    return noSpanAbove && noSpanLeft && noDifferentBelowSpan && noDifferentRightSpan;\n}\n\nfunction getBelowSpanCount(rows: ContentModelTableRow[], rowIndex: number, colIndex: number) {\n    let spanCount = 0;\n\n    for (let row = rowIndex + 1; row < rows.length; row++) {\n        if (rows[row]?.cells[colIndex]?.spanAbove) {\n            spanCount++;\n        } else {\n            break;\n        }\n    }\n\n    return spanCount;\n}\n\nfunction getRightSpanCount(rows: ContentModelTableRow[], rowIndex: number, colIndex: number) {\n    let spanCount = 0;\n\n    for (let col = colIndex + 1; col < rows[rowIndex]?.cells.length; col++) {\n        if (rows[rowIndex]?.cells[col]?.spanLeft) {\n            spanCount++;\n        } else {\n            break;\n        }\n    }\n\n    return spanCount;\n}\n","import { addBlock } from '../common/addBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createTable } from '../creators/createTable';\nimport { createTableCell } from '../creators/createTableCell';\n\n/**\n * @internal\n */\nexport function createTableStructure(\n    parent: ContentModelBlockGroup,\n    columns: number,\n    rows: number\n): ContentModelTable {\n    const table = createTable(rows);\n\n    addBlock(parent, table);\n\n    table.rows.forEach(row => {\n        for (let i = 0; i < columns; i++) {\n            const cell = createTableCell();\n\n            row.cells.push(cell);\n        }\n    });\n\n    return table;\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\n\n/**\n * @internal\n */\nexport function deleteTable(table: ContentModelTable) {\n    table.rows = [];\n    delete table.cachedElement;\n}\n","import { collapseTableSelection } from '../selection/collapseTableSelection';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\n\n/**\n * @internal\n */\nexport function deleteTableColumn(table: ContentModelTable) {\n    const sel = getSelectedCells(table);\n\n    if (sel) {\n        for (let rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            const cellInNextCol = table.rows[rowIndex].cells[sel.lastCol + 1];\n\n            if (cellInNextCol) {\n                cellInNextCol.spanLeft =\n                    cellInNextCol.spanLeft && table.rows[rowIndex].cells[sel.firstCol].spanLeft;\n            }\n\n            table.rows[rowIndex].cells.splice(sel.firstCol, sel.lastCol - sel.firstCol + 1);\n        }\n\n        table.widths.splice(sel.firstCol, sel.lastCol - sel.firstCol + 1);\n        collapseTableSelection(table.rows, sel);\n    }\n}\n","import { collapseTableSelection } from '../selection/collapseTableSelection';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\n\n/**\n * @internal\n */\nexport function deleteTableRow(table: ContentModelTable) {\n    const sel = getSelectedCells(table);\n\n    if (sel) {\n        table.rows[sel.firstRow].cells.forEach((cell, colIndex) => {\n            const cellInNextRow = table.rows[sel.lastRow + 1]?.cells[colIndex];\n\n            if (cellInNextRow) {\n                cellInNextRow.spanAbove = cellInNextRow.spanAbove && cell.spanAbove;\n            }\n        });\n\n        table.rows.splice(sel.firstRow, sel.lastRow - sel.firstRow + 1);\n\n        collapseTableSelection(table.rows, sel);\n    }\n}\n","import hasSelectionInBlockGroup from '../../publicApi/selection/hasSelectionInBlockGroup';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\n\n/**\n * @internal\n */\nexport interface TableSelectionCoordinates {\n    firstRow: number;\n    firstCol: number;\n    lastRow: number;\n    lastCol: number;\n}\n\n/**\n * @internal\n */\nexport function getSelectedCells(table: ContentModelTable): TableSelectionCoordinates | null {\n    let firstRow = -1;\n    let firstCol = -1;\n    let lastRow = -1;\n    let lastCol = -1;\n    let hasSelection = false;\n\n    table.rows.forEach((row, rowIndex) =>\n        row.cells.forEach((cell, colIndex) => {\n            if (hasSelectionInBlockGroup(cell)) {\n                hasSelection = true;\n\n                if (firstRow < 0) {\n                    firstRow = rowIndex;\n                }\n\n                if (firstCol < 0) {\n                    firstCol = colIndex;\n                }\n\n                lastRow = Math.max(lastRow, rowIndex);\n                lastCol = Math.max(lastCol, colIndex);\n            }\n        })\n    );\n\n    return hasSelection ? { firstRow, firstCol, lastRow, lastCol } : null;\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createTableCell } from '../creators/createTableCell';\nimport { getSelectedCells } from './getSelectedCells';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * @internal\n */\nexport function insertTableColumn(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.InsertLeft\n        | TableOperation.InsertRight\n        | CompatibleTableOperation.InsertLeft\n        | CompatibleTableOperation.InsertRight\n) {\n    const sel = getSelectedCells(table);\n    const insertLeft = operation == TableOperation.InsertLeft;\n\n    if (sel) {\n        for (let i = sel?.firstCol; i <= sel.lastCol; i++) {\n            table.rows.forEach(row => {\n                const cell = row.cells[insertLeft ? sel.firstCol : sel.lastCol];\n\n                row.cells.splice(\n                    insertLeft ? sel.firstCol : sel.lastCol + 1,\n                    0,\n                    createTableCell(cell.spanLeft, cell.spanAbove, cell.isHeader, cell.format)\n                );\n            });\n            table.widths.splice(\n                insertLeft ? sel.firstCol : sel.lastCol + 1,\n                0,\n                table.widths[insertLeft ? sel.firstCol : sel.lastCol]\n            );\n        }\n    }\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createTableCell } from '../creators/createTableCell';\nimport { getSelectedCells } from './getSelectedCells';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * @internal\n */\nexport function insertTableRow(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.InsertAbove\n        | TableOperation.InsertBelow\n        | CompatibleTableOperation.InsertAbove\n        | CompatibleTableOperation.InsertBelow\n) {\n    const sel = getSelectedCells(table);\n    const insertAbove = operation == TableOperation.InsertAbove;\n\n    if (sel) {\n        for (let i = sel.firstRow; i <= sel.lastRow; i++) {\n            const sourceRow = table.rows[insertAbove ? sel.firstRow : sel.lastRow];\n\n            table.rows.splice(insertAbove ? sel.firstRow : sel.lastRow + 1, 0, {\n                format: { ...sourceRow.format },\n                cells: sourceRow.cells.map(cell =>\n                    createTableCell(cell.spanLeft, cell.spanAbove, cell.isHeader, cell.format)\n                ),\n                height: sourceRow.height,\n            });\n        }\n    }\n}\n","import { canMergeCells } from './canMergeCells';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\n\n/**\n * @internal\n */\nexport function mergeTableCells(table: ContentModelTable) {\n    const sel = getSelectedCells(table);\n\n    if (sel && canMergeCells(table.rows, sel.firstRow, sel.firstCol, sel.lastRow, sel.lastCol)) {\n        for (let rowIndex = sel.firstRow; rowIndex <= sel.lastRow; rowIndex++) {\n            for (let colIndex = sel.firstCol; colIndex <= sel.lastCol; colIndex++) {\n                const cell = table.rows[rowIndex].cells[colIndex];\n\n                if (cell) {\n                    cell.spanLeft = colIndex > sel.firstCol;\n                    cell.spanAbove = rowIndex > sel.firstRow;\n\n                    delete cell.cachedElement;\n                }\n            }\n\n            delete table.rows[rowIndex].cachedElement;\n        }\n    }\n}\n","import { canMergeCells } from './canMergeCells';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * @internal\n */\nexport function mergeTableColumn(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.MergeLeft\n        | TableOperation.MergeRight\n        | CompatibleTableOperation.MergeLeft\n        | CompatibleTableOperation.MergeRight\n) {\n    const sel = getSelectedCells(table);\n    const mergeLeft = operation == TableOperation.MergeLeft;\n\n    if (sel) {\n        const mergingColIndex = mergeLeft ? sel.firstCol : sel.lastCol + 1;\n\n        if (mergingColIndex > 0 && mergingColIndex < table.rows[0].cells.length) {\n            for (let rowIndex = sel.firstRow; rowIndex <= sel.lastRow; rowIndex++) {\n                const cell = table.rows[rowIndex]?.cells[mergingColIndex];\n\n                if (\n                    cell &&\n                    canMergeCells(\n                        table.rows,\n                        rowIndex,\n                        mergingColIndex - 1,\n                        rowIndex,\n                        mergingColIndex\n                    )\n                ) {\n                    cell.spanLeft = true;\n\n                    let newSelectedCol = mergingColIndex;\n\n                    while (table.rows[rowIndex]?.cells[newSelectedCol]?.spanLeft) {\n                        delete table.rows[rowIndex].cells[newSelectedCol].cachedElement;\n                        newSelectedCol--;\n                    }\n\n                    if (table.rows[rowIndex]?.cells[newSelectedCol]) {\n                        table.rows[rowIndex].cells[newSelectedCol].isSelected = true;\n\n                        delete table.rows[rowIndex].cells[newSelectedCol].cachedElement;\n                    }\n\n                    delete cell.cachedElement;\n                }\n\n                delete table.rows[rowIndex].cachedElement;\n            }\n        }\n    }\n}\n","import { canMergeCells } from './canMergeCells';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { getSelectedCells } from './getSelectedCells';\nimport { TableOperation } from 'roosterjs-editor-types';\nimport type { CompatibleTableOperation } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * @internal\n */\nexport function mergeTableRow(\n    table: ContentModelTable,\n    operation:\n        | TableOperation.MergeAbove\n        | TableOperation.MergeBelow\n        | CompatibleTableOperation.MergeAbove\n        | CompatibleTableOperation.MergeBelow\n) {\n    const sel = getSelectedCells(table);\n    const mergeAbove = operation == TableOperation.MergeAbove;\n\n    if (sel) {\n        const mergingRowIndex = mergeAbove ? sel.firstRow : sel.lastRow + 1;\n\n        if (mergingRowIndex > 0 && mergingRowIndex < table.rows.length) {\n            for (let colIndex = sel.firstCol; colIndex <= sel.lastCol; colIndex++) {\n                const cell = table.rows[mergingRowIndex].cells[colIndex];\n\n                if (\n                    cell &&\n                    canMergeCells(\n                        table.rows,\n                        mergingRowIndex - 1,\n                        colIndex,\n                        mergingRowIndex,\n                        colIndex\n                    )\n                ) {\n                    cell.spanAbove = true;\n\n                    let newSelectedRow = mergingRowIndex;\n\n                    while (table.rows[newSelectedRow]?.cells[colIndex]?.spanAbove) {\n                        delete table.rows[newSelectedRow].cells[colIndex].cachedElement;\n                        delete table.rows[newSelectedRow].cachedElement;\n                        newSelectedRow--;\n                    }\n\n                    if (table.rows[newSelectedRow]?.cells[colIndex]) {\n                        table.rows[newSelectedRow].cells[colIndex].isSelected = true;\n\n                        delete table.rows[newSelectedRow].cells[colIndex].cachedElement;\n                        delete table.rows[newSelectedRow].cachedElement;\n                    }\n\n                    delete cell.cachedElement;\n                }\n            }\n        }\n    }\n}\n","import { addSegment } from '../common/addSegment';\nimport { arrayPush } from 'roosterjs-editor-dom';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { ContentModelTableCell } from '../../publicTypes/group/ContentModelTableCell';\nimport { createBr } from '../creators/createBr';\n\nconst MIN_HEIGHT = 22;\n\n/**\n * @internal\n */\nexport function normalizeTable(\n    table: ContentModelTable,\n    defaultSegmentFormat?: ContentModelSegmentFormat\n) {\n    // Always collapse border and use border box for table in roosterjs to make layout simpler\n    const format = table.format;\n\n    if (!format.borderCollapse || !format.useBorderBox) {\n        format.borderCollapse = true;\n        format.useBorderBox = true;\n    }\n\n    // Make sure all first cells are not spanned\n    // Make sure all inner cells are not header\n    // Make sure all cells have content and width\n    table.rows.forEach((row, rowIndex) => {\n        row.cells.forEach((cell, colIndex) => {\n            if (cell.blocks.length == 0) {\n                addSegment(cell, createBr(defaultSegmentFormat));\n            }\n\n            if (rowIndex == 0) {\n                cell.spanAbove = false;\n            } else if (rowIndex > 0 && cell.isHeader) {\n                cell.isHeader = false;\n                delete cell.cachedElement;\n            }\n\n            if (colIndex == 0) {\n                cell.spanLeft = false;\n            }\n\n            cell.format.useBorderBox = true;\n        });\n\n        // Make sure table has correct width and height array\n        if (row.height < MIN_HEIGHT) {\n            row.height = MIN_HEIGHT;\n        }\n    });\n\n    const columns = Math.max(...table.rows.map(row => row.cells.length));\n\n    for (let i = 0; i < columns; i++) {\n        if (table.widths[i] === undefined) {\n            table.widths[i] = getTableCellWidth(columns);\n        }\n    }\n\n    // Move blocks from spanned cell to its main cell if any,\n    // and remove rows/columns if all cells in it are spanned\n    const colCount = table.rows[0]?.cells.length || 0;\n\n    for (let colIndex = colCount - 1; colIndex > 0; colIndex--) {\n        table.rows.forEach(row => {\n            const cell = row.cells[colIndex];\n            const leftCell = row.cells[colIndex - 1];\n            if (cell && leftCell && cell.spanLeft) {\n                tryMoveBlocks(leftCell, cell);\n            }\n        });\n\n        if (table.rows.every(row => row.cells[colIndex]?.spanLeft)) {\n            table.rows.forEach(row => row.cells.splice(colIndex, 1));\n            table.widths.splice(\n                colIndex - 1,\n                2,\n                table.widths[colIndex - 1] + table.widths[colIndex]\n            );\n        }\n    }\n\n    for (let rowIndex = table.rows.length - 1; rowIndex > 0; rowIndex--) {\n        const row = table.rows[rowIndex];\n\n        row.cells.forEach((cell, colIndex) => {\n            const aboveCell = table.rows[rowIndex - 1]?.cells[colIndex];\n            if (aboveCell && cell.spanAbove) {\n                tryMoveBlocks(aboveCell, cell);\n            }\n        });\n\n        if (row.cells.every(cell => cell.spanAbove)) {\n            table.rows[rowIndex - 1].height += row.height;\n            table.rows.splice(rowIndex, 1);\n        }\n    }\n}\n\nfunction getTableCellWidth(columns: number): number {\n    if (columns <= 4) {\n        return 120;\n    } else if (columns <= 6) {\n        return 100;\n    } else {\n        return 70;\n    }\n}\n\nfunction tryMoveBlocks(targetCell: ContentModelTableCell, sourceCell: ContentModelTableCell) {\n    const onlyHasEmptyOrBr = sourceCell.blocks.every(\n        block => block.blockType == 'Paragraph' && hasOnlyBrSegment(block.segments)\n    );\n\n    if (!onlyHasEmptyOrBr) {\n        arrayPush(targetCell.blocks, sourceCell.blocks);\n        sourceCell.blocks = [];\n    }\n}\n\nfunction hasOnlyBrSegment(segments: ContentModelSegment[]): boolean {\n    segments = segments.filter(s => s.segmentType != 'SelectionMarker');\n\n    return segments.length == 0 || (segments.length == 1 && segments[0].segmentType == 'Br');\n}\n","import { ContentModelTableCell } from '../../publicTypes/group/ContentModelTableCell';\nimport { parseColor } from 'roosterjs-editor-dom';\nimport { updateTableCellMetadata } from '../../domUtils/metadata/updateTableCellMetadata';\n\n// Using the HSL (hue, saturation and lightness) representation for RGB color values.\n// If the value of the lightness is less than 20, the color is dark.\n// If the value of the lightness is more than 80, the color is bright\nconst DARK_COLORS_LIGHTNESS = 20;\nconst BRIGHT_COLORS_LIGHTNESS = 80;\nconst White = '#ffffff';\nconst Black = '#000000';\n\n/**\n * @internal\n */\nexport function setTableCellBackgroundColor(\n    cell: ContentModelTableCell,\n    color: string | null | undefined,\n    isColorOverride?: boolean\n) {\n    if (color) {\n        cell.format.backgroundColor = color;\n\n        if (isColorOverride) {\n            updateTableCellMetadata(cell, metadata => {\n                metadata = metadata || {};\n                metadata.bgColorOverride = true;\n                return metadata;\n            });\n        }\n\n        const lightness = calculateLightness(color);\n\n        if (lightness < DARK_COLORS_LIGHTNESS) {\n            cell.format.textColor = White;\n        } else if (lightness > BRIGHT_COLORS_LIGHTNESS) {\n            cell.format.textColor = Black;\n        } else {\n            delete cell.format.textColor;\n        }\n    } else {\n        delete cell.format.backgroundColor;\n        delete cell.format.textColor;\n    }\n\n    delete cell.cachedElement;\n}\n\nfunction calculateLightness(color: string) {\n    const colorValues = parseColor(color);\n\n    // Use the values of r,g,b to calculate the lightness in the HSl representation\n    //First calculate the fraction of the light in each color, since in css the value of r,g,b is in the interval of [0,255], we have\n    if (colorValues) {\n        const red = colorValues[0] / 255;\n        const green = colorValues[1] / 255;\n        const blue = colorValues[2] / 255;\n\n        //Then the lightness in the HSL representation is the average between maximum fraction of r,g,b and the minimum fraction\n        return (Math.max(red, green, blue) + Math.min(red, green, blue)) * 50;\n    } else {\n        return 255;\n    }\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { createTableCell } from '../creators/createTableCell';\nimport { getSelectedCells } from './getSelectedCells';\n\nconst MIN_WIDTH = 30;\n\n/**\n * @internal\n */\nexport function splitTableCellHorizontally(table: ContentModelTable) {\n    const sel = getSelectedCells(table);\n\n    if (sel) {\n        for (let colIndex = sel.lastCol; colIndex >= sel.firstCol; colIndex--) {\n            if (\n                table.rows.every(\n                    (row, rowIndex) =>\n                        rowIndex < sel.firstRow ||\n                        rowIndex > sel.lastRow ||\n                        row.cells[colIndex + 1]?.spanLeft\n                )\n            ) {\n                table.rows.forEach((row, rowIndex) => {\n                    delete row.cells[colIndex].cachedElement;\n\n                    if (rowIndex >= sel.firstRow && rowIndex <= sel.lastRow) {\n                        row.cells[colIndex + 1].spanLeft = false;\n                        delete row.cells[colIndex + 1].cachedElement;\n                    }\n                });\n            } else {\n                table.rows.forEach((row, rowIndex) => {\n                    const cell = row.cells[colIndex];\n                    if (cell) {\n                        const newCell = createTableCell(\n                            cell.spanLeft,\n                            cell.spanAbove,\n                            cell.isHeader,\n                            cell.format\n                        );\n\n                        newCell.dataset = { ...cell.dataset };\n\n                        if (rowIndex < sel.firstRow || rowIndex > sel.lastRow) {\n                            newCell.spanLeft = true;\n                        } else {\n                            newCell.isSelected = cell.isSelected;\n                        }\n                        row.cells.splice(colIndex + 1, 0, newCell);\n\n                        delete row.cells[colIndex].cachedElement;\n                    }\n                });\n\n                const newWidth = Math.max(table.widths[colIndex] / 2, MIN_WIDTH);\n\n                table.widths.splice(colIndex, 1, newWidth, newWidth);\n            }\n        }\n    }\n}\n","import { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { ContentModelTableRow } from '../../publicTypes/block/ContentModelTableRow';\nimport { createTableCell } from '../creators/createTableCell';\nimport { getSelectedCells } from './getSelectedCells';\n\nconst MIN_HEIGHT = 22;\n\n/**\n * @internal\n */\nexport function splitTableCellVertically(table: ContentModelTable) {\n    const sel = getSelectedCells(table);\n\n    if (sel) {\n        for (let rowIndex = sel.lastRow; rowIndex >= sel.firstRow; rowIndex--) {\n            const row = table.rows[rowIndex];\n            const belowRow = table.rows[rowIndex + 1];\n\n            row.cells.forEach(cell => {\n                delete cell.cachedElement;\n            });\n\n            delete row.cachedElement;\n\n            if (\n                belowRow?.cells.every(\n                    (belowCell, colIndex) =>\n                        colIndex < sel.firstCol || colIndex > sel.lastCol || belowCell.spanAbove\n                )\n            ) {\n                belowRow.cells.forEach((belowCell, colIndex) => {\n                    if (colIndex >= sel.firstCol && colIndex <= sel.lastCol) {\n                        belowCell.spanAbove = false;\n                        delete belowCell.cachedElement;\n                    }\n                });\n\n                delete belowRow.cachedElement;\n            } else {\n                const newHeight = Math.max((row.height /= 2), MIN_HEIGHT);\n                const newRow: ContentModelTableRow = {\n                    format: { ...row.format },\n                    height: newHeight,\n                    cells: row.cells.map((cell, colIndex) => {\n                        const newCell = createTableCell(\n                            cell.spanLeft,\n                            cell.spanAbove,\n                            cell.isHeader,\n                            cell.format\n                        );\n\n                        newCell.dataset = { ...cell.dataset };\n\n                        if (colIndex < sel.firstCol || colIndex > sel.lastCol) {\n                            newCell.spanAbove = true;\n                        } else {\n                            newCell.isSelected = cell.isSelected;\n                        }\n\n                        return newCell;\n                    }),\n                };\n\n                row.height = newHeight;\n                table.rows.splice(rowIndex + 1, 0, newRow);\n            }\n        }\n    }\n}\n","import { ContentModelDocument } from '../publicTypes/group/ContentModelDocument';\nimport { createModelToDomContext } from './context/createModelToDomContext';\nimport { createRange, Position, toArray } from 'roosterjs-editor-dom';\nimport { EditorContext } from '../publicTypes/context/EditorContext';\nimport { isNodeOfType } from '../domUtils/isNodeOfType';\nimport { ModelToDomBlockAndSegmentNode } from '../publicTypes/context/ModelToDomSelectionContext';\nimport { ModelToDomContext } from '../publicTypes/context/ModelToDomContext';\nimport { ModelToDomOption } from '../publicTypes/IContentModelEditor';\nimport {\n    NodePosition,\n    NodeType,\n    SelectionRangeEx,\n    SelectionRangeTypes,\n} from 'roosterjs-editor-types';\n\n/**\n * Create DOM tree fragment from Content Model document\n * @param doc Document object of the target DOM tree\n * @param root Target node that will become the container of new DOM tree.\n * When a DOM node with existing node is passed, it will be merged with content model so that unchanged blocks\n * won't be touched.\n * @param model The content model document to generate DOM tree from\n * @param editorContext Content for Content Model editor\n * @param option Additional options to customize the behavior of Content Model to DOM conversion\n * @returns A tuple of the following 3 objects:\n * 1. Document Fragment that contains the DOM tree generated from the given model\n * 2. A SelectionRangeEx object that contains selection info from the model if any, or null\n * 3. An array entity DOM wrapper and its placeholder node pair for reusable root level entities.\n */\nexport default function contentModelToDom(\n    doc: Document,\n    root: Node,\n    model: ContentModelDocument,\n    editorContext: EditorContext,\n    option?: ModelToDomOption\n): SelectionRangeEx | null {\n    const modelToDomContext = createModelToDomContext(editorContext, option);\n\n    modelToDomContext.modelHandlers.blockGroupChildren(doc, root, model, modelToDomContext);\n\n    const range = extractSelectionRange(modelToDomContext);\n\n    root.normalize();\n\n    return range;\n}\n\nfunction extractSelectionRange(context: ModelToDomContext): SelectionRangeEx | null {\n    const {\n        regularSelection: { start, end },\n        tableSelection,\n        imageSelection,\n    } = context;\n\n    let startPosition: NodePosition | undefined;\n    let endPosition: NodePosition | undefined;\n\n    if (imageSelection?.image) {\n        return {\n            type: SelectionRangeTypes.ImageSelection,\n            ranges: [createRange(imageSelection.image)],\n            areAllCollapsed: false,\n            image: imageSelection.image,\n        };\n    } else if (\n        (startPosition = start && calcPosition(start)) &&\n        (endPosition = end && calcPosition(end))\n    ) {\n        const range = createRange(startPosition, endPosition);\n\n        return {\n            type: SelectionRangeTypes.Normal,\n            ranges: [createRange(startPosition, endPosition)],\n            areAllCollapsed: range.collapsed,\n        };\n    } else if (tableSelection?.table) {\n        return {\n            type: SelectionRangeTypes.TableSelection,\n            ranges: [],\n            areAllCollapsed: false,\n            table: tableSelection.table,\n            coordinates: {\n                firstCell: tableSelection.firstCell,\n                lastCell: tableSelection.lastCell,\n            },\n        };\n    } else {\n        return null;\n    }\n}\n\nfunction calcPosition(pos: ModelToDomBlockAndSegmentNode): NodePosition | undefined {\n    let result: NodePosition | undefined;\n\n    if (pos.block) {\n        if (!pos.segment) {\n            result = new Position(pos.block, 0);\n        } else if (isNodeOfType(pos.segment, NodeType.Text)) {\n            result = new Position(pos.segment, pos.segment.nodeValue?.length || 0);\n        } else {\n            result = new Position(\n                pos.segment.parentNode!,\n                toArray(pos.segment.parentNode!.childNodes as NodeListOf<Node>).indexOf(\n                    pos.segment!\n                ) + 1\n            );\n        }\n    }\n\n    if (isNodeOfType(result?.node, NodeType.DocumentFragment)) {\n        result = result?.normalize();\n    }\n\n    return result;\n}\n","import { defaultContentModelHandlers } from './defaultContentModelHandlers';\nimport { defaultImplicitFormatMap } from '../../formatHandlers/utils/defaultStyles';\nimport { EditorContext } from '../../publicTypes/context/EditorContext';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { ModelToDomOption } from '../../publicTypes/IContentModelEditor';\nimport {\n    defaultFormatAppliers,\n    getFormatAppliers,\n} from '../../formatHandlers/defaultFormatHandlers';\n\n/**\n * @internal\n * @param editorContext\n * @returns\n */\nexport function createModelToDomContext(\n    editorContext?: EditorContext,\n    options?: ModelToDomOption\n): ModelToDomContext {\n    options = options || {};\n\n    return {\n        ...(editorContext || {\n            isDarkMode: false,\n        }),\n        regularSelection: {\n            current: {\n                block: null,\n                segment: null,\n            },\n        },\n        listFormat: {\n            threadItemCounts: [],\n            nodeStack: [],\n        },\n        implicitFormat: {},\n        formatAppliers: getFormatAppliers(\n            options.formatApplierOverride,\n            options.additionalFormatAppliers\n        ),\n        modelHandlers: {\n            ...defaultContentModelHandlers,\n            ...(options.modelHandlerOverride || {}),\n        },\n        defaultImplicitFormatMap: {\n            ...defaultImplicitFormatMap,\n            ...(options.defaultImplicitFormatOverride || {}),\n        },\n\n        defaultModelHandlers: defaultContentModelHandlers,\n        defaultFormatAppliers: defaultFormatAppliers,\n        onNodeCreated: options.onNodeCreated,\n    };\n}\n","import { ContentModelHandlerMap } from '../../publicTypes/context/ModelToDomSettings';\nimport { handleBlock } from '../handlers/handleBlock';\nimport { handleBlockGroupChildren } from '../handlers/handleBlockGroupChildren';\nimport { handleBr } from '../handlers/handleBr';\nimport { handleDivider } from '../handlers/handleDivider';\nimport { handleEntity } from '../handlers/handleEntity';\nimport { handleFormatContainer } from '../handlers/handleFormatContainer';\nimport { handleGeneralModel } from '../handlers/handleGeneralModel';\nimport { handleImage } from '../handlers/handleImage';\nimport { handleList } from '../handlers/handleList';\nimport { handleListItem } from '../handlers/handleListItem';\nimport { handleParagraph } from '../handlers/handleParagraph';\nimport { handleSegment } from '../handlers/handleSegment';\nimport { handleSegmentDecorator } from '../handlers/handleSegmentDecorator';\nimport { handleTable } from '../handlers/handleTable';\nimport { handleText } from '../handlers/handleText';\n\n/**\n * @internal\n */\nexport const defaultContentModelHandlers: ContentModelHandlerMap = {\n    block: handleBlock,\n    blockGroupChildren: handleBlockGroupChildren,\n    br: handleBr,\n    entity: handleEntity,\n    general: handleGeneralModel,\n    divider: handleDivider,\n    image: handleImage,\n    list: handleList,\n    listItem: handleListItem,\n    paragraph: handleParagraph,\n    formatContainer: handleFormatContainer,\n    segment: handleSegment,\n    segmentDecorator: handleSegmentDecorator,\n    table: handleTable,\n    text: handleText,\n};\n","import { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport const handleBlock: ContentModelBlockHandler<ContentModelBlock> = (\n    doc: Document,\n    parent: Node,\n    block: ContentModelBlock,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    const handlers = context.modelHandlers;\n\n    switch (block.blockType) {\n        case 'Table':\n            refNode = handlers.table(doc, parent, block, context, refNode);\n            break;\n        case 'Paragraph':\n            refNode = handlers.paragraph(doc, parent, block, context, refNode);\n            break;\n        case 'Entity':\n            refNode = handlers.entity(doc, parent, block, context, refNode);\n            break;\n        case 'Divider':\n            refNode = handlers.divider(doc, parent, block, context, refNode);\n            break;\n        case 'BlockGroup':\n            switch (block.blockGroupType) {\n                case 'General':\n                    refNode = handlers.general(doc, parent, block, context, refNode);\n                    break;\n\n                case 'FormatContainer':\n                    refNode = handlers.formatContainer(doc, parent, block, context, refNode);\n                    break;\n\n                case 'ListItem':\n                    refNode = handlers.listItem(doc, parent, block, context, refNode);\n                    break;\n            }\n\n            break;\n    }\n\n    return refNode;\n};\n","import { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport const handleBlockGroupChildren: ContentModelHandler<ContentModelBlockGroup> = (\n    doc: Document,\n    parent: Node,\n    group: ContentModelBlockGroup,\n    context: ModelToDomContext\n) => {\n    const { listFormat } = context;\n    const nodeStack = listFormat.nodeStack;\n    let refNode: Node | null = parent.firstChild;\n\n    try {\n        group.blocks.forEach((childBlock, index) => {\n            // When process list, we need a node stack.\n            // When there are two continuous lists, they should share the same stack\n            // so that list items with same type/threadId can be merged into the same list element\n            // In other cases, clear the stack so that two separate lists won't share the same list element\n            if (\n                index == 0 ||\n                childBlock.blockType != 'BlockGroup' ||\n                childBlock.blockGroupType != 'ListItem'\n            ) {\n                listFormat.nodeStack = [];\n            }\n\n            refNode = context.modelHandlers.block(doc, parent, childBlock, context, refNode);\n        });\n\n        // Remove all rest node if any since they don't appear in content model\n        while (refNode) {\n            const next = refNode.nextSibling;\n\n            refNode.parentNode?.removeChild(refNode);\n            refNode = next;\n        }\n    } finally {\n        listFormat.nodeStack = nodeStack;\n    }\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBr } from '../../publicTypes/segment/ContentModelBr';\nimport { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport const handleBr: ContentModelHandler<ContentModelBr> = (\n    doc: Document,\n    parent: Node,\n    segment: ContentModelBr,\n    context: ModelToDomContext\n) => {\n    const br = doc.createElement('br');\n    const element = doc.createElement('span');\n    element.appendChild(br);\n    parent.appendChild(element);\n\n    context.regularSelection.current.segment = br;\n    applyFormat(element, context.formatAppliers.segment, segment.format, context);\n\n    context.modelHandlers.segmentDecorator(doc, element, segment, context);\n    context.onNodeCreated?.(segment, br);\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelDivider } from '../../publicTypes/block/ContentModelDivider';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\n\n/**\n * @internal\n */\nexport const handleDivider: ContentModelBlockHandler<ContentModelDivider> = (\n    doc: Document,\n    parent: Node,\n    divider: ContentModelDivider,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    let element = divider.cachedElement;\n\n    if (element) {\n        refNode = reuseCachedElement(parent, element, refNode);\n    } else {\n        element = doc.createElement(divider.tagName);\n\n        divider.cachedElement = element;\n        parent.insertBefore(element, refNode);\n\n        applyFormat(element, context.formatAppliers.divider, divider.format, context);\n\n        if (divider.size) {\n            element.setAttribute('size', divider.size);\n        }\n    }\n\n    context.onNodeCreated?.(divider, element);\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelEntity } from '../../publicTypes/entity/ContentModelEntity';\nimport { Entity } from 'roosterjs-editor-types';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\nimport {\n    addDelimiters,\n    commitEntity,\n    getObjectKeys,\n    isBlockElement,\n    wrap,\n} from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const handleEntity: ContentModelBlockHandler<ContentModelEntity> = (\n    doc: Document,\n    parent: Node,\n    entityModel: ContentModelEntity,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    const { wrapper, id, type, isReadonly, format } = entityModel;\n    const entity: Entity | null =\n        id && type\n            ? {\n                  wrapper,\n                  id,\n                  type,\n                  isReadonly: !!isReadonly,\n              }\n            : null;\n    const isInlineEntity = !isBlockElement(wrapper);\n\n    if (entity) {\n        // Commit the entity attributes in case there is any change\n        commitEntity(wrapper, entity.type, entity.isReadonly, entity.id);\n    }\n\n    refNode = reuseCachedElement(parent, wrapper, refNode);\n\n    if (isInlineEntity && getObjectKeys(format).length > 0) {\n        const span = wrap(wrapper, 'span');\n\n        applyFormat(span, context.formatAppliers.segment, format, context);\n    }\n\n    if (context.addDelimiterForEntity && isInlineEntity && isReadonly) {\n        const [after] = addDelimiters(wrapper);\n\n        context.regularSelection.current.segment = after;\n    }\n\n    context.onNodeCreated?.(entityModel, wrapper);\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelFormatContainer } from '../../publicTypes/group/ContentModelFormatContainer';\nimport { isBlockGroupEmpty } from '../../modelApi/common/isEmpty';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { PseudoTagNames } from '../../formatHandlers/utils/defaultStyles';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const handleFormatContainer: ContentModelBlockHandler<ContentModelFormatContainer> = (\n    doc: Document,\n    parent: Node,\n    container: ContentModelFormatContainer,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    let element = container.cachedElement;\n\n    if (element) {\n        refNode = reuseCachedElement(parent, element, refNode);\n\n        context.modelHandlers.blockGroupChildren(doc, element, container, context);\n    } else if (!isBlockGroupEmpty(container)) {\n        const containerNode = doc.createElement(container.tagName);\n\n        container.cachedElement = containerNode;\n        parent.insertBefore(containerNode, refNode);\n\n        stackFormat(context, container.tagName, () => {\n            applyFormat(containerNode, context.formatAppliers.container, container.format, context);\n            applyFormat(\n                containerNode,\n                context.formatAppliers.segmentOnBlock,\n                container.format,\n                context\n            );\n\n            applyFormat(containerNode, context.formatAppliers.container, container.format, context);\n        });\n\n        if (container.tagName == 'pre') {\n            stackFormat(context, PseudoTagNames.childOfPre, () => {\n                context.modelHandlers.blockGroupChildren(doc, containerNode, container, context);\n            });\n        } else {\n            context.modelHandlers.blockGroupChildren(doc, containerNode, container, context);\n        }\n\n        element = containerNode;\n    }\n\n    if (element) {\n        context.onNodeCreated?.(container, element);\n    }\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelGeneralBlock } from '../../publicTypes/group/ContentModelGeneralBlock';\nimport { isGeneralSegment } from '../../modelApi/common/isGeneralSegment';\nimport { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { NodeType } from 'roosterjs-editor-types';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\nimport { wrap } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const handleGeneralModel: ContentModelBlockHandler<ContentModelGeneralBlock> = (\n    doc: Document,\n    parent: Node,\n    group: ContentModelGeneralBlock,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    let element: Node = group.element;\n\n    if (refNode && element.parentNode == parent) {\n        refNode = reuseCachedElement(parent, element, refNode);\n    } else {\n        element = element.cloneNode();\n        group.element = element as HTMLElement;\n\n        parent.insertBefore(element, refNode);\n    }\n\n    if (isGeneralSegment(group) && isNodeOfType(element, NodeType.Element)) {\n        if (!group.element.firstChild) {\n            context.regularSelection.current.segment = element;\n        }\n\n        const span = wrap(element, 'span');\n\n        applyFormat(span, context.formatAppliers.segment, group.format, context);\n\n        context.modelHandlers.segmentDecorator(doc, span, group, context);\n    }\n\n    context.modelHandlers.blockGroupChildren(doc, element, group, context);\n\n    context.onNodeCreated?.(group, element);\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { parseValueWithUnit } from '../../formatHandlers/utils/parseValueWithUnit';\n\n/**\n * @internal\n */\nexport const handleImage: ContentModelHandler<ContentModelImage> = (\n    doc: Document,\n    parent: Node,\n    imageModel: ContentModelImage,\n    context: ModelToDomContext\n) => {\n    const img = doc.createElement('img');\n    const element = document.createElement('span');\n\n    parent.appendChild(element);\n    element.appendChild(img);\n\n    img.src = imageModel.src;\n\n    if (imageModel.alt) {\n        img.alt = imageModel.alt;\n    }\n\n    if (imageModel.title) {\n        img.title = imageModel.title;\n    }\n\n    applyFormat(img, context.formatAppliers.image, imageModel.format, context);\n    applyFormat(img, context.formatAppliers.dataset, imageModel.dataset, context);\n\n    applyFormat(element, context.formatAppliers.segment, imageModel.format, context);\n\n    const { width, height } = imageModel.format;\n    const widthNum = width ? parseValueWithUnit(width) : 0;\n    const heightNum = height ? parseValueWithUnit(height) : 0;\n\n    if (widthNum > 0) {\n        img.width = widthNum;\n    }\n\n    if (heightNum > 0) {\n        img.height = heightNum;\n    }\n\n    context.modelHandlers.segmentDecorator(doc, element, imageModel, context);\n\n    context.regularSelection.current.segment = img;\n\n    if (imageModel.isSelectedAsImageSelection) {\n        context.imageSelection = {\n            image: img,\n        };\n    }\n\n    context.onNodeCreated?.(imageModel, img);\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ContentModelListItemLevelFormat } from '../../publicTypes/format/ContentModelListItemLevelFormat';\nimport { DatasetFormat } from '../../publicTypes/format/formatParts/DatasetFormat';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { updateListMetadata } from '../../domUtils/metadata/updateListMetadata';\n\n/**\n * @internal\n */\nexport const handleList: ContentModelBlockHandler<ContentModelListItem> = (\n    doc: Document,\n    parent: Node,\n    listItem: ContentModelListItem,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    let layer = 0;\n    const { nodeStack } = context.listFormat;\n\n    if (nodeStack.length == 0) {\n        nodeStack.push({\n            node: parent,\n        });\n    }\n\n    // Skip existing list levels that has same properties so we can reuse them\n    for (; layer < listItem.levels.length && layer + 1 < nodeStack.length; layer++) {\n        const stackLevel = nodeStack[layer + 1];\n        const itemLevel = listItem.levels[layer];\n\n        if (\n            stackLevel.listType != itemLevel.listType ||\n            stackLevel.orderedStyleType != itemLevel.orderedStyleType ||\n            stackLevel.unorderedStyleType != itemLevel.unorderedStyleType ||\n            (itemLevel.listType == 'OL' && typeof itemLevel.startNumberOverride === 'number')\n        ) {\n            break;\n        }\n    }\n\n    // Cut off remained list levels that we can't reuse\n    nodeStack.splice(layer + 1);\n\n    // Create new list levels that are after reused ones\n    for (; layer < listItem.levels.length; layer++) {\n        const level = listItem.levels[layer];\n        const newList = doc.createElement(level.listType || 'UL');\n        const lastParent = nodeStack[nodeStack.length - 1].node;\n\n        lastParent.insertBefore(newList, layer == 0 ? refNode : null);\n\n        applyFormat(newList, context.formatAppliers.listLevel, level, context);\n\n        handleMetadata(level, newList, context);\n\n        nodeStack.push({ node: newList, ...level });\n\n        context.onNodeCreated?.(level, newList);\n    }\n\n    return refNode;\n};\n\nfunction handleMetadata(\n    level: ContentModelListItemLevelFormat,\n    newList: HTMLElement,\n    context: ModelToDomContext\n) {\n    const dataset: DatasetFormat = {};\n\n    updateListMetadata({ dataset }, () =>\n        typeof level.orderedStyleType === 'number' || typeof level.unorderedStyleType === 'number'\n            ? {\n                  orderedStyleType: level.orderedStyleType,\n                  unorderedStyleType: level.unorderedStyleType,\n              }\n            : null\n    );\n    applyFormat(newList, context.formatAppliers.dataset, dataset, context);\n}\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelListItem } from '../../publicTypes/group/ContentModelListItem';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { setParagraphNotImplicit } from '../../modelApi/block/setParagraphNotImplicit';\nimport { unwrap } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n */\nexport const handleListItem: ContentModelBlockHandler<ContentModelListItem> = (\n    doc: Document,\n    parent: Node,\n    listItem: ContentModelListItem,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    refNode = context.modelHandlers.list(doc, parent, listItem, context, refNode);\n\n    const { nodeStack } = context.listFormat;\n\n    let listParent = nodeStack?.[nodeStack?.length - 1]?.node || parent;\n    const li = doc.createElement('li');\n    const level = listItem.levels[listItem.levels.length - 1];\n\n    // It is possible listParent is the same with parent param.\n    // This happens when outdent a list item to cause it has no list level\n    listParent.insertBefore(li, refNode?.parentNode == listParent ? refNode : null);\n\n    if (level) {\n        applyFormat(li, context.formatAppliers.listItemElement, listItem.format, context);\n        applyFormat(li, context.formatAppliers.segment, listItem.formatHolder.format, context);\n        applyFormat(li, context.formatAppliers.listItem, level, context);\n\n        context.modelHandlers.blockGroupChildren(doc, li, listItem, context);\n    } else {\n        // There is no level for this list item, that means it should be moved out of the list\n        // For each paragraph, make it not implicit so it will have a DIV around it, to avoid more paragraphs connected together\n        listItem.blocks.forEach(setParagraphNotImplicit);\n\n        context.modelHandlers.blockGroupChildren(doc, li, listItem, context);\n\n        unwrap(li);\n    }\n\n    context.onNodeCreated?.(listItem, li);\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { getObjectKeys, unwrap } from 'roosterjs-editor-dom';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { optimize } from '../optimizers/optimize';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\nimport { stackFormat } from '../utils/stackFormat';\n\nconst DefaultParagraphTag = 'div';\n\n/**\n * @internal\n */\nexport const handleParagraph: ContentModelBlockHandler<ContentModelParagraph> = (\n    doc: Document,\n    parent: Node,\n    paragraph: ContentModelParagraph,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    let container = paragraph.cachedElement;\n\n    if (container) {\n        refNode = reuseCachedElement(parent, container, refNode);\n    } else {\n        stackFormat(context, paragraph.decorator?.tagName || null, () => {\n            const needParagraphWrapper =\n                !paragraph.isImplicit ||\n                !!paragraph.decorator ||\n                (getObjectKeys(paragraph.format).length > 0 &&\n                    paragraph.segments.some(segment => segment.segmentType != 'SelectionMarker'));\n            const formatOnWrapper = needParagraphWrapper\n                ? {\n                      ...context.defaultFormat,\n                      ...(paragraph.decorator?.format || {}),\n                  }\n                : {};\n\n            container = doc.createElement(paragraph.decorator?.tagName || DefaultParagraphTag);\n\n            parent.insertBefore(container, refNode);\n\n            if (needParagraphWrapper) {\n                applyFormat(container, context.formatAppliers.block, paragraph.format, context);\n                applyFormat(container, context.formatAppliers.container, paragraph.format, context);\n                applyFormat(\n                    container,\n                    context.formatAppliers.segmentOnBlock,\n                    formatOnWrapper,\n                    context\n                );\n            }\n\n            if (paragraph.zeroFontSize && !paragraph.segments.some(s => s.segmentType == 'Text')) {\n                container.style.fontSize = '0';\n            }\n\n            context.regularSelection.current = {\n                block: needParagraphWrapper ? container : container.parentNode,\n                segment: null,\n            };\n\n            const handleSegments = () => {\n                paragraph.segments.forEach(segment => {\n                    context.modelHandlers.segment(doc, container!, segment, context);\n                });\n            };\n\n            if (needParagraphWrapper) {\n                stackFormat(context, formatOnWrapper, handleSegments);\n            } else {\n                handleSegments();\n            }\n\n            optimize(container);\n\n            // It is possible the next sibling node is changed during processing child segments\n            // e.g. When this paragraph is an implicit paragraph and it contains an inline entity segment\n            // The segment will be appended to container as child then the container will be removed\n            // since this paragraph it is implicit. In that case container.nextSibling will become original\n            // inline entity's next sibling. So reset refNode to its real next sibling (after change) here\n            // to make sure the value is correct.\n            refNode = container.nextSibling;\n\n            if (needParagraphWrapper) {\n                paragraph.cachedElement = container;\n            } else {\n                unwrap(container);\n            }\n        });\n    }\n\n    if (container) {\n        context.onNodeCreated?.(paragraph, container);\n    }\n\n    return refNode;\n};\n","import { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport const handleSegment: ContentModelHandler<ContentModelSegment> = (\n    doc: Document,\n    parent: Node,\n    segment: ContentModelSegment,\n    context: ModelToDomContext\n) => {\n    const regularSelection = context.regularSelection;\n\n    // If start position is not set yet, and current segment is in selection, set start position\n    if (segment.isSelected && !regularSelection.start) {\n        regularSelection.start = {\n            ...regularSelection.current,\n        };\n    }\n\n    switch (segment.segmentType) {\n        case 'Text':\n            context.modelHandlers.text(doc, parent, segment, context);\n            break;\n\n        case 'Br':\n            context.modelHandlers.br(doc, parent, segment, context);\n            break;\n\n        case 'Image':\n            context.modelHandlers.image(doc, parent, segment, context);\n            break;\n\n        case 'General':\n            context.modelHandlers.general(doc, parent, segment, context, null /*refNode*/);\n            break;\n\n        case 'Entity':\n            context.modelHandlers.entity(doc, parent, segment, context, null /*refNode*/);\n            break;\n    }\n\n    // If end position is not set, or it is not finalized, and current segment is still in selection, set end position\n    // If there is other selection, we will overwrite regularSelection.end when we process that segment\n    if (segment.isSelected && regularSelection.start) {\n        regularSelection.end = {\n            ...regularSelection.current,\n        };\n    }\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\nimport { stackFormat } from '../utils/stackFormat';\n\n/**\n * @internal\n */\nexport const handleSegmentDecorator: ContentModelHandler<ContentModelSegment> = (\n    doc,\n    parent,\n    segment,\n    context\n) => {\n    const { code, link } = segment;\n\n    if (link) {\n        stackFormat(context, 'a', () => {\n            const a = document.createElement('a');\n\n            moveChildNodes(a, parent);\n            parent.appendChild(a);\n\n            applyFormat(a, context.formatAppliers.link, link.format, context);\n            applyFormat(a, context.formatAppliers.dataset, link.dataset, context);\n\n            context.onNodeCreated?.(link, a);\n        });\n    }\n\n    if (code) {\n        stackFormat(context, 'code', () => {\n            const codeNode = document.createElement('code');\n\n            moveChildNodes(codeNode, parent);\n            parent.appendChild(codeNode);\n\n            applyFormat(codeNode, context.formatAppliers.code, code.format, context);\n\n            context.onNodeCreated?.(code, codeNode);\n        });\n    }\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelBlockHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { hasMetadata } from '../../domUtils/metadata/updateMetadata';\nimport { isBlockEmpty } from '../../modelApi/common/isEmpty';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\nimport { moveChildNodes } from 'roosterjs-editor-dom';\nimport { reuseCachedElement } from '../utils/reuseCachedElement';\n\n/**\n * @internal\n */\nexport const handleTable: ContentModelBlockHandler<ContentModelTable> = (\n    doc: Document,\n    parent: Node,\n    table: ContentModelTable,\n    context: ModelToDomContext,\n    refNode: Node | null\n) => {\n    if (isBlockEmpty(table)) {\n        // Empty table, do not create TABLE element and just return\n        return refNode;\n    }\n\n    let tableNode = table.cachedElement;\n\n    if (tableNode) {\n        refNode = reuseCachedElement(parent, tableNode, refNode);\n\n        moveChildNodes(tableNode);\n    } else {\n        tableNode = doc.createElement('table');\n\n        table.cachedElement = tableNode;\n        parent.insertBefore(tableNode, refNode);\n\n        applyFormat(tableNode, context.formatAppliers.block, table.format, context);\n        applyFormat(tableNode, context.formatAppliers.table, table.format, context);\n        applyFormat(tableNode, context.formatAppliers.tableBorder, table.format, context);\n        applyFormat(tableNode, context.formatAppliers.dataset, table.dataset, context);\n    }\n\n    context.onNodeCreated?.(table, tableNode);\n\n    const tbody = doc.createElement('tbody');\n    tableNode.appendChild(tbody);\n\n    for (let row = 0; row < table.rows.length; row++) {\n        const tableRow = table.rows[row];\n\n        if (tableRow.cells.length == 0) {\n            // Skip empty row\n            continue;\n        }\n\n        const tr = tableRow.cachedElement || doc.createElement('tr');\n        tbody.appendChild(tr);\n        moveChildNodes(tr);\n\n        if (!tableRow.cachedElement) {\n            tableRow.cachedElement = tr;\n            applyFormat(tr, context.formatAppliers.tableRow, tableRow.format, context);\n        }\n\n        context.onNodeCreated?.(tableRow, tr);\n\n        for (let col = 0; col < tableRow.cells.length; col++) {\n            const cell = tableRow.cells[col];\n\n            if (cell.isSelected) {\n                context.tableSelection = context.tableSelection || {\n                    table: tableNode,\n                    firstCell: { x: col, y: row },\n                    lastCell: { x: col, y: row },\n                };\n\n                if (context.tableSelection.table == tableNode) {\n                    const lastCell = context.tableSelection.lastCell;\n\n                    lastCell.x = Math.max(lastCell.x, col);\n                    lastCell.y = Math.max(lastCell.y, row);\n                }\n            }\n\n            if (!cell.spanAbove && !cell.spanLeft) {\n                let td = cell.cachedElement || doc.createElement(cell.isHeader ? 'th' : 'td');\n\n                tr.appendChild(td);\n\n                let rowSpan = 1;\n                let colSpan = 1;\n                let width = table.widths[col];\n                let height = tableRow.height;\n\n                for (; table.rows[row + rowSpan]?.cells[col]?.spanAbove; rowSpan++) {\n                    height += table.rows[row + rowSpan].height;\n                }\n                for (; tableRow.cells[col + colSpan]?.spanLeft; colSpan++) {\n                    width += table.widths[col + colSpan];\n                }\n\n                if (rowSpan > 1) {\n                    td.rowSpan = rowSpan;\n                }\n\n                if (colSpan > 1) {\n                    td.colSpan = colSpan;\n                }\n\n                if (!cell.cachedElement || (cell.format.useBorderBox && hasMetadata(table))) {\n                    if (width > 0) {\n                        td.style.width = width + 'px';\n                    }\n\n                    if (height > 0) {\n                        td.style.height = height + 'px';\n                    }\n                }\n\n                if (!cell.cachedElement) {\n                    cell.cachedElement = td;\n                    applyFormat(td, context.formatAppliers.block, cell.format, context);\n                    applyFormat(td, context.formatAppliers.tableCell, cell.format, context);\n                    applyFormat(td, context.formatAppliers.tableCellBorder, cell.format, context);\n                    applyFormat(td, context.formatAppliers.dataset, cell.dataset, context);\n                }\n\n                context.modelHandlers.blockGroupChildren(doc, td, cell, context);\n\n                context.onNodeCreated?.(cell, td);\n            }\n        }\n    }\n\n    return refNode;\n};\n","import { applyFormat } from '../utils/applyFormat';\nimport { ContentModelHandler } from '../../publicTypes/context/ContentModelHandler';\nimport { ContentModelText } from '../../publicTypes/segment/ContentModelText';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport const handleText: ContentModelHandler<ContentModelText> = (\n    doc: Document,\n    parent: Node,\n    segment: ContentModelText,\n    context: ModelToDomContext\n) => {\n    const txt = doc.createTextNode(segment.text);\n    const element = doc.createElement('span');\n\n    parent.appendChild(element);\n    element.appendChild(txt);\n\n    context.regularSelection.current.segment = txt;\n\n    applyFormat(element, context.formatAppliers.segment, segment.format, context);\n\n    context.modelHandlers.segmentDecorator(doc, element, segment, context);\n\n    context.onNodeCreated?.(segment, txt);\n};\n","import { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { NodeType } from 'roosterjs-editor-types';\n\nconst OptimizeTags = ['SPAN', 'B', 'EM', 'I', 'U', 'SUB', 'SUP', 'STRIKE', 'S', 'A', 'CODE'];\n\n/**\n * @internal\n */\nexport function mergeNode(root: Node) {\n    for (let child = root.firstChild; child; ) {\n        const next = child.nextSibling;\n\n        if (\n            next &&\n            isNodeOfType(child, NodeType.Element) &&\n            isNodeOfType(next, NodeType.Element) &&\n            child.tagName == next.tagName &&\n            OptimizeTags.indexOf(child.tagName) >= 0 &&\n            hasSameAttributes(child, next)\n        ) {\n            while (next.firstChild) {\n                child.appendChild(next.firstChild);\n            }\n\n            next.parentNode!.removeChild(next);\n        } else {\n            child = next;\n        }\n    }\n}\n\nfunction hasSameAttributes(element1: HTMLElement, element2: HTMLElement) {\n    const attr1 = element1.attributes;\n    const attr2 = element2.attributes;\n\n    if (attr1.length != attr2.length) {\n        return false;\n    }\n\n    for (let i = 0; i < attr1.length; i++) {\n        if (attr1[i].name != attr2[i].name || attr1[i].value != attr2[i].value) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","import { EntityClasses, NodeType } from 'roosterjs-editor-types';\nimport { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { mergeNode } from './mergeNode';\nimport { removeUnnecessarySpan } from './removeUnnecessarySpan';\n\n/**\n * @internal\n */\nexport function optimize(root: Node) {\n    /**\n     * Do no do any optimization to entity\n     */\n    if (\n        isNodeOfType(root, NodeType.Element) &&\n        root.classList.contains(EntityClasses.ENTITY_INFO_NAME)\n    ) {\n        return;\n    }\n\n    removeUnnecessarySpan(root);\n    mergeNode(root);\n\n    for (let child = root.firstChild; child; child = child.nextSibling) {\n        optimize(child);\n    }\n}\n","import { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { NodeType } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nexport function removeUnnecessarySpan(root: Node) {\n    for (let child = root.firstChild; child; ) {\n        if (\n            isNodeOfType(child, NodeType.Element) &&\n            child.tagName == 'SPAN' &&\n            child.attributes.length == 0\n        ) {\n            const node = child;\n            let refNode = child.nextSibling;\n            child = child.nextSibling;\n\n            while (node.lastChild) {\n                const newNode = node.lastChild;\n                root.insertBefore(newNode, refNode);\n                refNode = newNode;\n            }\n\n            root.removeChild(node);\n        } else {\n            child = child.nextSibling;\n        }\n    }\n}\n","import { ContentModelFormatBase } from '../../publicTypes/format/ContentModelFormatBase';\nimport { FormatApplier } from '../../publicTypes/context/ModelToDomSettings';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport function applyFormat<T extends ContentModelFormatBase>(\n    element: HTMLElement,\n    appliers: (FormatApplier<T> | null)[],\n    format: T,\n    context: ModelToDomContext\n) {\n    appliers.forEach(applier => {\n        applier?.(format, element, context);\n    });\n}\n","import { getEntityFromElement } from 'roosterjs-editor-dom';\nimport { isNodeOfType } from '../../domUtils/isNodeOfType';\nimport { NodeType } from 'roosterjs-editor-types';\n\n/**\n * @internal\n */\nexport function reuseCachedElement(parent: Node, element: Node, refNode: Node | null): Node | null {\n    if (element.parentNode == parent) {\n        // Remove nodes before the one we are hitting since they don't appear in Content Model at this position.\n        // But we don't want to touch entity since it would better to keep entity at its place unless it is removed\n        // In that case we will remove it after we have handled all other nodes\n        while (refNode && refNode != element && !isEntity(refNode)) {\n            const next = refNode.nextSibling;\n\n            refNode.parentNode?.removeChild(refNode);\n            refNode = next;\n        }\n\n        if (refNode && refNode == element) {\n            refNode = refNode.nextSibling;\n        } else {\n            parent.insertBefore(element, refNode);\n        }\n    } else {\n        parent.insertBefore(element, refNode);\n    }\n\n    return refNode;\n}\n\n/**\n * @internal\n */\nexport function removeNode(node: Node): Node | null {\n    const next = node.nextSibling;\n    node.parentNode?.removeChild(node);\n\n    return next;\n}\n\nfunction isEntity(node: Node) {\n    return isNodeOfType(node, NodeType.Element) && !!getEntityFromElement(node);\n}\n","import { ContentModelBlockFormat } from '../../publicTypes/format/ContentModelBlockFormat';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { ModelToDomContext } from '../../publicTypes/context/ModelToDomContext';\n\n/**\n * @internal\n */\nexport function stackFormat(\n    context: ModelToDomContext,\n    tagNameOrFormat: string | (ContentModelSegmentFormat & ContentModelBlockFormat) | null,\n    callback: () => void\n) {\n    const newFormat =\n        typeof tagNameOrFormat === 'string'\n            ? context.defaultImplicitFormatMap[tagNameOrFormat]\n            : tagNameOrFormat;\n\n    if (newFormat) {\n        const implicitFormat = context.implicitFormat;\n\n        try {\n            context.implicitFormat = {\n                ...implicitFormat,\n                ...newFormat,\n            };\n\n            callback();\n        } finally {\n            context.implicitFormat = implicitFormat;\n        }\n    } else {\n        callback();\n    }\n}\n","import { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { setModelAlignment } from '../../modelApi/block/setModelAlignment';\n\n/**\n * Set text alignment of selected paragraphs\n * @param editor The editor to set alignment\n * @param alignment Alignment value: left, center or right\n */\nexport default function setAlignment(\n    editor: IContentModelEditor,\n    alignment: 'left' | 'center' | 'right'\n) {\n    formatWithContentModel(editor, 'setAlignment', model => setModelAlignment(model, alignment));\n}\n","import { formatParagraphWithContentModel } from '../utils/formatParagraphWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set text direction of selected paragraphs (Left to right or Right to left)\n * @param editor The editor to set alignment\n * @param direction Direction value: ltr (Left to right) or rtl (Right to left)\n */\nexport default function setDirection(editor: IContentModelEditor, direction: 'ltr' | 'rtl') {\n    formatParagraphWithContentModel(editor, 'setDirection', para => {\n        const isOldValueRtl = para.format.direction == 'rtl';\n        const isNewValueRtl = direction == 'rtl';\n\n        if (isOldValueRtl != isNewValueRtl) {\n            para.format.direction = direction;\n\n            // Adjust margin when change direction\n            // TODO: make margin and padding direction-aware, like what we did for textAlign. So no need to adjust them here\n            // TODO: Do we also need to handle border here?\n            const marginLeft = para.format.marginLeft;\n            const paddingLeft = para.format.paddingLeft;\n\n            para.format.marginLeft = para.format.marginRight;\n            para.format.marginRight = marginLeft;\n\n            para.format.paddingLeft = para.format.paddingRight;\n            para.format.paddingRight = paddingLeft;\n        }\n    });\n}\n","import { ContentModelParagraphDecorator } from '../../publicTypes/decorator/ContentModelParagraphDecorator';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { defaultImplicitFormatMap } from '../../formatHandlers/utils/defaultStyles';\nimport { formatParagraphWithContentModel } from '../utils/formatParagraphWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\ntype HeaderLevelTags = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\n/**\n * Set header level of selected paragraphs\n * @param editor The editor to set header level to\n * @param headerLevel Level of header, from 1 to 6. Set to 0 means set it back to a regular paragraph\n */\nexport default function setHeaderLevel(\n    editor: IContentModelEditor,\n    headerLevel: 0 | 1 | 2 | 3 | 4 | 5 | 6\n) {\n    formatParagraphWithContentModel(editor, 'setHeaderLevel', para => {\n        const tagName =\n            headerLevel > 0\n                ? (('h' + headerLevel) as HeaderLevelTags | null)\n                : getExistingHeaderHeaderTag(para.decorator);\n        const headerStyle =\n            (tagName && (defaultImplicitFormatMap[tagName] as ContentModelSegmentFormat)) || {};\n\n        if (headerLevel > 0) {\n            para.decorator = {\n                tagName: tagName!,\n                format: { ...headerStyle },\n            };\n\n            para.segments.forEach(segment => {\n                Object.assign(segment.format, headerStyle);\n            });\n        } else if (tagName) {\n            delete para.decorator;\n        }\n    });\n}\n\nfunction getExistingHeaderHeaderTag(\n    decorator?: ContentModelParagraphDecorator\n): HeaderLevelTags | null {\n    const tag = decorator?.tagName || '';\n    const level = parseInt(tag.substring(1));\n\n    return level >= 1 && level <= 6 ? (tag as HeaderLevelTags) : null;\n}\n","import { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { setModelIndentation } from '../../modelApi/block/setModelIndentation';\n\n/**\n * Indent or outdent to selected paragraphs\n * @param editor The editor to operate on\n * @param indentation Whether indent or outdent\n * @param length The length of pixel to indent/outdent @default 40\n */\nexport default function setIndentation(\n    editor: IContentModelEditor,\n    indentation: 'indent' | 'outdent',\n    length?: number\n) {\n    formatWithContentModel(\n        editor,\n        'setIndentation',\n        model => setModelIndentation(model, indentation, length),\n        {\n            preservePendingFormat: true,\n        }\n    );\n}\n","import { createParagraphDecorator } from '../../modelApi/creators/createParagraphDecorator';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { formatParagraphWithContentModel } from '../utils/formatParagraphWithContentModel';\n\n/**\n * Toggles the current block(s) margin properties.\n * null deletes any existing value, undefined is ignored\n * @param editor The editor to operate on\n * @param marginTop value for top margin\n * @param marginBottom value for bottom margin\n */\nexport default function setParagraphMargin(\n    editor: IContentModelEditor,\n    marginTop?: string | null,\n    marginBottom?: string | null\n) {\n    formatParagraphWithContentModel(editor, 'setParagraphMargin', para => {\n        if (!para.decorator) {\n            para.decorator = createParagraphDecorator('p');\n        }\n\n        if (marginTop) {\n            para.format.marginTop = marginTop;\n        } else if (marginTop === null) {\n            delete para.format.marginTop;\n        }\n\n        if (marginBottom) {\n            para.format.marginBottom = marginBottom;\n        } else if (marginBottom === null) {\n            delete para.format.marginBottom;\n        }\n    });\n}\n","import { formatParagraphWithContentModel } from '../utils/formatParagraphWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Sets current selected block(s) line-height property and wipes such property from child segments\n * @param editor The editor to operate on\n * @param spacing Unitless/px value to set line height\n */\nexport default function setSpacing(editor: IContentModelEditor, spacing: number | string) {\n    formatParagraphWithContentModel(editor, 'setSpacing', paragraph => {\n        paragraph.format.lineHeight = spacing.toString();\n        paragraph.segments.forEach(segment => {\n            if (segment.format.lineHeight) {\n                delete segment.format.lineHeight;\n            }\n        });\n    });\n}\n","import { ContentModelFormatContainerFormat } from '../../publicTypes/format/ContentModelFormatContainerFormat';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { toggleModelBlockQuote } from '../../modelApi/block/toggleModelBlockQuote';\n\nconst DefaultQuoteFormat: ContentModelFormatContainerFormat = {\n    borderLeft: '3px solid rgb(200, 200, 200)', // TODO: Support RTL\n    textColor: 'rgb(102, 102, 102)',\n};\nconst BuildInQuoteFormat: ContentModelFormatContainerFormat = {\n    marginTop: '1em',\n    marginBottom: '1em',\n    marginLeft: '40px',\n    marginRight: '40px',\n    paddingLeft: '10px',\n};\n\n/**\n * Toggle BLOCKQUOTE state of selected paragraphs.\n * If any selected paragraph is not under a BLOCKQUOTE, wrap them into a BLOCKQUOTE.\n * Otherwise, unwrap all related BLOCKQUOTEs.\n * @param editor The editor object to toggle BLOCKQUOTE onto\n * @param quoteFormat @optional Block format for the new quote object\n */\nexport default function toggleBlockQuote(\n    editor: IContentModelEditor,\n    quoteFormat: ContentModelFormatContainerFormat = DefaultQuoteFormat\n) {\n    const fullQuoteFormat = {\n        ...BuildInQuoteFormat,\n        ...quoteFormat,\n    };\n\n    formatWithContentModel(\n        editor,\n        'toggleBlockQuote',\n        model => toggleModelBlockQuote(model, fullQuoteFormat),\n        {\n            preservePendingFormat: true,\n        }\n    );\n}\n","import { Browser } from 'roosterjs-editor-dom';\nimport { ChangeSource, EntityOperationEvent, Keys } from 'roosterjs-editor-types';\nimport { deleteAllSegmentBefore } from '../../modelApi/edit/deleteSteps/deleteAllSegmentBefore';\nimport { deleteSelection } from '../../modelApi/edit/deleteSelection';\nimport { DeleteSelectionStep } from '../../modelApi/edit/utils/DeleteSelectionStep';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport {\n    getOnDeleteEntityCallback,\n    handleKeyboardEventResult,\n    shouldDeleteAllSegmentsBefore,\n    shouldDeleteWord,\n} from '../../editor/utils/handleKeyboardEventCommon';\nimport {\n    backwardDeleteWordSelection,\n    forwardDeleteWordSelection,\n} from '../../modelApi/edit/deleteSteps/deleteWordSelection';\nimport {\n    backwardDeleteCollapsedSelection,\n    forwardDeleteCollapsedSelection,\n} from '../../modelApi/edit/deleteSteps/deleteCollapsedSelection';\n\n/**\n * Handle KeyDown event\n * Currently only DELETE and BACKSPACE keys are supported\n */\nexport default function handleKeyDownEvent(\n    editor: IContentModelEditor,\n    rawEvent: KeyboardEvent,\n    triggeredEntityEvents: EntityOperationEvent[]\n) {\n    const which = rawEvent.which;\n\n    if (which == Keys.DELETE || which == Keys.BACKSPACE) {\n        const isForward = which == Keys.DELETE;\n        const apiName = isForward ? 'handleDeleteKey' : 'handleBackspaceKey';\n        const deleteCollapsedSelection = isForward\n            ? forwardDeleteCollapsedSelection\n            : backwardDeleteCollapsedSelection;\n        const deleteWordSelection = shouldDeleteWord(rawEvent, !!Browser.isMac)\n            ? isForward\n                ? forwardDeleteWordSelection\n                : backwardDeleteWordSelection\n            : null;\n\n        formatWithContentModel(\n            editor,\n            apiName,\n            model => {\n                const steps: (DeleteSelectionStep | null)[] = [\n                    shouldDeleteAllSegmentsBefore(rawEvent) && !isForward\n                        ? deleteAllSegmentBefore\n                        : null,\n                    deleteWordSelection,\n                    deleteCollapsedSelection,\n                ];\n\n                const result = deleteSelection(\n                    model,\n                    getOnDeleteEntityCallback(editor, rawEvent, triggeredEntityEvents),\n                    steps\n                ).deleteResult;\n\n                return handleKeyboardEventResult(editor, model, rawEvent, result);\n            },\n            {\n                skipUndoSnapshot: true, // No need to add undo snapshot for each key down event. We will trigger a ContentChanged event and let UndoPlugin decide when to add undo snapshot\n                changeSource: ChangeSource.Keyboard,\n                getChangeData: () => which,\n            }\n        );\n    }\n}\n","import { createText } from '../../modelApi/creators/createText';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { iterateSelections } from '../../modelApi/selection/iterateSelections';\nimport { setParagraphNotImplicit } from '../../modelApi/block/setParagraphNotImplicit';\n\nconst ANSI_SPACE = '\\u0020';\nconst NON_BREAK_SPACE = '\\u00A0';\n\n/**\n * Apply pending format to the text user just input\n * @param editor The editor to get format from\n * @param data The text user just input\n */\nexport default function applyPendingFormat(editor: IContentModelEditor, data: string) {\n    const format = getPendingFormat(editor);\n\n    if (format) {\n        let isChanged = false;\n\n        formatWithContentModel(\n            editor,\n            'applyPendingFormat',\n            model => {\n                iterateSelections([model], (_, __, block, segments) => {\n                    if (\n                        block?.blockType == 'Paragraph' &&\n                        segments?.length == 1 &&\n                        segments[0].segmentType == 'SelectionMarker'\n                    ) {\n                        const marker = segments[0];\n                        const index = block.segments.indexOf(marker);\n                        const previousSegment = block.segments[index - 1];\n\n                        if (previousSegment?.segmentType == 'Text') {\n                            const text = previousSegment.text;\n                            const subStr = text.substr(-data.length, data.length);\n\n                            // For space, there can be &#32 (space) or &#160 (&nbsp;), we treat them as the same\n                            if (\n                                subStr == data ||\n                                (data == ANSI_SPACE && subStr == NON_BREAK_SPACE)\n                            ) {\n                                marker.format = { ...format };\n                                previousSegment.text = text.substring(0, text.length - data.length);\n\n                                const newText = createText(\n                                    data == ANSI_SPACE ? NON_BREAK_SPACE : data,\n                                    {\n                                        ...previousSegment.format,\n                                        ...format,\n                                    }\n                                );\n\n                                block.segments.splice(index, 0, newText);\n                                setParagraphNotImplicit(block);\n                                isChanged = true;\n                            }\n                        }\n                    }\n                    return true;\n                });\n\n                return isChanged;\n            },\n            {\n                skipUndoSnapshot: true,\n            }\n        );\n    }\n}\n","import { clearModelFormat } from '../../modelApi/common/clearModelFormat';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelTable } from '../../publicTypes/block/ContentModelTable';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { normalizeContentModel } from '../../modelApi/common/normalizeContentModel';\n\n/**\n * Clear format of selection\n * @param editor The editor to clear format from\n */\nexport default function clearFormat(editor: IContentModelEditor) {\n    formatWithContentModel(editor, 'clearFormat', model => {\n        const blocksToClear: [ContentModelBlockGroup[], ContentModelBlock][] = [];\n        const segmentsToClear: ContentModelSegment[] = [];\n        const tablesToClear: [ContentModelTable, boolean][] = [];\n\n        clearModelFormat(model, blocksToClear, segmentsToClear, tablesToClear);\n\n        normalizeContentModel(model);\n\n        return blocksToClear.length > 0 || segmentsToClear.length > 0 || tablesToClear.length > 0;\n    });\n}\n","import { FormatState } from 'roosterjs-editor-types';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { retrieveModelFormatState } from '../../modelApi/common/retrieveModelFormatState';\n\n/**\n * Get current format state\n * @param editor The editor to get format from\n */\nexport default function getFormatState(editor: IContentModelEditor): FormatState {\n    let result: FormatState = {\n        ...editor.getUndoState(),\n\n        isDarkMode: editor.isDarkMode(),\n        zoomScale: editor.getZoomScale(),\n    };\n\n    formatWithContentModel(\n        editor,\n        'getFormatState',\n        model => {\n            const pendingFormat = getPendingFormat(editor);\n\n            retrieveModelFormatState(model, pendingFormat, result);\n\n            return false;\n        },\n        {\n            useReducedModel: true,\n        }\n    );\n\n    return result;\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { iterateSelections } from '../../modelApi/selection/iterateSelections';\n\n/**\n * Get current segment format. This is usually used by format painter\n * @param editor The editor to get format from\n */\nexport default function getSegmentFormat(\n    editor: IContentModelEditor\n): ContentModelSegmentFormat | null {\n    let result = getPendingFormat(editor);\n\n    if (!result) {\n        formatWithContentModel(\n            editor,\n            'getSegmentFormat',\n            model => {\n                iterateSelections(\n                    [model],\n                    (path, tableContext, block, segments) => {\n                        result = segments?.[0]?.format || null;\n                        return true;\n                    },\n                    {\n                        includeListFormatHolder: 'never',\n                    }\n                );\n\n                return false;\n            },\n            {\n                useReducedModel: true,\n            }\n        );\n    }\n\n    return result;\n}\n","import { adjustSegmentSelection } from '../../modelApi/selection/adjustSegmentSelection';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Adjust selection to make sure select an image if any\n * @return Content Model Image object if an image is select, or null\n */\nexport default function adjustImageSelection(\n    editor: IContentModelEditor\n): ContentModelImage | null {\n    let image: ContentModelImage | null = null;\n\n    formatWithContentModel(editor, 'adjustImageSelection', model =>\n        adjustSegmentSelection(\n            model,\n            target => {\n                if (target.isSelected && target.segmentType == 'Image') {\n                    image = target;\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            (target, ref) => target == ref\n        )\n    );\n\n    return image;\n}\n","import formatImageWithContentModel from '../utils/formatImageWithContentModel';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { getMetadata, readFile } from 'roosterjs-editor-dom';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { SelectionRangeTypes } from 'roosterjs-editor-types';\n\n/**\n * Change the selected image src\n * @param editor The editor instance\n * @param file The image file\n */\nexport default function changeImage(editor: IContentModelEditor, file: File) {\n    const selection = editor.getSelectionRangeEx();\n    readFile(file, dataUrl => {\n        if (\n            dataUrl &&\n            !editor.isDisposed() &&\n            selection.type === SelectionRangeTypes.ImageSelection\n        ) {\n            formatImageWithContentModel(\n                editor,\n                'changeImage',\n                (image: ContentModelImage) => {\n                    image.src = dataUrl;\n                    image.dataset = {};\n                    image.format.width = '';\n                    image.format.height = '';\n                },\n                {\n                    image: selection.image,\n                    previousSrc: selection.image.src,\n                    newSrc: dataUrl,\n                    originalSrc: getImageSrc(selection.image),\n                }\n            );\n        }\n    });\n}\n\nconst getImageSrc = (image: HTMLImageElement) => {\n    const obj = getMetadata<{ src: string }>(image);\n    return (obj && obj.src) || '';\n};\n","import { addSegment } from '../../modelApi/common/addSegment';\nimport { createContentModelDocument } from '../../modelApi/creators/createContentModelDocument';\nimport { createImage } from '../../modelApi/creators/createImage';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getOnDeleteEntityCallback } from '../../editor/utils/handleKeyboardEventCommon';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { mergeModel } from '../../modelApi/common/mergeModel';\nimport { readFile } from 'roosterjs-editor-dom';\n\n/**\n * Insert an image into current selected position\n * @param editor The editor to operate on\n * @param file Image Blob file or source string\n */\nexport default function insertImage(editor: IContentModelEditor, imageFileOrSrc: File | string) {\n    if (typeof imageFileOrSrc == 'string') {\n        insertImageWithSrc(editor, imageFileOrSrc);\n    } else {\n        readFile(imageFileOrSrc, dataUrl => {\n            if (dataUrl && !editor.isDisposed()) {\n                insertImageWithSrc(editor, dataUrl);\n            }\n        });\n    }\n}\n\nfunction insertImageWithSrc(editor: IContentModelEditor, src: string) {\n    formatWithContentModel(editor, 'insertImage', model => {\n        const image = createImage(src);\n        const doc = createContentModelDocument();\n\n        addSegment(doc, image);\n        mergeModel(model, doc, getOnDeleteEntityCallback(editor), { mergeCurrentFormat: true });\n\n        return true;\n    });\n}\n","import formatImageWithContentModel from '../utils/formatImageWithContentModel';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set image alt text for all selected images at selection. If no images is contained\n * in selection, do nothing.\n * @param editor The editor instance\n * @param altText The image alt text\n */\nexport default function setImageAltText(editor: IContentModelEditor, altText: string) {\n    formatImageWithContentModel(editor, 'setImageAltText', (image: ContentModelImage) => {\n        image.alt = altText;\n    });\n}\n","import applyImageBorderFormat from '../../modelApi/image/applyImageBorderFormat';\nimport formatImageWithContentModel from '../utils/formatImageWithContentModel';\nimport { Border } from '../../publicTypes/interface/Border';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set image border style for all selected images at selection.\n * @param editor The editor instance\n * @param border the border format object. Ex: { color: 'red', width: '10px', style: 'solid'}, if one of the value in object is undefined\n * its value will not be changed. Passing null instead of an object will remove the border\n * @param borderRadius the border radius value, if undefined, the border radius will keep the actual value\n */\nexport default function setImageBorder(\n    editor: IContentModelEditor,\n    border: Border | null,\n    borderRadius?: string\n) {\n    formatImageWithContentModel(editor, 'setImageBorder', (image: ContentModelImage) => {\n        applyImageBorderFormat(image, border, borderRadius);\n    });\n}\n","import formatImageWithContentModel from '../utils/formatImageWithContentModel';\nimport { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set image box shadow for all selected images at selection.\n * @param editor The editor instance\n * @param boxShadow The image box shadow\n */\nexport default function setImageBoxShadow(editor: IContentModelEditor, boxShadow: string) {\n    formatImageWithContentModel(editor, 'setImageBoxShadow', (image: ContentModelImage) => {\n        image.format.boxShadow = boxShadow;\n    });\n}\n","export { default as insertTable } from './table/insertTable';\nexport { default as formatTable } from './table/formatTable';\nexport { default as setTableCellShade } from './table/setTableCellShade';\nexport { default as editTable } from './table/editTable';\nexport { default as toggleBullet } from './list/toggleBullet';\nexport { default as toggleNumbering } from './list/toggleNumbering';\nexport { default as toggleBold } from './segment/toggleBold';\nexport { default as toggleItalic } from './segment/toggleItalic';\nexport { default as toggleUnderline } from './segment/toggleUnderline';\nexport { default as toggleStrikethrough } from './segment/toggleStrikethrough';\nexport { default as toggleSubscript } from './segment/toggleSubscript';\nexport { default as toggleSuperscript } from './segment/toggleSuperscript';\nexport { default as setBackgroundColor } from './segment/setBackgroundColor';\nexport { default as setFontName } from './segment/setFontName';\nexport { default as setFontSize } from './segment/setFontSize';\nexport { default as setTextColor } from './segment/setTextColor';\nexport { default as changeFontSize } from './segment/changeFontSize';\nexport { default as applySegmentFormat } from './segment/applySegmentFormat';\nexport { default as changeCapitalization } from './segment/changeCapitalization';\nexport { default as insertImage } from './image/insertImage';\nexport { default as setListStyle } from './list/setListStyle';\nexport { default as setListStartNumber } from './list/setListStartNumber';\nexport { default as hasSelectionInBlock } from './selection/hasSelectionInBlock';\nexport { default as hasSelectionInSegment } from './selection/hasSelectionInSegment';\nexport { default as hasSelectionInBlockGroup } from './selection/hasSelectionInBlockGroup';\nexport { default as setIndentation } from './block/setIndentation';\nexport { default as setAlignment } from './block/setAlignment';\nexport { default as setDirection } from './block/setDirection';\nexport { default as setHeaderLevel } from './block/setHeaderLevel';\nexport { default as toggleBlockQuote } from './block/toggleBlockQuote';\nexport { default as setSpacing } from './block/setSpacing';\nexport { default as setImageBorder } from './image/setImageBorder';\nexport { default as setImageBoxShadow } from './image/setImageBoxShadow';\nexport { default as changeImage } from './image/changeImage';\nexport { default as getFormatState } from './format/getFormatState';\nexport { default as getSegmentFormat } from './format/getSegmentFormat';\nexport { default as applyPendingFormat } from './format/applyPendingFormat';\nexport { default as clearFormat } from './format/clearFormat';\nexport { default as insertLink } from './link/insertLink';\nexport { default as removeLink } from './link/removeLink';\nexport { default as adjustLinkSelection } from './link/adjustLinkSelection';\nexport { default as setImageAltText } from './image/setImageAltText';\nexport { default as adjustImageSelection } from './image/adjustImageSelection';\nexport { default as setParagraphMargin } from './block/setParagraphMargin';\nexport { default as toggleCode } from './segment/toggleCode';\n","import { adjustSegmentSelection } from '../../modelApi/selection/adjustSegmentSelection';\nimport { adjustWordSelection } from '../../modelApi/selection/adjustWordSelection';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getSelectedSegments } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { setSelection } from '../../modelApi/selection/setSelection';\n\n/**\n * Adjust selection to make sure select a hyperlink if any, or a word if original selection is collapsed\n * @return A combination of existing link display text and url if any. If there is no existing link, return selected text and null\n */\nexport default function adjustLinkSelection(editor: IContentModelEditor): [string, string | null] {\n    let text = '';\n    let url: string | null = null;\n\n    formatWithContentModel(editor, 'adjustLinkSelection', model => {\n        let changed = adjustSegmentSelection(\n            model,\n            target => !!target.isSelected && !!target.link,\n            (target, ref) => !!target.link && target.link.format.href == ref.link!.format.href\n        );\n        let segments = getSelectedSegments(model, false /*includingFormatHolder*/);\n        const firstSegment = segments[0];\n\n        if (segments.length == 1 && firstSegment.segmentType == 'SelectionMarker') {\n            segments = adjustWordSelection(model, firstSegment);\n\n            if (segments.length > 1) {\n                changed = true;\n                setSelection(model, segments[0], segments[segments.length - 1]);\n            }\n        }\n\n        text = segments.map(x => (x.segmentType == 'Text' ? x.text : '')).join('');\n        url = segments[0]?.link?.format.href || null;\n\n        return changed;\n    });\n\n    return [text, url];\n}\n","import { addLink } from '../../modelApi/common/addDecorators';\nimport { addSegment } from '../../modelApi/common/addSegment';\nimport { ChangeSource } from 'roosterjs-editor-types';\nimport { ContentModelLink } from '../../publicTypes/decorator/ContentModelLink';\nimport { createContentModelDocument } from '../../modelApi/creators/createContentModelDocument';\nimport { createText } from '../../modelApi/creators/createText';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getOnDeleteEntityCallback } from '../../editor/utils/handleKeyboardEventCommon';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { getSelectedSegments } from '../../modelApi/selection/collectSelections';\nimport { HtmlSanitizer, matchLink } from 'roosterjs-editor-dom';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { mergeModel } from '../../modelApi/common/mergeModel';\n\n// Regex matching Uri scheme\nconst URI_REGEX = /^[a-zA-Z]+:/i;\n// Regex matching begin of email address\nconst MAILTO_REGEX = /^[\\w.%+-]+@/i;\n// Regex matching begin of ftp, i.e. ftp.microsoft.com\nconst FTP_REGEX = /^ftp\\./i;\n\n/**\n * Insert a hyperlink at cursor.\n * When there is a selection, hyperlink will be applied to the selection,\n * otherwise a hyperlink will be inserted to the cursor position.\n * @param editor Editor object\n * @param link Link address, can be http(s), mailto, notes, file, unc, ftp, news, telnet, gopher, wais.\n * When protocol is not specified, a best matched protocol will be predicted.\n * @param anchorTitle Optional alt text of the link, will be shown when hover on the link\n * @param displayText Optional display text for the link.\n * @param target Optional display target for the link (\"_blank\"|\"_self\"|\"_parent\"|\"_top\"|\"{framename}\")\n * If specified, the display text of link will be replaced with this text.\n * If not specified and there wasn't a link, the link url will be used as display text.\n */\nexport default function insertLink(\n    editor: IContentModelEditor,\n    link: string,\n    anchorTitle?: string,\n    displayText?: string,\n    target?: string\n) {\n    let url = (checkXss(link) || '').trim();\n    if (url) {\n        const linkData = matchLink(url);\n        const link: ContentModelLink = {\n            dataset: {},\n            format: {\n                href: linkData ? linkData.normalizedUrl : applyLinkPrefix(url),\n                anchorTitle,\n                target,\n                underline: true,\n            },\n        };\n\n        const links: ContentModelLink[] = [];\n        let anchorNode: Node | undefined;\n\n        formatWithContentModel(\n            editor,\n            'insertLink',\n            model => {\n                const segments = getSelectedSegments(model, false /*includingFormatHolder*/);\n                const originalText = segments\n                    .map(x => (x.segmentType == 'Text' ? x.text : ''))\n                    .join('');\n                const text = displayText || originalText || '';\n\n                if (\n                    segments.some(x => x.segmentType != 'SelectionMarker') &&\n                    originalText == text\n                ) {\n                    segments.forEach(x => {\n                        addLink(x, link);\n\n                        if (x.link) {\n                            links.push(x.link);\n                        }\n                    });\n                } else if (\n                    segments.every(x => x.segmentType == 'SelectionMarker') ||\n                    (!!text && text != originalText)\n                ) {\n                    const segment = createText(text || (linkData ? linkData.originalUrl : url), {\n                        ...(segments[0]?.format || {}),\n                        ...(getPendingFormat(editor) || {}),\n                    });\n                    const doc = createContentModelDocument();\n\n                    addLink(segment, link);\n                    addSegment(doc, segment);\n\n                    if (segment.link) {\n                        links.push(segment.link);\n                    }\n\n                    mergeModel(model, doc, getOnDeleteEntityCallback(editor), {\n                        mergeCurrentFormat: true,\n                    });\n                }\n\n                return segments.length > 0;\n            },\n            {\n                changeSource: ChangeSource.CreateLink,\n                onNodeCreated: (modelElement, node) => {\n                    if (!anchorNode && links.indexOf(modelElement as ContentModelLink) >= 0) {\n                        anchorNode = node;\n                    }\n                },\n                getChangeData: () => anchorNode,\n            }\n        );\n    }\n}\n\n// TODO: This is copied from original code. We may need to integrate this logic into matchLink() later.\nfunction applyLinkPrefix(url: string): string {\n    if (!url) {\n        return url;\n    }\n\n    // Add link prefix per rule:\n    // (a) if the url always starts with a URI scheme, leave it as it is\n    // (b) if the url is an email address, xxx@... add mailto: prefix\n    // (c) if the url starts with ftp., add ftp:// prefix\n    // (d) rest, add http:// prefix\n    let prefix = '';\n    if (url.search(URI_REGEX) < 0) {\n        if (url.search(MAILTO_REGEX) == 0) {\n            prefix = 'mailto:';\n        } else if (url.search(FTP_REGEX) == 0) {\n            prefix = 'ftp://';\n        } else {\n            // fallback to http://\n            prefix = 'http://';\n        }\n    }\n\n    return prefix + url;\n}\n\n// TODO: This is copied from original code. However, ContentModel should be able to filter out malicious\n// attributes later, so no need to use HtmlSanitizer here\nfunction checkXss(link: string): string {\n    const sanitizer = new HtmlSanitizer();\n    const a = document.createElement('a');\n\n    a.href = link || '';\n\n    sanitizer.sanitize(a);\n    // We use getAttribute because some browsers will try to make the href property a valid link.\n    // This has unintended side effects when the link lacks a protocol.\n    return a.getAttribute('href') || '';\n}\n","import { adjustSegmentSelection } from '../../modelApi/selection/adjustSegmentSelection';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getSelectedSegments } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Remove link at selection. If no links at selection, do nothing.\n * If selection contains multiple links, all of the link styles will be removed.\n * If only part of a link is selected, the whole link style will be removed.\n * @param editor The editor instance\n */\nexport default function removeLink(editor: IContentModelEditor) {\n    formatWithContentModel(editor, 'removeLink', model => {\n        adjustSegmentSelection(\n            model,\n            target => !!target.isSelected && !!target.link,\n            (target, ref) =>\n                target.isSelected || // Expand the selection to any link that is involved. So we can remove multiple links together\n                (!!target.link && target.link.format.href == ref.link!.format.href)\n        );\n\n        const segments = getSelectedSegments(model, false /*includingFormatHolder*/);\n        let isChanged = false;\n\n        segments.forEach(segment => {\n            if (segment.link) {\n                isChanged = true;\n\n                delete segment.link;\n            }\n        });\n\n        return isChanged;\n    });\n}\n","import { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getFirstSelectedListItem } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set start number of a list item\n * @param editor The editor to operate on\n * @param value The number to set to, must be equal or greater than 1\n */\nexport default function setListStartNumber(editor: IContentModelEditor, value: number) {\n    formatWithContentModel(editor, 'setListStartNumber', model => {\n        const listItem = getFirstSelectedListItem(model);\n        const level = listItem?.levels[listItem?.levels.length - 1];\n\n        if (level) {\n            level.startNumberOverride = value;\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import { findListItemsInSameThread } from '../../modelApi/list/findListItemsInSameThread';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getFirstSelectedListItem } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { ListMetadataFormat } from '../../publicTypes/format/formatParts/ListMetadataFormat';\n\n/**\n * Set style of list items with in same thread of current item\n * @param editor The editor to operate on\n * @param style The target list item style to set\n */\nexport default function setListStyle(editor: IContentModelEditor, style: ListMetadataFormat) {\n    formatWithContentModel(editor, 'setListStyle', model => {\n        const listItem = getFirstSelectedListItem(model);\n\n        if (listItem) {\n            const listItems = findListItemsInSameThread(model, listItem);\n            const levelIndex = listItem.levels.length - 1;\n\n            listItems.forEach(listItem => {\n                if (style.orderedStyleType !== undefined) {\n                    listItem.levels[levelIndex].orderedStyleType = style.orderedStyleType;\n                }\n\n                if (style.unorderedStyleType !== undefined) {\n                    listItem.levels[levelIndex].unorderedStyleType = style.unorderedStyleType;\n                }\n            });\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { setListType } from '../../modelApi/list/setListType';\n\n/**\n * Toggle bullet list type\n * - When there are some blocks not in bullet list, set all blocks to the given type\n * - When all blocks are already in bullet list, turn off / outdent there list type\n * @param editor The editor to operate on\n */\nexport default function toggleBullet(editor: IContentModelEditor) {\n    formatWithContentModel(editor, 'toggleBullet', model => setListType(model, 'UL'), {\n        preservePendingFormat: true,\n    });\n}\n","import { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { setListType } from '../../modelApi/list/setListType';\n\n/**\n * Toggle numbering list type\n * - When there are some blocks not in numbering list, set all blocks to the given type\n * - When all blocks are already in numbering list, turn off / outdent there list type\n * @param editor The editor to operate on\n */\nexport default function toggleNumbering(editor: IContentModelEditor) {\n    formatWithContentModel(editor, 'toggleNumbering', model => setListType(model, 'OL'), {\n        preservePendingFormat: true,\n    });\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Bulk apply segment format to all selected content. This is usually used for format painter.\n * @param editor The editor to operate on\n * @param newFormat The segment format to apply\n */\nexport default function applySegmentFormat(\n    editor: IContentModelEditor,\n    newFormat: ContentModelSegmentFormat\n) {\n    formatSegmentWithContentModel(\n        editor,\n        'applySegmentFormat',\n        format => {\n            format.backgroundColor = newFormat.backgroundColor;\n            format.fontFamily = newFormat.fontFamily;\n            format.fontSize = newFormat.fontSize;\n            format.fontWeight = newFormat.fontWeight;\n            format.italic = newFormat.italic;\n            format.strikethrough = newFormat.strikethrough;\n            format.superOrSubScriptSequence = newFormat.superOrSubScriptSequence;\n            format.textColor = newFormat.textColor;\n            format.underline = newFormat.underline;\n        },\n        undefined /* segmentHasStyleCallback*/,\n        true /*includingFormatHandler*/\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Change the capitalization of text in the selection\n * @param editor The editor instance\n * @param capitalization The case option\n * @param language Optional parameter for language string that should comply to \"IETF BCP 47 Tags for\n * Identifying Languages\". For example: 'en' or 'en-US' for English, 'tr' for Turkish.\n * Default is the host environment’s current locale.\n */\nexport default function changeCapitalization(\n    editor: IContentModelEditor,\n    capitalization: 'sentence' | 'lowerCase' | 'upperCase' | 'capitalize',\n    language?: string\n) {\n    formatSegmentWithContentModel(editor, 'changeCapitalization', (_, __, segment) => {\n        if (segment?.segmentType == 'Text') {\n            switch (capitalization) {\n                case 'lowerCase':\n                    segment.text = segment.text.toLocaleLowerCase(language);\n                    break;\n\n                case 'upperCase':\n                    segment.text = segment.text.toLocaleUpperCase(language);\n                    break;\n\n                case 'capitalize':\n                    const wordArray = segment.text.toLocaleLowerCase(language).split(' ');\n\n                    for (let i = 0; i < wordArray.length; i++) {\n                        wordArray[i] =\n                            wordArray[i].charAt(0).toLocaleUpperCase(language) +\n                            wordArray[i].slice(1);\n                    }\n\n                    segment.text = wordArray.join(' ');\n                    break;\n\n                case 'sentence':\n                    // TODO: Add rules on punctuation for internationalization - TASK 104769\n                    const punctuationMarks = '[\\\\.\\\\!\\\\?]';\n                    // Find a match of a word character either:\n                    // - At the beginning of a string with or without preceding whitespace, for\n                    // example: '  hello world' and 'hello world' strings would both match 'h'.\n                    // - Or preceded by a punctuation mark and at least one whitespace, for\n                    // example 'yes. hello world' would match 'y' and 'h'.\n                    const regex = new RegExp('^\\\\s*\\\\w|' + punctuationMarks + '\\\\s+\\\\w', 'g');\n\n                    segment.text = segment.text\n                        .toLocaleLowerCase(language)\n                        .replace(regex, match => match.toLocaleUpperCase(language));\n                    break;\n            }\n        }\n    });\n}\n","import { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { parseValueWithUnit } from '../../formatHandlers/utils/parseValueWithUnit';\n\n/**\n * Default font size sequence, in pt. Suggest editor UI use this sequence as your font size list,\n * So that when increase/decrease font size, the font size can match the sequence of your font size picker\n */\nconst FONT_SIZES = [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];\nconst MIN_FONT_SIZE = 1;\nconst MAX_FONT_SIZE = 1000;\n\n/**\n * Increase or decrease font size in selection\n * @param editor The editor instance\n * @param change Whether increase or decrease font size\n * @param fontSizes A sorted font size array, in pt. Default value is FONT_SIZES\n */\nexport default function changeFontSize(\n    editor: IContentModelEditor,\n    change: 'increase' | 'decrease'\n) {\n    formatSegmentWithContentModel(\n        editor,\n        'changeFontSize',\n        format => changeFontSizeInternal(format, change),\n        undefined /* segmentHasStyleCallback*/,\n        true /*includingFormatHandler*/\n    );\n}\n\nfunction changeFontSizeInternal(\n    format: ContentModelSegmentFormat,\n    change: 'increase' | 'decrease'\n) {\n    if (format.fontSize) {\n        let sizeInPt = parseValueWithUnit(format.fontSize, undefined /*element*/, 'pt');\n\n        if (sizeInPt > 0) {\n            const newSize = getNewFontSize(sizeInPt, change == 'increase' ? 1 : -1, FONT_SIZES);\n\n            format.fontSize = newSize + 'pt';\n        }\n    }\n}\n\nfunction getNewFontSize(pt: number, changeBase: 1 | -1, fontSizes: number[]): number {\n    pt = changeBase == 1 ? Math.floor(pt) : Math.ceil(pt);\n    let last = fontSizes[fontSizes.length - 1];\n    if (pt <= fontSizes[0]) {\n        pt = Math.max(pt + changeBase, MIN_FONT_SIZE);\n    } else if (pt > last || (pt == last && changeBase == 1)) {\n        pt = pt / 10;\n        pt = changeBase == 1 ? Math.floor(pt) : Math.ceil(pt);\n        pt = Math.min(Math.max((pt + changeBase) * 10, last), MAX_FONT_SIZE);\n    } else if (changeBase == 1) {\n        for (let i = 0; i < fontSizes.length; i++) {\n            if (pt < fontSizes[i]) {\n                pt = fontSizes[i];\n                break;\n            }\n        }\n    } else {\n        for (let i = fontSizes.length - 1; i >= 0; i--) {\n            if (pt > fontSizes[i]) {\n                pt = fontSizes[i];\n                break;\n            }\n        }\n    }\n    return pt;\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set background color\n * @param editor The editor to operate on\n * @param backgroundColor The color to set. Pass null to remove existing color.\n */\nexport default function setBackgroundColor(\n    editor: IContentModelEditor,\n    backgroundColor: string | null\n) {\n    formatSegmentWithContentModel(\n        editor,\n        'setBackgroundColor',\n        backgroundColor === null\n            ? format => {\n                  delete format.backgroundColor;\n              }\n            : format => {\n                  format.backgroundColor = backgroundColor;\n              }\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set font name\n * @param editor The editor to operate on\n * @param fontName The font name to set\n */\nexport default function setFontName(editor: IContentModelEditor, fontName: string) {\n    formatSegmentWithContentModel(\n        editor,\n        'setFontName',\n        (format, _, segment) => {\n            format.fontFamily = fontName;\n\n            if (segment?.code) {\n                segment.code.format.fontFamily = fontName;\n            }\n        },\n        undefined /* segmentHasStyleCallback*/,\n        true /*includingFormatHandler*/\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set font size\n * @param editor The editor to operate on\n * @param fontSize The font size to set\n */\nexport default function setFontSize(editor: IContentModelEditor, fontSize: string) {\n    formatSegmentWithContentModel(\n        editor,\n        'setFontSize',\n        format => {\n            format.fontSize = fontSize;\n        },\n        undefined /* segmentHasStyleCallback*/,\n        true /*includingFormatHandler*/\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Set text color\n * @param editor The editor to operate on\n * @param textColor The text color to set. Pass null to remove existing color.\n */\nexport default function setTextColor(editor: IContentModelEditor, textColor: string | null) {\n    formatSegmentWithContentModel(\n        editor,\n        'setTextColor',\n        textColor === null\n            ? (format, _, segment) => {\n                  delete format.textColor;\n\n                  if (segment?.link) {\n                      delete segment.link.format.textColor;\n                  }\n              }\n            : (format, _, segment) => {\n                  format.textColor = textColor;\n\n                  if (segment?.link) {\n                      segment.link.format.textColor = textColor;\n                  }\n              },\n        undefined /* segmentHasStyleCallback*/,\n        true /*includingFormatHandler*/\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle bold style\n * @param editor The editor to operate on\n */\nexport default function toggleBold(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleBold',\n        (format, isTurningOn) => {\n            format.fontWeight = isTurningOn ? 'bold' : undefined;\n        },\n        format => isBold(format.fontWeight)\n    );\n}\n\n/**\n * @internal\n */\nexport function isBold(boldStyle?: string): boolean {\n    return (\n        !!boldStyle && (boldStyle == 'bold' || boldStyle == 'bolder' || parseInt(boldStyle) >= 600)\n    );\n}\n","import { addCode } from '../../modelApi/common/addDecorators';\nimport { ContentModelCode } from '../../publicTypes/decorator/ContentModelCode';\nimport { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\nconst DefaultCode: ContentModelCode = {\n    format: {\n        fontFamily: 'monospace',\n    },\n};\n\n/**\n * Toggle italic style\n * @param editor The editor to operate on\n */\nexport default function toggleCode(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleCode',\n        (_, isTurningOn, segment) => {\n            if (segment) {\n                if (isTurningOn) {\n                    addCode(segment, DefaultCode);\n                } else {\n                    delete segment.code;\n                }\n            }\n        },\n        (_, segment) => !!segment?.code\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle italic style\n * @param editor The editor to operate on\n */\nexport default function toggleItalic(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleItalic',\n        (format, isTurningOn) => {\n            format.italic = !!isTurningOn;\n        },\n        format => !!format.italic\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle strikethrough style\n * @param editor The editor to operate on\n */\nexport default function toggleStrikethrough(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleStrikethrough',\n        (format, isTurningOn) => {\n            format.strikethrough = !!isTurningOn;\n        },\n        format => !!format.strikethrough\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle subscript style\n * @param editor The editor to operate on\n */\nexport default function toggleSubscript(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleSubscript',\n        (format, isTurningOn) => {\n            format.superOrSubScriptSequence = isTurningOn ? 'sub' : '';\n        },\n        format => format.superOrSubScriptSequence?.split(' ').pop() == 'sub'\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle superscript style\n * @param editor The editor to operate on\n */\nexport default function toggleSuperscript(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleSuperscript',\n        (format, isTurningOn) => {\n            format.superOrSubScriptSequence = isTurningOn ? 'super' : '';\n        },\n        format => format.superOrSubScriptSequence?.split(' ').pop() == 'super'\n    );\n}\n","import { formatSegmentWithContentModel } from '../utils/formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * Toggle underline style\n * @param editor The editor to operate on\n */\nexport default function toggleUnderline(editor: IContentModelEditor) {\n    formatSegmentWithContentModel(\n        editor,\n        'toggleUnderline',\n        (format, isTurningOn, segment) => {\n            format.underline = !!isTurningOn;\n\n            if (segment?.link) {\n                segment.link.format.underline = !!isTurningOn;\n            }\n        },\n        format => !!format.underline\n    );\n}\n","import hasSelectionInBlockGroup from './hasSelectionInBlockGroup';\nimport hasSelectionInSegment from './hasSelectionInSegment';\nimport { ContentModelBlock } from '../../publicTypes/block/ContentModelBlock';\n\n/**\n * Check if there is selection within the given block\n * @param block The block to check\n */\nexport default function hasSelectionInBlock(block: ContentModelBlock): boolean {\n    switch (block.blockType) {\n        case 'Paragraph':\n            return block.segments.some(hasSelectionInSegment);\n\n        case 'Table':\n            return block.rows.some(row => row.cells.some(hasSelectionInBlockGroup));\n\n        case 'BlockGroup':\n            return hasSelectionInBlockGroup(block);\n\n        case 'Divider':\n        case 'Entity':\n            return !!block.isSelected;\n\n        default:\n            return false;\n    }\n}\n","import hasSelectionInBlock from './hasSelectionInBlock';\nimport { ContentModelBlockGroup } from '../../publicTypes/group/ContentModelBlockGroup';\n\n/**\n * Check if there is selection within the given block\n * @param block The block to check\n */\nexport default function hasSelectionInBlockGroup(group: ContentModelBlockGroup): boolean {\n    if (group.blockGroupType == 'TableCell' && group.isSelected) {\n        return true;\n    }\n\n    if (group.blocks.some(hasSelectionInBlock)) {\n        return true;\n    }\n\n    return false;\n}\n","import hasSelectionInBlock from './hasSelectionInBlock';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\n\n/**\n * Check if there is selection within the given segment\n * @param segment The segment to check\n */\nexport default function hasSelectionInSegment(segment: ContentModelSegment): boolean {\n    return (\n        segment.isSelected ||\n        (segment.segmentType == 'General' && segment.blocks.some(hasSelectionInBlock))\n    );\n}\n","import { alignTable } from '../../modelApi/table/alignTable';\nimport { alignTableCell } from '../../modelApi/table/alignTableCell';\nimport { applyTableFormat } from '../../modelApi/table/applyTableFormat';\nimport { deleteTable } from '../../modelApi/table/deleteTable';\nimport { deleteTableColumn } from '../../modelApi/table/deleteTableColumn';\nimport { deleteTableRow } from '../../modelApi/table/deleteTableRow';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getFirstSelectedTable } from '../../modelApi/selection/collectSelections';\nimport { hasMetadata } from '../../domUtils/metadata/updateMetadata';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { insertTableColumn } from '../../modelApi/table/insertTableColumn';\nimport { insertTableRow } from '../../modelApi/table/insertTableRow';\nimport { mergeTableCells } from '../../modelApi/table/mergeTableCells';\nimport { mergeTableColumn } from '../../modelApi/table/mergeTableColumn';\nimport { mergeTableRow } from '../../modelApi/table/mergeTableRow';\nimport { normalizeTable } from '../../modelApi/table/normalizeTable';\nimport { splitTableCellHorizontally } from '../../modelApi/table/splitTableCellHorizontally';\nimport { splitTableCellVertically } from '../../modelApi/table/splitTableCellVertically';\nimport { TableOperation } from 'roosterjs-editor-types';\n\n/**\n * Format current focused table with the given format\n * @param editor The editor instance\n * @param operation The table operation to apply\n */\nexport default function editTable(editor: IContentModelEditor, operation: TableOperation) {\n    formatWithContentModel(editor, 'editTable', model => {\n        const tableModel = getFirstSelectedTable(model);\n\n        if (tableModel) {\n            switch (operation) {\n                case TableOperation.AlignCellBottom:\n                case TableOperation.AlignCellCenter:\n                case TableOperation.AlignCellLeft:\n                case TableOperation.AlignCellMiddle:\n                case TableOperation.AlignCellRight:\n                case TableOperation.AlignCellTop:\n                    alignTableCell(tableModel, operation);\n                    break;\n\n                case TableOperation.AlignCenter:\n                case TableOperation.AlignLeft:\n                case TableOperation.AlignRight:\n                    alignTable(tableModel, operation);\n                    break;\n\n                case TableOperation.DeleteColumn:\n                    deleteTableColumn(tableModel);\n                    break;\n\n                case TableOperation.DeleteRow:\n                    deleteTableRow(tableModel);\n                    break;\n\n                case TableOperation.DeleteTable:\n                    deleteTable(tableModel);\n                    break;\n\n                case TableOperation.InsertAbove:\n                case TableOperation.InsertBelow:\n                    insertTableRow(tableModel, operation);\n                    break;\n\n                case TableOperation.InsertLeft:\n                case TableOperation.InsertRight:\n                    insertTableColumn(tableModel, operation);\n                    break;\n\n                case TableOperation.MergeAbove:\n                case TableOperation.MergeBelow:\n                    mergeTableRow(tableModel, operation);\n                    break;\n\n                case TableOperation.MergeCells:\n                    mergeTableCells(tableModel);\n                    break;\n\n                case TableOperation.MergeLeft:\n                case TableOperation.MergeRight:\n                    mergeTableColumn(tableModel, operation);\n                    break;\n\n                case TableOperation.SplitHorizontally:\n                    splitTableCellHorizontally(tableModel);\n                    break;\n\n                case TableOperation.SplitVertically:\n                    splitTableCellVertically(tableModel);\n                    break;\n            }\n\n            normalizeTable(tableModel);\n\n            if (hasMetadata(tableModel)) {\n                applyTableFormat(tableModel, undefined /*newFormat*/, true /*keepCellShade*/);\n            }\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import { applyTableFormat } from '../../modelApi/table/applyTableFormat';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getFirstSelectedTable } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { TableMetadataFormat } from '../../publicTypes/format/formatParts/TableMetadataFormat';\n\n/**\n * Format current focused table with the given format\n * @param editor The editor instance\n * @param format The table format to apply\n * @param keepCellShade Whether keep existing shade color when apply format if there is a manually set shade color\n */\nexport default function formatTable(\n    editor: IContentModelEditor,\n    format: TableMetadataFormat,\n    keepCellShade?: boolean\n) {\n    formatWithContentModel(editor, 'formatTable', model => {\n        const tableModel = getFirstSelectedTable(model);\n\n        if (tableModel) {\n            applyTableFormat(tableModel, format, keepCellShade);\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import { applyTableFormat } from '../../modelApi/table/applyTableFormat';\nimport { createContentModelDocument } from '../../modelApi/creators/createContentModelDocument';\nimport { createSelectionMarker } from '../../modelApi/creators/createSelectionMarker';\nimport { createTableStructure } from '../../modelApi/table/createTableStructure';\nimport { deleteSelection } from '../../modelApi/edit/deleteSelection';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getOnDeleteEntityCallback } from '../../editor/utils/handleKeyboardEventCommon';\nimport { getPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { mergeModel } from '../../modelApi/common/mergeModel';\nimport { normalizeTable } from '../../modelApi/table/normalizeTable';\nimport { setSelection } from '../../modelApi/selection/setSelection';\nimport { TableMetadataFormat } from '../../publicTypes/format/formatParts/TableMetadataFormat';\n\n/**\n * Insert table into editor at current selection\n * @param editor The editor instance\n * @param columns Number of columns in table, it also controls the default table cell width:\n * if columns &lt;= 4, width = 120px; if columns &lt;= 6, width = 100px; else width = 70px\n * @param rows Number of rows in table\n * @param format (Optional) The table format. If not passed, the default format will be applied:\n * background color: #FFF; border color: #ABABAB\n */\nexport default function insertTable(\n    editor: IContentModelEditor,\n    columns: number,\n    rows: number,\n    format?: TableMetadataFormat\n) {\n    formatWithContentModel(editor, 'insertTable', model => {\n        const onDeleteEntity = getOnDeleteEntityCallback(editor);\n        const insertPosition = deleteSelection(model, onDeleteEntity).insertPoint;\n\n        if (insertPosition) {\n            const doc = createContentModelDocument();\n            const table = createTableStructure(doc, columns, rows);\n\n            normalizeTable(table, getPendingFormat(editor) || insertPosition.marker.format);\n            applyTableFormat(table, format);\n            mergeModel(model, doc, onDeleteEntity, {\n                insertPosition,\n                mergeCurrentFormat: true,\n            });\n\n            const firstBlock = table.rows[0]?.cells[0]?.blocks[0];\n\n            if (firstBlock?.blockType == 'Paragraph') {\n                const marker = createSelectionMarker(firstBlock.segments[0]?.format);\n                firstBlock.segments.unshift(marker);\n                setSelection(model, marker);\n            }\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import hasSelectionInBlockGroup from '../selection/hasSelectionInBlockGroup';\nimport { formatWithContentModel } from '../utils/formatWithContentModel';\nimport { getFirstSelectedTable } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { normalizeTable } from '../../modelApi/table/normalizeTable';\nimport { setTableCellBackgroundColor } from '../../modelApi/table/setTableCellBackgroundColor';\n\n/**\n * Set table cell shade color\n * @param editor The editor instance\n * @param color The color to set. Pass null to remove existing shade color\n */\nexport default function setTableCellShade(editor: IContentModelEditor, color: string | null) {\n    formatWithContentModel(editor, 'setTableCellShade', model => {\n        const table = getFirstSelectedTable(model);\n\n        if (table) {\n            normalizeTable(table);\n\n            table.rows.forEach(row =>\n                row.cells.forEach(cell => {\n                    if (hasSelectionInBlockGroup(cell)) {\n                        setTableCellBackgroundColor(cell, color, true /*isColorOverride*/);\n                    }\n                })\n            );\n\n            return true;\n        } else {\n            return false;\n        }\n    });\n}\n","import { ContentModelImage } from '../../publicTypes/segment/ContentModelImage';\nimport { EditImageEventData, PluginEventType } from 'roosterjs-editor-types';\nimport { formatSegmentWithContentModel } from './formatSegmentWithContentModel';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * @internal\n */\nexport default function formatImageWithContentModel(\n    editor: IContentModelEditor,\n    apiName: string,\n    callback: (segment: ContentModelImage) => void,\n    eventChangeData?: EditImageEventData\n) {\n    formatSegmentWithContentModel(\n        editor,\n        apiName,\n        (_, __, segment) => {\n            if (segment?.segmentType == 'Image') {\n                callback(segment);\n                if (eventChangeData) {\n                    editor.triggerPluginEvent(PluginEventType.EditImage, eventChangeData);\n                }\n            }\n        },\n        undefined /** segmentHasStyleCallback **/,\n        undefined /** includingFormatHolder */\n    );\n}\n","import { ContentModelParagraph } from '../../publicTypes/block/ContentModelParagraph';\nimport { formatWithContentModel } from './formatWithContentModel';\nimport { getSelectedParagraphs } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n\n/**\n * @internal\n */\nexport function formatParagraphWithContentModel(\n    editor: IContentModelEditor,\n    apiName: string,\n    setStyleCallback: (paragraph: ContentModelParagraph) => void\n) {\n    formatWithContentModel(\n        editor,\n        apiName,\n        model => {\n            const paragraphs = getSelectedParagraphs(model);\n\n            paragraphs.forEach(setStyleCallback);\n\n            return paragraphs.length > 0;\n        },\n        {\n            preservePendingFormat: true,\n        }\n    );\n}\n","import { adjustWordSelection } from '../../modelApi/selection/adjustWordSelection';\nimport { ContentModelSegment } from '../../publicTypes/segment/ContentModelSegment';\nimport { ContentModelSegmentFormat } from '../../publicTypes/format/ContentModelSegmentFormat';\nimport { formatWithContentModel } from './formatWithContentModel';\nimport { getPendingFormat, setPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { getSelectedSegments } from '../../modelApi/selection/collectSelections';\nimport { IContentModelEditor } from '../../publicTypes/IContentModelEditor';\n/**\n * @internal\n */\nexport function formatSegmentWithContentModel(\n    editor: IContentModelEditor,\n    apiName: string,\n    toggleStyleCallback: (\n        format: ContentModelSegmentFormat,\n        isTuringOn: boolean,\n        segment: ContentModelSegment | null\n    ) => void,\n    segmentHasStyleCallback?: (\n        format: ContentModelSegmentFormat,\n        segment: ContentModelSegment | null\n    ) => boolean,\n    includingFormatHolder?: boolean\n) {\n    formatWithContentModel(editor, apiName, model => {\n        let segments = getSelectedSegments(model, !!includingFormatHolder);\n        const pendingFormat = getPendingFormat(editor);\n        let isCollapsedSelection =\n            segments.length == 1 && segments[0].segmentType == 'SelectionMarker';\n\n        if (isCollapsedSelection) {\n            segments = adjustWordSelection(model, segments[0]);\n            if (segments.length > 1) {\n                isCollapsedSelection = false;\n            }\n        }\n\n        const formatsAndSegments: [\n            ContentModelSegmentFormat,\n            ContentModelSegment | null\n        ][] = pendingFormat\n            ? [[pendingFormat, null]]\n            : segments.map(segment => [segment.format, segment]);\n\n        const isTurningOff = segmentHasStyleCallback\n            ? formatsAndSegments.every(([format, segment]) =>\n                  segmentHasStyleCallback(format, segment)\n              )\n            : false;\n\n        formatsAndSegments.forEach(([format, segment]) =>\n            toggleStyleCallback(format, !isTurningOff, segment)\n        );\n\n        if (!pendingFormat && isCollapsedSelection) {\n            const pos = editor.getFocusedPosition();\n\n            if (pos) {\n                setPendingFormat(editor, segments[0].format, pos);\n            }\n        }\n\n        if (isCollapsedSelection) {\n            editor.focus();\n            return false;\n        } else {\n            return formatsAndSegments.length > 0;\n        }\n    });\n}\n","import { ChangeSource } from 'roosterjs-editor-types';\nimport { ContentModelDocument } from '../../publicTypes/group/ContentModelDocument';\nimport { DomToModelOption, IContentModelEditor } from '../../publicTypes/IContentModelEditor';\nimport { getPendingFormat, setPendingFormat } from '../../modelApi/format/pendingFormat';\nimport { OnNodeCreated } from '../../publicTypes/context/ModelToDomSettings';\nimport { reducedModelChildProcessor } from '../../domToModel/processors/reducedModelChildProcessor';\n\n/**\n * @internal\n */\nexport interface FormatWithContentModelOptions {\n    /**\n     * When set to true, it will only create Content Model for selected content\n     */\n    useReducedModel?: boolean;\n\n    /**\n     * When set to true, if there is pending format, it will be preserved after this format operation is done\n     */\n    preservePendingFormat?: boolean;\n\n    /**\n     * When pass true, skip adding undo snapshot when write Content Model back to DOM\n     */\n    skipUndoSnapshot?: boolean;\n\n    /**\n     * Change source used for triggering a ContentChanged event. @default ChangeSource.Format.\n     */\n    changeSource?: string;\n\n    /**\n     * An optional callback that will be called when a DOM node is created\n     * @param modelElement The related Content Model element\n     * @param node The node created for this model element\n     */\n    onNodeCreated?: OnNodeCreated;\n\n    /**\n     * Optional callback to get an object used for change data in ContentChangedEvent\n     */\n    getChangeData?: () => any;\n}\n\n/**\n * @internal\n */\nexport function formatWithContentModel(\n    editor: IContentModelEditor,\n    apiName: string,\n    callback: (model: ContentModelDocument) => boolean,\n    options?: FormatWithContentModelOptions\n) {\n    const {\n        useReducedModel,\n        onNodeCreated,\n        preservePendingFormat,\n        getChangeData,\n        skipUndoSnapshot,\n        changeSource,\n    } = options || {};\n    const domToModelOption: DomToModelOption | undefined = useReducedModel\n        ? {\n              processorOverride: {\n                  child: reducedModelChildProcessor,\n              },\n          }\n        : undefined;\n    const model = editor.createContentModel(domToModelOption);\n\n    if (callback(model)) {\n        const callback = () => {\n            editor.focus();\n            if (model) {\n                editor.setContentModel(model, { onNodeCreated });\n            }\n\n            if (preservePendingFormat) {\n                const pendingFormat = getPendingFormat(editor);\n                const pos = editor.getFocusedPosition();\n\n                if (pendingFormat && pos) {\n                    setPendingFormat(editor, pendingFormat, pos);\n                }\n            }\n\n            return getChangeData?.();\n        };\n\n        if (skipUndoSnapshot) {\n            callback();\n\n            if (changeSource) {\n                editor.triggerContentChangedEvent(changeSource, getChangeData?.());\n            }\n        } else {\n            editor.addUndoSnapshot(\n                callback,\n                changeSource || ChangeSource.Format,\n                false /*canUndoByBackspace*/,\n                {\n                    formatApiName: apiName,\n                }\n            );\n        }\n\n        editor.cacheContentModel?.(model);\n    }\n}\n","/**\r\n * enum for setting block alignment, used by setAlignment API\r\n */\r\nexport enum CompatibleAlignment {\r\n\r\n    /**\r\n     * Align left\r\n     */\r\n    Left,\r\n\r\n    /**\r\n     * Align center\r\n     */\r\n    Center,\r\n\r\n    /**\r\n     * Align right\r\n     */\r\n    Right,\r\n}\r\n","/**\n *  Enum used to control the different types of bullet list\n */\r\nexport enum CompatibleBulletListType {\r\n\n    /**\n     * Minimum value of the enum\n     */\n    Min = 1,\n\n    /**\n     * Bullet triggered by *\n     */\n    Disc = 1,\n\n    /**\n     * Bullet triggered by -\n     */\n    Dash = 2,\n\n    /**\n     * Bullet triggered by --\n     */\n    Square = 3,\n\n    /**\n     * Bullet triggered by >\n     */\n    ShortArrow = 4,\n\n    /**\n     * Bullet triggered by ->\n     */\n    LongArrow = 5,\n\n    /**\n     * Bullet triggered by =>\n     */\n    UnfilledArrow = 6,\n\n    /**\n     * Bullet triggered by —\n     */\n    Hyphen = 7,\n\n    /**\n     * Bullet triggered by -->\n     */\n    DoubleLongArrow = 8,\n\n    /**\n     * Bullet type circle\n     */\n    Circle = 9,\n\n    /**\n     * Maximum value of the enum\n     */\n    Max = 9,\n}\r\n","/**\n * The enum used for controlling the capitalization of text.\n * Used by changeCapitalization API\n */\r\nexport enum CompatibleCapitalization {\r\n\n    /**\n     * Transforms the first character after punctuation mark followed by space\n     * to uppercase and the rest of characters to lowercase.\n     */\n    Sentence = 'sentence',\n\n    /**\n     * Transforms all characters to lowercase\n     */\n    Lowercase = 'lowercase',\n\n    /**\n     * Transforms all characters to uppercase\n     */\n    Uppercase = 'uppercase',\n\n    /**\n     * Transforms the first character of each word to uppercase\n     */\n    CapitalizeEachWord = 'capitalize',\n}\r\n","/**\r\n * Possible change sources. Here are the predefined sources.\r\n * It can also be other string if the change source can't fall into these sources.\r\n */\r\nexport enum CompatibleChangeSource {\r\n\r\n    /**\r\n     * Content changed by auto link\r\n     */\r\n    AutoLink = 'AutoLink',\r\n\r\n    /**\r\n     * Content changed by create link\r\n     */\r\n    CreateLink = 'CreateLink',\r\n\r\n    /**\r\n     * Content changed by format\r\n     */\r\n    Format = 'Format',\r\n\r\n    /**\r\n     * Content changed by image resize\r\n     */\r\n    ImageResize = 'ImageResize',\r\n\r\n    /**\r\n     * Content changed by paste\r\n     */\r\n    Paste = 'Paste',\r\n\r\n    /**\r\n     * Content changed by setContent API\r\n     */\r\n    SetContent = 'SetContent',\r\n\r\n    /**\r\n     * Content changed by cut operation\r\n     */\r\n    Cut = 'Cut',\r\n\r\n    /**\r\n     * Content changed by drag & drop operation\r\n     */\r\n    Drop = 'Drop',\r\n\r\n    /**\r\n     * Insert a new entity into editor\r\n     */\r\n    InsertEntity = 'InsertEntity',\r\n\r\n    /**\r\n     * Editor is switched to dark mode, content color is changed\r\n     */\r\n    SwitchToDarkMode = 'SwitchToDarkMode',\r\n\r\n    /**\r\n     * Editor is switched to light mode, content color is changed\r\n     */\r\n    SwitchToLightMode = 'SwitchToLightMode',\r\n\r\n    /**\r\n     * List chain reorganized numbers of lists\r\n     */\r\n    ListChain = 'ListChain',\r\n\r\n    /**\r\n     * Keyboard event, used by Content Model.\r\n     * Data of this event will be the key code number\r\n     */\r\n    Keyboard = 'Keyboard',\r\n}\r\n","/**\n * Represents the strategy to clear the format of the current editor selection\n */\r\nexport enum CompatibleClearFormatMode {\r\n\n    /**\n     * Inline format. Remove text format.\n     */\n    Inline,\n\n    /**\n     * BLock format. Remove text and structure format of the block.\n     */\n    Block,\n\n    /**\n     * Detect Inline or Block format based on the current editor selector.\n     */\n    AutoDetect,\n}\r\n","/**\n * Represents the mode of color transformation\n */\r\nexport enum CompatibleColorTransformDirection {\r\n\n    /**\n     * Transform from light to dark\n     */\n    LightToDark = 0,\n\n    /**\n     * Transform from dark to light\n     */\n    DarkToLight = 1,\n}\r\n","/**\r\n * The position. Mostly used for content insertion and traversing\r\n * On insertion, we will need to specify where we want the content to be placed (begin, end, selection or outside)\r\n * On content traversing, we will need to specify the start position of traversing\r\n */\r\nexport enum CompatibleContentPosition {\r\n\r\n    /**\r\n     * Begin of the container\r\n     */\r\n    Begin,\r\n\r\n    /**\r\n     * End of the container\r\n     */\r\n    End,\r\n\r\n    /**\r\n     * End of the content div domain.\r\n     */\r\n    DomEnd,\r\n\r\n    /**\r\n     * Selection start\r\n     */\r\n    SelectionStart,\r\n\r\n    /**\r\n     * Outside of editor\r\n     */\r\n    Outside,\r\n\r\n    /**\r\n     * Manually defined range\r\n     */\r\n    Range,\r\n}\r\n","/**\n * Prefix of content types\n */\r\nexport enum CompatibleContentTypePrefix {\r\n\n    /**\n     * Text type prefix\n     */\n    Text = 'text/',\n\n    /**\n     * Image type prefix\n     */\n    Image = 'image/',\n}\r\n\r\n\n/**\n * Known content types\n */\r\nexport enum CompatibleContentType {\r\n\n    /**\n     * Plain text content type\n     */\n    PlainText = 'text/plain',\n\n    /**\n     * HTML content type\n     */\n    HTML = 'text/html',\n}\r\n","/**\n * @deprecated\n * Constants string for dataset names used by dark mode\n */\r\nexport enum CompatibleDarkModeDatasetNames {\r\n\n    /**\n     * Original style text color\n     */\n    OriginalStyleColor = 'ogsc',\n\n    /**\n     * Original style background color\n     */\n    OriginalStyleBackgroundColor = 'ogsb',\n\n    /**\n     * Original attribute text color\n     */\n    OriginalAttributeColor = 'ogac',\n\n    /**\n     * Original attribute background color\n     */\n    OriginalAttributeBackgroundColor = 'ogab',\n}\r\n","/**\n * Types of definitions, used by Definition type\n */\r\nexport enum CompatibleDefinitionType {\r\n\n    /**\n     * Boolean type definition, represents a boolean type value\n     */\n    Boolean,\n\n    /**\n     * Number type definition, represents a number type value\n     */\n    Number,\n\n    /**\n     * String type definition, represents a string type value\n     */\n    String,\n\n    /**\n     * Array type definition, represents an array with a given item type\n     */\n    Array,\n\n    /**\n     * Object type definition, represents an object with the given property types\n     */\n    Object,\n\n    /**\n     * Customize type definition, represents a customized type with a validator function\n     */\n    Customize,\n}\r\n","/**\n * Class names for Delimiter\n */\r\nexport enum CompatibleDelimiterClasses {\r\n\n    /**\n     * Class name to specify this delimiter is before an entity\n     */\n    DELIMITER_BEFORE = 'entityDelimiterBefore',\n\n    /**\n     *  Class name to specify this delimiter is after an entity\n     */\n    DELIMITER_AFTER = 'entityDelimiterAfter',\n}\r\n","/**\r\n * enum for setting block direction, used by setDirection API\r\n */\r\nexport enum CompatibleDirection {\r\n\r\n    /**\r\n     * Left to right\r\n     */\r\n    LeftToRight,\r\n\r\n    /**\r\n     * Right to left\r\n     */\r\n    RightToLeft,\r\n}\r\n","/**\n * Command strings for Document.execCommand() API\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\n */\r\nexport enum CompatibleDocumentCommand {\r\n\n    /**\n     * Changes the browser auto-link behavior (Internet Explorer only)\n     */\n    AutoUrlDetect = 'AutoUrlDetect',\n\n    /**\n     * Changes the document background color. In styleWithCss mode, it affects the background color of the containing block instead.\n     * This requires a &lt;color&gt; value string to be passed in as a value argument. Note that Internet Explorer uses this to set the\n     * text background color.\n     */\n    BackColor = 'backColor',\n\n    /**\n     * Toggles bold on/off for the selection or at the insertion point. Internet Explorer uses the &lt;strong&gt; tag instead of &lt;b&gt;.\n     */\n    Bold = 'bold',\n\n    /**\n     * Clears all authentication credentials from the cache.\n     */\n    ClearAuthenticationCache = 'ClearAuthenticationCache',\n\n    /**\n     * Makes the content document either read-only or editable. This requires a boolean true/false as the value argument.\n     * (Not supported by Internet Explorer.)\n     */\n    ContentReadOnly = 'contentReadOnly',\n\n    /**\n     * Copies the current selection to the clipboard. Conditions of having this behavior enabled vary from one browser to another,\n     * and have evolved over time. Check the compatibility table to determine if you can use it in your case.\n     */\n    Copy = 'copy',\n\n    /**\n     * Creates an hyperlink from the selection, but only if there is a selection. Requires a URI string as a value argument for the\n     * hyperlink's href. The URI must contain at least a single character, which may be whitespace.\n     * (Internet Explorer will create a link with a null value.)\n     */\n    CreateLink = 'createLink',\n\n    /**\n     * Removes the current selection and copies it to the clipboard. When this behavior is enabled varies between browsers,\n     * and its conditions have evolved over time. Check the compatibility table for usage details.\n     */\n    Cut = 'cut',\n\n    /**\n     * Adds a &lt;small&gt; tag around the selection or at the insertion point. (Not supported by Internet Explorer.)\n     */\n    DecreaseFontSize = 'decreaseFontSize',\n\n    /**\n     * Changes the paragraph separator used when new paragraphs are created in editable text regions. See Differences in markup\n     * generation for more details.\n     */\n    DefaultParagraphSeparator = 'defaultParagraphSeparator',\n\n    /**\n     * Deletes the current selection.\n     */\n    Delete = 'delete',\n\n    /**\n     * Enables or disables the table row/column insertion and deletion controls. (Not supported by Internet Explorer.)\n     */\n    EnableInlineTableEditing = 'enableInlineTableEditing',\n\n    /**\n     * Enables or disables the resize handles on images and other resizable objects. (Not supported by Internet Explorer.)\n     */\n    EnableObjectResizing = 'enableObjectResizing',\n\n    /**\n     * Changes the font name for the selection or at the insertion point. This requires a font name string (like \"Arial\")\n     * as a value argument.\n     */\n    FontName = 'fontName',\n\n    /**\n     * Changes the font size for the selection or at the insertion point. This requires an integer from 1-7 as a value argument.\n     */\n    FontSize = 'fontSize',\n\n    /**\n     * Changes a font color for the selection or at the insertion point. This requires a hexadecimal color value string\n     * as a value argument.\n     */\n    ForeColor = 'foreColor',\n\n    /**\n     * Adds an HTML block-level element around the line containing the current selection, replacing the block element containing\n     * the line if one exists (in Firefox, &lt;blockquote&gt; is the exception — it will wrap any containing block element).\n     * Requires a tag-name string as a value argument. Virtually all block-level elements can be used.\n     * (Internet Explorer supports only heading tags H1–H6, ADDRESS, and PRE, which must be wrapped in angle brackets, such as \"&lt;H1&gt;\".)\n     */\n    FormatBlock = 'formatBlock',\n\n    /**\n     * Deletes the character ahead of the cursor's position, identical to hitting the Delete key on a Windows keyboard.\n     */\n    ForwardDelete = 'forwardDelete',\n\n    /**\n     * Adds a heading element around a selection or insertion point line. Requires the tag-name strings a value argument (i.e. \"H1\", \"H6\").\n     * (Not supported by Internet Explorer and Safari.)\n     */\n    Heading = 'heading',\n\n    /**\n     * Changes the background color for the selection or at the insertion point. Requires a color value string as a value argument.\n     * useCSS must be true for this to function. (Not supported by Internet Explorer.)\n     */\n    HiliteColor = 'hiliteColor',\n\n    /**\n     * Adds a &lt;big&gt; tag around the selection or at the insertion point. (Not supported by Internet Explorer.)\n     */\n    IncreaseFontSize = 'increaseFontSize',\n\n    /**\n     * Indents the line containing the selection or insertion point. In Firefox, if the selection spans multiple lines at different\n     * levels of indentation, only the least indented lines in the selection will be indented.\n     */\n    Indent = 'indent',\n\n    /**\n     * Controls whether the Enter key inserts a &lt;br&gt; element, or splits the current block element into two.\n     * (Not supported by Internet Explorer.)\n     */\n    InsertBrOnReturn = 'insertBrOnReturn',\n\n    /**\n     * Inserts a &lt;hr&gt; element at the insertion point, or replaces the selection with it.\n     */\n    InsertHorizontalRule = 'insertHorizontalRule',\n\n    /**\n     * Inserts an HTML string at the insertion point (deletes selection). Requires a valid HTML string as a value argument.\n     * (Not supported by Internet Explorer.)\n     */\n    InsertHTML = 'insertHTML',\n\n    /**\n     * Inserts an image at the insertion point (deletes selection). Requires a URL string for the image's src as a value argument.\n     * The requirements for this string are the same as createLink.\n     */\n    InsertImage = 'insertImage',\n\n    /**\n     * Creates a numbered ordered list for the selection or at the insertion point.\n     */\n    InsertOrderedList = 'insertOrderedList',\n\n    /**\n     * Creates a bulleted unordered list for the selection or at the insertion point.\n     */\n    InsertUnorderedList = 'insertUnorderedList',\n\n    /**\n     * Inserts a paragraph around the selection or the current line.\n     * (Internet Explorer inserts a paragraph at the insertion point and deletes the selection.)\n     */\n    InsertParagraph = 'insertParagraph',\n\n    /**\n     * Inserts the given plain text at the insertion point (deletes selection).\n     */\n    InsertText = 'insertText',\n\n    /**\n     * Toggles italics on/off for the selection or at the insertion point.\n     * (Internet Explorer uses the &lt;em&gt; element instead of &lt;i&gt;.)\n     */\n    Italic = 'italic',\n\n    /**\n     * Centers the selection or insertion point.\n     */\n    JustifyCenter = 'justifyCenter',\n\n    /**\n     * Justifies the selection or insertion point.\n     */\n    JustifyFull = 'justifyFull',\n\n    /**\n     * Justifies the selection or insertion point to the left.\n     */\n    JustifyLeft = 'justifyLeft',\n\n    /**\n     * Right-justifies the selection or the insertion point.\n     */\n    JustifyRight = 'justifyRight',\n\n    /**\n     * Outdents the line containing the selection or insertion point.\n     */\n    Outdent = 'outdent',\n\n    /**\n     * Pastes the clipboard contents at the insertion point (replaces current selection). Disabled for web content. See [1].\n     */\n    Paste = 'paste',\n\n    /**\n     * Redoes the previous undo command.\n     */\n    Redo = 'redo',\n\n    /**\n     * Removes all formatting from the current selection.\n     */\n    RemoveFormat = 'removeFormat',\n\n    /**\n     * Selects all of the content of the editable region.\n     */\n    SelectAll = 'selectAll',\n\n    /**\n     * Toggles strikethrough on/off for the selection or at the insertion point.\n     */\n    StrikeThrough = 'strikeThrough',\n\n    /**\n     * Toggles subscript on/off for the selection or at the insertion point.\n     */\n    Subscript = 'subscript',\n\n    /**\n     * Toggles superscript on/off for the selection or at the insertion point.\n     */\n    Superscript = 'superscript',\n\n    /**\n     * Toggles underline on/off for the selection or at the insertion point.\n     */\n    Underline = 'underline',\n\n    /**\n     * Undoes the last executed command.\n     */\n    Undo = 'undo',\n\n    /**\n     * Removes the anchor element from a selected hyperlink.\n     */\n    Unlink = 'unlink',\n\n    /**\n     * Replaces the useCSS command. true modifies/generates style attributes in markup, false generates presentational elements.\n     */\n    StyleWithCSS = 'styleWithCSS',\n}\r\n","/**\n * The is essentially an enum representing result from browser compareDocumentPosition API\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n */\r\nexport enum CompatibleDocumentPosition {\r\n\n    /**\n     * Same node\n     */\n    Same = 0,\n\n    /**\n     * Node is disconnected from document\n     */\n    Disconnected = 1,\n\n    /**\n     * Node is preceding the comparing node\n     */\n    Preceding = 2,\n\n    /**\n     * Node is following the comparing node\n     */\n    Following = 4,\n\n    /**\n     * Node contains the comparing node\n     */\n    Contains = 8,\n\n    /**\n     * Node is contained by the comparing node\n     */\n    ContainedBy = 16,\n}\r\n","/**\n * CSS Class names for Entity\n */\r\nexport enum CompatibleEntityClasses {\r\n\n    /**\n     * Class name to specify this is an entity\n     */\n    ENTITY_INFO_NAME = '_Entity',\n\n    /**\n     * Class name to specify the type of an entity\n     */\n    ENTITY_TYPE_PREFIX = '_EType_',\n\n    /**\n     * Class name to specify the ID of an entity\n     */\n    ENTITY_ID_PREFIX = '_EId_',\n\n    /**\n     * Class name to specify if the entity is readonly\n     */\n    ENTITY_READONLY_PREFIX = '_EReadonly_',\n}\r\n","/**\n * Define possible operations to an entity\n */\r\nexport enum CompatibleEntityOperation {\r\n\n    /**\n     * Notify plugins that there is a new plugin was added into editor.\n     * Plugin can handle this event to entity hydration.\n     * This event will be only fired once for each entity DOM node.\n     * After undo, or copy/paste, since new DOM nodes were added, this event will be fired\n     * for those entities represented by newly added nodes.\n     */\n    NewEntity,\n\n    /**\n     * Notify plugins that user is clicking target to an entity\n     */\n    Click,\n\n    /**\n     * Notify plugins that user is triggering context menu to an entity\n     */\n    ContextMenu,\n\n    /**\n     * Notify plugins that user is escaping from an entity by pressing ESC key\n     */\n    Escape,\n\n    /**\n     * Notify plugins that user is removing an entity from its start position using DELETE key\n     */\n    RemoveFromStart,\n\n    /**\n     * Notify plugins that user is remove an entity from its end position using BACKSPACE key\n     */\n    RemoveFromEnd,\n\n    /**\n     * Notify plugins that an entity is being overwritten.\n     * This can be caused by key in, cut, paste, delete, backspace ... on a selection\n     * which contains some entities.\n     */\n    Overwrite,\n\n    /**\n     * Notify plugins that an entity is being partially overwritten.\n     * This happens when user selected part of the entity then do key press, or cut, paste, delete, backspace, ...\n     */\n    PartialOverwrite,\n\n    /**\n     * Notify plugins that editor is generating HTML content for save.\n     * Plugin should use this event to remove any temporary content, and only leave DOM nodes that\n     * should be saved as HTML string.\n     * This event will provide a cloned DOM tree for each entity, do NOT compare the DOM nodes with cached nodes\n     * because it will always return false.\n     */\n    ReplaceTemporaryContent,\n\n    /**\n     * @deprecated\n     */\n    AddShadowRoot,\n\n    /**\n     * @deprecated\n     */\n    RemoveShadowRoot,\n\n    /**\n     * Notify plugins that a new entity state need to be updated to an entity.\n     * This is normally happened when user undo/redo the content with an entity snapshot added by a plugin that handles entity\n     */\n    UpdateEntityState,\n}\r\n","/**\n * Experimental feature flags\n */\r\nexport enum CompatibleExperimentalFeatures {\r\n\n    // #region Graduated and deprecated features.\n    // These features will be removed in next major release\n    /**\n     * @deprecated This feature is always enabled\n     */\n    NewIndentation = 'NewIndentation',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    NewBullet = 'NewBullet',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    NewNumbering = 'NewNumbering',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    ListChain = 'ListChain',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    MergePastedLine = 'MergePastedLine',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    SingleDirectionResize = 'SingleDirectionResize',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    PasteWithLinkPreview = 'PasteWithLinkPreview',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    ImageRotate = 'ImageRotate',\n\n    /**\n     * @deprecated This feature is always enabled\n     */\n    ImageCrop = 'ImageCrop',\n\n    /**\n     * @deprecated This feature is always enabled\n     * Check if the element has a style attribute, if not, apply the default format\n     */\n    AlwaysApplyDefaultFormat = 'AlwaysApplyDefaultFormat',\n\n    /**\n     * @deprecated This feature can be enabled/disabled using Paste Plugin contructor param\n     * Paste the Html instead of the Img when the Html Body only have one IMG Child node\n     */\n    ConvertSingleImageBody = 'ConvertSingleImageBody',\n\n    /**\n     * @deprecated This feature is always enabled\n     * Align table elements to left, center and right using setAlignment API\n     */\n    TableAlignment = 'TableAlignment',\n\n    /**\n     * @deprecated this feature is always enabled\n     * Provide a circular resize handles that adaptive the number od handles to the size of the image\n     */\n    AdaptiveHandlesResizer = 'AdaptiveHandlesResizer',\n\n    /**\n     * @deprecated this feature is always disabled\n     * Automatically transform -- into hyphen, if typed between two words.\n     */\n    AutoHyphen = 'AutoHyphen',\n\n    /**\n     * @deprecated this feature is always disabled\n     * Use pending format strategy to do style based format, e.g. Font size, Color.\n     * With this feature enabled, we don't need to insert temp ZeroWidthSpace character to hold pending format\n     * when selection is collapsed. Instead, we will hold the pending format in memory and only apply it when type something\n     */\n    PendingStyleBasedFormat = 'PendingStyleBasedFormat',\n\n    /**\n     * @deprecated this feature is always disabled\n     * Normalize list to make sure it can be displayed correctly in other client\n     * e.g. We will move list items with \"display: block\" into previous list item and change tag to be DIV\n     */\n    NormalizeList = 'NormalizeList',\n\n    /**\n     * @deprecated this feature is always enabled\n     * When a html image is selected, the selected image data will be stored by editor core.\n     */\n    ImageSelection = 'ImageSelection',\n\n    /**\n     * @deprecated this feature is always enabled\n     * Use variable-based dark mode solution rather than dataset-based solution.\n     * When enable this feature, need to pass in a DarkModelHandler object to each call of setColor and applyFormat\n     * if you need them work for dark mode\n     */\n    VariableBasedDarkColor = 'VariableBasedDarkColor',\n\n    /**\n     * @deprecated this feature is always enabled\n     * Align list elements elements to left, center and right using setAlignment API\n     */\n    ListItemAlignment = 'ListItemAlignment',\n\n    /**\n     * @deprecated\n     */\n    DefaultFormatInSpan = 'DefaultFormatInSpan',\n\n    /**\n     * @deprecated\n     */\n    DefaultFormatOnContainer = 'DefaultFormatOnContainer',\n\n    //#endregion\n\n    /**\n     * Provide additional Tab Key Features. Requires Text Features Content Editable Features\n     */\n    TabKeyTextFeatures = 'TabKeyTextFeatures',\n\n    /**\n     * Trigger formatting by a especial characters. Ex: (A), 1. i).\n     */\n    AutoFormatList = 'AutoFormatList',\n\n    /**\n     * With this feature enabled, when writing back a list item we will re-use all\n     * ancestor list elements, even if they don't match the types currently in the\n     * listTypes array for that item. The only list that we will ensure is correct\n     * is the one closest to the item.\n     */\n    ReuseAllAncestorListElements = 'ReuseAllAncestorListElements',\n\n    /**\n     * Reuse existing DOM structure if possible when convert Content Model back to DOM tree\n     */\n    ReusableContentModel = 'ReusableContentModel',\n\n    /**\n     * Handle keyboard editing event with Content Model\n     */\n    EditWithContentModel = 'EditWithContentModel',\n\n    /**\n     * Delete table with Backspace key with the whole was selected with table selector\n     */\n    DeleteTableWithBackspace = 'DeleteTableWithBackspace',\n\n    /**\n     * Add entities around a Read Only  Inline entity to prevent cursor to be hidden when cursor is next of it.\n     */\n    InlineEntityReadOnlyDelimiters = 'InlineEntityReadOnlyDelimiters',\n\n    /**\n     * Paste with Content model\n     */\n    ContentModelPaste = 'ContentModelPaste',\n}\r\n","/**\r\n * The enum used for increase or decrease font size\r\n * Used by setFontSize API\r\n */\r\nexport enum CompatibleFontSizeChange {\r\n\r\n    /**\r\n     * Increase font size\r\n     */\r\n    Increase,\r\n\r\n    /**\r\n     * Decrease font size\r\n     */\r\n    Decrease,\r\n}\r\n","/**\n * Represents a mode number to indicate what kind of content to retrieve when call Editor.getContent()\n */\r\nexport enum CompatibleGetContentMode {\r\n\n    /**\n     * The clean content without any temporary content only for editor.\n     * This is the default value. Call to Editor.getContent() with trigger an ExtractContentWithDom event\n     * so that plugins can remove their temporary content, and will return the HTML content\n     * which is ready for save to storage.\n     */\n    CleanHTML = 0,\n\n    /**\n     * Retrieve the raw HTML string in current editor. Temporary content will be included.\n     */\n    RawHTMLOnly = 1,\n\n    /**\n     * Retrieve the raw HTML string in current editor with a selection marker. This can be used for\n     * save current editor state and call to SetContent with this result can fully restore editor state\n     * including current selection\n     */\n    RawHTMLWithSelection = 2,\n\n    /**\n     * Get plain text content only, all format will be ignored\n     */\n    PlainText,\n\n    /**\n     * A fast way to get plain text content, the line-end positions may not be exactly same with HTML content,\n     * but the text content should be the same. This is used for quickly retrieve text content and check\n     * text only\n     */\n    PlainTextFast,\n}\r\n","/**\n * Operation flags for ImageEdit plugin\n */\r\nexport enum CompatibleImageEditOperation {\r\n\n    /**\n     * No operation\n     */\n    None = 0,\n\n    /**\n     * Resize image from corner ( horizontal and vertical resize)\n     */\n    CornerResize = 1,\n\n    /**\n     * Resize image from side ( either horizontal or vertical resize)\n     */\n    SideResize = 2,\n\n    /**\n     * Image resize\n     */\n    Resize = CornerResize | SideResize,\n\n    /**\n     * Image rotate\n     */\n    Rotate = 4,\n\n    /**\n     * Image resize and rotate\n     */\n    ResizeAndRotate = Resize | Rotate,\n\n    /**\n     * Image crop\n     */\n    Crop = 8,\n\n    /**\n     * All operations\n     */\n    All = ResizeAndRotate | Crop,\n}\r\n","/**\r\n * The enum used for increase or decrease indentation of a block\r\n * Used by setIndentation API\r\n */\r\nexport enum CompatibleIndentation {\r\n\r\n    /**\r\n     * Increase indentation\r\n     */\r\n    Increase,\r\n\r\n    /**\r\n     * Decrease indentation\r\n     */\r\n    Decrease,\r\n}\r\n","/**\n * Key numbers common used keys\n */\r\nexport enum CompatibleKeys {\r\n\n    NULL = 0,\n    BACKSPACE = 8,\n    TAB = 9,\n    ENTER = 13,\n    SHIFT = 16,\n    CTRL_LEFT = 17,\n    ALT = 18,\n    ESCAPE = 27,\n    SPACE = 32,\n    PAGEUP = 33,\n    END = 35,\n    HOME = 36,\n    LEFT = 37,\n    UP = 38,\n    RIGHT = 39,\n    DOWN = 40,\n    PRINT_SCREEN = 44,\n    DELETE = 46,\n    /**\n     * @deprecated Just for backward compatibility\n     */\n    EIGHT_ASTIRISK = 56,\n    EIGHT_ASTERISK = 56,\n    B = 66,\n    I = 73,\n    U = 85,\n    Y = 89,\n    Z = 90,\n    META_LEFT = 91,\n    COMMA = 188,\n    DASH_UNDERSCORE = 189,\n    PERIOD = 190,\n    /**\n     * @deprecated Just for backward compatibility\n     */\n    FORWARDSLASH = 191,\n    FORWARD_SLASH = 191,\n    GRAVE_TILDE = 192,\n\n    /**\n     * Keys below are non-standard, and should be used in ContentEditFeatures only\n     */\n    CONTENTCHANGED = 0x101,\n    RANGE = 0x102,\n\n    Ctrl = 0x1000,\n    Meta = 0x2000,\n    Shift = 0x4000,\n}\r\n","/**\n * Index of known CreateElementData used by createElement function\n */\r\nexport enum CompatibleKnownCreateElementDataIndex {\r\n\n    /**\n     * Set a none value to help createElement function ignore falsy value\n     */\n    None = 0,\n\n    /**\n     * An empty line without format\n     */\n    EmptyLine = 1,\n\n    /**\n     * Wrapper for blockquote\n     */\n    BlockquoteWrapper = 2,\n\n    /**\n     * Temp DIV for copy/paste\n     */\n    CopyPasteTempDiv = 3,\n\n    /**\n     * ListItem with block style\n     */\n    BlockListItem = 4,\n\n    /**\n     * Wrapper element for context menu\n     */\n    ContextMenuWrapper = 5,\n\n    /**\n     * Wrapper element for image edit\n     */\n    ImageEditWrapper = 6,\n\n    /**\n     * @deprecated\n     */\n    TableHorizontalResizer = 7,\n\n    /**\n     * @deprecated\n     */\n    TableVerticalResizer = 8,\n\n    /**\n     * @deprecated\n     */\n    TableResizerLTR = 9,\n\n    /**\n     * @deprecated\n     */\n    TableResizerRTL = 10,\n\n    /**\n     * @deprecated\n     */\n    TableSelector = 11,\n\n    /**\n     * @deprecated\n     */\n    EmptyLineFormatInSpan = 12,\n}\r\n","/**\n * Represent the types of sources to handle in the Paste Plugin\n */\r\nexport enum CompatibleKnownPasteSourceType {\r\n\n    WordDesktop,\n    ExcelDesktop,\n    ExcelOnline,\n    PowerPointDesktop,\n    GoogleSheets,\n    WacComponents,\n    Default,\n    SingleImage,\n}\r\n","/**\n * Type of list (numbering or bullet)\n */\r\nexport enum CompatibleListType {\r\n\n    /**\n     * None list type\n     * It means this is not a list\n     */\n    None = 0,\n\n    /**\n     * Ordered List type (numbering list)\n     * Represented by \"OL\" tag\n     */\n    Ordered = 1,\n\n    /**\n     * Unordered List type (bullet list)\n     * Represented by \"UL\" tag\n     */\n    Unordered = 2,\n}\r\n","/**\n * The is essentially an enum represents the type of the node\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n * Values not listed here are deprecated.\n */\r\nexport enum CompatibleNodeType {\r\n\n    /**\n     * An Element node such as &lt;p&gt; or &lt;div&gt;.\n     */\n    Element = 1,\n\n    /**\n     * An Attribute node such as name=\"value\".\n     */\n    Attribute = 2,\n\n    /**\n     * The actual Text of Element or Attr.\n     */\n    Text = 3,\n\n    /**\n     * A ProcessingInstruction of an XML document such as &lt;?xml-stylesheet ... ?&gt; declaration.\n     */\n    ProcessingInstruction = 7,\n\n    /**\n     * A Comment node.\n     */\n    Comment = 8,\n\n    /**\n     * A Document node.\n     */\n    Document = 9,\n\n    /**\n     * A DocumentType node e.g. &lt;!DOCTYPE html&gt; for HTML5 documents.\n     */\n    DocumentType = 10,\n\n    /**\n     * A DocumentFragment node.\n     */\n    DocumentFragment = 11,\n}\r\n","/**\n *  Enum used to control the different types of numbering list\n */\r\nexport enum CompatibleNumberingListType {\r\n\n    /**\n     * Minimum value of the enum\n     */\n    Min = 1,\n\n    /**\n     * Numbering triggered by 1.\n     */\n    Decimal = 1,\n\n    /**\n     * Numbering triggered by 1-\n     */\n    DecimalDash = 2,\n\n    /**\n     * Numbering triggered by 1)\n     */\n    DecimalParenthesis = 3,\n\n    /**\n     * Numbering triggered by (1)\n     */\n    DecimalDoubleParenthesis = 4,\n\n    /**\n     * Numbering triggered by a.\n     */\n    LowerAlpha = 5,\n\n    /**\n     * Numbering triggered by a)\n     */\n    LowerAlphaParenthesis = 6,\n\n    /**\n     * Numbering triggered by (a)\n     */\n    LowerAlphaDoubleParenthesis = 7,\n\n    /**\n     * Numbering triggered by a-\n     */\n    LowerAlphaDash = 8,\n\n    /**\n     * Numbering triggered by A.\n     */\n    UpperAlpha = 9,\n\n    /**\n     * Numbering triggered by A)\n     */\n    UpperAlphaParenthesis = 10,\n\n    /**\n     * Numbering triggered by (A)\n     */\n    UpperAlphaDoubleParenthesis = 11,\n\n    /**\n     * Numbering triggered by A-\n     */\n    UpperAlphaDash = 12,\n\n    /**\n     * Numbering triggered by i.\n     */\n    LowerRoman = 13,\n\n    /**\n     * Numbering triggered by i)\n     */\n    LowerRomanParenthesis = 14,\n\n    /**\n     * Numbering triggered by (i)\n     */\n    LowerRomanDoubleParenthesis = 15,\n\n    /**\n     * Numbering triggered by i-\n     */\n    LowerRomanDash = 16,\n\n    /**\n     * Numbering triggered by I.\n     */\n    UpperRoman = 17,\n\n    /**\n     * Numbering triggered by I)\n     */\n    UpperRomanParenthesis = 18,\n\n    /**\n     * Numbering triggered by (I)\n     */\n    UpperRomanDoubleParenthesis = 19,\n\n    /**\n     * Numbering triggered by I-\n     */\n    UpperRomanDash = 20,\n\n    /**\n     * Maximum value of the enum\n     */\n    Max = 20,\n}\r\n","/**\n * Enum for paste options\n */\r\nexport enum CompatiblePasteType {\r\n\n    /**\n     * Default paste behavior\n     */\n    Normal,\n\n    /**\n     * Paste only the plain text\n     */\n    AsPlainText,\n\n    /**\n     * Apply the current style to pasted content\n     */\n    MergeFormat,\n\n    /**\n     * If there is a image uri in the clipboard, paste the content as image element\n     */\n    AsImage,\n}\r\n","/**\n * Editor plugin event type\n */\r\nexport enum CompatiblePluginEventType {\r\n\n    /**\n     * HTML KeyDown event\n     */\n    KeyDown = 0,\n\n    /**\n     * HTML KeyPress event\n     */\n    KeyPress = 1,\n\n    /**\n     * HTML KeyUp event\n     */\n    KeyUp = 2,\n\n    /**\n     * HTML Input / TextInput event\n     */\n    Input = 3,\n\n    /**\n     * HTML CompositionEnd event\n     */\n    CompositionEnd = 4,\n\n    /**\n     * HTML MouseDown event\n     */\n    MouseDown = 5,\n\n    /**\n     * HTML MouseUp event\n     */\n    MouseUp = 6,\n\n    /**\n     * Content changed event\n     */\n    ContentChanged = 7,\n\n    /**\n     * Extract Content with a DOM tree event\n     * This event is triggered when getContent() is called with triggerExtractContentEvent = true\n     * Plugin can handle this event to remove the UI only markups to return clean HTML\n     * by operating on a cloned DOM tree\n     */\n    ExtractContentWithDom = 8,\n\n    /**\n     * Before Paste event, provide a chance to change copied content\n     */\n    BeforeCutCopy = 9,\n\n    /**\n     * Before Paste event, provide a chance to change paste content\n     */\n    BeforePaste = 10,\n\n    /**\n     * Let plugin know editor is ready now\n     */\n    EditorReady = 11,\n\n    /**\n     * Let plugin know editor is about to dispose\n     */\n    BeforeDispose = 12,\n\n    /**\n     * Pending format state (bold, italic, underline, ... with collapsed selection) is changed\n     */\n    PendingFormatStateChanged = 13,\n\n    /**\n     * Scroll event triggered by scroll container\n     */\n    Scroll = 14,\n\n    /**\n     * Operating on an entity. See enum EntityOperation for more details about each operation\n     */\n    EntityOperation = 15,\n\n    /**\n     * HTML ContextMenu event\n     */\n    ContextMenu = 16,\n\n    /**\n     * Editor has entered shadow edit mode\n     */\n    EnteredShadowEdit = 17,\n\n    /**\n     * Editor is about to leave shadow edit mode\n     */\n    LeavingShadowEdit = 18,\n\n    /**\n     * Content of image is being changed from client side\n     */\n    EditImage = 19,\n\n    /**\n     * Content of editor is about to be cleared by SetContent API, handle this event to cache anything you need\n     * before it is gone\n     */\n    BeforeSetContent = 20,\n\n    /**\n     * Zoom scale value is changed, triggered by Editor.setZoomScale() when set a different scale number\n     */\n    ZoomChanged = 21,\n\n    /**\n     * EXPERIMENTAL FEATURE\n     * Editor changed the selection.\n     */\n    SelectionChanged = 22,\n\n    /**\n     * EXPERIMENTAL FEATURE\n     * Editor content is about to be changed by keyboard event.\n     * This is only used by Content Model editing\n     */\n    BeforeKeyboardEditing = 23,\n}\r\n","/**\r\n * Represent the type of a position\r\n */\r\nexport enum CompatiblePositionType {\r\n\r\n    /**\r\n     * At the beginning of a node\r\n     */\r\n    Begin = 0,\r\n\r\n    /**\r\n     * At the end of a node\r\n     */\r\n    End = -1,\r\n\r\n    /**\r\n     * Before a node\r\n     */\r\n    Before = -2,\r\n\r\n    /**\r\n     * After a node\r\n     */\r\n    After = -3,\r\n}\r\n","/**\r\n * Query scope for queryElements() API\r\n */\r\nexport enum CompatibleQueryScope {\r\n\r\n    /**\r\n     * Query from the whole body of root node. This is default value.\r\n     */\r\n    Body,\r\n\r\n    /**\r\n     * Query elements on a given selection (intersect)\r\n     * The result element can contain the selection, contain part of selection, or inside selection\r\n     */\r\n    OnSelection,\r\n\r\n    /**\r\n     * Query elements inside a given selection only\r\n     */\r\n    InSelection,\r\n}\r\n","/**\n * Type of all possible regions. Currently we only support region of Table\n */\r\nexport enum CompatibleRegionType {\r\n\n    /**\n     * Region split by Table\n     */\n    Table,\n}\r\n","/**\n * Types of Selection Ranges that the SelectionRangeEx can return\n */\r\nexport enum CompatibleSelectionRangeTypes {\r\n\n    /**\n     * Normal selection range provided by browser.\n     */\n    Normal,\n    /**\n     * Selection made inside of a single table.\n     */\n    TableSelection,\n    /**\n     * Selection made in a image.\n     */\n    ImageSelection,\n}\r\n","/**\n * Table format border\n */\r\nexport enum CompatibleTableBorderFormat {\r\n\n    /**\n     * All border of the table are displayed\n     *  __ __ __\n     * |__|__|__|\n     * |__|__|__|\n     * |__|__|__|\n     */\n    DEFAULT,\n\n    /**\n     * Middle vertical border are not displayed\n     *  __ __ __\n     * |__ __ __|\n     * |__ __ __|\n     * |__ __ __|\n     */\n    LIST_WITH_SIDE_BORDERS,\n\n    /**\n     * All borders except header rows borders are displayed\n     *  __ __ __\n     *  __|__|__\n     *  __|__|__\n     */\n    NO_HEADER_BORDERS,\n\n    /**\n     * The left and right border of the table are not displayed\n     *  __ __ __\n     *  __|__|__\n     *  __|__|__\n     *  __|__|__\n     */\n    NO_SIDE_BORDERS,\n\n    /**\n     * Only the borders that divides the header row, first column and externals are displayed\n     *  __ __ __\n     * |__ __ __|\n     * |  |     |\n     * |__|__ __|\n     */\n    FIRST_COLUMN_HEADER_EXTERNAL,\n\n    /**\n     * The header row has no vertical border, except for the first one\n     * The first column has no horizontal border, except for the first one\n     *  __ __ __\n     * |__ __ __\n     * |  |__|__|\n     * |  |__|__|\n     */\n    ESPECIAL_TYPE_1,\n\n    /**\n     * The header row has no vertical border, except for the first one\n     * The only horizontal border of the table is the top and bottom of header row\n     *  __ __ __\n     * |__ __ __\n     * |  |     |\n     * |  |     |\n     */\n    ESPECIAL_TYPE_2,\n\n    /**\n     * The only borders are the bottom of header row and the right border of first column\n     *  __ __ __\n     *    |\n     *    |\n     */\n    ESPECIAL_TYPE_3,\n\n    /**\n     * No border\n     */\n    CLEAR,\n}\r\n","/**\r\n * Operations used by editTable() API\r\n */\r\nexport enum CompatibleTableOperation {\r\n\r\n    /**\r\n     * Insert a row above current row\r\n     */\r\n    InsertAbove,\r\n\r\n    /**\r\n     * Insert a row below current row\r\n     */\r\n    InsertBelow,\r\n\r\n    /**\r\n     * Insert a column on the left of current column\r\n     */\r\n    InsertLeft,\r\n\r\n    /**\r\n     * Insert a column on the right of current column\r\n     */\r\n    InsertRight,\r\n\r\n    /**\r\n     * Delete the whole table\r\n     */\r\n    DeleteTable,\r\n\r\n    /**\r\n     * Delete current column\r\n     */\r\n    DeleteColumn,\r\n\r\n    /**\r\n     * Delete current row\r\n     */\r\n    DeleteRow,\r\n\r\n    /**\r\n     * Merge current row with the row above\r\n     */\r\n    MergeAbove,\r\n\r\n    /**\r\n     * Merge current row with the row below\r\n     */\r\n    MergeBelow,\r\n\r\n    /**\r\n     * Merge current column with the column on the left\r\n     */\r\n    MergeLeft,\r\n\r\n    /**\r\n     * Merge current column with the column on the right\r\n     */\r\n    MergeRight,\r\n\r\n    /**\r\n     * Merge all selected cells\r\n     */\r\n    MergeCells,\r\n\r\n    /**\r\n     * Split current table cell horizontally\r\n     */\r\n    SplitHorizontally,\r\n\r\n    /**\r\n     * Split current table cell vertically\r\n     */\r\n    SplitVertically,\r\n\r\n    /**\r\n     * Align current table at the center\r\n     */\r\n    AlignCenter,\r\n\r\n    /**\r\n     * Align current table at the left\r\n     */\r\n    AlignLeft,\r\n\r\n    /**\r\n     * Align current table at the right\r\n     */\r\n    AlignRight,\r\n\r\n    /**\r\n     * Align current content table cell at the left\r\n     */\r\n    AlignCellLeft,\r\n\r\n    /**\r\n     * Align current content table cell at the center\r\n     */\r\n    AlignCellCenter,\r\n\r\n    /**\r\n     * Align current content table cell at the right\r\n     */\r\n    AlignCellRight,\r\n\r\n    /**\r\n     * Align current content table cell at the top\r\n     */\r\n    AlignCellTop,\r\n\r\n    /**\r\n     * Align current table cell at the middle\r\n     */\r\n    AlignCellMiddle,\r\n\r\n    /**\r\n     * Align current table cell at the bottom\r\n     */\r\n    AlignCellBottom,\r\n}\r\n","export { CompatibleAlignment } from './Alignment'\r\nexport { CompatibleBulletListType } from './BulletListType'\r\nexport { CompatibleCapitalization } from './Capitalization'\r\nexport { CompatibleChangeSource } from './ChangeSource'\r\nexport { CompatibleClearFormatMode } from './ClearFormatMode'\r\nexport { CompatibleColorTransformDirection } from './ColorTransformDirection'\r\nexport { CompatibleContentPosition } from './ContentPosition'\r\nexport { CompatibleContentTypePrefix, CompatibleContentType } from './ContentType'\r\nexport { CompatibleDarkModeDatasetNames } from './DarkModeDatasetNames'\r\nexport { CompatibleDefinitionType } from './DefinitionType'\r\nexport { CompatibleDelimiterClasses } from './DelimiterClasses'\r\nexport { CompatibleDirection } from './Direction'\r\nexport { CompatibleDocumentCommand } from './DocumentCommand'\r\nexport { CompatibleDocumentPosition } from './DocumentPosition'\r\nexport { CompatibleEntityClasses } from './EntityClasses'\r\nexport { CompatibleEntityOperation } from './EntityOperation'\r\nexport { CompatibleExperimentalFeatures } from './ExperimentalFeatures'\r\nexport { CompatibleFontSizeChange } from './FontSizeChange'\r\nexport { CompatibleGetContentMode } from './GetContentMode'\r\nexport { CompatibleImageEditOperation } from './ImageEditOperation'\r\nexport { CompatibleIndentation } from './Indentation'\r\nexport { CompatibleKeys } from './Keys'\r\nexport { CompatibleKnownCreateElementDataIndex } from './KnownCreateElementDataIndex'\r\nexport { CompatibleKnownPasteSourceType } from './KnownPasteSourceType'\r\nexport { CompatibleListType } from './ListType'\r\nexport { CompatibleNodeType } from './NodeType'\r\nexport { CompatibleNumberingListType } from './NumberingListType'\r\nexport { CompatiblePasteType } from './PasteType'\r\nexport { CompatiblePluginEventType } from './PluginEventType'\r\nexport { CompatiblePositionType } from './PositionType'\r\nexport { CompatibleQueryScope } from './QueryScope'\r\nexport { CompatibleRegionType } from './RegionType'\r\nexport { CompatibleSelectionRangeTypes } from './SelectionRangeTypes'\r\nexport { CompatibleTableBorderFormat } from './TableBorderFormat'\r\nexport { CompatibleTableOperation } from './TableOperation'\r\n","export * from './browser/index';\nexport * from './corePluginState/index';\nexport * from './compatibleEnum/index';\nexport * from './event/index';\nexport * from './interface/index';\nexport * from './type/index';\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSItOCAtOCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHRpdGxlPkZvcm1hdCBwYWludGVyPC90aXRsZT4KICAgIDxnIGlkPSJmb3JtYXRwYWludGVyMTYtZmlsbGVkIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iaW5zZXJ0aW9uLXBvaW50IiBmaWxsPSIjMDAwMDAwIj4KICAgICAgICAgIDxwYXRoIGQ9Ik0tMywwIEwwLDAgTDAsMSBMLTMsMSBaIj48L3BhdGg+CiAgICAgICAgICA8cGF0aCBkPSJNMSwwIEw0LDAgTDQsMSBMMSwxIFoiPjwvcGF0aD4KICAgICAgICAgIDxwYXRoIGQ9Ik0wLDEgTDEsMSBMMSwxNSBMMCwxNSBaIj48L3BhdGg+CiAgICAgICAgICA8cGF0aCBkPSJNLTMsMTUgTDAsMTUgTDAsMTYgTC0zLDE2IFoiPjwvcGF0aD4KICAgICAgICAgIDxwYXRoIGQ9Ik0xLDE1IEw0LDE1IEw0LDE2IEwxLDE2IFoiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9ImJydXNoIj4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlBhdGgtMiIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIiBwb2ludHM9IjEuNTc5MDQwNzggOC42MzcwNTIwMSA4LjM0MDQ2MDAxIDE2LjA0MTc4OCAxNC41NjM2MiAxMC42NTA5NDEyIDE1LjE2NTM0MjYgOC42MzcwNTIwMSAxMy4xMDQ0OTkgNi43ODAxMDU5MSAxNy4zNDA0NjMgMi4wMTIyMDc2MiAxNS44ODU1MjI5IDAuNjYxMDM4NjY3IDExLjM3NzM3NDEgNC45MjQzMzkwNCA5LjQ1OTc1MTkgMi45Njk1MTc4OSI+PC9wb2x5Z29uPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS40NjIyLDIuNDk3NzcyNzMgQzkuNTA4NCwyLjQ0ODEzNjM2IDkuNTM1OSwyLjM5OTY4MTgyIDkuNTQ4LDIuMzUwMDQ1NDUgQzkuNTYwMSwyLjMwMDQwOTA5IDkuNTY1NiwyLjI2MDIyNzI3IDkuNTY1NiwyLjIyOTUgQzkuNTY1NiwyLjE5OTk1NDU1IDkuNTYwMSwyLjE1ODU5MDkxIDkuNTQ4LDIuMTEwMTM2MzYgQzkuNTMwNCwyLjA1NDU5MDkxIDkuNDk5NiwyLjAwMjU5MDkxIDkuNDUzNCwxLjk1Mjk1NDU1IEw5LjA0MDksMS41MDAzMTgxOCBDOC45NjA2LDEuNDI3MDQ1NDUgOC44NzQ4LDEuMzkwNDA5MDkgOC43ODM1LDEuMzkwNDA5MDkgQzguNjgwMSwxLjM5MDQwOTA5IDguNTk0MywxLjQyNzA0NTQ1IDguNTI1LDEuNTAwMzE4MTggTDQuNTgxNSw1Ljc0Nzc3MjczIEwyLjczMzUsMy43NjIzMTgxOCBDMi42NjQyLDMuNjg5MDQ1NDUgMi41Nzg0LDMuNjUyNDA5MDkgMi40NzUsMy42NTI0MDkwOSBDMi4zNzgyLDMuNjUyNDA5MDkgMi4yOTQ2LDMuNjg5MDQ1NDUgMi4yMjY0LDMuNzYyMzE4MTggTDEuNTM4OSw0LjUwMDk1NDU1IEw2Ljc5OCwxMC4zMzY3NzI3IEw3LjQ2MDIsOS42MjUzMTgxOCBDNy40NzEyLDkuNjEzNSA3LjQ4MjIsOS41ODYzMTgxOCA3LjQ5NDMsOS41NDI1OTA5MSBDNy41MDY0LDkuNDkyOTU0NTUgNy41MTE5LDkuNDI1NTkwOTEgNy41MTE5LDkuMzM5MzE4MTggQzcuNTExOSw5LjE3MjY4MTgyIDcuNDkxLDkuMDM0NDA5MDkgNy40NTE0LDguOTIzMzE4MTggQzcuNDA1Miw4LjgxMzQwOTA5IDcuMzc0NCw4Ljc0ODQwOTA5IDcuMzU2OCw4LjcyOTUgTDUuNTA4OCw2Ljc0NTIyNzI3IEw5LjQ2MjIsMi40OTc3NzI3MyBaIE0xMC4yMzU1LDEuMTIyMTM2MzYgQzEwLjM3ODUsMS4yNzU3NzI3MyAxMC40ODUyLDEuNDUxODYzNjQgMTAuNTUzNCwxLjY0ODA0NTQ1IEMxMC42MjI3LDEuODM5NSAxMC42NTY4LDIuMDMzMzE4MTggMTAuNjU2OCwyLjIyOTUgQzEwLjY1NjgsMi40MzI3NzI3MyAxMC42MjI3LDIuNjMwMTM2MzYgMTAuNTUzNCwyLjgyMDQwOTA5IEMxMC40ODUyLDMuMDExODYzNjQgMTAuMzc4NSwzLjE4NDQwOTA5IDEwLjIzNTUsMy4zMzgwNDU0NSBMNy4wNjQyLDYuNzQ1MjI3MjcgTDguMTMwMSw3Ljg4OTIyNzI3IEM4LjI3OTcsOC4wNDk5NTQ1NSA4LjM5NjMsOC4yNjE1IDguNDgyMSw4LjUyNzQwOTA5IEM4LjU2OSw4Ljc4NTA0NTQ1IDguNjExOSw5LjA1MzMxODE4IDguNjExOSw5LjMyOTg2MzY0IEM4LjYxMTksOS41NjM4NjM2NCA4LjU4LDkuNzgwMTM2MzYgOC41MTczLDkuOTc2MzE4MTggQzguNDUzNSwxMC4xNjc3NzI3IDguMzYyMiwxMC4zMjczMTgyIDguMjQyMywxMC40NTYxMzY0IEw2Ljc4OTIsMTIuMDE3MzE4MiBMLTMuNzMwMzQ5MzZlLTE0LDQuNDgzMjI3MjcgTDEuNDQ0MywyLjkyMjA0NTQ1IEMxLjU4MTgsMi43NzQzMTgxOCAxLjczOTEsMi42NjQ0MDkwOSAxLjkxNzMsMi41ODk5NTQ1NSBDMi4wOTQ0LDIuNTA5NTkwOTEgMi4yODAzLDIuNDcwNTkwOTEgMi40NzUsMi40NzA1OTA5MSBDMi44ODIsMi40NzA1OTA5MSAzLjIyNjMsMi42MjA2ODE4MiAzLjUwNjgsMi45MjIwNDU0NSBMNC41ODE1LDQuMDc2NjgxODIgTDcuNzUxNywwLjY2OTUgQzguMDM4OCwwLjM2MjIyNzI3MyA4LjM4MzEsMC4yMDg1OTA5MDkgOC43ODM1LDAuMjA4NTkwOTA5IEM4Ljk3ODIsMC4yMDg1OTA5MDkgOS4xNjQxLDAuMjQ3NTkwOTA5IDkuMzQyMywwLjMyNzk1NDU0NSBDOS41MTk0LDAuNDA4MzE4MTgyIDkuNjc2NywwLjUyMTc3MjcyNyA5LjgxNDIsMC42Njk1IEwxMC4yMzU1LDEuMTIyMTM2MzYgWiIgaWQ9IkZpbGwtMSIgZmlsbD0iIzY2NjY2NiI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43MTg3NjkyLDcuMzg1MzUgQzEzLjY4NTMwNzcsNy40MzIwMTY2NyAxMy42MzkxNTM4LDcuNDc4NjgzMzMgMTMuNTkzLDcuNTI1MzUgQzEzLjU5Myw3LjUyNTM1IDEzLjQ2NDkyMzEsNy42NjUzNSAxMy4yNjg3NjkyLDcuODg3MDE2NjcgQzEzLjIxMjIzMDgsNy45NTcwMTY2NyAxMy4xNTQ1Mzg1LDguMDM4NjgzMzMgMTMuMDg0MTUzOCw4LjEwODY4MzMzIEMxMi44MDcyMzA4LDguNDEyMDE2NjcgMTIuNDg1MzA3Nyw4Ljc1MDM1IDEyLjEwNDUzODUsOS4xMjM2ODMzMyBDMTEuODA0NTM4NSw5LjQzODY4MzMzIDExLjQ1NzIzMDgsOS43NTI1MTY2NyAxMS4xNjg3NjkyLDEwLjA1NzAxNjcgQzEwLjk1MDY5MjMsMTAuMjY3MDE2NyAxMC43MzAzMDc3LDEwLjQ3NTg1IDEwLjQ5OTUzODUsMTAuNjg3MDE2NyBDMTAuMDk1NjkyMywxMS4wNTkxODMzIDkuNjY4NzY5MjMsMTEuNDEwMzUgOS4yODgsMTEuNzEzNjgzMyBDOS4xNjEwNzY5MiwxMS44MTg2ODMzIDkuMDM0MTUzODUsMTEuOTEyMDE2NyA4LjkxODc2OTIzLDExLjk5MzY4MzMgQzguNTM4LDEyLjI3MjUxNjcgOC4yODUzMDc2OSwxMi40NjAzNSA4LjI4NTMwNzY5LDEyLjQ2MDM1IEw1LjM1MzM4NDYyLDkuMDY0MTgzMzMgTDQuMzQ5NTM4NDYsNy45MTAzNSBMMi44OTU2OTIzMSw2LjIzMDM1IEwyLjI1ODU3ODU5LDUuNTA1NDYwNCBDMi42ODU1MDE2Niw1LjM3NzEyNzA3IDMuMDMyODA5MzUsNS4yNDg3OTM3MyAzLjU1MDg4NjI4LDUuMDM4NzkzNzMgQzQuMDcxMjcwODksNC44Mjg3OTM3MyA0LjYxMjQyNDc0LDQuNTcyMTI3MDcgNS4xNTQ3MzI0Myw0LjI4MDQ2MDQgQzUuNjk3MDQwMTIsMy45NzcxMjcwNyA2LjIyNzgwOTM1LDMuNjI3MTI3MDcgNi43NTg1Nzg1OSwzLjI0MjEyNzA3IEM3LjI4OTM0NzgyLDIuODQ1NDYwNCA3Ljc3Mzk2MzIsMi40MDIxMjcwNyA4LjIxMjQyNDc0LDEuOTAwNDYwNCBMNy4zODE2NTU1MSwxLjA2MDQ2MDQgQzcuMDcxMjcwODksMS40NTcxMjcwNyA2LjczNjY1NTUxLDEuODA3MTI3MDcgNi4zNTU4ODYyOCwyLjEyMjEyNzA3IEM1Ljk3Mzk2MzIsMi40MzcxMjcwNyA1LjU4MjgwOTM1LDIuNzE3MTI3MDcgNS4xODkzNDc4MiwyLjk2MjEyNzA3IEM0Ljc3Mzk2MzIsMy4yMDcxMjcwNyA0LjM1OTczMjQzLDMuNDI4NzkzNzMgMy45NTQ3MzI0MywzLjYxNTQ2MDQgQzMuNTM5MzQ3ODIsMy44MDIxMjcwNyAzLjEzNTUwMTY2LDMuOTc3MTI3MDcgMi43NTQ3MzI0Myw0LjExNzEyNzA3IEMxLjg1NDczMjQzLDQuNDQzNzkzNzMgMS4wNTg1Nzg1OSw0LjY1Mzc5MzczIDAuMTEyNDI0NzM5LDQuODA1NDYwNCBMOC4wNzY0NjE1NCwxNC4wMDAzNSBDOC41NjEwNzY5MiwxMy42OTcwMTY3IDkuMDQ1NjkyMzEsMTMuMzcwMzUgOS41MTg3NjkyMywxMy4wMDc1MTY3IEM5Ljk5MywxMi42NDcwMTY3IDEwLjQ0MTg0NjIsMTIuMjcyNTE2NyAxMC44ODAzMDc3LDExLjkwMDM1IEMxMS4zMDcyMzA4LDExLjUyNzAxNjcgMTEuNzIzNzY5MiwxMS4xNDIwMTY3IDEyLjEwNDUzODUsMTAuNzY3NTE2NyBDMTIuNDg1MzA3NywxMC4zOTUzNSAxMi44MzAzMDc3LDEwLjA0NDE4MzMgMTMuMTU0NTM4NSw5LjcwNzAxNjY3IEMxMy40NjQ5MjMxLDkuMzgwMzUgMTMuNzQzLDkuMDc3MDE2NjcgMTMuOTczNzY5Miw4LjgxOTE4MzMzIEMxNC4yMDMzODQ2LDguNTUyMDE2NjcgMTQuMzg4LDguMzc3MDE2NjcgMTQuNTE0OTIzMSw4LjIyNTM1IEwxMy43MTg3NjkyLDcuMzg1MzUgWiIgaWQ9IkZpbGwtNCIgZmlsbD0iIzY2NjY2NiI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi4wNjkwODQ4LDExLjQ1MzM5MTUgQzExLjUyNDY0OTIsMTIuMDA4MTIxIDEwLjk2NjQ4ODMsMTIuNTYzOTk0MyAxMC4zNTExMzg5LDEzLjEwMjcxMTEgQzkuNzQ5NTE0NjYsMTMuNjU4NTg0NCA5LjExOTI5NjE1LDE0LjE2NjQxOTMgOC40ODkwNzc2NCwxNC42Mjg1MDMyIEwzLjQzMTMxNjc1LDkgTDEyLjA2OTA4NDgsMTEuNDUzMzkxNSBaIiBpZD0iRmlsbC03IiBmaWxsPSIjMkU3N0QwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgMGMtNi42MjYgMC0xMiA1LjM3My0xMiAxMiAwIDUuMzAyIDMuNDM4IDkuOCA4LjIwNyAxMS4zODcuNTk5LjExMS43OTMtLjI2MS43OTMtLjU3N3YtMi4yMzRjLTMuMzM4LjcyNi00LjAzMy0xLjQxNi00LjAzMy0xLjQxNi0uNTQ2LTEuMzg3LTEuMzMzLTEuNzU2LTEuMzMzLTEuNzU2LTEuMDg5LS43NDUuMDgzLS43MjkuMDgzLS43MjkgMS4yMDUuMDg0IDEuODM5IDEuMjM3IDEuODM5IDEuMjM3IDEuMDcgMS44MzQgMi44MDcgMS4zMDQgMy40OTIuOTk3LjEwNy0uNzc1LjQxOC0xLjMwNS43NjItMS42MDQtMi42NjUtLjMwNS01LjQ2Ny0xLjMzNC01LjQ2Ny01LjkzMSAwLTEuMzExLjQ2OS0yLjM4MSAxLjIzNi0zLjIyMS0uMTI0LS4zMDMtLjUzNS0xLjUyNC4xMTctMy4xNzYgMCAwIDEuMDA4LS4zMjIgMy4zMDEgMS4yMy45NTctLjI2NiAxLjk4My0uMzk5IDMuMDAzLS40MDQgMS4wMi4wMDUgMi4wNDcuMTM4IDMuMDA2LjQwNCAyLjI5MS0xLjU1MiAzLjI5Ny0xLjIzIDMuMjk3LTEuMjMuNjUzIDEuNjUzLjI0MiAyLjg3NC4xMTggMy4xNzYuNzcuODQgMS4yMzUgMS45MTEgMS4yMzUgMy4yMjEgMCA0LjYwOS0yLjgwNyA1LjYyNC01LjQ3OSA1LjkyMS40My4zNzIuODIzIDEuMTAyLjgyMyAyLjIyMnYzLjI5M2MwIC4zMTkuMTkyLjY5NC44MDEuNTc2IDQuNzY1LTEuNTg5IDguMTk5LTYuMDg2IDguMTk5LTExLjM4NiAwLTYuNjI3LTUuMzczLTEyLTEyLTEyeiIvPjwvc3ZnPg==\"","module.exports = FluentUIReact;","module.exports = React;","module.exports = ReactDOM;","module.exports = roosterjs;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","import { mount } from './controls/MainPane';\n\nmount(document.getElementById('mainPane'));\n"],"names":["content","loader","module","id","i","length","loadStyles","locals","exports","__assign","this","Object","assign","t","s","n","arguments","p","prototype","hasOwnProperty","call","apply","defineProperty","value","state","_root","window","g","_styleNonce","CSPSettings","nonce","_themeState","__themeState__","theme","undefined","lastStyleElement","registeredStyles","runState","perf","count","duration","flushTimer","mode","buffer","registeredThemableStyles","_themeTokenRegex","now","performance","Date","measure","func","start","end","flush","styleArrays","slice","mergedStyleArray","concat","applyThemableStyles","stylesArray","styleRecord","resolveThemableArray","styleString","styleArray","document","head","getElementsByTagName","styleElement","createElement","_a","themable","setAttribute","appendChild","createTextNode","ev","createEvent","initEvent","args","newStyle","dispatchEvent","record","themableStyle","push","registerStyles","clearStyles","option","clearStylesInternal","records","forEach","parentElement","removeChild","splitStyleArray","map","currentValue","themeSlot","themedValue","defaultValue","console","DEBUG","warn","rawString","join","splitStyles","styles","result","pos","tokenMatch","exec","matchIndex","index","substring","lastIndex","loadAsync","styleParts","Array","isArray","setTimeout","configureLoadStyles","loadStylesFn","configureRunMode","loadTheme","themableStyles","_i","reloadStyles","detokenize","cssKeywords","reverseKeywords","key","convert","rgb","channels","labels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","keyword","ansi16","ansi256","hcg","apple","gray","model","Error","h","l","r","b","min","Math","max","delta","rdif","gdif","bdif","v","diff","diffc","c","k","reversed","currentClosestKeyword","x","y","currentClosestDistance","Infinity","distance","pow","z","t1","t2","t3","val","smin","lmin","hi","floor","f","q","sl","vmin","wh","bl","ratio","m","y2","x2","z2","a","atan2","PI","sqrt","hr","cos","sin","round","ansi","color","mult","rem","string","toString","toUpperCase","match","colorString","split","char","integer","parseInt","hue","chroma","mg","pure","w","conversions","route","keys","fromModel","routes","toModel","fn","wrappedFn","len","conversion","wrapRounded","raw","wrapRaw","link","from","to","wrapConversion","graph","path","parent","cur","unshift","models","buildGraph","queue","current","pop","adjacents","adjacent","node","deriveBFS","colorNames","swizzle","reverseNames","name","cs","get","clamp","num","hexDouble","str","toLowerCase","hexAlpha","i2","parseFloat","alpha","isNaN","rgba","percent","hsla","hwba","_slice","skippedModels","hashedModelKeys","sort","limiters","Color","obj","valpha","newArr","zeroArray","splice","indexOf","hashedKeys","JSON","stringify","limit","freeze","getset","channel","modifier","maxfn","arr","toJSON","places","self","percentString","array","object","unitArray","unitObject","Number","toFixed","roundTo","roundToPlace","red","green","blue","saturationl","lightness","saturationv","white","wblack","cyan","magenta","yellow","black","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","darken","saturate","desaturate","whiten","blacken","grayscale","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","newAlpha","___CSS_LOADER_API_IMPORT___","useSourceMap","list","item","sourceMap","base64","data","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","modules","mediaQuery","dedupe","alreadyImportedModules","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","seal","create","_ref","Reflect","construct","fun","thisValue","Func","Function","bind","arr2","_toConsumableArray","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","String","stringMatch","stringReplace","replace","stringIndexOf","stringTrim","trim","regExpTest","RegExp","test","typeErrorCreate","TypeError","_len2","_key2","thisArg","_len","_key","addToSet","set","element","lcElement","clone","newObject","property","lookupGetter","prop","desc","html","svg","svgFilters","svgDisallowed","mathMl","mathMlDisallowed","text","html$1","svg$1","mathMl$1","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","_typeof","Symbol","iterator","constructor","_toConsumableArray$1","getGlobal","createDOMPurify","DOMPurify","root","version","removed","nodeType","isSupported","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","Text","Comment","DOMParser","trustedTypes","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","ownerDocument","trustedTypesPolicy","createPolicy","suffix","ATTR_NAME","currentScript","hasAttribute","getAttribute","policyName","createHTML","html$$1","_","_createTrustedTypesPolicy","emptyHTML","RETURN_TRUSTED_TYPE","_document","implementation","createNodeIterator","createDocumentFragment","importNode","documentMode","hooks","createHTMLDocument","MUSTACHE_EXPR$$1","ERB_EXPR$$1","DATA_ATTR$$1","ARIA_ATTR$$1","IS_SCRIPT_OR_DATA$$1","ATTR_WHITESPACE$$1","IS_ALLOWED_URI$$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","CONFIG","formElement","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","parentNode","outerHTML","remove","_removeAttribute","attribute","getAttributeNode","removeAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","createDocument","innerHTML","body","insertBefore","childNodes","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isNode","nodeName","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","elm","textContent","attributes","namespaceURI","tagName","allowedTags","firstElementChild","parentTagName","Boolean","commonSvgAndHTMLElements","_checkValidNamespace","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attr","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toStaticHTML","firstChild","nodeIterator","serializedHTML","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","factory","isArrayish","results","arg","wrap","UrlPlaceholder","PopoutRoot","POPOUT_HTML","LightTheme","palette","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","DarkTheme","props","themeMatch","matchMedia","toggleablePlugins","sidePane","React","createRef","onThemeChange","setState","isDarkMode","onMouseDown","e","addEventListener","onMouseMove","onMouseUp","style","userSelect","mouseX","pageX","changeWidth","removeEventListener","onShowSidePane","showSidePane","resetEditor","onHideSidePane","location","hash","onUpdate","formatStatePlugin","editorOptionPlugin","eventViewPlugin","apiPlaygroundPlugin","snapshotPlugin","ContentModelPanePlugin","ribbonPlugin","createRibbonPlugin","contentModelRibbonPlugin","ContentModelRibbonPlugin","pasteOptionPlugin","createPasteOptionPlugin","emojiPlugin","createEmojiPlugin","updateContentPlugin","createUpdateContentPlugin","UpdateMode","OnDispose","formatPainterPlugin","sampleEntityPlugin","mainWindowButtons","getButtons","AllButtonKeys","darkMode","zoom","exportContent","popout","popoutWindowButtons","popoutWindow","initState","getBuildInPluginState","scale","editorCreator","isRtl","showContentModelRibbon","MainPane","render","ThemeProvider","applyTo","className","mainPane","noGrow","renderRibbon","renderContentModelRibbon","renderPopout","renderMainPane","resetEditorPlugin","pluginState","forceUpdate","updateFormatState","win","open","write","trustedHTMLHandler","unregisterWindowForCss","registerWindowForCss","popoutRoot","getElementById","setScale","toggleDarkMode","setPageDirection","dir","toggleContentModelRibbon","componentDidMount","componentWillUnmount","isPopout","Ribbon","buttons","plugin","renderSidePane","ReactDOM","createPortal","WindowProvider","renderEditor","resizer","renderSidePaneButton","fullWidth","ref","plugins","getSidePanePlugins","sidePaneFullWidth","allPlugins","getPlugins","editorStyles","transform","transformOrigin","height","width","editorContainer","Rooster","editor","defaultFormat","inDarkMode","getDarkColor","experimentalFeatures","undoMetadataSnapshotService","getSnapshotService","zoomScale","initialContent","onClick","getInnerRibbonPlugin","div","options","ContentModelEditor","MainPaneBase","instance","getInstance","Component","startDrag","callback","rect","getBoundingClientRect","onMouseChange","left","top","pageY","type","stopPropagation","preventDefault","hueBar","useRef","picker","initColor","useState","setHue","saturation","setSaturation","setValue","getComputedStyle","onMouseDownHueBar","useCallback","onMouseDownPicker","onChangeHue","newHue","which","onChangeColor","newSaturation","newValue","useEffect","onSelect","container","tabIndex","backgroundColor","onKeyDown","layer1","layer2","currentColor","newColor","hasContent","hasFormat","hasDataset","bodyState","toggleFormat","toggleJson","toggleVisual","toggleMetadata","title","css","button","buttonChecked","DatasetView","dataset","getMetadata","getObjectKeys","DatasetItemView","useProperty","inputRef","onChange","subTitle","isExpanded","hasSelection","isSelection","jsonSource","getContent","getFormat","setBodyState","highlightBorder","toggleDataset","getCachedElement","cachedElement","wrapper","onMouseOver","onMouseOut","position","zIndex","border","boxSizing","modelWrapper","childSelected","selected","titleBar","titleWithBorder","buttonGroup","ButtonGroup","expandedBody","ContentModelJson","BlockFormatRenders","BackgroundColorFormatRenderer","DirectionFormatRenderer","TextAlignFormatRenderer","HtmlAlignFormatRenderer","MarginFormatRenderer","PaddingFormatRenderer","LineHeightFormatRenderer","WhiteSpaceFormatRenderer","BorderFormatRenderers","format","FormatView","renderers","formatTable","LinkFormatRenderers","createTextFormatRenderer","href","target","anchorId","anchorClass","anchorTitle","relationship","TextColorFormatRenderer","UnderlineFormatRenderer","DisplayFormatRenderer","updater","metadata","SegmentFormatRenders","FontSizeFormatRenderer","FontFamilyFormatRenderer","BoldFormatRenderer","ItalicFormatRenderer","StrikeFormatRenderer","SuperOrSubScriptFormatRenderer","LetterSpacingFormatRenderer","createColorFormatRenderer","fontWeight","createCheckboxFormatRenderer","italic","underline","strikethrough","superOrSubScriptSequence","BorderBoxFormatRenderer","useBorderBox","BorderStyles","createBorderRenderer","extractBorderValues","combineBorderValue","createDropDownFormatRenderer","direction","display","fontFamily","fontSize","htmlAlign","IdFormatRenderer","ImageMetadataFormatRenderers","widthPx","heightPx","leftPercent","rightPercent","topPercent","bottomPercent","angleRad","src","naturalWidth","naturalHeight","letterSpacing","lineHeight","ListMetadataFormatRenderers","orderedStyleType","unorderedStyleType","ListStylePositionFormatRenderer","listStylePosition","ListThreadFormatRenderers","startNumberOverride","ListTypeFormatRenderer","listType","MarginNames","createTextFormatRendererGroup","PaddingNames","SizeFormatRenderers","maxWidth","maxHeight","minWidth","minHeight","SpacingFormatRenderer","borderCollapse","TableCellMetadataFormatRender","bgColorOverride","TableMetadataFormatRenders","topBorderColor","bottomBorderColor","verticalBorderColor","hasHeaderRow","headerRowColor","hasFirstColumn","hasBandedColumns","hasBandedRows","bgColorEven","bgColorOdd","CompatibleTableBorderFormat","tableBorderFormat","textAlign","textColor","VerticalAlignFormatRenderer","verticalAlign","whiteSpace","WordBreakFormatRenderer","wordBreak","CheckboxFormatItem","getter","setter","checkbox","checked","formatRow","formatName","formatValue","Transparent","ColorFormatItem","colorPickerBox","colorValueBox","transparentCheckBox","initValue","updateValue","onTextBoxChange","onColorValueChange","onToggleTransparent","colorValue","names","initValues","DropDownFormatItem","dropDown","o","TextFormatItem","textBox","multiLineValue","numberValue","textValue","group","blocks","block","ContentModelBlockView","blockGroupType","ContentModelDocumentView","ContentModelGeneralView","ContentModelListItemView","listItem","ContentModelFormatContainerView","ContentModelTableCellView","cell","blockType","ContentModelBlockGroupView","ContentModelParagraphView","paragraph","ContentModelTableView","ContentModelEntityView","entity","ContentModelDividerView","divider","br","SegmentFormatView","ContentModelView","modelBr","isSelected","CodeRenderers","code","modelCode","DividerFormatRenders","setTagName","tagNameDropDown","onTagNameChange","modelDivider","BlockGroupContentView","modelDocument","hasSelectionInBlockGroup","setId","isReadonly","setIsReadonly","setType","idTextBox","isReadonlyCheckBox","typeTextBox","onIdChange","onTypeChange","onReadonlyChange","BlockFormatView","modelEntity","FormatContainerFormatRenderers","modelFormatContainer","hasSelectionInBlock","isGeneralSegment","segmentType","segment","ContentModelLinkView","ContentModelCodeView","modelGeneral","ImageFormatRenderers","image","srcTextArea","imageSelectionCheckBox","setSrc","isSelectedAsImageSelection","imageSelected","setImageSelected","onSrcChange","onImageSelectionChange","MetadataView","updateImageMetadata","modelImage","json","safeInstanceOf","LinkFormatView","modelLink","ListLevelFormatRenders","ListItemFormatRenderers","ListItemFormatHolderRenderers","getSubTitle","levels","setSubTitle","onFormatChanged","formatHolder","modelListItem","ContentModelParagraphDecoratorView","decorator","modelDecorator","implicitCheckbox","zeroFontCheckbox","isImplicit","setIsImplicit","zeroFontSize","isZeroFont","setZeroFont","onIsImplicitChange","onChangeZeroFontSize","segments","ContentModelSegmentView","modelParagraph","ContentModelBrView","ContentModelSelectionMarkerView","marker","ContentModelTextView","ContentModelImageView","modelSelectionMarker","TableCellFormatRenderers","checkboxHeader","checkboxSpanLeft","checkboxSpanAbove","isHeader","setIsHeader","spanLeft","setSpanLeft","spanAbove","setSpanAbove","onHeaderChanged","onSpanLeftChanged","onSpanAboveChanged","updateTableCellMetadata","modelTableCell","TableRowFormatRenderers","row","setHeight","textBoxRef","sizeInput","cells","j","modelTableRow","some","TableFormatRenderers","NumberView","values","widths","rows","ContentModelTableRowView","updateTableMetadata","modelTable","textArea","modelText","FORMATPAINTERCURSOR_STYLE","CURSOR_REGEX","getName","initialize","dispose","onPluginEvent","event","eventType","getFormatHolder","applySegmentFormat","setFormatPainterCursor","startFormatPainter","getSegmentFormat","getCustomData","isOn","getEditorDomAttribute","setEditorDomAttribute","pluginList","linkTitle","imageEdit","ImageEdit","preserveRatio","forcePreserveRatio","contentEdit","ContentEdit","contentEditFeatures","hyperlink","HyperLink","url","paste","Paste","watermark","Watermark","watermarkText","cutPasteListChain","CutPasteListChain","tableCellSelection","TableCellSelection","tableResize","TableResize","customReplace","CustomReplace","autoFormat","AutoFormat","listEditMenu","contextMenu","createListEditMenuProvider","imageEditMenu","createImageEditMenuProvider","tableEditMenu","createTableEditMenuProvider","createContextMenuPlugin","contentModelPaste","ContentModelPastePlugin","formatPainterButton","boldButton","italicButton","underlineButton","fontButton","fontSizeButton","increaseFontSizeButton","decreaseFontSizeButton","textColorButton","backgroundColorButton","bulletedListButton","numberedListButton","decreaseIndentButton","increaseIndentButton","blockQuoteButton","alignLeftButton","alignCenterButton","alignRightButton","insertLinkButton","removeLinkButton","insertTableButton","insertImageButton","superscriptButton","subscriptButton","strikethroughButton","setHeaderLevelButton","codeButton","ltrButton","rtlButton","clearFormatButton","setBulletedListStyleButton","setNumberedListStyleButton","listStartNumberButton","formatTableButton","setTableCellShadeButton","setTableHeaderButton","tableInsertButton","tableDeleteButton","tableMergeButton","tableSplitButton","tableAlignCellButton","tableAlignTableButton","imageBorderColorButton","imageBorderWidthButton","imageBorderStyleButton","imageBorderRemoveButton","changeImageButton","imageBoxShadowButton","spacingButton","spaceBeforeButton","spaceAfterButton","delayUpdateTime","timer","formatState","uiUtilities","updateFormat","delayUpdate","setUIUtilities","registerFormatChangedCallback","onButtonClick","strings","stopShadowEdit","isChecked","isDisabled","dropDownMenu","getSelectedItemKey","startLivePreview","isInShadowEdit","range","getSelectionRangeEx","areAllCollapsed","startShadowEdit","stopLivePreview","getDocument","defaultView","clearTimeout","getFormatState","unlocalizedText","iconName","isContentModelEditor","setAlignment","originalButton","KnownRibbonButtonKey","BackgroundColor","setBackgroundColor","getBackgroundColorValue","lightModeColor","isBlockQuote","toggleBlockQuote","isBold","toggleBold","isBullet","toggleBullet","FileInput","accept","canAddImageAltText","files","changeImage","click","clearFormat","isCodeInline","toggleCode","changeFontSize","flipWhenRtl","setIndentation","FontNames","family","localizedName","DropDownItems","reduce","items","font","LowerCaseFontMap","FirstFontRegex","fontName","firstName","allowLivePreview","setFontName","size","setFontSize","isInTable","DEFAULT","DEFAULT_WITH_BACKGROUND_COLOR","GRID_WITHOUT_BORDER","LIST","BANDED_ROWS_FIRST_COLUMN_NO_BORDER","EXTERNAL","NO_HEADER_VERTICAL","ESPECIAL_TYPE_1","ESPECIAL_TYPE_2","ESPECIAL_TYPE_3","CLEAR","PREDEFINED_STYLES","TextColor","setImageBorder","getTextColorValue","dashed","dotted","solid","double","groove","ridge","inset","outset","STYLES","noShadow","bottomRight","bottom","bottomLeft","right","center","topRight","topLeft","setImageBoxShadow","insertImage","adjustLinkSelection","autoFocus","labelKey","unlocalizedLabel","displayText","itemName","then","focus","insertLink","originalPasteButton","InsertTable","col","parseKey","insertTable","isItalic","toggleItalic","ribbonButtonSetStartNumberTo1","ribbonButtonSetStartNumberCustomize","isNumbering","uiUtility","li","getElementAtCursor","startNumber","select","setListStartNumber","setDirection","toggleNumbering","canUnlink","removeLink","dropDownMenuItems","setListStyle","originalHeadersButton","Header","headerLevel","setHeaderLevel","originalBackgroundColorButton","setTableCellShade","tableHasHeader","marginBottom","setParagraphMargin","marginTop","SPACING_OPTIONS","query","find","opt","abs","findClosest","setSpacing","isStrikeThrough","toggleStrikethrough","isSubscript","toggleSubscript","isSuperscript","toggleSuperscript","TableEditOperationMap","menuNameTableInsertAbove","menuNameTableInsertBelow","menuNameTableInsertLeft","menuNameTableInsertRight","menuNameTableDeleteTable","menuNameTableDeleteColumn","menuNameTableDeleteRow","menuNameTableMergeAbove","menuNameTableMergeBelow","menuNameTableMergeLeft","menuNameTableMergeRight","menuNameTableMergeCells","menuNameTableSplitHorizontally","menuNameTableSplitVertically","menuNameTableAlignLeft","menuNameTableAlignCenter","menuNameTableAlignRight","menuNameTableAlignTop","menuNameTableAlignMiddle","menuNameTableAlignBottom","menuNameTableAlignTableLeft","menuNameTableAlignTableCenter","menuNameTableAlignTableRight","editTable","setTextColor","isUnderline","toggleUnderline","setDarkModeState","DropDownValues","filter","setZoomScale","EntityType","EntityMetadataDefinition","createObjectDefinition","createNumberDefinition","onClickEntity","findClosestElementAncestor","getEntitySelector","getEntityFromElement","addUndoSnapshot","updateEntity","getEntityState","getEntityStates","rawEvent","ctrlKey","createEntity","insertEntity","operation","dehydrate","hydrate","shouldPersist","setMetadata","parse","containerDiv","querySelector","span","increase","editingInfo","updateHash","pluginName","currentPane","updateStateFromHash","hashes","substr","setHashPath","getTitle","isCurrent","activePane","inactivePane","bodyContainer","widthDelta","clientWidth","componentCtor","component","getComponentProps","getComponent","pane","componentClass","header","paneName","base","getEditor","apiEntries","empty","sanitizer","matchlink","insertContent","region","vlist","vtable","getSelection","more","checkGetBlocks","update","runAsync","onGetBlocks","traverser","getBodyTraverser","currentBlockElement","getNextBlockElement","setBlocks","getStartNode","getEndNode","htmlFor","isNodeBlockElement","renderBlock","onDoubleClick","collapse","collapseToSingleElement","triggerContentChangedEvent","isNodeBlock","fontStyle","createRange","getTextContent","isBlockElement","lightColor","onInputChange","darkColor","lightBackground","darkBackground","selectInfo","firstCellX","firstCellY","lastCellX","lastCellY","selectionType","updateSelection","selection","selectElement","queryInfo","isImageSelectionOption","elementToSelect","selectionMessage","coordinates","getCoordinates","firstCell","lastCell","createSelectionInfo","containerInfo","selectionOption","label","input","changeSelectionOption","createCoordinatesInput","coordinateRef","showManualSelection","manualSelect","placeholder","updateCursor","replaceSelection","insertOnNewLine","setPosition","colSpan","buttonRow","entityType","styleInline","styleBlock","insertAtRoot","focusAfterEntity","isBlock","onGetEntities","selector","allEntities","queryElements","entities","textarea","EntityButton","background","onMatchLink","matchLink","linkData","scheme","originalUrl","normalizedUrl","getSelectedRegions","regions","clearAll","Region","selectRegion","getSelectedBlockElementsInRegion","NodeName","rootNode","nodeBefore","nodeAfter","mouseOver","hover","mouseOut","classNames","regionNode","getTagOfNode","nodeValue","HtmlSanitizer","inline","getDOMDocument","convertGlobalCssToInlineCss","parser","ListTypeToString","VListItemPane","getListType","getNode","onOrdered","changeListType","onUnrdered","onIndent","indent","onOutdent","outdent","marginLeft","getLevel","cursor","createVList","createVListFromRegion","onWriteback","writeBack","isFeatureEnabled","TABLE_COLORS","TableCell","td","onClickCell","bgColor","createVTable","VTable","onCustomizeFormat","createTableFormat","applyFormat","onWriteBack","getCurrentTd","currentTd","rowIndex","cellIndex","renderEditTableButton","renderSetHeaderRowButton","renderSetFirstColumnButton","renderSetBandedColumnButton","renderSetBandedRowButton","renderFormatTableButton","CustomizeFormatRow","formatInfo","keepCellShade","isColorPickerShowing","setIsColorPickerShowing","onShowColorPicker","setColor","contentModelButtons","refreshButton","exportButton","contentModelRibbonButton","setContentModel","contentModel","onModelChangeFromSelection","hasFocus","onModelChange","createContentModel","setCurrentContentModel","contentModelRibbon","baseProps","getCurrentContentModel","getCurrentModelHolder","getCode","EditFeatureDescriptionMap","autoBullet","indentWhenTab","outdentWhenShiftTab","outdentWhenBackspaceOnEmptyFirstLine","outdentWhenEnterOnEmptyLine","mergeInNewLineWhenBackspaceOnFirstChar","maintainListChain","unquoteWhenBackspaceOnEmptyFirstLine","unquoteWhenEnterOnEmptyLine","tabInTable","upDownInTable","insertLineBeforeStructuredNodeFeature","autoLink","unlinkWhenBackspaceAfterLink","defaultShortcut","noCycleCursorMove","clickOnEntity","escapeFromEntity","enterBeforeReadonlyEntity","backspaceAfterEntity","deleteBeforeEntity","markdownBold","markdownItalic","markdownStrikethru","markdownInlineCode","maintainListChainWhenDelete","indentTableOnTab","indentWhenTabText","outdentWhenTabText","autoHyphen","autoBulletList","autoNumberingList","mergeListOnBackspaceAfterList","deleteTableWithBackspace","moveBetweenDelimitersFeature","removeEntityBetweenDelimiters","removeCodeWhenEnterOnEmptyLine","removeCodeWhenBackspaceOnEmptyFirstLine","indentWhenAltShiftRight","outdentWhenAltShiftLeft","onContentEditClick","resetState","features","getAllFeatures","renderContentEditItem","moreOptions","checkboxColumn","NOT_SET","onFormatClick","onSelectChanged","renderFormatItem","renderSelectItem","Arial","Calibri","Tahoma","defaultFormatLabel","initialState","getState","FeatureNames","renderFeature","exportForm","exportData","rtl","onExportRooster","getHtml","js","js_pre_processor","submit","onExportRoosterReact","onToggleDirection","method","action","onPluginClick","renderPluginItem","renderInputBox","renderCheckBox","onBlur","codeMap","buttonB","buttonI","buttonU","buttonBullet","buttonNumbering","buttonUndo","buttonRedo","buttonDark","encode","line","settings","defaultValues","bold","lines","expermientalFeatures","getLinkCallback","additionalPlugins","PasteCode","ImageEditCode","CutPasteListChainCode","TableResizeCode","CustomReplaceCode","RibbonPluginVarName","ribbonButton","ribbon","componentCode","ButtonVarName","supportDarkMode","getButtonVarName","buttonsVarName","SimplePluginCode","allFeatures","defaultDisabled","EventTypeMap","EntityOperationMap","events","displayCount","clear","currentIndex","renderImage","img","imageFile","readFile","dataUrl","onDisplayCountChanged","displayedEvents","reverse","time","getHours","getMinutes","getSeconds","getMilliseconds","eventContent","renderEvent","addEvent","sanitizingOption","clipboardData","shift","types","renderPasteContent","rawHtml","linkPreview","customValues","contentType","isCut","newSrc","oldZoomScale","newZoomScale","renderer","pasteContent","stringArray","child","nextSibling","inIME","setFormatState","renderSpan","inactive","canUndo","canRedo","Browser","isChrome","isFirefox","isSafari","isWebKit","isMac","isWin","isAndroid","isMobileOrTablet","navigator","userAgent","appVersion","getFocusedPosition","getPositionRect","isInIME","topBorder","bottomBorder","verticalBorder","bandedRows","bandedColumns","headerRow","firstColumn","borderFormat","takeSnapshot","snapshot","onTakeSnapshot","setSnapshot","snapshotToString","renderItem","autoCompleteIndex","autoComplete","snapshotStr","onMove","snapshots","snapshotPane","snapshotList","onRestoreSnapshot","knownColors","spellCheck","updateSnapshots","refCallback","newSnapshot","snapshotService","startHijackUndoSnapshot","editorInstance","stopHijackUndoSnapshot","step","move","setContent","getSnapshots","getCurrentIndex","getAutoCompleteIndex","SnapshotPlugin","createSnapshots","isUndoSnapshotServiceV2","hijackUndoSnapshotCallback","canMove","canMoveCurrentSnapshot","moveCurrentSnapshot","addSnapshot","isAutoCompleteSnapshot","addSnapshotV2","clearRedo","clearProceedingSnapshotsV2","canUndoAutoComplete","github","titleText","links","externalLink","alt","isCssMonitorStarted","activeWindows","Stylesheet","onInsertRule","cssText","rules","sheet","cssRules","mergeStyleSets","colorSquare","margin","borderStyle","borderWidth","borderColor","colorSquareBorder","colorSquareBorderWhite","colorDef","buttonColor","BackgroundColors","backgroundColorCyan","darkModeColor","backgroundColorGreen","backgroundColorYellow","backgroundColorOrange","backgroundColorRed","backgroundColorMagenta","backgroundColorLightCyan","backgroundColorLightGreen","backgroundColorLightYellow","backgroundColorLightOrange","backgroundColorLightRed","backgroundColorLightMagenta","backgroundColorWhite","backgroundColorLightGray","backgroundColorGray","backgroundColorDarkGray","backgroundColorDarkerGray","backgroundColorBlack","BackgroundColorDropDownItems","colorPickerContainer","padding","overflow","colorMenuItem","TextColors","textColorLightBlue","textColorLightGreen","textColorLightYellow","textColorLightOrange","textColorLightRed","textColorLightPurple","textColorBlue","textColorGreen","textColorYellow","textColorOrange","textColorRed","textColorPurple","textColorDarkBlue","textColorDarkGreen","textColorDarkYellow","textColorDarkOrange","textColorDarkRed","textColorDarkPurple","textColorDarkerBlue","textColorDarkerGreen","textColorDarkerYellow","textColorDarkerOrange","textColorDarkerRed","textColorDarkerPurple","textColorWhite","textColorLightGray","textColorGray","textColorDarkGray","textColorDarkerGray","textColorBlack","TextColorDropDownItems","default","renderComponent","unmountComponentAtNode","isRightToLeft","getComputedStyles","defaultString","reactElement","ImageAltTextMenuItem","altText","setImageAltText","ImageResizeMenuItem","subItems","menuNameImageSizeBestFit","menuNameImageSizeSmall","menuNameImageSizeMedium","menuNameImageSizeOriginal","percentage","resizeByPercentage","resetImage","ImageRotateMenuItem","menuNameImageRotateLeft","menuNameImageRotateRight","shouldShow","isOperationAllowed","canRegenerateImage","rotateImage","ImageFlipMenuItem","menuNameImageRotateFlipHorizontally","menuNameImageRotateFlipVertically","flipImage","ImageCropMenuItem","setEditingImage","ImageRemoveMenuItem","contains","deleteNode","ImageCopyMenuItem","execCommand","ImageCutMenuItem","shouldShowImageEditItems","isContentEditable","imageEditPlugin","ListNumberResetMenuItem","setOrderedListNumbering","ListNumberEditMenuItem","listAndLi","getEditingList","ColorValues","menuNameTableCellShade","TableEditInsertMenuItem","TableEditDeleteMenuItem","TableEditMergeMenuItem","TableEditSplitMenuItem","TableEditAlignMenuItem","TableEditAlignTableMenuItem","TableEditCellShadeMenuItem","applyCellShading","itemRender","renderColorPicker","itemClassName","getColorPickerItemClassName","commandBarSubMenuProperties","getColorPickerContainerClassName","getEditingTable","onDismiss","normalizedITems","dividerKey","normalizeItems","disposer","renderReactComponent","ContextualMenu","dismiss","ContextMenu","ContextMenuPlugin","menuName","shouldAddMenuItems","context","targetNode","getContextMenuItems","convertMenuItems","ariaLabel","subMenuProps","onItemClick","menuItem","onRender","subItem","ContextMenuProviderImpl","emoji","onFocus","description","role","emojiSelected","propName","getDataAndAriaProps","codePoint","currentSelected","getTabId","EmojiList","onFamilyClick","navBar","FocusZone","FocusZoneDirection","horizontal","friendlyName","TooltipHost","hostClassName","navBarTooltip","navBarButton","onclick","Icon","EmojiFabricIconCharacterMap","VerticalDirectionKeys","KeyCodes","up","down","DirectionKeys","home","TooltipCalloutProps","isBeakVisible","beakWidth","gapSpace","setInitialFocus","doNotLayer","directionalHint","DirectionalHint","bottomCenter","AriaAttributes","EmojiPane","forwardRef","searchBox","emojiBody","setIndex","setMode","CommonEmojis","currentEmojiList","setCurrentEmojiList","currentFamily","setCurrentFamily","search","setSearchString","searchInBox","setSearchInBox","useTheme","getEmojiPaneClassName","listId","baseId","navigate","change","newIndex","normalizeSearchText","colonIncluded","getEmojiElementIdByIndex","getEmojiIconId","getSelectedEmoji","showFullPicker","fullSearchText","normalizedSearchValue","newMode","getSearchResult","setSearch","searchValue","isQuickMode","emojiList","searchEmojis","MoreEmoji","useImperativeHandle","onSearchFocus","onSearchKeyPress","enter","onSearchKeyDown","scrollTop","scrollHeight","visibleRowCount","currentRow","visibleTop","currentRowTop","renderCurrentEmojiIcons","emojiIndex","onEmojiBodyRef","pivotClick","itemKey","focusZoneRefCallback","searchDisabled","onSearchChange","selectedEmoji","quickPicker","roosterEmojiPane","Callout","hidden","tooltip","renderQuickPicker","searchBoxString","emojiId","autoCompleteAttributes","TextField","componentRef","setSelectionStart","searchRefCallback","inputClassName","emojiTextInput","onKeyPress","getLocalizedString","hideStatusBar","navBarProps","statusBarProps","hasResult","fullList","fullListBody","fullListContent","renderFullList","partialList","renderPartialList","renderFullPicker","renderPane","paneRef","calcMaxHeight","rowsOfIcons","memoizeFunction","overflowY","borderImage","outline","buttonWidth","transition","borderBottom","borderBottomColor","statusBar","borderTop","statusBarIcon","statusBarDetailsContainer","statusBarDetails","textOverflow","statusBarNoResultDetailsContainer","noResultDescription","overflowMode","TooltipOverflowMode","Parent","icon","EmojiICallout","cursorRect","onSelectFromPane","onHideCallout","isCalloutVisible","toggleIsCalloutVisible","point","gap","toogleCallout","bottomAutoEdge","showEmojiPane","emojiCalloutRef","EMOJI_BEFORE_COLON_REGEX","searchBoxStrings","eventHandledOnKeyDown","canUndoEmoji","isSuggesting","setIsSuggesting","wordBeforeCursor","insertEmoji","EmojiDescriptionStrings","EmojiKeywordStrings","EmojiFamilyStrings","onKeyDownSuggestingDomEvent","backspace","undo","handleEventOnKeyDown","isModifierKey","onKeyUpSuggestingDomEvent","onKeyUpDomEvent","getWordBeforeCursor","tryShowFullPicker","escape","space","getCallout","rangeNode","innerText","replaceWithNode","cursorData","getContentSearcherOfCursor","getWordBefore","stopImmediatePropagation","EmojiPlugin","emjDMore","emjDNoSuggetions","emjD0270a","emjD0270b","emjD0270c","emjD02764","emjD1f440","emjD1f442","emjD1f443","emjD1f444","emjD1f445","emjD1f446","emjD1f447","emjD1f448","emjD1f449","emjD1f44a","emjD1f44b","emjD1f44c","emjD1f44d","emjD1f44e","emjD1f44f","emjD1f450","emjD1f590","emjD1f595","emjD1f596","emjD1f464","emjD1f466","emjD1f467","emjD1f468","emjD1f469","emjD1f46a","emjD1f46b","emjD1f46e","emjD1f46f","emjD1f470","emjD1f471","emjD1f472","emjD1f473","emjD1f474","emjD1f475","emjD1f476","emjD1f477","emjD1f481","emjD1f482","emjD1f48b","emjD1f493","emjD1f494","emjD1f495","emjD1f496","emjD1f497","emjD1f498","emjD1f499","emjD1f49a","emjD1f49b","emjD1f49c","emjD1f49d","emjD1f49e","emjD1f49f","emjD1f601","emjD1f602","emjD1f603","emjD1f604","emjD1f605","emjD1f606","emjD1f607","emjD1f608","emjD1f609","emjD1f60a","emjD1f60b","emjD1f60c","emjD1f60d","emjD1f60e","emjD1f60f","emjD1f610","emjD1f612","emjD1f613","emjD1f614","emjD1f616","emjD1f618","emjD1f61a","emjD1f61c","emjD1f61d","emjD1f61e","emjD1f620","emjD1f621","emjD1f622","emjD1f623","emjD1f624","emjD1f625","emjD1f628","emjD1f629","emjD1f62a","emjD1f62b","emjD1f62d","emjD1f630","emjD1f631","emjD1f632","emjD1f633","emjD1f635","emjD1f636","emjD1f637","emjD1f645","emjD1f646","emjD1f647","emjD1f648","emjD1f649","emjD1f641","emjD1f642","emjD1f64a","emjD1f64b","emjD1f64c","emjD1f64d","emjD1f64e","emjD1f64f","emjD02600","emjD02601","emjD02614","emjD0267b","emjD026c4","emjD026c5","emjD02728","emjD02733","emjD02734","emjD02744","emjD02747","emjD02b50","emjD1f300","emjD1f301","emjD1f302","emjD1f303","emjD1f304","emjD1f305","emjD1f306","emjD1f307","emjD1f308","emjD1f309","emjD1f30a","emjD1f30b","emjD1f30c","emjD1f311","emjD1f313","emjD1f314","emjD1f315","emjD1f319","emjD1f31b","emjD1f31f","emjD1f320","emjD1f330","emjD1f331","emjD1f334","emjD1f335","emjD1f337","emjD1f338","emjD1f339","emjD1f33a","emjD1f33b","emjD1f33c","emjD1f33d","emjD1f33e","emjD1f33f","emjD1f340","emjD1f341","emjD1f342","emjD1f343","emjD1f344","emjD1f40c","emjD1f40d","emjD1f40e","emjD1f411","emjD1f412","emjD1f414","emjD1f417","emjD1f418","emjD1f419","emjD1f41a","emjD1f41b","emjD1f41c","emjD1f41d","emjD1f41e","emjD1f41f","emjD1f420","emjD1f421","emjD1f422","emjD1f423","emjD1f424","emjD1f425","emjD1f426","emjD1f427","emjD1f428","emjD1f429","emjD1f42b","emjD1f42c","emjD1f42d","emjD1f42e","emjD1f42f","emjD1f430","emjD1f431","emjD1f432","emjD1f433","emjD1f434","emjD1f435","emjD1f436","emjD1f437","emjD1f438","emjD1f439","emjD1f43a","emjD1f43b","emjD1f43c","emjD1f43d","emjD1f43e","emjD1f638","emjD1f639","emjD1f63a","emjD1f63b","emjD1f63c","emjD1f63d","emjD1f63e","emjD1f63f","emjD1f640","emjD0260e","emjD026bd","emjD026be","emjD1f004","emjD1f380","emjD1f381","emjD1f382","emjD1f383","emjD1f384","emjD1f385","emjD1f386","emjD1f387","emjD1f388","emjD1f389","emjD1f38a","emjD1f38b","emjD1f38c","emjD1f38d","emjD1f38e","emjD1f38f","emjD1f390","emjD1f391","emjD1f392","emjD1f393","emjD1f3a0","emjD1f3a1","emjD1f3a2","emjD1f3a3","emjD1f3a4","emjD1f3a5","emjD1f3a6","emjD1f3a7","emjD1f3a8","emjD1f3a9","emjD1f3aa","emjD1f3ab","emjD1f3ac","emjD1f3ad","emjD1f3ae","emjD1f3af","emjD1f3b0","emjD1f3b1","emjD1f3b2","emjD1f3b3","emjD1f3b4","emjD1f3b5","emjD1f3b6","emjD1f3b7","emjD1f3b8","emjD1f3b9","emjD1f3ba","emjD1f3bb","emjD1f3bc","emjD1f3bd","emjD1f3be","emjD1f3bf","emjD1f3c0","emjD1f3c1","emjD1f3c2","emjD1f3c3","emjD1f3c4","emjD1f3c6","emjD1f3c8","emjD1f3ca","emjD1f478","emjD1f479","emjD1f47a","emjD1f47b","emjD1f47c","emjD1f47d","emjD1f47e","emjD1f47f","emjD1f480","emjD1f483","emjD1f484","emjD1f485","emjD1f486","emjD1f487","emjD1f488","emjD1f489","emjD1f48a","emjD1f48c","emjD1f48d","emjD1f48e","emjD1f48f","emjD1f490","emjD1f491","emjD1f492","emjD1f4f7","emjD1f4f9","emjD1f4fa","emjD1f4fb","emjD1f4fc","emjD02615","emjD02702","emjD02709","emjD0270f","emjD02712","emjD1f345","emjD1f346","emjD1f347","emjD1f348","emjD1f349","emjD1f34a","emjD1f34c","emjD1f34d","emjD1f34e","emjD1f34f","emjD1f351","emjD1f352","emjD1f353","emjD1f354","emjD1f355","emjD1f356","emjD1f357","emjD1f358","emjD1f359","emjD1f35a","emjD1f35b","emjD1f35c","emjD1f35d","emjD1f35e","emjD1f35f","emjD1f360","emjD1f361","emjD1f362","emjD1f363","emjD1f364","emjD1f365","emjD1f366","emjD1f367","emjD1f368","emjD1f369","emjD1f36a","emjD1f36b","emjD1f36c","emjD1f36d","emjD1f36e","emjD1f36f","emjD1f370","emjD1f371","emjD1f372","emjD1f373","emjD1f374","emjD1f375","emjD1f376","emjD1f377","emjD1f378","emjD1f379","emjD1f37a","emjD1f37b","emjD1f451","emjD1f452","emjD1f453","emjD1f454","emjD1f455","emjD1f456","emjD1f457","emjD1f458","emjD1f459","emjD1f45a","emjD1f45b","emjD1f45c","emjD1f45d","emjD1f45e","emjD1f45f","emjD1f460","emjD1f461","emjD1f462","emjD1f463","emjD1f4ba","emjD1f4bb","emjD1f4bc","emjD1f4bd","emjD1f4be","emjD1f4bf","emjD1f4c0","emjD1f4c1","emjD1f4c2","emjD1f4c3","emjD1f4c4","emjD1f4c5","emjD1f4c6","emjD1f4c7","emjD1f4c8","emjD1f4c9","emjD1f4ca","emjD1f4cb","emjD1f4cc","emjD1f4cd","emjD1f4ce","emjD1f4cf","emjD1f4d0","emjD1f4d1","emjD1f4d2","emjD1f4d3","emjD1f4d4","emjD1f4d5","emjD1f4d6","emjD1f4d7","emjD1f4d8","emjD1f4d9","emjD1f4da","emjD1f4db","emjD1f4dc","emjD1f4dd","emjD1f4de","emjD1f4df","emjD1f4e0","emjD1f4e1","emjD1f4e2","emjD1f4e3","emjD1f4e4","emjD1f4e5","emjD1f4e6","emjD1f4e7","emjD1f4e8","emjD1f4e9","emjD1f4ea","emjD1f4eb","emjD1f4ee","emjD1f4f0","emjD1f4f1","emjD1f4f2","emjD1f4f3","emjD1f4f4","emjD1f4f6","emjD1f525","emjD1f526","emjD1f527","emjD1f528","emjD1f529","emjD1f52a","emjD1f52b","emjD1f52e","emjD1f52f","emjD1f531","emjD1f550","emjD1f551","emjD1f552","emjD1f553","emjD1f554","emjD1f555","emjD1f556","emjD1f557","emjD1f558","emjD1f559","emjD1f55a","emjD1f55b","emjD02668","emjD0267f","emjD02693","emjD026a0","emjD026a1","emjD026d4","emjD026ea","emjD026f2","emjD026f3","emjD026f5","emjD026fa","emjD026fd","emjD02708","emjD1f17f","emjD1f3e0","emjD1f3e1","emjD1f3e2","emjD1f3e3","emjD1f3e5","emjD1f3e6","emjD1f3e7","emjD1f3e8","emjD1f3e9","emjD1f3ea","emjD1f3eb","emjD1f3ec","emjD1f3ed","emjD1f3ee","emjD1f3ef","emjD1f3f0","emjD1f530","emjD1f680","emjD1f683","emjD1f684","emjD1f685","emjD1f687","emjD1f689","emjD1f68c","emjD1f68f","emjD1f691","emjD1f692","emjD1f693","emjD1f695","emjD1f697","emjD1f699","emjD1f69a","emjD1f6a2","emjD1f6a4","emjD1f6a5","emjD1f6a7","emjD1f6a8","emjD1f6a9","emjD1f6aa","emjD1f6ab","emjD1f6ac","emjD1f6ad","emjD1f6b2","emjD1f6b6","emjD1f6b9","emjD1f6ba","emjD1f6bb","emjD1f6bc","emjD1f6bd","emjD1f6be","emjD1f6c0","emjD02049","emjD02139","emjD021a9","emjD021aa","emjD0231a","emjD0231b","emjD023e9","emjD023ea","emjD023eb","emjD023ec","emjD023f0","emjD023f3","emjD024c2","emjD025b6","emjD025c0","emjD025fb","emjD025fc","emjD026ce","emjD02611","emjD0261d","emjD02648","emjD02649","emjD0264a","emjD0264b","emjD0264c","emjD0264d","emjD0264e","emjD0264f","emjD02650","emjD02651","emjD02652","emjD02653","emjD026aa","emjD026ab","emjD02705","emjD02714","emjD02716","emjD0274c","emjD0274e","emjD02753","emjD02754","emjD02755","emjD02757","emjD02795","emjD02796","emjD02797","emjD027a1","emjD027b0","emjD027bf","emjD02934","emjD02935","emjD02b05","emjD02b06","emjD02b07","emjD02b1b","emjD02b1c","emjD02b55","emjD03030","emjD0303d","emjD03297","emjD03299","emjD1f0cf","emjD1f170","emjD1f171","emjD1f17e","emjD1f18e","emjD1f191","emjD1f192","emjD1f193","emjD1f194","emjD1f195","emjD1f196","emjD1f197","emjD1f198","emjD1f199","emjD1f19a","emjD1f201","emjD1f202","emjD1f21a","emjD1f22f","emjD1f232","emjD1f233","emjD1f234","emjD1f235","emjD1f236","emjD1f237","emjD1f238","emjD1f239","emjD1f23a","emjD1f250","emjD1f251","emjD1f30f","emjD1f4a0","emjD1f4a1","emjD1f4a2","emjD1f4a3","emjD1f4a4","emjD1f4a5","emjD1f4a6","emjD1f4a7","emjD1f4a8","emjD1f4a9","emjD1f4aa","emjD1f4ab","emjD1f4ac","emjD1f4ae","emjD1f4af","emjD1f4b0","emjD1f4b1","emjD1f4b2","emjD1f4b3","emjD1f4b4","emjD1f4b5","emjD1f4b8","emjD1f4b9","emjD1f503","emjD1f50a","emjD1f50b","emjD1f50c","emjD1f50d","emjD1f50e","emjD1f50f","emjD1f510","emjD1f511","emjD1f512","emjD1f513","emjD1f514","emjD1f516","emjD1f517","emjD1f518","emjD1f519","emjD1f51a","emjD1f51b","emjD1f51c","emjD1f51d","emjD1f51e","emjD1f51f","emjD1f520","emjD1f521","emjD1f522","emjD1f523","emjD1f524","emjD1f532","emjD1f533","emjD1f534","emjD1f535","emjD1f536","emjD1f537","emjD1f538","emjD1f539","emjD1f53a","emjD1f53b","emjD1f53c","emjD1f53d","emjD1f5fb","emjD1f5fc","emjD1f5fd","emjD1f5fe","emjD1f5ff","emjK1f607","emjK1f47c","emjK1f34e","emjK1f34f","emjK1f477","emjK1f6a7","emjK1f491","emjK1f46b","emjK1f622","emjK1f62d","emjK1f525","emjK1f692","emjK1f386","emjK1f387","emjK1f44a","emjK0270a","emjK1f498","emjK1f496","emjK1f497","emjK1f493","emjK1f368","emjK1f366","emjK1f48b","emjK1f444","emjK1f618","emjK1f61a","emjK1f48f","emjK1f435","emjK1f64a","emjK1f649","emjK1f648","emjK1f3b6","emjK1f3b5","emjK1f44c","emjK1f646","emjK1f621","emjK1f64e","emjK1f60c","emjK1f630","emjK1f605","emjK1f380","emjK1f381","emjK1f613","emjK1f631","emjK1f629","emjK1f628","emjK1f45e","emjK1f45f","emjK1f60a","emjK1f642","emjK1f603","emjK1f604","emjK1f6bd","emjK1f6ba","emjK1f6b9","emjK1f684","emjK1f683","emjK1f446","emjK0261d","emjK1f64b","emjK1f44b","emjK1f601","emjK1f602","emjK1f606","emjK1f609","emjK1f60f","emjK1f645","emjK1f44e","emjK1f60d","emjK1f495","emjK1f44d","emjK1f610","emjK1f620","emjK1f612","emjK1f47b","emjK1f480","emjK1f47e","emjK1f365","emjK1f61e","emjK1f64d","emjK1f494","emjK1f625","emjK1f62b","emjK1f4a4","emjK1f62a","emjK1f632","emjK1f633","emjK1f3c4","emjK1f44f","emjK1f64c","emjK1f48d","emjK1f483","emjK1f389","emjK1f388","emjK1f38a","emjK1f383","emjK1f385","emjK1f384","emjK1f3eb","emjK1f392","emjK1f41f","emjK1f3a3","emjK1f3a5","emjK1f4f9","emjK1f3a6","emjK1f3ad","emjK1f3bc","emjK1f3b9","emjK1f3a7","emjK1f3b7","emjK1f3ba","emjK1f3b8","emjK1f3bb","emjK1f3ac","emjK1f48e","emjK1f3be","emjK1f3c8","emjK1f3bf","emjK1f3c2","emjK026c4","emjK02744","emjK1f3c1","emjK1f3c3","emjK1f375","emjK02615","emjK1f377","emjK1f378","emjK1f379","emjK1f68c","emjK1f687","emjK1f43b","emjK1f43c","emjK1f340","emjK1f320","emjK1f303","emjK1f307","emjK1f31f","emjK02747","emjK1f4b0","emjK1f4b5","emjK1f4b4","emjK1f4b3","emjK1f60b","emjK1f60e","emjK1f614","emjK1f616","emjK1f61c","emjK1f61d","emjK1f623","emjK1f624","emjK1f635","emjK1f636","emjK1f637","emjK1f440","emjK1f442","emjK1f443","emjK1f445","emjK1f447","emjK1f448","emjK1f449","emjK1f64f","emjK0270b","emjK0270c","emjK1f466","emjK1f467","emjK1f468","emjK1f469","emjK1f46a","emjK1f46e","emjK1f46f","emjK1f470","emjK1f471","emjK1f474","emjK1f475","emjK1f476","emjK1f382","emjK1f390","emjK1f393","emjK1f0cf","emjK1f3a0","emjK1f3a1","emjK1f3a2","emjK1f3a4","emjK1f3a8","emjK1f3a9","emjK1f3aa","emjK1f3ab","emjK1f3ae","emjK1f3af","emjK1f3b0","emjK1f3b1","emjK1f3b2","emjK1f3b3","emjK1f4f7","emjK1f4fa","emjK1f4fb","emjK1f4fc","emjK1f478","emjK1f47d","emjK1f47f","emjK1f484","emjK1f485","emjK1f486","emjK1f487","emjK1f488","emjK1f489","emjK1f48a","emjK1f48c","emjK1f490","emjK1f492","emjK1f3c0","emjK1f3c6","emjK1f3ca","emjK026bd","emjK026be","emjK1f451","emjK1f453","emjK1f454","emjK1f455","emjK1f456","emjK1f457","emjK1f459","emjK1f45b","emjK1f45c","emjK1f45d","emjK1f461","emjK1f462","emjK1f463","emjK1f4dd","emjK1f4de","emjK1f4df","emjK1f4e0","emjK1f4e1","emjK1f4e3","emjK1f4e6","emjK1f4e7","emjK1f4ee","emjK1f4f0","emjK1f4f1","emjK1f4f6","emjK1f526","emjK1f527","emjK1f528","emjK1f529","emjK1f52a","emjK1f52e","emjK1f531","emjK1f354","emjK1f355","emjK1f356","emjK1f357","emjK1f35a","emjK1f35c","emjK1f35d","emjK1f35e","emjK1f35f","emjK1f360","emjK1f363","emjK1f364","emjK1f369","emjK1f36a","emjK1f36b","emjK1f36c","emjK1f36d","emjK1f36e","emjK1f36f","emjK1f370","emjK1f371","emjK1f372","emjK1f374","emjK1f376","emjK1f37a","emjK1f37b","emjK1f345","emjK1f346","emjK1f347","emjK1f348","emjK1f349","emjK1f34a","emjK1f34c","emjK1f34d","emjK1f351","emjK1f352","emjK1f353","emjK1f4ba","emjK1f4bb","emjK1f4bc","emjK1f4be","emjK1f4bf","emjK1f4c0","emjK1f4c1","emjK1f4c5","emjK1f4cb","emjK1f4cc","emjK1f4cd","emjK1f4ce","emjK1f4cf","emjK1f4d2","emjK1f4d3","emjK1f4da","emjK1f4db","emjK02702","emjK02709","emjK0270f","emjK1f3e0","emjK1f3e1","emjK1f3e2","emjK1f3e6","emjK1f3e7","emjK1f3e8","emjK1f3ea","emjK1f3ec","emjK1f3ed","emjK1f3f0","emjK02668","emjK02693","emjK026ea","emjK026f2","emjK026f3","emjK026f5","emjK026fd","emjK1f6aa","emjK1f6ac","emjK1f6ad","emjK1f6b2","emjK1f6b6","emjK1f6c0","emjK0267f","emjK026a0","emjK026a1","emjK1f680","emjK1f68f","emjK1f693","emjK1f695","emjK1f697","emjK1f6a2","emjK02708","emjK1f42d","emjK1f42e","emjK1f42f","emjK1f430","emjK1f431","emjK1f432","emjK1f433","emjK1f434","emjK1f436","emjK1f437","emjK1f438","emjK1f439","emjK1f43a","emjK1f341","emjK1f344","emjK1f308","emjK02601","emjK02614","emjK02728","emjK1f4a9","emjK1f4aa","emjK02648","emjK02649","emjK0264a","emjK0264b","emjK0264c","emjK0264d","emjK0264e","emjK0264f","emjK02650","emjK02651","emjK02652","emjK02653","emjK1f411","emjK1f300","emjK1f301","emjK1f302","emjK1f304","emjK1f305","emjK1f306","emjK1f309","emjK1f30a","emjK1f30c","emjK1f311","emjK1f313","emjK1f314","emjK1f315","emjK1f319","emjK1f31b","emjK1f330","emjK1f331","emjK1f334","emjK1f335","emjK1f337","emjK1f338","emjK1f339","emjK1f33a","emjK1f33b","emjK1f33c","emjK1f33d","emjK1f33e","emjK1f33f","emjK1f342","emjK1f343","emjK1f358","emjK1f359","emjK1f35b","emjK1f361","emjK1f362","emjK1f373","emjK1f3bd","emjK1f417","emjK1f418","emjK1f419","emjK1f41a","emjK1f41b","emjK1f41c","emjK1f41d","emjK1f41e","emjK1f420","emjK1f421","emjK1f422","emjK1f423","emjK1f425","emjK1f40c","emjK1f40d","emjK1f40e","emjK1f412","emjK1f414","emjK1f429","emjK1f42b","emjK1f426","emjK1f427","emjK1f42c","emjK1f43d","emjK1f43e","emjK1f452","emjK1f458","emjK1f45a","emjK1f481","emjK1f482","emjK1f499","emjK1f49a","emjK1f49b","emjK1f49c","emjK1f49d","emjK1f49e","emjK1f49f","emjK1f4a5","emjK1f4a3","emjK1f4a1","emjK1f4a8","emjK1f503","emjK1f50c","emjK1f50b","emjK1f50d","emjK1f510","emjK1f50f","emjK1f511","emjK1f512","emjK1f513","emjK1f516","emjK1f514","emjK1f550","emjK1f551","emjK1f552","emjK1f553","emjK1f554","emjK1f555","emjK1f556","emjK1f557","emjK1f558","emjK1f559","emjK1f55a","emjK1f55b","emjK1f5fd","emjK1f638","emjK1f639","emjK1f63a","emjK1f63b","emjK1f63c","emjK1f63d","emjK1f63e","emjK1f63f","emjK1f4e8","emjK1f4e9","emjK1f4eb","emjK1f4ea","emjK1f6bb","emjK1f6a5","emjK1f6ab","emjK1f689","emjK1f69a","emjK026fa","emjK1f6a8","emjK1f17f","emjK02733","emjK02734","emjK02b50","emjK1f4c8","emjK1f4c9","emjK1f4ca","emjK02764","People","Nature","Activities","Food","Travel","Symbols","Objects","Common1","createEmoji","common2","common3","common4","common5","forEachEmojiFamily","families","getEmojiCodePoint","surrogatePairs","unicode","fromCharCode","shortcut","keywords","createEmojiWithNoKeyword","emojis","shortcutMatch","forEachEmoji","matchShortcut","fullMatch","partialMatch","partialSearch","searchableKeywords","dialogTitleKey","unlocalizedTitle","onOk","onCancel","dialogContentProps","useMemo","DialogType","normal","currentValues","setCurrentValues","onSubmit","onItemChanged","newValues","Dialog","onEnterKey","onChanged","DialogFooter","PrimaryButton","DefaultButton","inputBox","borderRadius","onValueChange","Promise","resolve","getPasteOptionClassNames","pastePane","paddingLeft","optionPane","buttonsContainer","justifyContent","flex","PasteOptionButton","buttonName","Buttons","IconButton","iconProps","PasteOptionComponent","selectedKey","setSelectedKey","getSelectedKey","buttonPane","evt","FocusEvent","relatedTarget","onClickShowSubMenu","ButtonKeys","bottomRightEdge","bottomLeftEdge","directionalHintForRTL","preventDismissOnScroll","onPaste","pasteOptionRef","showPasteOptionPane","handlePasteOptionPaneEvent","keyboardEvent","cancelEvent","buttonCount","focusedPosition","PasteOptionPlugin","pasteOptionPasteAsIs","pasteOptionPasteText","pasteOptionMergeFormat","pasteOptionPasteAsImage","ribbonClassName","mergeStyles","rtlIcon","onHover","flipIcon","defaultRender","commandBarItems","selectedItem","onRenderIcon","iconOnly","canCheck","disabled","commandBarProperties","shouldFocusOnMount","focusZoneProps","bidirectional","onMenuDismissed","onRenderContextualMenuItem","defaultRenderer","moreCommandsBtn","moreCommands","CommandBar","overflowButtonProps","alignCenter","alignLeft","alignRight","Key","bulletedList","isCodeBlock","toggleCodeBlock","decreaseFontSize","decreaseIndent","FONT_SIZES","headers","buttonNameHeader1","buttonNameHeader2","buttonNameHeader3","buttonNameHeader4","buttonNameHeader5","buttonNameHeader6","buttonNameNoHeader","toggleHeader","increaseFontSize","increaseIndent","fileInput","isMultilineSelection","existingLink","getSelectionRange","createLink","tableButton","hovered","tablePane","tablePaneInner","InsertTablePane","setCol","setRow","updateSize","onMouseEnter","onClickButton","createKey","ariaLabels","formatText","defaultActiveElement","onActiveElementChanged","insertTablePane","ltr","numberedList","quote","redo","subscript","superscript","KnownRibbonButtons","Bold","Italic","Underline","Font","FontSize","IncreaseFontSize","DecreaseFontSize","BulletedList","NumberedList","DecreaseIndent","IncreaseIndent","Quote","AlignLeft","AlignCenter","AlignRight","InsertLink","RemoveLink","InsertImage","Superscript","Subscript","Strikethrough","Code","Ltr","Rtl","Undo","Redo","ClearFormat","keyOrButtons","keyOrButton","RibbonPluginImpl","defaultEditorCreator","Editor","editorDiv","focusOnInit","createUIUtilities","isReactEditorPlugin","divProps","getNativeProps","divProperties","updateMode","OnBlur","addDomEventHandler","OnInitialize","OnContentChangedEvent","OnUserInput","Force","UpdateContentPluginImpl","editorContext","selectionRoot","blockFormat","segmentFormat","zoomScaleFormat","isInSelection","listFormat","threadItemCounts","blockDecorator","elementProcessors","defaultProcessorMap","processorOverride","defaultStyles","defaultStyleMap","defaultStyleOverride","formatParsers","getFormatParsers","formatParserOverride","additionalFormatParsers","defaultElementProcessors","defaultFormatParsers","allowCacheElement","disableCacheElement","selectionRange","regularRange","ranges","commonAncestorContainer","regularSelection","startContainer","startOffset","endContainer","endOffset","isSelectionCollapsed","collapsed","tableSelection","imageSelection","selectionRootNode","linkProcessor","knownElementProcessor","blockquote","brProcessor","codeProcessor","em","fontProcessor","imageProcessor","h1","headingProcessor","h2","h3","h4","h5","h6","hrProcessor","listItemProcessor","ol","listProcessor","pProcessor","pre","formatContainerProcessor","strike","strong","sub","sup","tableProcessor","u","ul","generalProcessor","textProcessor","elementProcessor","entityProcessor","childProcessor","delimiter","delimiterProcessor","createContentModelDocument","createDomToModelContext","parseFormat","rootDirectionFormatHandler","zoomScaleFormatHandler","includeRoot","normalizeContentModel","SegmentDecoratorTags","blockProcessor","isSegmentDecorator","ContextStyles","createParagraph","addBlock","createBr","addSegment","processChildNode","isNodeOfType","handleRegularSelection","nodeStartOffset","nodeEndOffset","addSelectionMarker","getRegularSelectionOffsets","stackFormat","processor","contentEditable","tryGetProcessorForEntity","getDelimiterFromElement","tryGetProcessorForDelimiter","isBlockEntity","wrapperToUse","entityModel","FontSizes","intSize","segmentOnBlock","getDefaultStyle","formatContainer","createFormatContainer","shouldFallbackToParagraph","setParagraphNotImplicit","generalBlockProcessor","createGeneralBlock","isSelectedBefore","generalSegmentProcessor","createGeneralSegment","addDecorators","createParagraphDecorator","createDivider","imageFormat","createImage","FormatContainerTriggerStyles","ByPassFormatContainerTags","defaultStyle","bgcolor","getPropertyValue","marginRight","shouldUseFormatContainer","listParent","createListItem","listItemElement","currentBlocks","lastItem","updateListMetadata","processMetadata","listLevel","originalListParent","nodeStack","startNode","createNodeStack","stackChild","getChildIndex","tablePreProcessor","hasMetadata","hasSelectionInTable","shouldUseTableProcessor","calcSizes","positions","lastPos","tableElement","createTable","selectedTable","hasTableSelection","tableBorder","columnPositions","rowPositions","tr","tableRow","parentTag","sourceCol","targetCol","hasSelectionBeforeCell","colEnd","rowEnd","rowSpan","needCalcWidth","needCalcHeight","segmentOnTableCell","cellFormat","tableCell","hasTd","createTableCell","spannedRow","hasSelectionAfterCell","heights","textNode","txt","txtStartOffset","txtEndOffset","addTextSegment","WhiteSpaceValuesNeedToHandle","lastBlock","lastSegment","areSameFormats","hasSpacesOnly","textModel","createText","createSelectionMarker","f1","f2","keys1","keys2","every","currentContainer","BLOCK_DISPLAY_STYLES","parsers","SkippedStylesForBlock","SkippedStylesForTable","stackFormatInternal","processType","linkFormat","codeFormat","decoratorFormat","stackLinkInternal","stackCodeInternal","BorderSizeRegex","combinedBorder","updateMetadata","expectedType","NumberDefinition","ImageMetadataFormatDefinition","createStringDefinition","ListStyleDefinitionMetadata","EditingInfoDatasetName","definition","metadataString","validate","TableCellMetadataFormatDefinition","createBooleanDefinition","NullStringDefinition","BooleanDefinition","TableFormatDefinition","SPACE_TEXT_REGEX","SPACES_REGEX","charCodeAt","isForward","contentDiv","createContentModelEditorCore","core","getCore","api","cacheContentModel","reuseModel","lifecycle","shadowEditFragment","cachedModel","getContentModelDefaultFormat","pasteAsText","applyCurrentFormat","pasteAsImage","snapshotBeforePaste","Position","getStart","pasteModel","createPasteModel","formatWithContentModel","mergeModel","getOnDeleteEntityCallback","changeSource","EditorBase","cloneModel","defaultDomToModelOptions","createEditorContext","internalCreateContentModel","darkColorHandler","addDelimiterForEntity","createBeforePasteEvent","pasteType","createDefaultHtmlSanitizerOptions","cssStyleCallbacks","htmlBefore","htmlAfter","htmlAttributes","domToModelOption","applyCurrentStyle","getPasteType","createFragmentFromClipboardData","defaultModelToDomOptions","switchShadowEdit","editorCore","originalApi","isClipboardEvent","dataTransfer","extractClipboardItems","toArray","allowedCustomPasteType","isDisposed","deleteSelection","removeContentForAndroid","copy","onCutCopy","cut","iterateSelections","tableContext","getTempDiv","getDarkColorHandler","newRange","tempDiv","selectionExToRange","triggerPluginEvent","clonedRoot","addRangeToSelection","moveChildNodes","isCharacterValue","pendingFormat","getPendingFormat","newFormat","setPendingFormat","promoteToContentModelEditorCore","cmCore","textColors","backgroundColors","getDefaultSegmentFormat","promoteDefaultFormat","promoteContentModelInfo","promoteCoreApi","modifiedOptions","corePluginOverride","typeInContainer","copyPaste","createEditorCore","triggeredEntityEvents","editWithContentModel","defaultPrevented","isComposing","checkAndApplyPendingFormat","clearPendingFormat","canApplyPendingFormat","unknownTagReplacement","getPasteSource","handleWordDesktop","handleWacComponentsPaste","convertPastedContentFromExcel","getTrustedHTMLHandler","additionalTagReplacements","convertPastedContentFromPowerPoint","LAST_TD_END_REGEX","LAST_TR_END_REGEX","LAST_TR_REGEX","LAST_TABLE_REGEX","DEFAULT_BORDER_STYLE","excelHandler","trMatch","tableMatch","lastChild","replaceChildren","borderLeft","borderRight","LIST_CONTAINER_ELEMENT_CLASS_NAME","EMPTY_TEXT_RUN","TABLE_TEMP_ELEMENTS","CLASSES_TO_KEEP","wacSubSuperParser","wacElementProcessor","matchesSelector","removeProperty","classList","previousElementSibling","wacLiElementProcessor","lastblock","currentLevel","wacListItemParser","displayForDummyItem","wacListLevelParser","setProcessor","wacListProcessor","additionalAllowedCssClasses","isWrappedInContainer","PERCENTAGE_REGEX","removeNonValidLineHeight","parsedLineHeight","listLevelParser","wordDesktopElementProcessor","chainSanitizerCallback","elementCallbacks","getStyles","processWordList","processWordCommand","MSO_COMMENT_ANCHOR_HREF_REGEX","MSO_LIST","MSO_LIST_IGNORE","getFakeBulletText","isIgnoreNode","listAttribute","wordListStyle","listProps","fakeBullet","isFakeBullet","getFakeBulletTagName","newLevel","entry","DeprecatedColorList","SUPPORTED_PROTOCOLS","INVALID_LINKS_REGEX","URL","protocol","altKey","metaKey","directionFormatHandler","displayFormatHandler","htmlAlignFormatHandler","calcAlign","ResultMap","lineHeightFormatHandler","textAlignFormatHandler","flexDirection","alignSelf","whiteSpaceFormatHandler","implicitFormat","backgroundColorFormatHandler","getColor","borderBoxFormatHandler","BorderKeys","borderFormatHandler","boxShadowFormatHandler","boxShadow","datasetFormatHandler","idFormatHandler","PercentageRegex","tryParseSize","sizeFormatHandler","verticalAlignFormatHandler","wordBreakFormatHandler","defaultFormatHandlerMap","boldFormatHandler","borderBox","fontFamilyFormatHandler","fontSizeFormatHandler","italicFormatHandler","letterSpacingFormatHandler","linkFormatHandler","listItemMetadata","listItemMetadataFormatHandler","listItemThread","listItemThreadFormatHandler","listLevelMetadata","listLevelMetadataFormatHandler","listLevelThread","listLevelThreadFormatHandler","listStylePositionFormatHandler","listTypeFormatHandler","marginFormatHandler","paddingFormatHandler","strikeFormatHandler","superOrSubScript","superOrSubScriptFormatHandler","tableSpacing","tableSpacingFormatHandler","textColorFormatHandler","textColorOnTableCell","textColorOnTableCellFormatHandler","underlineFormatHandler","sharedSegmentFormats","sharedBlockFormats","sharedContainerFormats","defaultFormatKeysPerCategory","tableCellBorder","defaultFormatAppliers","override","additionalParsers","formatKey","additionalAppliers","OrderedMapPlaceholderRegex","DefaultOrderedListStyles","DefaultUnorderedListStyles","CharCodeOfA","RomanValues","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","getOrderedListStyleValue","listNumber","subStr","convertDecimalsToAlpha","convertDecimalsToRoman","decimal","isLowerCase","romanValue","timesRomanCharAppear","repeat","toLocaleLowerCase","depth","listStyleType","OrderedMap","UnorderedMap","isLiUnderOl","OLTypeToStyleMap","A","getKeyFromValue","listStyle","MarginKeys","parseValueWithUnit","PaddingKeys","originalWidth","visualWidth","offsetWidth","blockFontWeight","isSuperOrSubScript","rel","textDecoration","implicitColor","BorderCollapsed","borderSpacing","isBackground","findLightColorFromDarkColor","tryGetFontColor","parseColorValue","effectiveColor","registerColor","blockElement","address","article","aside","dd","dl","dt","fieldset","figcaption","figure","footer","form","main","nav","section","th","defaultImplicitFormatMap","initial","justify","align","MarginValueRegex","getFontSize","styleInPt","ptToPx","pt","resultUnit","px","numStr","unit","isNext","newPath","nextBlock","para","siblingSegment","TableAlignMap","alignment","paragraphOrListItemOrTable","getOperationalBlocks","newAligment","alignTable","indentation","paragraphOrListItem","isIndent","isBlockGroupOfType","originalValue","ceil","isQuote","paragraphOfQuote","blockAndParent","unwrapBlock","createQuote","canMergeQuote","wrapBlockStep1","wrapBlockStep2","addLink","addCode","newSegment","clearContainerFormat","containerPathIndex","getClosestAncestorBlockGroupIndex","containerIndex","blockIndex","newContainer","clearListFormat","clearBlockFormat","blocksToClear","segmentsToClear","tablesToClear","colIndex","isWholeTableSelected","clearTableCellFormat","includeListFormatHolder","isOnlySelectionMarkerSelected","adjustWordSelection","isWholeBlockSelected","defaultSegmentFormat","clearSegmentsFormat","applyTableFormat","createTablesFormat","cloneBlock","cloneBlockBase","cloneBlockGroupBase","cloneFormatContainer","cloneGeneralBlock","cloneSelectionMarker","cloneEntity","newParagraph","cloneSegment","cloneModelWithFormat","cloneParagraph","cloneTableRow","cloneModelWithDataset","cloneTable","cloneSegmentBase","general","textSegment","cloneTableCell","newModel","blockGroupTypes","stopTypes","isBlockEmpty","isBlockGroupEmpty","isSegmentEmpty","isBlockGroup","isSegment","WHITESPACE_PRE_VALUES","mergeParagraph","markerPosition","newPara","mergeToCurrentParagraph","splitParagraph","segmentIndex","mergeTable","newTable","newCell","leftCell","aboveCell","normalizeTable","insertBlock","mergeList","newList","listItemIndex","paraIndex","newListItem","applyDefaultFormat","onDeleteEntity","insertPosition","insertPoint","mergeCurrentFormat","normalizeParagraph","last","secondLast","noMarkerSegments","isWhiteSpacePreserved","createNormalizeSegmentContext","normalizeSegment","normalizeTextSegments","textSegments","lastInlineSegment","normalizeLastTextSegment","lastTextSegment","removeEmptySegments","SPACE","LEADING_SPACE_REGEX","TRAILING_SPACE_REGEX","resetNormalizeSegmentContext","ignoreLeadingSpaces","ignoreTrailingSpaces","first","mergeValue","isFirst","firstTableContext","firstBlock","isFirstImage","isFirstSegment","retrieveStructureFormat","validHeaderLevel","retrieveParagraphFormat","extractedBorder","mergedFormat","superOrSubscript","retrieveSegmentFormat","canMergeTableCell","tableFormat","retrieveTableFormat","groupToUnwrap","step1Result","blockToWrap","creator","canMerge","prevBlock","createAndAdd","rowCount","spanLeftOrColSpan","spanAboveOrRowSpan","additionalSteps","deleteExpandedSelection","isValidDeleteSelectionContext","deleteResult","lastParagraph","lastTableContext","mergeParagraphAfterDelete","deleteAllSegmentBefore","deleteSegment","getDeleteCollapsedSelection","segmentsWithoutBr","fixupBr","blockToDelete","segmentToDelete","getLeafSiblingBlock","createInsertPoint","deleteBlock","forwardDeleteCollapsedSelection","backwardDeleteCollapsedSelection","getDeleteWordSelection","startIndex","deleteNext","markerIndex","forward","preserveWhiteSpace","punctuation","isPunctuation","isSpace","newText","normalizeText","iterateSegments","curr","next","done","forwardDeleteWordSelection","backwardDeleteWordSelection","replacement","DeleteSelectionIteratingOptions","contentUnderSelectedTableCell","contentUnderSelectedGeneralElement","markerFormat","insertMarkerIndex","isBackward","normalizePreviousSegment","deleteSingleChar","deleteLength","deleteState","getPendingFormatHolder","holder","equalTo","PendingFormatHolderKey","findListItems","pushNullIfNecessary","areListTypesCompatible","listItems","compareToIndex","currentLevels","compareToLevels","hasStartNumberOverride","levelLength","currentItem","isOrderedList","filterListItems","paragraphOrListItems","alreadyInExpectedType","itemIndex","firstMatcher","siblingMatcher","paragraphs","getSelectedParagraphs","changed","findIndex","setSelection","findDelimiter","moveRightward","word","offset","splitTextSegment","found","markerBlock","markerSelectionIndex","currentSegment","firstCol","deepFirst","findSequence","selections","collectSelections","removeUnmeaningfulSelections","groupIndex","checkFirstParagraph","allSegments","includingFormatHolder","internalIterateSelections","treatAllAsSelect","hasSelectedSegment","hasUnselectedSegment","handleGeneralContent","handleGeneralElement","setSelectionToBlockGroup","handleSelection","setIsSelected","startCo","findCell","endCo","setSelectionToTable","segmentsToDelete","setSelectionToSegment","setSelectionToBlock","selectable","TextAlignValueMap","VerticalAlignValueMap","sel","getSelectedCells","firstRow","lastRow","lastCol","DEFAULT_FORMAT","effectiveMetadata","bgColorOverrides","forceClear","updateBgColorOverrides","clearCache","transparentBorderMatrix","BorderFormatters","lastColumn","formatColor","alwaysUseTransparent","getBorderStyleFromColor","formatBorders","setTableCellBackgroundColor","formatBackgroundColors","setBorderColor","setFirstColumnFormat","setHeaderRowFormat","noSpanAbove","noSpanLeft","noDifferentBelowSpan","spanCount","getBelowSpanCount","noDifferentRightSpan","getRightSpanCount","columns","cellInNextCol","collapseTableSelection","cellInNextRow","insertLeft","insertAbove","sourceRow","canMergeCells","mergingColIndex","newSelectedCol","mergingRowIndex","newSelectedRow","getTableCellWidth","tryMoveBlocks","targetCell","sourceCell","isColorOverride","colorValues","parseColor","calculateLightness","newWidth","belowRow","belowCell","newHeight","newRow","calcPosition","normalize","modelToDomContext","createModelToDomContext","modelHandlers","blockGroupChildren","startPosition","endPosition","extractSelectionRange","formatAppliers","getFormatAppliers","formatApplierOverride","additionalFormatAppliers","defaultContentModelHandlers","modelHandlerOverride","defaultImplicitFormatOverride","defaultModelHandlers","onNodeCreated","handleBlock","handleBlockGroupChildren","handleBr","handleEntity","handleGeneralModel","handleDivider","handleImage","handleList","handleListItem","handleParagraph","handleFormatContainer","handleSegment","segmentDecorator","handleSegmentDecorator","handleTable","handleText","refNode","handlers","childBlock","reuseCachedElement","isInlineEntity","commitEntity","after","addDelimiters","imageModel","widthNum","heightNum","handleMetadata","layer","stackLevel","itemLevel","unwrap","needParagraphWrapper","formatOnWrapper","handleSegments","optimize","codeNode","tableNode","OptimizeTags","hasSameAttributes","element1","element2","attr1","attr2","removeUnnecessarySpan","mergeNode","newNode","appliers","applier","tagNameOrFormat","setModelAlignment","formatParagraphWithContentModel","paddingRight","headerStyle","setModelIndentation","preservePendingFormat","spacing","DefaultQuoteFormat","BuildInQuoteFormat","quoteFormat","fullQuoteFormat","toggleModelBlockQuote","apiName","shouldDeleteWord","steps","shouldDeleteAllSegmentsBefore","handleKeyboardEventResult","skipUndoSnapshot","getChangeData","__","previousSegment","clearModelFormat","getUndoState","getZoomScale","retrieveModelFormatState","useReducedModel","adjustSegmentSelection","file","previousSrc","originalSrc","getImageSrc","insertImageWithSrc","imageFileOrSrc","getSelectedSegments","firstSegment","URI_REGEX","MAILTO_REGEX","FTP_REGEX","applyLinkPrefix","prefix","checkXss","originalText","modelElement","isChanged","getFirstSelectedListItem","findListItemsInSameThread","setListType","formatSegmentWithContentModel","capitalization","language","toLocaleUpperCase","wordArray","charAt","regex","sizeInPt","newSize","changeBase","fontSizes","getNewFontSize","changeFontSizeInternal","boldStyle","isTurningOn","DefaultCode","tableModel","getFirstSelectedTable","alignTableCell","deleteTableColumn","deleteTableRow","deleteTable","insertTableRow","insertTableColumn","mergeTableRow","mergeTableCells","mergeTableColumn","splitTableCellHorizontally","splitTableCellVertically","createTableStructure","eventChangeData","setStyleCallback","toggleStyleCallback","segmentHasStyleCallback","isCollapsedSelection","formatsAndSegments","isTurningOff","reducedModelChildProcessor","formatApiName","CompatibleAlignment","CompatibleBulletListType","CompatibleCapitalization","CompatibleChangeSource","CompatibleClearFormatMode","CompatibleColorTransformDirection","CompatibleContentPosition","CompatibleContentType","CompatibleContentTypePrefix","CompatibleDarkModeDatasetNames","CompatibleDefinitionType","CompatibleDelimiterClasses","CompatibleDirection","CompatibleDocumentCommand","CompatibleDocumentPosition","CompatibleEntityClasses","CompatibleEntityOperation","CompatibleExperimentalFeatures","CompatibleFontSizeChange","CompatibleGetContentMode","CompatibleImageEditOperation","CompatibleIndentation","CompatibleKeys","CompatibleKnownCreateElementDataIndex","CompatibleKnownPasteSourceType","CompatibleListType","CompatibleNodeType","CompatibleNumberingListType","CompatiblePasteType","CompatiblePluginEventType","CompatiblePositionType","CompatibleQueryScope","CompatibleRegionType","CompatibleSelectionRangeTypes","CompatibleTableOperation","FluentUIReact","roosterjs","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","globalThis","mount"],"sourceRoot":""}